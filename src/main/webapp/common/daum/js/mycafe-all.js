if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIRecentVisitCafeService==null){var WIRecentVisitCafeService={}}WIRecentVisitCafeService._path="/_c21_/api/my";WIRecentVisitCafeService.getRecentVisitCafeList=function(A){dwr.engine._execute(WIRecentVisitCafeService._path,"WIRecentVisitCafeService","getRecentVisitCafeList",A)};WIRecentVisitCafeService.deleteVisitCafes=function(A){dwr.engine._execute(WIRecentVisitCafeService._path,"WIRecentVisitCafeService","deleteVisitCafes",A)};WIRecentVisitCafeService.deleteVisitCafe=function(B,A){dwr.engine._execute(WIRecentVisitCafeService._path,"WIRecentVisitCafeService","deleteVisitCafe",B,A)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIMyCafeList==null){var WIMyCafeList={}}WIMyCafeList._path="/_c21_/api/my";WIMyCafeList.changeCafeJoinGroup=function(C,A,B){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","changeCafeJoinGroup",C,A,B)};WIMyCafeList.getMyCafeList=function(G,E,D,C,B,A,F){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","getMyCafeList",G,E,D,C,B,A,F)};WIMyCafeList.getDetailCafeInfo=function(B,A){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","getDetailCafeInfo",B,A)};WIMyCafeList.getFavoriteCafeCount=function(A){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","getFavoriteCafeCount",A)};WIMyCafeList.addFavoriteCafe=function(B,A){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","addFavoriteCafe",B,A)};WIMyCafeList.removeFavoriteCafe=function(B,A){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","removeFavoriteCafe",B,A)};WIMyCafeList.exitCafe=function(B,A){dwr.engine._execute(WIMyCafeList._path,"WIMyCafeList","exitCafe",B,A)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIJoinGroupManagement==null){var WIJoinGroupManagement={}}WIJoinGroupManagement._path="/_c21_/api/my";WIJoinGroupManagement.modifyJoinGroup=function(E,C,B,A,D){dwr.engine._execute(WIJoinGroupManagement._path,"WIJoinGroupManagement","modifyJoinGroup",E,C,B,A,D)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIMyAlimiList==null){var WIMyAlimiList={}}WIMyAlimiList._path="/_c21_/api/my";WIMyAlimiList.getAlimiList=function(E,C,B,A,D){dwr.engine._execute(WIMyAlimiList._path,"WIMyAlimiList","getAlimiList",E,C,B,A,D)};WIMyAlimiList.deleteAlimi=function(E,C,B,A,D){dwr.engine._execute(WIMyAlimiList._path,"WIMyAlimiList","deleteAlimi",E,C,B,A,D)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIMyArticleList==null){var WIMyArticleList={}}WIMyArticleList._path="/_c21_/api/my";WIMyArticleList.getMyArticleList=function(C,A,B){dwr.engine._execute(WIMyArticleList._path,"WIMyArticleList","getMyArticleList",C,A,B)};WIMyArticleList.deleteMyArticle=function(C,A,B){dwr.engine._execute(WIMyArticleList._path,"WIMyArticleList","deleteMyArticle",C,A,B)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIFavoriteCafeManagement==null){var WIFavoriteCafeManagement={}}WIFavoriteCafeManagement._path="/_c21_/api/my";WIFavoriteCafeManagement.getMyCafeList=function(B,A){dwr.engine._execute(WIFavoriteCafeManagement._path,"WIFavoriteCafeManagement","getMyCafeList",B,A)};WIFavoriteCafeManagement.setFavoriteCafeList=function(B,A){dwr.engine._execute(WIFavoriteCafeManagement._path,"WIFavoriteCafeManagement","setFavoriteCafeList",B,A)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIGame==null){var WIGame={}}WIGame._path="/_c21_/api/game";WIGame.getGameLiveContent=function(D,B,A,C){dwr.engine._execute(WIGame._path,"WIGame","getGameLiveContent",D,B,A,C)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(A){dwr.engine._errorHandler=A};dwr.engine.setWarningHandler=function(A){dwr.engine._warningHandler=A};dwr.engine.setTextHtmlHandler=function(A){dwr.engine._textHtmlHandler=A};dwr.engine.setTimeout=function(A){dwr.engine._timeout=A};dwr.engine.setPreHook=function(A){dwr.engine._preHook=A};dwr.engine.setPostHook=function(A){dwr.engine._postHook=A};dwr.engine.setHeaders=function(A){dwr.engine._headers=A};dwr.engine.setParameters=function(A){dwr.engine._parameters=A};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(A){if(A!=dwr.engine.XMLHttpRequest&&A!=dwr.engine.IFrame&&A!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return }dwr.engine._rpcType=A};dwr.engine.setHttpMethod=function(A){if(A!="GET"&&A!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return }dwr.engine._httpMethod=A};dwr.engine.setOrdered=function(A){dwr.engine._ordered=A};dwr.engine.setAsync=function(A){dwr.engine._async=A};dwr.engine.setActiveReverseAjax=function(A){if(A){if(dwr.engine._activeReverseAjax){return }dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(B,A){dwr.engine._debug("Error: "+A.name+", "+A.message,true);if(B==null||B==""){alert("A server error has occured.")}else{if(B.indexOf("0x80040111")!=-1){dwr.engine._debug(B)}else{alert(B)}}};dwr.engine.defaultWarningHandler=function(B,A){dwr.engine._debug(B)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return }dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(B){var A=dwr.engine._batch;if(A==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return }dwr.engine._batch=null;if(A.map.callCount==0){return }if(B){dwr.engine._mergeBatch(A,B)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=A}else{dwr.engine._sendData(A)}};dwr.engine.setPollMethod=function(A){dwr.engine.setPollType(A)};dwr.engine.setMethod=function(A){dwr.engine.setRpcType(A)};dwr.engine.setVerb=function(A){dwr.engine.setHttpMethod(A)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._origScriptSessionId="085CB08326103276695677C0038F467E";dwr.engine._sessionCookieName="JSESSIONID";dwr.engine._allowGetForSafariButMakeForgeryEasier="false";dwr.engine._scriptTagProtection="throw 'allowScriptTagRemoting is false.';";dwr.engine._defaultPath="/_c21_/api/my";dwr.engine._pollWithXhr="false";dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(A){return A};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(K,B,I,H){var E=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();E=true}var D=dwr.engine._batch;var G=[];for(var C=0;C<arguments.length-3;C++){G[C]=arguments[C+3]}if(D.path==null){D.path=K}else{if(D.path!=K){dwr.engine._handleError(D,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return }}var A;var J=G[G.length-1];if(typeof J=="function"||J==null){A={callback:G.pop()}}else{A=G.pop()}dwr.engine._mergeBatch(D,A);D.handlers[D.map.callCount]={exceptionHandler:A.exceptionHandler,callback:A.callback};var F="c"+D.map.callCount+"-";D.map[F+"scriptName"]=B;D.map[F+"methodName"]=I;D.map[F+"id"]=D.map.callCount;for(C=0;C<G.length;C++){dwr.engine._serializeAll(D,[],G[C],F+"param"+C)}D.map.callCount++;if(E){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return }var A=dwr.engine._createBatch();A.map.id=0;A.map.callCount=1;A.isPoll=true;if(dwr.engine._pollWithXhr=="true"){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseYes}else{A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}}A.httpMethod="POST";A.async=true;A.timeout=0;A.path=dwr.engine._defaultPath;A.preHooks=[];A.postHooks=[];A.errorHandler=dwr.engine._pollErrorHandler;A.warningHandler=dwr.engine._pollErrorHandler;A.handlers[0]={callback:function(B){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,B)}};dwr.engine._sendData(A);if(A.rpcType==dwr.engine.XMLHttpRequest&&A.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(B,A){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+A.name+" : "+A.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var A={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){A.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){A.postHooks.push(dwr.engine._postHook)}var C,B;if(dwr.engine._headers){for(C in dwr.engine._headers){B=dwr.engine._headers[C];if(typeof B!="function"){A.headers[C]=B}}}if(dwr.engine._parameters){for(C in dwr.engine._parameters){B=dwr.engine._parameters[C];if(typeof B!="function"){A.parameters[C]=B}}}return A};dwr.engine._mergeBatch=function(A,D){var E,C;for(var B=0;B<dwr.engine._propnames.length;B++){E=dwr.engine._propnames[B];if(D[E]!=null){A[E]=D[E]}}if(D.preHook!=null){A.preHooks.unshift(D.preHook)}if(D.postHook!=null){A.postHooks.push(D.postHook)}if(D.headers){for(E in D.headers){C=D.headers[E];if(typeof C!="function"){A.headers[E]=C}}}if(D.parameters){for(E in D.parameters){C=D.parameters[E];if(typeof C!="function"){A.map["p-"+E]=""+C}}}};dwr.engine._getJSessionId=function(){var C=document.cookie.split(";");for(var B=0;B<C.length;B++){var A=C[B];while(A.charAt(0)==" "){A=A.substring(1,A.length)}if(A.indexOf(dwr.engine._sessionCookieName+"=")==0){return A.substring(dwr.engine._sessionCookieName.length+1,A.length)}}return""};dwr.engine._checkCometPoll=function(){for(var B=0;B<dwr.engine._outstandingIFrames.length;B++){var E="";var C=dwr.engine._outstandingIFrames[B];try{E=dwr.engine._getTextFromCometIFrame(C)}catch(A){dwr.engine._handleWarning(C.batch,A)}if(E!=""){dwr.engine._processCometResponse(E,C.batch)}}if(dwr.engine._pollReq){var D=dwr.engine._pollReq;var E=D.responseText;if(E!=null){dwr.engine._processCometResponse(E,D.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(B){var A=B.contentWindow.document.body;if(A==null){return""}var C=A.innerHTML;if(C.indexOf("<PRE>")==0||C.indexOf("<pre>")==0){C=C.substring(5,C.length-7)}return C};dwr.engine._processCometResponse=function(D,E){if(E.charsProcessed==D.length){return }if(D.length==0){E.charsProcessed=0;return }var B=D.indexOf("//#DWR-START#",E.charsProcessed);if(B==-1){E.charsProcessed=D.length;return }var A=D.lastIndexOf("//#DWR-END#");if(A==-1){return }if(D.charCodeAt(A+11)==13&&D.charCodeAt(A+12)==10){E.charsProcessed=A+13}else{E.charsProcessed=A+11}var C=D.substring(B+13,A);dwr.engine._receivedBatch=E;dwr.engine._eval(C);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(E){E.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[E.map.batchId]=E;dwr.engine._batchesLength++;E.completed=false;for(var D=0;D<E.preHooks.length;D++){E.preHooks[D]()}E.preHooks=null;if(E.timeout&&E.timeout!=0){E.timeoutId=setTimeout(function(){dwr.engine._abortRequest(E)},E.timeout)}if(E.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){E.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){E.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var A,C;if(E.req){if(E.async){E.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(E)}}}if(E.isPoll){dwr.engine._pollReq=E.req;if(!(document.all&&!window.opera)){E.req.batch=E}}var B=navigator.userAgent.indexOf("Safari/");if(B>=0){var G=navigator.userAgent.substring(B+7);if(parseInt(G,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){E.httpMethod="GET"}else{dwr.engine._handleWarning(E,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);try{E.req.open(E.httpMethod,C.url,E.async);try{for(A in E.headers){var I=E.headers[A];if(typeof I=="string"){E.req.setRequestHeader(A,I)}}if(!E.headers["Content-Type"]){E.req.setRequestHeader("Content-Type","text/plain")}}catch(H){dwr.engine._handleWarning(E,H)}E.req.send(C.body);if(!E.async){dwr.engine._stateChange(E)}}catch(H){dwr.engine._handleError(E,H)}}else{if(E.rpcType!=dwr.engine.ScriptTag){var F=E.isPoll?"dwr-if-poll-"+E.map.batchId:"dwr-if-"+E.map.batchId;E.div=document.createElement("div");document.body.appendChild(E.div);E.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+F+"' name='"+F+"' onload='dwr.engine._iframeLoadingComplete ("+E.map.batchId+");'></iframe>";E.document=document;E.iframe=E.document.getElementById(F);E.iframe.batch=E;E.mode=E.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(E.isPoll){dwr.engine._outstandingIFrames.push(E.iframe)}C=dwr.engine._constructRequest(E);if(E.httpMethod=="GET"){E.iframe.setAttribute("src",C.url)}else{E.form=E.document.createElement("form");E.form.setAttribute("id","dwr-form");E.form.setAttribute("action",C.url);E.form.setAttribute("style","display:none;");E.form.setAttribute("target",F);E.form.target=F;E.form.setAttribute("method",E.httpMethod);for(A in E.map){var I=E.map[A];if(typeof I!="function"){var J=E.document.createElement("input");J.setAttribute("type","hidden");J.setAttribute("name",A);J.setAttribute("value",I);E.form.appendChild(J)}}E.document.body.appendChild(E.form);E.form.submit()}}else{E.httpMethod="GET";E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);E.script=document.createElement("script");E.script.id="dwr-st-"+E.map["c0-id"];E.script.src=C.url;document.body.appendChild(E.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(B){var C={url:B.path+B.mode,body:null};if(B.isPoll==true){C.url+="ReverseAjax.dwr"}else{if(B.map.callCount==1){C.url+=B.map["c0-scriptName"]+"."+B.map["c0-methodName"]+".dwr"}else{C.url+="Multiple."+B.map.callCount+".dwr"}}var E=location.href.match(/jsessionid=([^?]+)/);if(E!=null){C.url+=";jsessionid="+E[1]}var D;if(B.httpMethod=="GET"){B.map.callCount=""+B.map.callCount;C.url+="?";for(D in B.map){if(typeof B.map[D]!="function"){C.url+=encodeURIComponent(D)+"="+encodeURIComponent(B.map[D])+"&"}}C.url=C.url.substring(0,C.url.length-1)}else{C.body="";if(document.all&&!window.opera){var A=[];for(D in B.map){if(typeof B.map[D]!="function"){A.push(D+"="+B.map[D]+dwr.engine._postSeperator)}}C.body=A.join("")}else{for(D in B.map){if(typeof B.map[D]!="function"){C.body+=D+"="+B.map[D]+dwr.engine._postSeperator}}}C.body=dwr.engine._contentRewriteHandler(C.body)}C.url=dwr.engine._urlRewriteHandler(C.url);return C};dwr.engine._stateChange=function(C){var B;if(C.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return }var F=C.req;try{if(F.readyState!=4){return }}catch(D){dwr.engine._handleWarning(C,D);dwr.engine._clearUp(C);return }if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return }try{var E=F.responseText;E=dwr.engine._replyRewriteHandler(E);var A=F.status;if(E==null||E==""){dwr.engine._handleWarning(C,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(A!=200){dwr.engine._handleError(C,{name:"dwr.engine.http."+A,message:F.statusText})}else{var G=F.getResponseHeader("Content-Type");if(!G.match(/^text\/plain/)&&!G.match(/^text\/javascript/)){if(G.match(/^text\/html/)&&typeof C.textHtmlHandler=="function"){C.textHtmlHandler({status:A,responseText:E,contentType:G})}else{dwr.engine._handleWarning(C,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+G+"'"})}}else{if(C.isPoll&&C.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(E,C)}else{if(E.search("//#DWR")==-1){dwr.engine._handleWarning(C,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{B=E}}}}}}catch(D){dwr.engine._handleWarning(C,D)}dwr.engine._callPostHooks(C);dwr.engine._receivedBatch=C;if(B!=null){B=B.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(B);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(C);if(!C.completed){dwr.engine._clearUp(C)}};dwr.engine._validateBatch=function(A){if(!A.completed){for(var B=0;B<A.map.callCount;B++){if(A.handlers[B]!=null){dwr.engine._handleWarning(A,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(A){var B=dwr.engine._batches[A];if(B){dwr.engine._validateBatch(B)}};dwr.engine._remoteHandleCallback=function(A,F,E){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+A,true);return }try{var B=C.handlers[F];C.handlers[F]=null;if(!B){dwr.engine._debug("Warning: Missing handlers. callId="+F,true)}else{if(typeof B.callback=="function"){B.callback(E)}}}catch(D){dwr.engine._handleError(C,D)}};dwr.engine._remoteHandleException=function(A,E,D){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return }var B=C.handlers[E];C.handlers[E]=null;if(B==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return }if(D.message==undefined){D.message=""}if(typeof B.exceptionHandler=="function"){B.exceptionHandler(D.message,D)}else{if(typeof C.errorHandler=="function"){C.errorHandler(D.message,D)}}};dwr.engine._remoteHandleBatchException=function(C,A){var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remotePollCometDisabled=function(C,A){dwr.engine.setActiveReverseAjax(false);var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remoteBeginIFrameResponse=function(B,A){if(B!=null){dwr.engine._receivedBatch=B.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(A){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(A){if(A&&!A.completed){dwr.engine._clearUp(A);if(A.req){A.req.abort()}dwr.engine._handleError(A,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(A){if(A.postHooks){for(var B=0;B<A.postHooks.length;B++){A.postHooks[B]()}A.postHooks=null}};dwr.engine._clearUp=function(B){if(!B){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return }if(B.completed){dwr.engine._debug("Warning: Double complete",true);return }if(B.div){B.div.parentNode.removeChild(B.div)}if(B.iframe){for(var C=0;C<dwr.engine._outstandingIFrames.length;C++){if(dwr.engine._outstandingIFrames[C]==B.iframe){dwr.engine._outstandingIFrames.splice(C,1)}}B.iframe.parentNode.removeChild(B.iframe)}if(B.form){B.form.parentNode.removeChild(B.form)}if(B.req){if(B.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete B.req}if(B.timeoutId){clearTimeout(B.timeoutId);delete B.timeoutId}if(B.map&&(B.map.batchId||B.map.batchId==0)){delete dwr.engine._batches[B.map.batchId];dwr.engine._batchesLength--}B.completed=true;if(dwr.engine._batchQueue.length!=0){var A=dwr.engine._batchQueue.shift();dwr.engine._sendData(A)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var A in dwr.engine._batches){var B=dwr.engine._batches[A];if(B&&B.map){if(B.req){B.req.abort()}dwr.engine._clearUp(B)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.errorHandler=="function"){A.errorHandler(B.message,B)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._handleWarning=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.warningHandler=="function"){A.warningHandler(B.message,B)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._serializeAll=function(B,D,C,A){if(C==null){B.map[A]="null:null";return }switch(typeof C){case"boolean":B.map[A]="boolean:"+C;break;case"number":B.map[A]="number:"+C;break;case"string":B.map[A]="string:"+encodeURIComponent(C);break;case"object":if(C instanceof String){B.map[A]="String:"+encodeURIComponent(C)}else{if(C instanceof Boolean){B.map[A]="Boolean:"+C}else{if(C instanceof Number){B.map[A]="Number:"+C}else{if(C instanceof Date){B.map[A]="Date:"+C.getTime()}else{if(C&&C.join){B.map[A]=dwr.engine._serializeArray(B,D,C,A)}else{B.map[A]=dwr.engine._serializeObject(B,D,C,A)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof C+", attempting default converter."});B.map[A]="default:"+C;break}};dwr.engine._lookup=function(E,C,A){var D;for(var B=0;B<E.length;B++){if(E[B].data==C){D=E[B];break}}if(D){return"reference:"+D.name}E.push({data:C,name:A});return null};dwr.engine._serializeObject=function(C,H,G,B){var F=dwr.engine._lookup(H,G,B);if(F){return F}if(G.nodeName&&G.nodeType){return dwr.engine._serializeXml(C,H,G,B)}var E="Object_"+dwr.engine._getObjectClassName(G)+":{";var D;for(D in G){if(typeof G[D]!="function"){C.paramCount++;var A="c"+dwr.engine._batch.map.callCount+"-e"+C.paramCount;dwr.engine._serializeAll(C,H,G[D],A);E+=encodeURIComponent(D)+":reference:"+A+", "}}if(E.substring(E.length-2)==", "){E=E.substring(0,E.length-2)}E+="}";return E};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(C){if(C&&C.constructor&&C.constructor.toString){var D=C.constructor.toString();var A=D.match(/function\s+(\w+)/);if(A&&A.length==2){return A[1]}}if(C&&C.constructor){for(var B in dwr.engine._errorClasses){if(C.constructor==dwr.engine._errorClasses[B]){return B}}}if(C){var D=Object.prototype.toString.call(C);var A=D.match(/\[object\s+(\w+)/);if(A&&A.length==2){return A[1]}}return"Object"};dwr.engine._serializeXml=function(C,F,E,B){var D=dwr.engine._lookup(F,E,B);if(D){return D}var A;if(window.XMLSerializer){A=new XMLSerializer().serializeToString(E)}else{if(E.toXml){A=E.toXml}else{A=E.innerHTML}}return"XML:"+encodeURIComponent(A)};dwr.engine._serializeArray=function(H,C,F,A){var D=dwr.engine._lookup(C,F,A);if(D){return D}if(document.all&&!window.opera){var B=["Array:["];for(var G=0;G<F.length;G++){if(G!=0){B.push(",")}H.paramCount++;var I="c"+dwr.engine._batch.map.callCount+"-e"+H.paramCount;dwr.engine._serializeAll(H,C,F[G],I);B.push("reference:");B.push(I)}B.push("]");E=B.join("")}else{var E="Array:[";for(var G=0;G<F.length;G++){if(G!=0){E+=","}H.paramCount++;var I="c"+dwr.engine._batch.map.callCount+"-e"+H.paramCount;dwr.engine._serializeAll(H,C,F[G],I);E+="reference:";E+=I}E+="]"}return E};dwr.engine._unserializeDocument=function(A){var C;if(window.DOMParser){var E=new DOMParser();C=E.parseFromString(A,"text/xml");if(!C.documentElement||C.documentElement.tagName=="parsererror"){var B=C.documentElement.firstChild.data;B+="\n"+C.documentElement.firstChild.nextSibling.firstChild.data;throw B}return C}else{if(window.ActiveXObject){C=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);C.loadXML(A);return C}else{var D=document.createElement("div");D.innerHTML=A;return D}}};dwr.engine._newActiveXObject=function(A){var D;for(var C=0;C<A.length;C++){try{D=new ActiveXObject(A[C]);break}catch(B){}}return D};dwr.engine._debug=function(F,D){var A=false;try{if(window.console){if(D&&window.console.trace){window.console.trace()}window.console.log(F);A=true}else{if(window.opera&&window.opera.postError){window.opera.postError(F);A=true}}}catch(C){}if(!A){var B=document.getElementById("dwr-debug");if(B){var E=F+"<br/>"+B.innerHTML;if(E.length>2048){E=E.substring(0,2048)}B.innerHTML=E}}};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIMyGameAct==null){var WIMyGameAct={}}WIMyGameAct._path="/_c21_/api/my";WIMyGameAct.getGameRequestBoxList=function(B,A){dwr.engine._execute(WIMyGameAct._path,"WIMyGameAct","getGameRequestBoxList",B,A)};WIMyGameAct.getGameRequestBoxCount=function(A){dwr.engine._execute(WIMyGameAct._path,"WIMyGameAct","getGameRequestBoxCount",A)};if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}if(WIRecentList==null){var WIRecentList={}}WIRecentList._path="/_c21_/api/my";WIRecentList.getRecentBbsList=function(B,A){dwr.engine._execute(WIRecentList._path,"WIRecentList","getRecentBbsList",B,A)};if(dwr==null){var dwr={}}if(dwr.util==null){dwr.util={}}if(DWRUtil==null){var DWRUtil=dwr.util}dwr.util._escapeHtml=true;dwr.util.setEscapeHtml=function(A){dwr.util._escapeHtml=A};dwr.util._shouldEscapeHtml=function(A){if(A&&A.escapeHtml!=null){return A.escapeHtml}return dwr.util._escapeHtml};dwr.util.escapeHtml=function(A){return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};dwr.util.unescapeHtml=function(A){return A.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};dwr.util.replaceXmlCharacters=function(A){A=A.replace("&","+");A=A.replace("<","\u2039");A=A.replace(">","\u203A");A=A.replace("'","\u2018");A=A.replace('"',"\u201C");return A};dwr.util.containsXssRiskyCharacters=function(A){return(A.indexOf("&")!=-1||A.indexOf("<")!=-1||A.indexOf(">")!=-1||A.indexOf("'")!=-1||A.indexOf('"')!=-1)};dwr.util.onReturn=function(A,B){if(!A){A=window.event}if(A&&A.keyCode&&A.keyCode==13){B()}};dwr.util.selectRange=function(C,D,A){C=dwr.util._getElementById(C,"selectRange()");if(C==null){return }if(C.setSelectionRange){C.setSelectionRange(D,A)}else{if(C.createTextRange){var B=C.createTextRange();B.moveStart("character",D);B.moveEnd("character",A-C.value.length);B.select()}}C.focus()};if(document.getElementById){dwr.util.byId=function(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.getElementById(A)}if(arguments.length==1){return A}C.push(A)}return C}}else{if(document.all){dwr.util.byId=function(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.all[A]}if(arguments.length==1){return A}C.push(A)}return C}}}var $;if(!$){$=dwr.util.byId}dwr.util.toDescriptiveString=function(F,A,I){if(A===undefined){A=1}var C={};if(dwr.util._isObject(I)){C=I}var G={escapeHtml:false,baseIndent:"",childIndent:"\u00A0\u00A0",lineTerminator:"\n",oneLineMaxItems:5,shortStringMaxLength:13,propertyNameMaxLength:30};for(var B in G){if(!(B in C)){C[B]=G[B]}}var H={document:true,ownerDocument:true,all:true,parentElement:true,parentNode:true,offsetParent:true,children:true,firstChild:true,lastChild:true,previousSibling:true,nextSibling:true,innerHTML:true,outerHTML:true,innerText:true,outerText:true,textContent:true,attributes:true,style:true,currentStyle:true,runtimeStyle:true,parentTextEdit:true};function E(P,J,L,W){var M="";try{if(typeof P=="string"){var S=P;if(J==0&&S.length>W.shortStringMaxLength){S=S.substring(0,W.shortStringMaxLength-3)+"..."}if(W.escapeHtml){var X=S.split("\n");for(var Q=0;Q<X.length;Q++){X[Q]=dwr.util.escapeHtml(X[Q])}S=X.join("\n")}if(J==0){S=S.replace(/\n|\r|\t/g,function(Y){switch(Y){case"\n":return"\\n";case"\r":return"";case"\t":return"\\t"}})}else{S=S.replace(/\n|\r|\t/g,function(Y){switch(Y){case"\n":return W.lineTerminator+D(L+1,W);case"\r":return"";case"\t":return"\\t"}})}M='"'+S+'"'}else{if(typeof P=="function"){M="function"}else{if(dwr.util._isArray(P)){if(J==0){if(P.length>0){M="[...]"}else{M="[]"}}else{var V=[];V.push("[");var R=0;for(var Q=0;Q<P.length;Q++){if(!(Q in P)){continue}var T=P[Q];if(R>0){V.push(", ")}if(J==1){if(R==W.oneLineMaxItems){V.push("...");break}}else{V.push(W.lineTerminator+D(L+1,W))}if(Q!=R){V.push(Q);V.push(":")}V.push(E(T,J-1,L+1,W));R++}if(J>1){V.push(W.lineTerminator+D(L,W))}V.push("]");M=V.join("")}}else{if(dwr.util._isObject(P)&&!dwr.util._isDate(P)){if(J==0){M=dwr.util._detailedTypeOf(P)}else{var V=[];if(dwr.util._detailedTypeOf(P)!="Object"){V.push(dwr.util._detailedTypeOf(P));if(typeof P.valueOf()!="object"){V.push(":");V.push(E(P.valueOf(),1,L,W))}V.push(" ")}V.push("{");var U=dwr.util._isHTMLElement(P);var R=0;for(var K in P){var O=P[K];if(U){if(!O){continue}if(typeof O=="function"){continue}if(H[K]){continue}if(K.toUpperCase()==K){continue}}if(R>0){V.push(", ")}if(J==1){if(R==W.oneLineMaxItems){V.push("...");break}}else{V.push(W.lineTerminator+D(L+1,W))}V.push(K.length>W.propertyNameMaxLength?K.substring(0,W.propertyNameMaxLength-3)+"...":K);V.push(":");V.push(E(O,J-1,L+1,W));R++}if(J>1&&R>0){V.push(W.lineTerminator+D(L,W))}V.push("}");M=V.join("")}}else{M=""+P}}}}return M}catch(N){return(N.message?N.message:""+N)}}function D(L,J){var M=[];M.push(J.baseIndent);for(var K=0;K<L;K++){M.push(J.childIndent)}return M.join("")}return E(F,A,0,C)};dwr.util.useLoadingMessage=function(A){var B;if(A){B=A}else{B="Loading"}dwr.engine.setPreHook(function(){var D=dwr.util.byId("disabledZone");if(!D){D=document.createElement("div");D.setAttribute("id","disabledZone");D.style.position="absolute";D.style.zIndex="1000";D.style.left="0px";D.style.top="0px";D.style.width="100%";D.style.height="100%";document.body.appendChild(D);var C=document.createElement("div");C.setAttribute("id","messageZone");C.style.position="absolute";C.style.top="0px";C.style.right="0px";C.style.background="red";C.style.color="white";C.style.fontFamily="Arial,Helvetica,sans-serif";C.style.padding="4px";D.appendChild(C);var E=document.createTextNode(B);C.appendChild(E);dwr.util._disabledZoneUseCount=1}else{dwr.util.byId("messageZone").innerHTML=B;D.style.visibility="visible";dwr.util._disabledZoneUseCount++}});dwr.engine.setPostHook(function(){dwr.util._disabledZoneUseCount--;if(dwr.util._disabledZoneUseCount==0){dwr.util.byId("disabledZone").style.visibility="hidden"}})};dwr.util.setHighlightHandler=function(A){dwr.util._highlightHandler=A};dwr.util.yellowFadeHighlightHandler=function(A){dwr.util._yellowFadeProcess(A,0)};dwr.util._yellowFadeSteps=["d0","b0","a0","90","98","a0","a8","b0","b8","c0","c8","d0","d8","e0","e8","f0","f8"];dwr.util._yellowFadeProcess=function(A,B){A=dwr.util.byId(A);if(B<dwr.util._yellowFadeSteps.length){A.style.backgroundColor="#ffff"+dwr.util._yellowFadeSteps[B];setTimeout("dwr.util._yellowFadeProcess('"+A.id+"',"+(B+1)+")",200)}else{A.style.backgroundColor="transparent"}};dwr.util.borderFadeHighlightHandler=function(A){A.style.borderWidth="2px";A.style.borderStyle="solid";dwr.util._borderFadeProcess(A,0)};dwr.util._borderFadeSteps=["d0","b0","a0","90","98","a0","a8","b0","b8","c0","c8","d0","d8","e0","e8","f0","f8"];dwr.util._borderFadeProcess=function(A,B){A=dwr.util.byId(A);if(B<dwr.util._borderFadeSteps.length){A.style.borderColor="#ff"+dwr.util._borderFadeSteps[B]+dwr.util._borderFadeSteps[B];setTimeout("dwr.util._borderFadeProcess('"+A.id+"',"+(B+1)+")",200)}else{A.style.backgroundColor="transparent"}};dwr.util.focusHighlightHandler=function(B){try{B.focus()}catch(A){}};dwr.util._highlightHandler=null;dwr.util.highlight=function(B,A){if(A&&A.highlightHandler){A.highlightHandler(dwr.util.byId(B))}else{if(dwr.util._highlightHandler!=null){dwr.util._highlightHandler(dwr.util.byId(B))}}};dwr.util.setValue=function(F,G,C){if(G==null){G=""}if(C==null){C={}}var H=F;if(typeof F=="string"){F=dwr.util.byId(F);if(F&&F.id!=H){F=null}}var A=null;if(F==null){A=document.getElementsByName(H);if(A.length>=1){F=A.item(0)}}if(F==null){dwr.util._debug("setValue() can't find an element with id/name: "+H+".");return }dwr.util.highlight(F,C);if(dwr.util._isHTMLElement(F,"select")){if(F.type=="select-multiple"&&dwr.util._isArray(G)){dwr.util._selectListItems(F,G)}else{dwr.util._selectListItem(F,G)}return }if(dwr.util._isHTMLElement(F,"input")){if(F.type=="radio"||F.type=="checkbox"){if(A&&A.length>=1){for(var D=0;D<A.length;D++){var E=A.item(D);if(E.type!=F.type){continue}if(dwr.util._isArray(G)){E.checked=false;for(var B=0;B<G.length;B++){if(G[B]==E.value){E.checked=true}}}else{E.checked=(E.value==G)}}}else{F.checked=(G==true)}}else{F.value=G}return }if(dwr.util._isHTMLElement(F,"textarea")){F.value=G;return }if(G.nodeType){if(G.nodeType==9){G=G.documentElement}G=dwr.util._importNode(F.ownerDocument,G,true);F.appendChild(G);return }if(dwr.util._shouldEscapeHtml(C)&&typeof (G)=="string"){if(F.textContent){F.textContent=G}else{if(F.innerText){F.innerText=G}else{F.innerHTML=dwr.util.escapeHtml(G)}}}else{F.innerHTML=G}};dwr.util._selectListItems=function(D,E){var C=false;var B;var A;for(B=0;B<D.options.length;B++){D.options[B].selected=false;for(A=0;A<E.length;A++){if(D.options[B].value==E[A]){D.options[B].selected=true}}}if(C){return }for(B=0;B<D.options.length;B++){for(A=0;A<E.length;A++){if(D.options[B].text==E[A]){D.options[B].selected=true}}}};dwr.util._selectListItem=function(C,D){var B=false;var A;for(A=0;A<C.options.length;A++){if(C.options[A].value==D){C.options[A].selected=true;B=true}else{C.options[A].selected=false}}if(B){return }for(A=0;A<C.options.length;A++){C.options[A].selected=(C.options[A].text==D)}};dwr.util.getValue=function(I,J){if(J==null){J={}}var G=I;if(typeof I=="string"){I=dwr.util.byId(I);if(I&&I.id!=G){I=null}}var A=null;if(I==null){A=document.getElementsByName(G);if(A.length>=1){I=A.item(0)}}if(I==null){dwr.util._debug("getValue() can't find an element with id/name: "+G+".");return""}if(dwr.util._isHTMLElement(I,"select")){if(I.type=="select-multiple"){var D=new Array();for(var F=0;F<I.options.length;F++){var H=I.options[F];if(H.selected){var E=H.getAttributeNode("value");if(E&&E.specified){D.push(H.value)}else{D.push(H.text)}}}return D}else{var B=I.selectedIndex;if(B!=-1){var H=I.options[B];var E=H.getAttributeNode("value");if(E&&E.specified){return H.value}return H.text}else{return""}}}if(dwr.util._isHTMLElement(I,"input")){if(I.type=="radio"){if(A&&A.length>=1){for(var F=0;F<A.length;F++){var C=A.item(F);if(C.type==I.type){if(C.checked){return C.value}}}}return I.checked}if(I.type=="checkbox"){if(A&&A.length>=1){var D=[];for(var F=0;F<A.length;F++){var C=A.item(F);if(C.type==I.type){if(C.checked){D.push(C.value)}}}return D}return I.checked}return I.value}if(dwr.util._isHTMLElement(I,"textarea")){return I.value}if(dwr.util._shouldEscapeHtml(J)){if(I.textContent){return I.textContent}else{if(I.innerText){return I.innerText}}}return I.innerHTML};dwr.util.getText=function(B){B=dwr.util._getElementById(B,"getText()");if(B==null){return null}if(!dwr.util._isHTMLElement(B,"select")){dwr.util._debug("getText() can only be used with select elements. Attempt to use: "+dwr.util._detailedTypeOf(B)+" from  id: "+orig+".");return""}var A=B.selectedIndex;if(A!=-1){return B.options[A].text}else{return""}};dwr.util.setValues=function(C,A){var B="";if(A&&A.prefix){B=A.prefix}if(A&&A.idPrefix){B=A.idPrefix}dwr.util._setValuesRecursive(C,B)};dwr.util._setValuesRecursive=function(C,E){if(dwr.util._isArray(C)&&C.length>0&&dwr.util._isObject(C[0])){for(var B=0;B<C.length;B++){dwr.util._setValuesRecursive(C[B],E+"["+B+"]")}}else{if(dwr.util._isObject(C)&&!dwr.util._isArray(C)){for(var D in C){var A=E?E+"."+D:D;if(dwr.util._isObject(C[D])&&!dwr.util._isArray(C[D])||dwr.util._isArray(C[D])&&C[D].length>0&&dwr.util._isObject(C[D][0])){dwr.util._setValuesRecursive(C[D],A)}else{if(typeof C[D]=="function"){}else{if(dwr.util.byId(A)!=null||document.getElementsByName(A).length>=1){dwr.util.setValue(A,C[D])}}}}}}};dwr.util.getValues=function(C,A){if(typeof C=="string"||dwr.util._isHTMLElement(C)){return dwr.util.getFormValues(C)}else{var B="";if(A!=null&&A.prefix){B=A.prefix}if(A!=null&&A.idPrefix){B=A.idPrefix}dwr.util._getValuesRecursive(C,B);return C}};dwr.util.getFormValues=function(A){var F=null;if(typeof A=="string"){F=document.forms[A];if(F==null){F=dwr.util.byId(A)}}else{if(dwr.util._isHTMLElement(A)){F=A}}if(F!=null){if(F.elements==null){alert("getFormValues() requires an object or reference to a form element.");return null}var D={};var B;var E;for(var C=0;C<F.elements.length;C++){if(F[C].type in {button:0,submit:0,reset:0,image:0,file:0}){continue}if(F[C].name){B=F[C].name;E=dwr.util.getValue(B)}else{if(F[C].id){B=F[C].id}else{B="element"+C}E=dwr.util.getValue(F[C])}D[B]=E}return D}};dwr.util._getValuesRecursive=function(C,E){if(dwr.util._isArray(C)&&C.length>0&&dwr.util._isObject(C[0])){for(var B=0;B<C.length;B++){dwr.util._getValuesRecursive(C[B],E+"["+B+"]")}}else{if(dwr.util._isObject(C)&&!dwr.util._isArray(C)){for(var D in C){var A=E?E+"."+D:D;if(dwr.util._isObject(C[D])&&!dwr.util._isArray(C[D])||dwr.util._isArray(C[D])&&C[D].length>0&&dwr.util._isObject(C[D][0])){dwr.util._getValuesRecursive(C[D],A)}else{if(typeof C[D]=="function"){}else{if(dwr.util.byId(A)!=null||document.getElementsByName(A).length>=1){C[D]=dwr.util.getValue(A)}}}}}}};dwr.util.addOptions=function(N,F){N=dwr.util._getElementById(N,"addOptions()");if(N==null){return }var C=dwr.util._isHTMLElement(N,"select");var I=dwr.util._isHTMLElement(N,["ul","ol"]);if(!C&&!I){dwr.util._debug("addOptions() can only be used with select/ul/ol elements. Attempt to use: "+dwr.util._detailedTypeOf(N));return }if(F==null){return }var H=arguments.length;var O={};var M=arguments[H-1];if(H>2&&dwr.util._isObject(M)){O=M;H--}var G=null;if(H>=3){G=arguments[2]}var D=null;if(H>=4){D=arguments[3]}if(!O.optionCreator&&C){O.optionCreator=dwr.util._defaultOptionCreator}if(!O.optionCreator&&I){O.optionCreator=dwr.util._defaultListItemCreator}var L,J,K;if(dwr.util._isArray(F)){for(var E=0;E<F.length;E++){O.data=F[E];O.text=null;O.value=null;if(C){if(G!=null){if(D!=null){O.text=dwr.util._getValueFrom(F[E],D);O.value=dwr.util._getValueFrom(F[E],G)}else{O.text=O.value=dwr.util._getValueFrom(F[E],G)}}else{O.text=O.value=dwr.util._getValueFrom(F[E])}if(O.text!=null||O.value){var B=O.optionCreator(O);B.text=O.text;B.value=O.value;N.options[N.options.length]=B}}else{O.value=dwr.util._getValueFrom(F[E],G);if(O.value!=null){K=O.optionCreator(O);if(dwr.util._shouldEscapeHtml(O)){O.value=dwr.util.escapeHtml(O.value)}K.innerHTML=O.value;N.appendChild(K)}}}}else{if(D!=null){if(!C){alert("dwr.util.addOptions can only create select lists from objects.");return }for(var A in F){O.data=F[A];O.value=dwr.util._getValueFrom(F[A],G);O.text=dwr.util._getValueFrom(F[A],D);if(O.text!=null||O.value){var B=O.optionCreator(O);B.text=O.text;B.value=O.value;N.options[N.options.length]=B}}}else{if(!C){dwr.util._debug("dwr.util.addOptions can only create select lists from objects.");return }for(var A in F){if(typeof F[A]=="function"){continue}O.data=F[A];if(!G){O.value=A;O.text=F[A]}else{O.value=F[A];O.text=A}if(O.text!=null||O.value){var B=O.optionCreator(O);B.text=O.text;B.value=O.value;N.options[N.options.length]=B}}}}dwr.util.highlight(N,O)};dwr.util._getValueFrom=function(A,B){if(B==null){return A}else{if(typeof B=="function"){return B(A)}else{return A[B]}}};dwr.util._defaultOptionCreator=function(A){return new Option()};dwr.util._defaultListItemCreator=function(A){return document.createElement("li")};dwr.util.removeAllOptions=function(B){B=dwr.util._getElementById(B,"removeAllOptions()");if(B==null){return }var A=dwr.util._isHTMLElement(B,"select");var C=dwr.util._isHTMLElement(B,["ul","ol"]);if(!A&&!C){dwr.util._debug("removeAllOptions() can only be used with select, ol and ul elements. Attempt to use: "+dwr.util._detailedTypeOf(B));return }if(A){B.options.length=0}else{while(B.childNodes.length>0){B.removeChild(B.firstChild)}}};dwr.util.addRows=function(E,D,A,B){E=dwr.util._getElementById(E,"addRows()");if(E==null){return }if(!dwr.util._isHTMLElement(E,["table","tbody","thead","tfoot"])){dwr.util._debug("addRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: "+dwr.util._detailedTypeOf(E));return }if(!B){B={}}if(!B.rowCreator){B.rowCreator=dwr.util._defaultRowCreator}if(!B.cellCreator){B.cellCreator=dwr.util._defaultCellCreator}var C,F;if(dwr.util._isArray(D)){for(F=0;F<D.length;F++){B.rowData=D[F];B.rowIndex=F;B.rowNum=F;B.data=null;B.cellNum=-1;C=dwr.util._addRowInner(A,B);if(C!=null){E.appendChild(C)}}}else{if(typeof D=="object"){F=0;for(var G in D){B.rowData=D[G];B.rowIndex=G;B.rowNum=F;B.data=null;B.cellNum=-1;C=dwr.util._addRowInner(A,B);if(C!=null){E.appendChild(C)}F++}}}dwr.util.highlight(E,B)};dwr.util._addRowInner=function(A,B){var D=B.rowCreator(B);if(D==null){return null}for(var E=0;E<A.length;E++){var C=A[E];if(typeof C=="function"){B.data=C(B.rowData,B)}else{B.data=C||""}B.cellNum=E;var F=B.cellCreator(B);if(F!=null){if(B.data!=null){if(dwr.util._isHTMLElement(B.data)){F.appendChild(B.data)}else{if(dwr.util._shouldEscapeHtml(B)&&typeof (B.data)=="string"){F.innerHTML=dwr.util.escapeHtml(B.data)}else{F.innerHTML=B.data}}}D.appendChild(F)}}return D};dwr.util._defaultRowCreator=function(A){return document.createElement("tr")};dwr.util._defaultCellCreator=function(A){return document.createElement("td")};dwr.util.removeAllRows=function(C,A){C=dwr.util._getElementById(C,"removeAllRows()");if(C==null){return }if(!A){A={}}if(!A.filter){A.filter=function(){return true}}if(!dwr.util._isHTMLElement(C,["table","tbody","thead","tfoot"])){dwr.util._debug("removeAllRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: "+dwr.util._detailedTypeOf(C));return }var D=C.firstChild;var B;while(D!=null){B=D.nextSibling;if(A.filter(D)){C.removeChild(D)}D=B}};dwr.util.setClassName=function(B,A){B=dwr.util._getElementById(B,"setClassName()");if(B==null){return }B.className=A};dwr.util.addClassName=function(B,A){B=dwr.util._getElementById(B,"addClassName()");if(B==null){return }B.className+=" "+A};dwr.util.removeClassName=function(C,A){C=dwr.util._getElementById(C,"removeClassName()");if(C==null){return }var B=new RegExp("(^|\\s)"+A+"(\\s|$)","g");C.className=C.className.replace(B,"")};dwr.util.toggleClassName=function(C,A){C=dwr.util._getElementById(C,"toggleClassName()");if(C==null){return }var B=new RegExp("(^|\\s)"+A+"(\\s|$)");if(B.test(C.className)){C.className=C.className.replace(B,"")}else{C.className+=" "+A}};dwr.util.cloneNode=function(B,A){B=dwr.util._getElementById(B,"cloneNode()");if(B==null){return null}if(A==null){A={}}var C=B.cloneNode(true);if(A.idPrefix||A.idSuffix){dwr.util._updateIds(C,A)}else{dwr.util._removeIds(C)}B.parentNode.insertBefore(C,B);return C};dwr.util._updateIds=function(D,A){if(A==null){A={}}if(D.id){D.setAttribute("id",(A.idPrefix||"")+D.id+(A.idSuffix||""))}var C=D.childNodes;for(var B=0;B<C.length;B++){var E=C.item(B);if(E.nodeType==1){dwr.util._updateIds(E,A)}}};dwr.util._removeIds=function(C){if(C.id){C.removeAttribute("id")}var B=C.childNodes;for(var A=0;A<B.length;A++){var D=B.item(A);if(D.nodeType==1){dwr.util._removeIds(D)}}};dwr.util.cloneNodeForValues=function(A,C,B){A=dwr.util._getElementById(A,"cloneNodeForValues()");if(A==null){return null}if(B==null){B={}}var D;if(B.idPrefix!=null){D=B.idPrefix}else{D=A.id||""}return dwr.util._cloneNodeForValuesRecursive(A,C,D,B)};dwr.util._cloneNodeForValuesRecursive=function(A,C,E,I){if(dwr.util._isArray(C)){var G=[];for(var D=0;D<C.length;D++){var H=C[D];var F=dwr.util._cloneNodeForValuesRecursive(A,H,E+"["+D+"]",I);G.push(F)}return G}else{if(dwr.util._isObject(C)&&!dwr.util._isArray(C)){var F=A.cloneNode(true);if(I.updateCloneStyle&&F.style){for(var B in I.updateCloneStyle){F.style[B]=I.updateCloneStyle[B]}}dwr.util._replaceIds(F,A.id,E);A.parentNode.insertBefore(F,A);dwr.util._cloneSubArrays(C,E,I);return F}}return null};dwr.util._replaceIds=function(F,H,C){if(F.id){var B=null;if(F.id==H){B=C}else{if(F.id.length>H.length){if(F.id.substr(0,H.length)==H){var A=F.id.charAt(H.length);if(A=="."||A=="["){B=C+F.id.substr(H.length)}}}}if(B){F.setAttribute("id",B)}else{F.removeAttribute("id")}}var E=F.childNodes;for(var D=0;D<E.length;D++){var G=E.item(D);if(G.nodeType==1){dwr.util._replaceIds(G,H,C)}}};dwr.util._cloneSubArrays=function(C,F,A){for(prop in C){var B=C[prop];if(dwr.util._isArray(B)){if(B.length>0&&dwr.util._isObject(B[0])){var E=F+"."+prop;var D=dwr.util.byId(E);if(D!=null){dwr.util._cloneNodeForValuesRecursive(D,B,E,A)}}}else{if(dwr.util._isObject(B)){dwr.util._cloneSubArrays(B,F+"."+prop,A)}}}};dwr.util._getElementById=function(B,A){var C=B;B=dwr.util.byId(B);if(B==null){dwr.util._debug(A+" can't find an element with id: "+C+".")}return B};dwr.util._isHTMLElement=function(C,E){if(C==null||typeof C!="object"||C.nodeName==null){return false}if(E!=null){var D=C.nodeName.toLowerCase();if(typeof E=="string"){return D==E.toLowerCase()}if(dwr.util._isArray(E)){var A=false;for(var B=0;B<E.length&&!A;B++){if(D==E[B].toLowerCase()){A=true}}return A}dwr.util._debug("dwr.util._isHTMLElement was passed test node name that is neither a string or array of strings");return false}return true};dwr.util._detailedTypeOf=function(A){var B=typeof A;if(B=="object"){B=Object.prototype.toString.apply(A);B=B.substring(8,B.length-1)}return B};dwr.util._isObject=function(A){return(A&&typeof A=="object")};dwr.util._isArray=function(A){return(A&&A.join)};dwr.util._isDate=function(A){return(A&&A.toUTCString)?true:false};dwr.util._importNode=function(F,E,B){var D;if(E.nodeType==1){D=F.createElement(E.nodeName);for(var C=0;C<E.attributes.length;C++){var A=E.attributes[C];if(A.nodeValue!=null&&A.nodeValue!=""){D.setAttribute(A.name,A.nodeValue)}}if(typeof E.style!="undefined"){D.style.cssText=E.style.cssText}}else{if(E.nodeType==3){D=F.createTextNode(E.nodeValue)}}if(B&&E.hasChildNodes()){for(C=0;C<E.childNodes.length;C++){D.appendChild(dwr.util._importNode(F,E.childNodes[C],true))}}return D};dwr.util._debug=function(F,D){var A=false;try{if(window.console){if(D&&window.console.trace){window.console.trace()}window.console.log(F);A=true}else{if(window.opera&&window.opera.postError){window.opera.postError(F);A=true}}}catch(C){}if(!A){var B=document.getElementById("dwr-debug");if(B){var E=F+"<br/>"+B.innerHTML;if(E.length>2048){E=E.substring(0,2048)}B.innerHTML=E}}};var TrimPath;(function(){if(TrimPath==null){TrimPath=new Object()}if(TrimPath.evalEx==null){TrimPath.evalEx=function(src){return eval(src)}}var UNDEFINED;if(Array.prototype.pop==null){Array.prototype.pop=function(){if(this.length===0){return UNDEFINED}return this[--this.length]}}if(Array.prototype.push==null){Array.prototype.push=function(){for(var i=0;i<arguments.length;++i){this[this.length]=arguments[i]}return this.length}}TrimPath.parseTemplate=function(tmplContent,optTmplName,optEtc){if(optEtc==null){optEtc=TrimPath.parseTemplate_etc}var funcSrc=parse(tmplContent,optTmplName,optEtc);var func=TrimPath.evalEx(funcSrc,optTmplName,1);if(func!=null){return new optEtc.Template(optTmplName,tmplContent,funcSrc,func,optEtc)}return null};try{String.prototype.process=function(context,optFlags){var template=TrimPath.parseTemplate(this,null);if(template!=null){return template.process(context,optFlags)}return this}}catch(e){}TrimPath.parseTemplate_etc={};TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro";TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(stmtParts,state,tmplName,etc){if(stmtParts[2]!="in"){throw new etc.ParseError(tmplName,state.line,"bad for loop statement: "+stmtParts.join(" "))}var iterVar=stmtParts[1];var listVar="__LIST__"+iterVar;return["var ",listVar," = ",stmtParts[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",listVar,") != null) { ","var ",iterVar,"_ct = 0;","for (var ",iterVar,"_index in ",listVar,") { ",iterVar,"_ct++;","if (typeof(",listVar,"[",iterVar,"_index]) == 'function') {continue;}","if (",listVar,".constructor.prototype[",iterVar,"_index]!=null) {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",iterVar," = ",listVar,"[",iterVar,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(stmtParts,state,tmplName,etc){var macroName=stmtParts[1].split("(")[0];return["var ",macroName," = function",stmtParts.slice(1).join(" ").substring(macroName.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}};TrimPath.parseTemplate_etc.modifierDef={eat:function(v){return""},escape:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(s){return String(s).toUpperCase()},"default":function(s,d){return s!=null?s:d}};TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape;TrimPath.parseTemplate_etc.Template=function(tmplName,tmplContent,funcSrc,func,etc){this.process=function(context,flags){if(context==null){context={}}if(context._MODIFIERS==null){context._MODIFIERS={}}if(context.defined==null){context.defined=function(str){return(context[str]!=undefined)}}for(var k in etc.modifierDef){if(context._MODIFIERS[k]==null){context._MODIFIERS[k]=etc.modifierDef[k]}}if(flags==null){flags={}}var resultArr=[];var resultOut={write:function(m){resultArr.push(m)}};try{func(resultOut,context,flags)}catch(e){if(flags.throwExceptions==true){throw e}var result=new String(resultArr.join("")+"[ERROR: "+e.toString()+(e.message?"; "+e.message:"")+"]");result.exception=e;return result}return resultArr.join("")};this.name=tmplName;this.source=tmplContent;this.sourceFunc=funcSrc;this.toString=function(){return"TrimPath.Template ["+tmplName+"]"}};TrimPath.parseTemplate_etc.ParseError=function(name,line,message){this.name=name;this.line=line;this.message=message};TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return("TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message)};var parse=function(body,tmplName,etc){body=cleanWhiteSpace(body);var funcText=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"];var state={stack:[],line:1};var endStmtPrev=-1;while(endStmtPrev+1<body.length){var begStmt=endStmtPrev;begStmt=body.indexOf("{",begStmt+1);while(begStmt>=0){var endStmt=body.indexOf("}",begStmt+1);var stmt=body.substring(begStmt,endStmt);var blockrx=stmt.match(/^\{(cdata|minify|eval)/);if(blockrx){var blockType=blockrx[1];var blockMarkerBeg=begStmt+blockType.length+1;var blockMarkerEnd=body.indexOf("}",blockMarkerBeg);if(blockMarkerEnd>=0){var blockMarker;if(blockMarkerEnd-blockMarkerBeg<=0){blockMarker="{/"+blockType+"}"}else{blockMarker=body.substring(blockMarkerBeg+1,blockMarkerEnd)}var blockEnd=body.indexOf(blockMarker,blockMarkerEnd+1);if(blockEnd>=0){emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);var blockText=body.substring(blockMarkerEnd+1,blockEnd);if(blockType=="cdata"){emitText(blockText,funcText)}else{if(blockType=="minify"){emitText(scrubWhiteSpace(blockText),funcText)}else{if(blockType=="eval"){if(blockText!=null&&blockText.length>0){funcText.push("_OUT.write( (function() { "+blockText+" })() );")}}}}begStmt=endStmtPrev=blockEnd+blockMarker.length-1}}}else{if(body.charAt(begStmt-1)!="$"&&body.charAt(begStmt-1)!="\\"){var offset=(body.charAt(begStmt+1)=="/"?2:1);if(body.substring(begStmt+offset,begStmt+10+offset).search(TrimPath.parseTemplate_etc.statementTag)==0){break}}}begStmt=body.indexOf("{",begStmt+1)}if(begStmt<0){break}var endStmt=body.indexOf("}",begStmt+1);if(endStmt<0){break}emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);emitStatement(body.substring(begStmt,endStmt+1),state,funcText,tmplName,etc);endStmtPrev=endStmt}emitSectionText(body.substring(endStmtPrev+1),funcText);if(state.stack.length!=0){throw new etc.ParseError(tmplName,state.line,"unclosed, unmatched statement(s): "+state.stack.join(","))}funcText.push("}}; TrimPath_Template_TEMP");return funcText.join("")};var emitStatement=function(stmtStr,state,funcText,tmplName,etc){var parts=stmtStr.slice(1,-1).split(" ");var stmt=etc.statementDef[parts[0]];if(stmt==null){emitSectionText(stmtStr,funcText);return }if(stmt.delta<0){if(state.stack.length<=0){throw new etc.ParseError(tmplName,state.line,"close tag does not match any previous statement: "+stmtStr)}state.stack.pop()}if(stmt.delta>0){state.stack.push(stmtStr)}if(stmt.paramMin!=null&&stmt.paramMin>=parts.length){throw new etc.ParseError(tmplName,state.line,"statement needs more parameters: "+stmtStr)}if(stmt.prefixFunc!=null){funcText.push(stmt.prefixFunc(parts,state,tmplName,etc))}else{funcText.push(stmt.prefix)}if(stmt.suffix!=null){if(parts.length<=1){if(stmt.paramDefault!=null){funcText.push(stmt.paramDefault)}}else{for(var i=1;i<parts.length;i++){if(i>1){funcText.push(" ")}funcText.push(parts[i])}}funcText.push(stmt.suffix)}};var emitSectionText=function(text,funcText){if(text.length<=0){return }var nlPrefix=0;var nlSuffix=text.length-1;while(nlPrefix<text.length&&(text.charAt(nlPrefix)=="\n")){nlPrefix++}while(nlSuffix>=0&&(text.charAt(nlSuffix)==" "||text.charAt(nlSuffix)=="\t")){nlSuffix--}if(nlSuffix<nlPrefix){nlSuffix=nlPrefix}if(nlPrefix>0){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(0,nlPrefix).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}var lines=text.substring(nlPrefix,nlSuffix+1).split("\n");for(var i=0;i<lines.length;i++){emitSectionTextLine(lines[i],funcText);if(i<lines.length-1){funcText.push('_OUT.write("\\n");\n')}}if(nlSuffix+1<text.length){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(nlSuffix+1).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}};var emitSectionTextLine=function(line,funcText){var endMarkPrev="}";var endExprPrev=-1;while(endExprPrev+endMarkPrev.length<line.length){var begMark="${",endMark="}";var begExpr=line.indexOf(begMark,endExprPrev+endMarkPrev.length);if(begExpr<0){break}if(line.charAt(begExpr+2)=="%"){begMark="${%";endMark="%}"}var endExpr=line.indexOf(endMark,begExpr+begMark.length);if(endExpr<0){break}emitText(line.substring(endExprPrev+endMarkPrev.length,begExpr),funcText);var exprArr=line.substring(begExpr+begMark.length,endExpr).replace(/\|\|/g,"#@@#").split("|");for(var k in exprArr){if(exprArr[k].replace){exprArr[k]=exprArr[k].replace(/#@@#/g,"||")}}funcText.push("_OUT.write(");emitExpression(exprArr,exprArr.length-1,funcText);funcText.push(");");endExprPrev=endExpr;endMarkPrev=endMark}emitText(line.substring(endExprPrev+endMarkPrev.length),funcText)};var emitText=function(text,funcText){if(text==null||text.length<=0){return }text=text.replace(/\\/g,"\\\\");text=text.replace(/\n/g,"\\n");text=text.replace(/"/g,'\\"');funcText.push('_OUT.write("');funcText.push(text);funcText.push('");')};var emitExpression=function(exprArr,index,funcText){var expr=exprArr[index];if(index<=0){funcText.push(expr);return }var parts=expr.split(":");funcText.push('_MODIFIERS["');funcText.push(parts[0]);funcText.push('"](');emitExpression(exprArr,index-1,funcText);if(parts.length>1){funcText.push(",");funcText.push(parts[1])}funcText.push(")")};var cleanWhiteSpace=function(result){result=result.replace(/\t/g,"    ");result=result.replace(/\r\n/g,"\n");result=result.replace(/\r/g,"\n");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};var scrubWhiteSpace=function(result){result=result.replace(/^\s+/g,"");result=result.replace(/\s+$/g,"");result=result.replace(/\s+/g," ");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};TrimPath.parseDOMTemplate=function(elementId,optDocument,optEtc){if(optDocument==null){optDocument=document}var element=optDocument.getElementById(elementId);var content=element.value;if(content==null){content=element.innerHTML}content=content.replace(/&lt;/g,"<").replace(/&gt;/g,">");return TrimPath.parseTemplate(content,elementId,optEtc)};TrimPath.processDOMTemplate=function(elementId,context,optFlags,optDocument,optEtc){return TrimPath.parseDOMTemplate(elementId,optDocument,optEtc).process(context,optFlags)}})();TableFilter=function(B,A){if(!$(B)){return }this.headEl=$E(B);this.overFilter=null;for(c in A){this[c]=A[c]}this.onRender()};TableFilter.prototype={onRender:function(){this.headEl.className="filter_button";var E=document.createElement("span");E.innerHTML="▼";E.id=this.headEl.id+"_arrow";E.className="filter_arrow";this.filterArrowEl=E;this.headEl.appendChild(this.filterArrowEl);var D=document.createElement("div");D.id=this.headEl.id+"_layer";D.className="filter_layer";if(typeof this.filterStyle!="undefined"){$E(D).setCssText(this.filterStyle)}D.style.display="none";this.filterLayerEl=$E(D);this.headEl.appendChild(this.filterLayerEl);var B=[];var A=this.filterList.length;B.push('<ul><li class="selected"><a href="#all">전체보기</a></li>');for(var C=0;C<A;C++){B.push('<li><a href="#'+this.filterList[C].id+'">'+this.filterList[C].text+"</a></li>")}B.push("</ul>");this.filterLayerEl.innerHTML=B.join("");if(A>4){this.filterLayerEl.style.height="119px"}if(typeof LayerManager!="undefined"){LayerManager.registLayer(this.headEl.id,this.filterLayerEl.id)}this.registFilterEvent()},registFilterEvent:function(){daum.Event.addEvent(this.headEl,"click",this.toggleFilter.bind(this));var A=this.onClickItem.bind(this);$$("li",this.filterLayerEl).each(function(B){daum.Event.addEvent(B,"click",function(){A(B)})});daum.Event.addEvent(this.filterLayerEl,"mouseover",this.onOverFilterItem.bindAsEventListener(this))},toggleFilter:function(){if(this.filterLayerEl.visible()){this.filterLayerEl.hide()}else{this.filterLayerEl.show()}},onClickItem:function(A){var B=$E(A).getFirstChild().hash.replace("#","");this.filterCallback(this.filterType,B)},onOverFilterItem:function(B){var A=daum.Event.getElement(B);daum.Event.stopEvent(B);if(typeof A=="undefined"||A.tagName.toLowerCase()!="li"){return }if(this.overFilter!=null){this.overFilter.removeClassName("selected")}this.overFilter=$E(A);this.overFilter.addClassName("selected")}};FavoriteListEditor={myCafeListData:[],myFavorListData:[],isSaveProcess:false,currentJoinGrpid:"-1",overListItem:null,init:function(){this.myCafeLadder=new LadderSelector("favorLeftList",{dataList:this.myCafeListData,isDisabled:true});this.myFavorLadder=new LadderSelector("favorRightList",{dataList:this.myFavorListData,isMove:true,isDrag:true});this.registerEventListener()},registerEventListener:function(){daum.addEvent("myGroupSelectBtn","click",this.toggleGroupList.bind(this));daum.addEvent("myGroupSelectLayer","click",this.onChangeGroupList.bind(this));daum.addEvent("myGroupSelectLayer","mouseover",this.onOverGroupList.bind(this));daum.addEvent("ladderInsertBtn","click",this.onMoveLeftToRight.bind(this));daum.addEvent("ladderRemoveBtn","click",this.onMoveRightToLeft.bind(this));daum.addEvent("favorLeftList","dblclick",this.onMoveLeftToRight.bind(this));daum.addEvent("favorRightList","dblclick",this.onMoveRightToLeft.bind(this));if(typeof LayerManager!="undefined"){LayerManager.registLayer("myGroupSelectBtn","myGroupSelectLayer")}},toggleGroupList:function(){if($E("myGroupSelectLayer").visible()){$E("myGroupSelectLayer").hide()}else{$E("myGroupSelectLayer").show()}},onChangeGroupList:function(B){var C=daum.Event.getElement(B);var A=C.hash.substr(1);$E("myGroupSelectLayer").hide();if(this.currentJoinGrpid==A){return }this.currentJoinGrpid=A;$E("myGroupSelectBtn").innerHTML=C.innerHTML;var D=this;MyCafeDAO.loadMyCafeGroupList(A,function(E){if(E){D.changeGroupList(E)}})},onOverGroupList:function(A){var B=daum.Event.getElement(A);if(B.tagName.toLowerCase()=="a"){if(this.overListItem){this.overListItem.className=""}B.className="over";this.overListItem=B}},changeGroupList:function(C){var A=C.length;$("mycafeCount").innerHTML=A;this.myCafeLadder.options.dataList=[];for(var B=0;B<A;B++){this.myCafeLadder.options.dataList.push({id:C[B].grpid,name:C[B].grpname,dispord:C[B].dispord})}this.myCafeLadder.generateLadderList()},onMoveLeftToRight:function(){var H=this.myCafeLadder.selectedItems;var C=this.myFavorLadder.options.dataList;var A=H.length;var G=C.length;if(A==0){alert("자주가는 카페로 등록시킬 카페를 선택해 주세요.");return }if((A+G)>30){alert("자주가는 카페는 30개이상 등록할 수 없습니다.");this.myCafeLadder.removeSelectedItem();return }var F=false;for(var E=0;E<A;E++){for(var B=0;B<G;B++){if(H[E].id==C[B].id){F=true}}if(!F){var D=new daum.Template('<li id="'+H[E].id+'">'+H[E].name+"</li>").toElement();$("favorRightList").appendChild(D);C.push({id:H[E].id,name:H[E].name,element:$E(D)});F=false}}this.myCafeLadder.removeSelectedItem();this.changeLeftListColor();this.updateRightCount()},onMoveRightToLeft:function(){var F=this.myFavorLadder.selectedItems;var C=this.myFavorLadder.options.dataList;var A=F.length;var E=C.length;if(A==0){alert("자주가는 카페로 해제시킬 카페를 선택해 주세요.");return }for(var D=0;D<A;D++){for(var B=0;B<E;B++){if(F[D].id==C[B].id){F[D].id="";$("favorRightList").removeChild(F[D].element);break}}}this.myFavorLadder.updateDataList();this.myFavorLadder.removeSelectedItem();this.changeLeftListColor();this.updateRightCount()},changeLeftListColor:function(){var F=this.myCafeLadder.options.dataList;var B=this.myFavorLadder.options.dataList;var D=this.myCafeLadder.options.dataList.length;var E=this.myFavorLadder.options.dataList.length;for(var C=0;C<D;C++){F[C].element.className=""}for(var C=0;C<E;C++){for(var A=0;A<D;A++){if(F[A].id==B[C].id){F[A].element.className="disabled";break}}}},updateRightCount:function(){$("favorCount").innerHTML=this.myFavorLadder.options.dataList.length},saveFavorList:function(){if(this.isSaveProcess){return }this.isSaveProcess=true;var A=this.myFavorLadder.options.dataList.length;var B=[];for(var C=0;C<A;C++){B.push(this.myFavorLadder.options.dataList[C].id)}MyCafeDAO.saveFavoriteCafeList(B,function(D){if(D){alert("자주가는 카페 목록이 저장 되었습니다.");document.location.reload()}})}};MyArticleListViewController={grpcode:null,page:1,arrCheckList:[],init:function(){var A=$("selectMyCafeList").value;if(A=="none"){var B={myDetailCafeMbrList:[]};this.generateList(B)}else{this.sendRequestList(A,this.page);this.registerEventListener()}},sendRequestList:function(A,B){$("selectMyCafeList").disabled=true;this.grpcode=A||this.grpcode;this.page=B||this.page;LoadingManager.showLoading("myArticleListViewer",60);MyCafeDAO.loadMyArticleList(this.grpcode,this.page,function(C){if(C){MyArticleListViewController.generateList(C);LoadingManager.hideLoading()}})},generateList:function(B){this.memberDetailInfo=B.myDetailCafeMbrList;$("myArticleListViewer").innerHTML=getTemplateString("myArticleList.jst",{myArticleList:B.myArticleList,grpcode:MyArticleListViewController.grpcode});var A=$("myArticlePagingViewer");if(B.myArticleList!==null){A.innerHTML=getTemplateString("numberPaging.jst",{nextPageEnable:B.nextPageEnable,pagingInfo:B.pager,prevPageEnable:B.prevPageEnable})}$("selectMyCafeList").disabled=false},getCheckList:function(){this.arrCheckList=$$("#myArticleListViewer input")},onClickArticleGroup:function(){this.getCheckList();if(this.arrCheckList==null||this.arrCheckList.length==0){return }var B=$("checkArticleGroup").checked;for(var A=0;A<this.arrCheckList.length;A++){this.arrCheckList[A].checked=B}},onChangeCafeList:function(){var A=$("selectMyCafeList").value;var B=1;this.sendRequestList(A,B)},onClickArticleDelete:function(C){daum.Event.stopEvent(C);this.getCheckList();if(this.arrCheckList===null||this.arrCheckList.length==0){return }var B=[];for(var A=0;A<this.arrCheckList.length;A++){if(this.arrCheckList[A].checked){B.push(this.arrCheckList[A].value)}}if(B.length==0){alert("글을 선택 해주세요.");return }else{if(B.length>0){if(!confirm("선택한 글을 삭제 하시겠습니까?\n\n삭제된 글은 검색에 반영될 때까지 '존재하지 않는 게시글'로 표시됩니다.")){return }}}MyCafeDAO.deleteArticle(this.grpcode,B,function(D){switch(D){case true:MyArticleListViewController.sendRequestList(MyArticleListViewController.grpcode,MyArticleListViewController.page);break;case false:alert("게시글 삭제에 실패하였습니다.");break}})},registerEventListener:function(){daum.Event.addEvent($("myArticlePagingViewer"),"click",this.onClickPageViewer.bindAsEventListener(this));daum.Event.addEvent($("checkArticleGroup"),"click",this.onClickArticleGroup.bindAsEventListener(this));daum.Event.addEvent($("selectMyCafeList"),"change",this.onChangeCafeList.bindAsEventListener(this));daum.Event.addEvent($("articleDelete"),"click",this.onClickArticleDelete.bindAsEventListener(this))},onClickPageViewer:function(B){var A=daum.Event.getElement(B);daum.Event.preventDefault(B);if(A.tagName.toLowerCase()=="img"){A=A.parentNode}if(A&&A.tagName.toLowerCase()=="a"){if(A.className=="prev_btn"){this.page=A.hash.substr(1)}else{if(A.className=="next_btn"){this.page=A.hash.substr(1)}else{this.page=parseInt(A.innerHTML,10)}}this.sendRequestList(null,this.page)}}};MyCafeListViewController={joinGroup:"-1",sortType:"joindt",sortValue:"desc",filter:null,filterTarget:null,page:1,cafeDetailInfo:{},detailOverElement:null,arrCheckList:null,isUseLayerManager:false,isRequest:false,init:function(A){this.isAllList=(A==-1)?true:false;this.joinGroup=A;this.myCafeInfoLayer=$E("myCafeInfoLayer");this.sendRequestList();this.makeFilter();this.makeSort();this.registerEventListener()},sendRequestList:function(A,F,C,D,B,E){this.cafeDetailInfo={};this.joinGroup=A||this.joinGroup;this.sortType=F||this.sortType;this.sortValue=C||this.sortValue;this.filter=D||this.filter;this.filterTarget=B||this.filterTarget;this.page=E||this.page;LoadingManager.showLoading("myCafeListViewer",60);MyCafeDAO.loadMyCafeList(this.joinGroup,this.sortType,this.sortValue,this.filter,this.filterTarget,this.page,function(G){if(G){MyCafeListViewController.generateList(G);MyCafeListViewController.getCheckList();LoadingManager.hideLoading()}})},generateList:function(A){this.memberDetailInfo=A.myDetailCafeMbrList;$("myCafeListViewer").innerHTML=getTemplateString("myCafeList.jst",{cafeList:A.myCafeList,memberList:A.myDetailCafeMbrList,isAllList:this.isAllList});$("myCafePagingViewer").innerHTML=getTemplateString("prevNextPaging.jst",{nextPageEnable:A.nextPageEnable,prevPageEnable:A.prevPageEnable,viewController:"MyCafeListViewController"});if(!this.isUseLayerManager){this.registLayerManager()}},registLayerManager:function(){if(typeof LayerManager=="undefined"){return }$$(".member",$("myCafeListViewer")).each(function(A){LayerManager.registLayer(A.id,A.hash.substr(1))});this.isUseLayerManager=true},getCheckList:function(){this.arrCheckList=$$("#myCafeListViewer input")},makeFilter:function(){new TableFilter("thCategory",{filterType:"cateid",filterList:window.categoryList,filterCallback:function(B,A){MyCafeListViewController.sendRequestList(null,null,null,B,A,1)}});new TableFilter("thGrade",{filterType:"mgrflag",filterList:[{text:"운영중 카페 보기",id:"admin"}],filterCallback:function(B,A){MyCafeListViewController.sendRequestList(null,null,null,B,A,1)},filterStyle:"width: 100px"})},makeSort:function(){new TableSort({sortStore:[{sortEl:"thCafeName",sortType:"grpname",sortValue:"desc"},{sortEl:"thJoinDate",sortType:"joindt",sortValue:"desc"}],sortCallback:function(B,A){MyCafeListViewController.sendRequestList(null,B,A,null,null,1)}})},registerEventListener:function(){daum.Event.addEvent($("myCafeListViewer"),"click",this.onClickListViewer.bindAsEventListener(this));daum.Event.addEvent($("myCafeListViewer"),"mouseover",this.onMouseoverListViewer.bindAsEventListener(this));daum.Event.addEvent($("myCafeListViewer"),"mouseout",this.onMouseoutListViewer.bindAsEventListener(this));daum.Event.addEvent($("myCafePagingViewer"),"click",this.onClickPageViewer.bindAsEventListener(this));if(!this.isAllList){daum.Event.addEvent($("checkCafeGroup"),"click",this.onClickCafeGroup.bindAsEventListener(this));daum.Event.addEvent($("selectCafeGroup"),"change",this.onChangeCafeGroup.bindAsEventListener(this))}},onClickListViewer:function(C){var B=daum.Event.getElement(C);if(typeof B!="undefined"||B){var A=B.tagName.toLowerCase();if(A=="a"&&B.hash){daum.Event.stopEvent(C);var D=B.hash.substr(1);if(B.className.indexOf("favor")>-1){this.toggleFavorCafe(B)}else{if(B.className.indexOf("cafename")>-1){window.open(B.href.replace(B.hash,""))}else{if(B.className.indexOf("friendsname")>-1){window.open(B.href.replace(B.hash,""))}else{if(B.className.indexOf("member")>-1){this.showMemberLayer(D)}else{if(B.className.indexOf("withdraw")>-1){this.withdrawCafe(D)}}}}}}}},onMouseoverListViewer:function(C){daum.Event.stopEvent(C);var B=daum.Event.getElement(C);if(B&&B.tagName.toLowerCase()=="a"&&B.className=="cafename"){this.detailOverElement=B;var A=B.hash.replace("#","");this.currentCafeInfoEl=B;setTimeout(function(){if(MyCafeListViewController.detailOverElement==B){MyCafeListViewController.getCafeDetailInfo(A)}},500)}},onMouseoutListViewer:function(A){daum.Event.stopEvent(A);this.detailOverElement=null;this.myCafeInfoLayer.hide()},onClickPageViewer:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(A&&A.tagName.toLowerCase()=="a"&&(A.className.indexOf("prev_")>-1||A.className.indexOf("next_")>-1)){if(A.className=="prev_btn"){this.page--}else{if(A.className=="next_btn"){this.page++}}this.sendRequestList()}},onClickCafeGroup:function(){if(this.arrCheckList==null||this.arrCheckList.length==0){return }var B=$("checkCafeGroup").checked;for(var A=0;A<this.arrCheckList.length;A++){this.arrCheckList[A].checked=B}},onChangeCafeGroup:function(){var B=$("selectCafeGroup").value;if(typeof B=="undefined"||B==""||B=="none"){return }var C=[];for(var A=0;A<this.arrCheckList.length;A++){if(this.arrCheckList[A].checked){C.push(this.arrCheckList[A].value)}}if(C.length==0){alert("이동할 카페를 선택해 주세요.");$("selectCafeGroup").selectedIndex=0;return }MyCafeDAO.moveCafeJoinGroup(C,B,function(D){switch(D){case"success":MyCafeListViewController.sendRequestList(null,null,null,null,null,1);MyCafeListViewController.updateGroupCount(C.length,B);break;case"fail":alert("이동에 실패하였습니다.");break}});$("checkCafeGroup").checked=false},updateGroupCount:function(B,D){$("selectCafeGroup").selectedIndex=0;var C=$("joinGroup"+D);if(!C){alert("해당 그룹 아이디가 없습니다.");return }var A=$("joinGroup"+this.joinGroup);C.innerHTML=parseInt(C.innerHTML)+parseInt(B);A.innerHTML=parseInt(A.innerHTML)-parseInt(B)},toggleFavorCafe:function(C){var D=C;var A=C.className;var B=C.hash.replace("#","");if(A=="favorOff"){MyCafeDAO.loadFavoriteCafeCount(function(E){if(E>29){alert("자주가는 카페는 최대 30개 추가할 수 있습니다.");return }D.className="favorTemp";MyCafeDAO.addFavoriteCafe(B,function(F){switch(F){case"success":className="favorOn";break;case"already":alert("이미 자주가는 카페목록에 추가 되어있습니다.");className="favorOn";break;case"over":alert("자주가는 카페가 30개가 초과되었습니다.");className=A;break;case"fail":alert("자주가는 카페 등록에 실패하였습니다.");className=A;break}setTimeout(function(){D.className=className},200)})})}else{if(A=="favorOn"){D.className="favorTemp";MyCafeDAO.removeFavoriteCafe(B,function(E){switch(E){case"success":className="favorOff";break;case"nomatch":alert("해지할 카페주소가 잘못 되었습니다.");className=A;break;case"fail":alert("자주가는 카페 해지에 실패하였습니다.");className=A;break}setTimeout(function(){D.className=className},200)})}}},getCafeDetailInfo:function(A){if(typeof this.cafeDetailInfo[A]=="undefined"){MyCafeDAO.loadDetailCafeInfo(A,function(B){if(B){MyCafeListViewController.cafeDetailInfo[A]=B;MyCafeListViewController.showCafeLayer(B)}else{alert("카페 정보가 없습니다.")}})}else{this.showCafeLayer(this.cafeDetailInfo[A])}},showCafeLayer:function(C){var B=[];var A=(C.openYn)?"공개":"비공개";B.push("<h5>"+C.grpname+"</h5>");B.push("<p>"+C.rankName+" ("+A+')<span class="bar">|</span>개설일 '+C.regdt+'<span class="bar">|</span>회원수 '+C.totmbr+"<br />");B.push('오늘새글 <span class="point">'+C.newArticleCount+"</span>");if(C.visitCount>0){B.push('<span class="bar">|</span>오늘방문  <span class="point">'+C.visitCount+"</span>")}B.push("</p>");this.myCafeInfoLayer.innerHTML=B.join("");var D=daum.Element.getCoords(this.currentCafeInfoEl,true);this.myCafeInfoLayer.setTop(D.top+15);this.myCafeInfoLayer.setLeft(D.left);this.myCafeInfoLayer.show()},showMemberLayer:function(B){var A=$E(B);if(A.visible()){A.hide()}else{A.show()}},withdrawCafe:function(A){if(this.isRequest){return }this.isRequest=true;var B=A.split("|");if(confirm("'"+B[1]+"' 카페를 탈퇴하시겠습니까?")){MyCafeDAO.withdrawCafe(B[0],function(C){switch(C){case"success":MyCafeListViewController.sendRequestList();break;case"not member":alert("해당 카페의 회원이 아닙니다.");break;case"today join":alert("오늘 가입한 카페는 탈퇴가 불가능 합니다.");break;case"founder":alert("카페지기는 탈퇴가 불가능 합니다.");break;case"remain sms period":alert("SMS 결제 기간이 남아있습니다.");break;case"fail":alert("카페 탈퇴에 실패하였습니다.");break}MyCafeListViewController.isRequest=false})}else{this.isRequest=false}}};function purge(E,D){D=D||1;if(D>6){return }var B=E.attributes,C,A,F;if(B){A=B.length;for(C=0;C<A;C+=1){F=B[C].name;if(typeof E[F]==="function"){E[F]=null}}}B=E.childNodes;if(B){A=B.length;for(C=0;C<A;C+=1){purge(E.childNodes[C],D+1)}}}var templateCache={};function getTemplateString(C,A){if(templateCache[C]){return templateCache[C].process(A)}else{var B=Ajax.getTemplate(C);templateCache[C]=TrimPath.parseTemplate(B);return templateCache[C].process(A)}}Ajax={getRequest:function(){var A;try{A=new XMLHttpRequest()}catch(B){try{A=new ActiveXObject("Msxml2.XMLHTTP")}catch(B){try{A=new ActiveXObject("Microsoft.XMLHTTP")}catch(B){throw"Unable to get an HTTP request object"}}}return A},sendRequest:function(A){var B=this.getRequest();try{B.open("GET",A,false);B.send(null)}catch(C){}},getText:function(A,E,D){var B=this.getRequest();try{B.open("GET",A,false);B.send(null);if(B.readyState==4&&B.status==200||B.status==304){E(B.responseText)}else{if(B.readyState==4){if(typeof D=="function"){D()}}}}catch(C){}},getJson:function(A,E,D){var B=this.getRequest();try{B.open("GET",A,false);B.send(null);if(B.readyState==4&&B.status==200||B.status==304){E(daum.jsonToObject(B.responseText))}else{if(B.readyState==4){if(typeof D=="function"){D()}}}}catch(C){}},getScript:function(B,E){var C=this.getRequest();try{C.open("GET",B,false);C.send(null);if(C.readyState==4&&C.status==200||C.status==304){if(E){var A=C.responseXML}else{var A=C.responseText}return A}}catch(D){throw"Unable to load script, URL: "+B}},getTemplate:function(B){if(typeof jstTemplates=="undefined"){jstTemplates={}}if(!jstTemplates[B]){var A="/_c21_/static/jst/"+B+"?dummy="+new Date().getTime();jstTemplates[B]=this.getScript(A)}return jstTemplates[B]}};function resizeToAutoHeight(C,B,D){var G=0;var F=0;var J=0;B=B?B:0;if(D){for(var E=0;E<D.length;E++){if(D[E].bw){B=D[E].offset}}}C=C?C:document.documentElement.scrollWidth;if(window.outerWidth){G=window.outerWidth-window.innerWidth}else{if(daum.Browser.ie6||daum.Browser.ie7){G=12}else{if(daum.Browser.ie8){G=20}}}if(daum.Browser.cr){F=window.outerHeight-window.innerHeight+17;window.resizeTo(C+G,document.body.clientHeight+F+B);return }var I=daum.Browser.sf?document.body.clientHeight:document.body.scrollHeight;window.resizeTo(C,I);var A=document.documentElement.scrollHeight?document.documentElement.scrollHeight:document.body.scrollHeight;var H=0;if(daum.Browser.ie||daum.Browser.op){H=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(daum.Browser.ie_sv1){A=document.body.scrollHeight}}else{if(daum.Browser.ff){H=window.innerHeight}else{if(daum.Browser.sf){A=document.body.clientHeight;H=window.innerHeight}}}if(A&&H&&A!=H){F=A-H}window.resizeTo(C+G,I+F+B)}function Centerize(B,A){B=$(B);A=A||{};var D=daum.Element.getCoords(B,true);var C=daum.Browser.getWindowSize();B.style.position="absolute";B.style.left=parseInt((C.width-(D.right-D.left))/2-296/2).px();B.style.top=parseInt((C.height-(D.bottom-D.top))/2-185/2).px();if(A.maxTop&&B.style.top.toInt()>A.maxTop){B.style.top=A.maxTop.px()}$E(B).show()}LadderSelector=function(B,A){if(!$(B)){return }this.id=B;this.ladderEl=$E(B);this.ladderEl.addClassName("ladderList");$E(this.ladderEl.parentNode).addClassName("ladderSelector");this.selectedItems=[];this.lastItemId=null;this.downComponent=null;this.listChk=false;this.oldIndex=-1;this.maxLadderId=-1;this.hideComponents={};this.startInd=0;this.options={dataList:[],isDisabled:false,isMove:false,isDrag:false};daum.extend(this.options,A,true);this.onRender();this.dragEl=$E(B+"Drag");this.ghost=document.createElement("li");this.ghost.className="ladder_ghost";this.ghost.innerHTML="----------------------------------"};LadderSelector.prototype={onRender:function(){this.generateLadderList();if(this.options.isMove){var D='<div class="ladder_bottom"><div id="'+this.id+'MoveBtns" class="ladder_move"><a href="#" onclick="return false;" class="ladder_btn_uf" title="맨위로">맨위로</a><a href="#" onclick="return false;" class="ladder_btn_u" title="위로">위로</a><a href="#" onclick="return false;" class="ladder_btn_d" title="아래로">아래로</a><a href="#" onclick="return false;" class="ladder_btn_df" title="맨아래로">맨아래로</a></div></div>';var C=new daum.Template(D).toElement();this.ladderEl.parentNode.appendChild(C)}if(this.options.isDrag){var B='<div id="'+this.id+'Drag" class="ladder_dragComponent"><ul></ul></div>';var A=new daum.Template(B).toElement();this.ladderEl.parentNode.appendChild(A);this.dragOffsetCoords=this.ladderEl.getCoords()}this.registerEventListener()},generateLadderList:function(){var A=getTemplateString("ladderSelector.jst",{id:this.id,itemList:this.options.dataList,isDisabled:this.options.isDisabled,isMove:this.options.isMove,isDrag:this.options.isDrag});this.ladderEl.innerHTML=A;this.updateDataElement()},updateDataElement:function(){var B=this;var A=0;$$("li",this.ladderEl).each(function(C){B.options.dataList[A].element=$E(C);A++})},updateDataList:function(){var A=this;this.options.dataList=[];$$("li",this.ladderEl).each(function(B){A.options.dataList.push({id:B.id,name:B.innerHTML,element:$E(B)})})},registerEventListener:function(){this.changeSelectable(false);daum.addEvent(this.ladderEl,"click",this.onClickListItem.bindAsEventListener(this));if(this.options.isDrag){daum.addEvent(this.ladderEl,"mousedown",this.onMouseDownListItem.bindAsEventListener(this));daum.addEvent(this.ladderEl,"mouseover",this.onMouseOverListItem.bindAsEventListener(this));daum.addEvent(this.ladderEl,"mousemove",this.onMouseMoveListItem.bind(this));daum.addEvent(document,"mouseup",this.onMouseUpListItem.bind(this))}if($(this.id+"MoveBtns")){daum.addEvent($(this.id+"MoveBtns"),"click",this.moveComponent.bind(this))}},onClickListItem:function(I){var H=I.ctrlKey;var E=I.shiftKey;var A=$E(daum.Event.getElement(I));var D={id:A.id,name:A.innerHTML,element:$E(A),index:0};if(typeof A!="undefined"&&A.tagName.toLowerCase()=="li"){if(A.className=="disabled"){return }else{if(!H&&!E){this.removeSelectedItem()}if(!E||this.selectedItems.length==0){var J=-1;var M=this.selectedItems.length;for(var F=0;F<M;F++){if(this.selectedItems[F].id==D.id){J=F;break}}if(J!=-1){this.selectedItems.splice(J,1);D.element.className="";this.lastItemId=null}else{var B=this.options.dataList.length;for(var F=0;F<B;F++){if(this.options.dataList[F].id==A.id){D.index=F;this.addSelectedItem(D)}}}this.lastItemId=D.id}else{this.removeSelectedItem();var K=false;var L=false;var G=this.options.dataList.length;for(var F=0;F<G;F++){var C=this.options.dataList[F];C.index=F;if(this.options.dataList[F].id==this.lastItemId){this.addSelectedItem(C);K=true;if(L){break}}else{if(K||L){this.addSelectedItem(C)}}if(this.options.dataList[F].id==D.id){if(K){break}else{L=true;this.addSelectedItem(C)}}}if(!this.lastItemId){this.lastItemId=D.id}}}}this.selectedItems.sort(this.componentSort)},componentSort:function(B,A){return B.index-A.index},addSelectedItem:function(A){this.selectedItems.push(A);A.element.className="selected"},removeSelectedItem:function(C){var A=this.selectedItems.length;for(var B=0;B<A;B++){this.selectedItems[B].element.className=""}this.selectedItems=[]},changeSelectable:function(A){if(daum.Browser.webkit){document.body.style.KhtmlUserSelect=A?"":"none"}else{if(daum.Browser.gecko){document.body.style.MozUserSelect=A?"":"none"}else{if(A){daum.Event.removeEvent(document,"selectstart",this.blockContent);daum.Event.removeEvent(document,"dragstart",this.blockContent)}else{daum.Event.addEvent(document,"selectstart",this.blockContent);daum.Event.addEvent(document,"dragstart",this.blockContent)}}}},blockContent:function(A){daum.Event.stopEvent(A)},onMouseDownListItem:function(B){var A=$E(daum.Event.getElement(B));if(A.tagName.toLowerCase()=="li"){this.move=false;A.style.backgroundColor="";this.downComponent={id:A.id,name:A.innerHTML,element:$E(A)};this.changeSelectable(false);var C=this.mouseCoords(B);this.oldPosY=C.y;this.dragEl.style.top=(C.y+10).px();this.posTop=this.ladderEl.getCoords(false).top;this.oPos=this.getMouseOffset(this.dragEl,C);window.DRAGGING=true}},onMouseOverListItem:function(B){daum.Event.stopEvent(B);var A=$E(daum.Event.getElement(B));if(A.tagName.toLowerCase()=="li"){this.overLi={id:A.id,name:A.innerHTML,element:$E(A)}}},onMouseOutListItem:function(B){var A=$E(daum.Event.getElement(B));if(A.tagName.toLowerCase()=="li"){}},onMouseMoveListItem:function(D){daum.Event.stopEvent(D);if(!window.DRAGGING){return }this.move=true;if(!this.dragInit){this.ladderEl.addClassName("ladder_move");for(var B=0;B<this.selectedItems.length;B++){var A=this.selectedItems[B];if(A.id==this.downComponent.id){this.listChk=true;break}}var H=this.dragEl.getFirstChild();if(this.listChk){for(var B=0;B<this.selectedItems.length;B++){var A=this.selectedItems[B];if(A.id==this.downComponent.id){this.downComponent.index=A.index}H.appendChild(A.element.cloneNode(true))}}else{for(var B=0;B<this.options.dataList.length;B++){if(this.options.dataList[B].id==this.downComponent.id){this.downComponent.index=B;break}}H.appendChild(this.downComponent.element.cloneNode(true))}this.dragInit=true;this.dragEl.show();this.oldOverLi=null;this.oldDirectChk=0}if(this.dragInit==true){var E=this.mouseCoords(D);this.direct=true;if(this.befMPosY&&(this.befMPosY<E.y)){this.direct=false}var C=this.overLi.element;var G=C.offsetTop+(this.dragOffsetCoords.top-this.ladderEl.scrollTop)+parseInt(C.offsetHeight/2);var F=0;if(!this.direct&&E.y>G){F=1}else{F=-1}if(!((this.oldOverLi&&this.oldOverLi.id==this.overLi.id)&&(F==this.oldDirectChk))&&F!=0){this.ghostIndex=-1;if(F==1){this.ladderEl.insertBefore(this.ghost,C.getNext())}else{if(F==-1){this.ladderEl.insertBefore(this.ghost,C)}}this.befMPosY=E.y;this.oldOverLi=this.overLi;this.oldDirectChk=F}this.setPosition(E)}},onMouseUpListItem:function(L){daum.Event.stopEvent(L);if(!window.DRAGGING){return }window.DRAGGING=false;this.ladderEl.removeClassName("ladder_move");if(this.dragInit&&this.ghost.parentNode.id==this.ladderEl.id){var D=this.startInd;if(!this.listChk&&this.overLi.id==this.downComponent.id){this.ghostIndex=-1}else{if(this.ghostIndex==0){var B=-1;var J=this.options.dataList.length;for(var H=this.startInd;H<J;H++){var M=this.options.dataList[H];if(M.id==this.overLi.id){B=H;break}}var E=null;for(var H=B+1;H<J;H++){var M=this.options.dataList[H];E=M}if(E&&E.id!=this.overLi.id){this.overLi=E;this.ladderEl.insertBefore(this.ghost,this.overLi.element.getNext())}}var P=$$("li",this.ladderEl);for(var H=this.startInd;H<P.length;H++){var O=$E(P[H]);if(this.listChk){if(O.className=="ladder_ghost"){this.ghostIndex=D;break}if(O.className.indexOf("selected")==-1){D++}}else{if(this.direct){if(D-1==this.downComponent.index){D--}}if(O.className=="ladder_ghost"){this.ghostIndex=D;break}D++}}}if(this.listChk){var J=this.options.dataList.length;var D=this.ghostIndex;if(D>(J-this.selectedItems.length)){D=this.ghostIndex-1}for(var H=this.selectedItems.length-1;H>=0;H--){var M=this.selectedItems[H];this.options.dataList.splice(M.index,1);this.selectedItems[H].index=H+D;this.ladderEl.insertBefore(M.element,this.ghost.nextSibling)}var I=this.options.dataList.length;if(this.ghostIndex>-1){var A=this.options.dataList.slice(0,this.ghostIndex);var G=this.options.dataList.slice(this.ghostIndex,I);this.options.dataList=A.concat(this.selectedItems).concat(G);if(J!=this.options.dataList.length){alert(J+":"+this.options.dataList.length+":"+this.ghostIndex+":"+A.length+":"+G.length)}}for(var H=0;H<I;H++){this.options.dataList[H].index=H}}else{if(this.ghostIndex!=-1){if(this.ghostIndex>-1){var F=-1;var N=this.ghost.getNext();for(var H=0,J=this.options.dataList.length;H<J;H++){if(this.options.dataList[H].id==this.downComponent.id){if(this.ghostIndex>H&&N){this.ghostIndex--}this.options.dataList.splice(this.ghostIndex,0,this.options.dataList.splice(H,1)[0]);break}}this.ladderEl.insertBefore(this.downComponent.element,N)}if(this.ghostIndex!=this.downComponent.index){var C=1;if(this.downComponent.kind=="2"&&this.downComponent.open=="N"){C=this.sortHideComponents(this.downComponent,this.ghostIndex);for(var H=this.ghostIndex+C,J=this.options.dataList.length;H<J;H++){var K=this.options.dataList[H];K.element.style.display="none"}}else{for(var H=this.ghostIndex;H>=0;H--){var K=this.options.dataList[H];if(K){if(K.open=="N"){this.downComponent.element.style.display="none"}break}}}if(C==0){C=1}for(var H=0,J=this.selectedItems.length;H<J;H++){var M=this.selectedItems[H];if(this.ghostIndex<=M.index&&this.downComponent.index>M.index){M.index+=C}else{if(this.ghostIndex>=M.index&&this.downComponent.index<M.index){M.index-=C}}}}this.downComponent=null}}this.dragEl.getFirstChild().innerHTML="";this.ladderEl.removeChild(this.ghost);this.dragEl.style.top=0;this.dragInit=false}this.oldIndex=this.ghostIndex;this.ghostIndex=-1;this.listChk=false;this.dragEl.hide()},mouseCoords:function(B){var C=document.documentElement;var A=document.body;return{x:B.pageX||B.clientX+(C.scrollLeft||A.scrollLeft)-(A.clientLeft||0),y:B.pageY||B.clientY+(C.scrollTop||A.scrollTop)-(A.clientTop||0)}},getMouseOffset:function(C,A){var B=this.getScrollCoords(C,this.ladderEl,true);return{x:A.x-B.left,y:A.y-B.top}},getScrollCoords:function(E,A,F){var B=E.getCoords(false);var A=A||document.documentElement||document.body;var D=A.scrollTop+(F?A.offsetTop:0);var C=A.scrollLeft+(F?A.offsetLeft:0);B.top-=D;B.left-=C;B.bottom-=D;B.right-=C;return B},setPosition:function(B){var A=B.y-this.dragOffsetCoords.top;this.dragEl.style.top=A+"px";this.dragEl.style.left=100+"px";this.dragEl.style.right="auto"},moveComponent:function(H){if(!H){return }if(this.selectedItems.length==0){return }var A=daum.Event.getElement(H);var G=this.options.dataList.length;var D=A.className.replace("ladder_btn_","");if(D.charAt(0)=="u"){var I=this.selectedItems[0];var F=I.index;if(F!=0&&G>1){if(D=="uf"){this.ladderEl.insertBefore(I.element,this.ladderEl.getFirstChild());this.options.dataList.splice(0,0,this.options.dataList.splice(F,1)[0]);I.index=0;this.ghostIndex=I.index;F=I.index;for(var E=1;E<this.selectedItems.length;E++){var I=this.selectedItems[E];if(F!=I.index+1){this.ladderEl.insertBefore(this.selectedItems[E].element,this.selectedItems[E-1].element.getNext());this.options.dataList.splice(F+1,0,this.options.dataList.splice(I.index,1)[0]);I.index=F+1}F=I.index}}else{for(var E=0;E<this.selectedItems.length;E++){var I=this.selectedItems[E];if(0<I.index){this.ladderEl.insertBefore(I.element,this.options.dataList[I.index-1].element);this.options.dataList.splice(I.index-1,0,this.options.dataList.splice(I.index,1)[0]);I.index--}}}}}else{var I=this.selectedItems[this.selectedItems.length-1];var B=I.index;var C=(this.options.dataList[0].id==this.options.firstRemain)?G>2:G>1;if(B!=this.options.dataList.length-1&&C){if(D=="df"){this.ladderEl.appendChild(I.element);this.options.dataList.splice(this.options.dataList.length,0,this.options.dataList.splice(B,1)[0]);I.index=this.options.dataList.length-1;this.ghostIndex=I.index;B=I.index;for(var E=this.selectedItems.length-2;E>=0;E--){var I=this.selectedItems[E];if(B!=I.index-1){this.ladderEl.insertBefore(this.selectedItems[E].element,this.selectedItems[E+1].element);this.options.dataList.splice(B-1,0,this.options.dataList.splice(I.index,1)[0]);I.index=B-1}B=I.index}}else{for(var E=this.selectedItems.length-1;E>=0;E--){var I=this.selectedItems[E];if(I.index-1<this.options.dataList.length){var J=I.index+2<this.options.dataList.length?this.options.dataList[I.index+2].element:null;this.ladderEl.insertBefore(I.element,J);this.options.dataList.splice(I.index+1,0,this.options.dataList.splice(I.index,1)[0]);I.index++}}}}}}};FavoriteListViewController={joinGroup:0,sort:null,asc:true,filter:null,filterTarget:null,page:1,cafeDetailInfo:{},detailOverElement:null,isUseLayerManager:false,isRequest:false,init:function(){this.myCafeInfoLayer=$E("myCafeInfoLayer");this.sendRequestList();this.registerEventListener()},sendRequestList:function(A,C,E,D,B,F){this.joinGroup=A||this.joinGroup;this.sort=C||this.sort;this.asc=E||this.asc;this.filter=D||this.filter;this.filterTarget=B||this.filterTarget;this.page=F||this.page;LoadingManager.showLoading("myFavoriteListViewer",60);MyCafeDAO.loadMyCafeList(this.joinGroup,this.sort,this.asc,this.filter,this.filterTarget,this.page,function(G){if(G){FavoriteListViewController.generateList(G);LoadingManager.hideLoading()}})},generateList:function(A){this.memberDetailInfo=A.myDetailCafeMbrList;$("myFavoriteListViewer").innerHTML=getTemplateString("myFavoriteList.jst",{cafeList:A.myCafeList,memberList:A.myDetailCafeMbrList});if(!this.isUseLayerManager){this.registLayerManager()}},registLayerManager:function(){if(typeof LayerManager=="undefined"){return }$$(".member",$("myFavoriteListViewer")).each(function(A){LayerManager.registLayer(A.id,A.hash.substr(1))});this.isUseLayerManager=true},registerEventListener:function(){daum.Event.addEvent($("myFavoriteListViewer"),"click",this.onClickListViewer.bindAsEventListener(this));daum.Event.addEvent($("myFavoriteListViewer"),"mouseover",this.onMouseoverListViewer.bindAsEventListener(this));daum.Event.addEvent($("myFavoriteListViewer"),"mouseout",this.onMouseoutListViewer.bindAsEventListener(this))},onClickListViewer:function(C){var B=daum.Event.getElement(C);if(B){var A=B.tagName.toLowerCase();if(A=="a"&&B.hash){daum.Event.stopEvent(C);var D=B.hash.substr(1);if(B.className.indexOf("cafename")>-1){window.open(B.href.replace(B.hash,""))}else{if(B.className.indexOf("friendsname")>-1){window.open(B.href.replace(B.hash,""))}else{if(B.className.indexOf("member")>-1){this.showMemberLayer(D)}else{if(B.className.indexOf("withdraw")>-1){this.withdrawCafe(D)}}}}}}},showMemberLayer:function(B){var A=$E(B);if(A.visible()){A.hide()}else{A.show()}},onMouseoverListViewer:function(C){daum.Event.stopEvent(C);var B=daum.Event.getElement(C);if(B&&B.tagName.toLowerCase()=="a"&&B.className=="cafename"){this.detailOverElement=B;var A=B.hash.replace("#","");this.currentCafeInfoEl=B;setTimeout(function(){if(FavoriteListViewController.detailOverElement==B){FavoriteListViewController.getCafeDetailInfo(A)}},500)}},onMouseoutListViewer:function(A){daum.Event.stopEvent(A);this.detailOverElement=null;this.myCafeInfoLayer.hide()},getCafeDetailInfo:function(A){if(typeof this.cafeDetailInfo[A]=="undefined"){MyCafeDAO.loadDetailCafeInfo(A,function(B){if(B){FavoriteListViewController.cafeDetailInfo[A]=B;FavoriteListViewController.showCafeLayer(B)}else{alert("카페 정보가 없습니다.")}})}else{this.showCafeLayer(this.cafeDetailInfo[A])}},showCafeLayer:function(C){var B=[];var A=(C.openYn=="true")?"공개":"비공개";B.push("<h5>"+C.grpname+"</h5>");B.push("<p>"+C.rankName+" ("+A+')<span class="bar">|</span>개설일 '+C.regdt+'<span class="bar">|</span>회원수 '+C.totmbr+"<br />");B.push('오늘새글 <span class="point">'+C.newArticleCount+"</span>");if(C.visitCount>0){B.push('<span class="bar">|</span>오늘방문  <span class="point">'+C.visitCount+"</span>")}B.push("</p>");this.myCafeInfoLayer.innerHTML=B.join("");var D=daum.Element.getCoords(this.currentCafeInfoEl,true);this.myCafeInfoLayer.setTop(D.top+15);this.myCafeInfoLayer.setLeft(D.left);this.myCafeInfoLayer.show()},withdrawCafe:function(A){if(this.isRequest){return }this.isRequest=true;var B=A.split("|");if(confirm("'"+B[1]+"' 카페를 탈퇴하시겠습니까?")){MyCafeDAO.withdrawCafe(B[0],function(C){switch(C){case"success":FavoriteListViewController.sendRequestList();break;case"not member":alert("해당 카페의 회원이 아닙니다.");break;case"today join":alert("오늘 가입한 카페는 탈퇴가 불가능 합니다.");break;case"founder":alert("카페지기는 탈퇴가 불가능 합니다.");break;case"remain sms period":alert("SMS 결제 기간이 남아있습니다.");break;case"fail":alert("카페 탈퇴에 실패하였습니다.");break}FavoriteListViewController.isRequest=false})}else{this.isRequest=false}}};MyVisitListViewController={page:1,countPerPage:10,visitData:null,isListComplete:false,init:function(){this.sendRequestList();this.registerEventListener()},sendRequestList:function(A){this.page=A||this.page;MyCafeDAO.loadVisitCafeList(function(B){if(B){MyVisitListViewController.generateList(B)}});this.visitCount=$("visitCount")},generateList:function(F){if(typeof F!="undefined"){this.visitData=F}this.visitCount.innerHTML=this.visitData.length;this.changeAllDeleteBtnClassName(this.visitData.length);var D=Math.floor((this.visitData.length+this.countPerPage-1)/this.countPerPage);if(D==0){D=1}var B={};B.prevPageEnable=!!(this.page-1);B.nextPageEnable=!(D==this.page);B.lastPage=(D==0)?1:D;var G=[];var A=this.countPerPage*(this.page-1);var E=A+this.countPerPage;if(this.visitData.length>0){for(var C=A;C<E;C++){if(typeof this.visitData[C]!="undefined"){G.push(this.visitData[C])}}}$("myVisitListViewer").innerHTML=getTemplateString("myVisitList.jst",{visitList:G});$("myVisitPagingViewer").innerHTML=getTemplateString("prevNextBtnPaging.jst",{nextPageEnable:B.nextPageEnable,prevPageEnable:B.prevPageEnable,page:this.page,lastPage:B.lastPage})},registerEventListener:function(){daum.Event.addEvent($("myVisitPagingViewer"),"click",this.onClickPageViewer.bindAsEventListener(this));daum.Event.addEvent($("myVisitListViewer"),"click",this.onClickListViewer.bindAsEventListener(this));var A=$$(".control_box",$("myVisitViewer"))[0];if(A!=null){daum.Event.addEvent(A,"click",this.onClickAllDeleteBtn.bindAsEventListener(this))}},displayListViewer:function(A){if(typeof A=="undefined"){return }(A=="show")?$E("myVisitViewer").show():$E("myVisitViewer").hide();if(!this.isListComplete){this.init();this.isListComplete=true}},onClickPageViewer:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"&&A.className.indexOf("_btn_enable")>-1){if(A.className=="prev_btn_enable"){this.page--}else{if(A.className=="next_btn_enable"){this.page++}}this.generateList()}},onClickListViewer:function(C){daum.Event.stopEvent(C);var A=daum.Event.getElement(C);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"&&A.className.indexOf("delete_visitcafe")>-1){var B=A.hash.substr(1);if(B!=null){MyCafeDAO.deleteVisitCafe(B,function(D){MyVisitListViewController.sendRequestList()})}}else{if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"){window.open(A.href)}}},onClickAllDeleteBtn:function(C){daum.Event.stopEvent(C);var A=daum.Event.getElement(C);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"){var B=$("visitCount").firstChild.nodeValue;if(parseInt(B,10)<1){return }if(!confirm("최근 방문한 카페 기록을 모두 삭제 하시겠습니까?")){return }MyCafeDAO.deleteVisitCafeList(function(D){MyVisitListViewController.sendRequestList()})}},changeAllDeleteBtnClassName:function(A){var B=$$(".control_box > a",$("myVisitViewer"));if(B[0]!=null){if(A=="0"){B[0].className="delete_all_disable"}else{B[0].className="delete_all_enable"}}}};LayerManager={arrLayers:[],isCloseArea:false,beforeLayerOwnerIdArr:[],registLayer:function(D,G,A,B){var B=B||false;var C=$(D);var F=$(G);if(!C||!F){daum.sp.error("owner or target is not exist... so LayerManager's registLayer Func is not worked ",this);return }if(!F.id){F.id=C.id+"_layer"}var E=this.indexOfOwner(C.id);if(E==-1){this.arrLayers.push({owner:C.id,target:F.id,callback:A,singleClass:B})}else{this.arrLayers[E]={owner:C.id,target:F.id,callback:A,singleClass:B}}if(!this.isCloseArea){daum.Event.addEvent(document,"mousedown",this.controlLayer.bindAsEventListener(this));this.isCloseArea=true}},controlLayer:function(G){var A=daum.Event.getElement(G);var H=this.getOwnerIndex(A);if(this.beforeLayerOwnerIdArr.length>0){if(H!=-1){var C=this.arrLayers[H].owner;var F=-1;for(var D=0;D<this.beforeLayerOwnerIdArr.length;D++){if(C==this.beforeLayerOwnerIdArr[D]){F=D;break}}if(F==-1){var I=0;for(var D=this.beforeLayerOwnerIdArr.length;D>0;--D){var B=this.arrLayers[this.indexOfOwner(this.beforeLayerOwnerIdArr[D-1])].target;if($(C).parentNode){var E=$(C).parentNode;while(E){if($(E).tagName=="BODY"){break}if(E.id&&(E.id==B)){I=D;break}E=E.parentNode}}if(I!=0){break}}this.checkHideLayer(I)}else{if(F==this.beforeLayerOwnerIdArr.length-1){return }else{this.checkHideLayer(F+1);return }}}else{this.checkHideLayer(0);return }}if(H!=-1){this.addOpenLayer(this.arrLayers[H].owner)}},addOpenLayer:function(A){if(this.beforeLayerOwnerIdArr[this.beforeLayerOwnerIdArr.length]!=A){this.beforeLayerOwnerIdArr.push(A)}},getOwnerIndex:function(B){var C=B;while(C){if(C.tagName==""||C.tagName=="BODY"){return -1}var A=this.indexOfOwner(C.id);var E=this.indexOfTarget(C.id);if(A!=-1){return A}if(E!=-1){if(this.arrLayers[E].singleClass){var F=this.arrLayers[E].singleClass.viewerEl;var D=this.indexOfTargetArr(C.id);if(D[$(F).id]||D[$(F).id]>-1){return D[$(F).id]}}else{return E}}if(C.parentNode){C=C.parentNode}else{break}}return -1},checkHideLayer:function(A){while(this.beforeLayerOwnerIdArr.length>A){var B=this.beforeLayerOwnerIdArr.pop();if(B){this.hideOneLayer(this.indexOfOwner(B))}}},hideOneLayer:function(A){if(typeof this.arrLayers[A].callback=="function"){this.arrLayers[A].callback.call()}else{if($E(this.arrLayers[A].target)){$E(this.arrLayers[A].target).hide()}}},exist:function(A){return this.indexOfLayers("target",A)!=-1},existOwner:function(A){return this.indexOfLayers("owner",A)!=-1},indexOf:function(A){return this.indexOfLayers("target",A)},indexOfOwner:function(A){return this.indexOfLayers("owner",A)},indexOfTarget:function(A){return this.indexOfLayers("target",A)},indexOfTargetArr:function(D){var C=new Object();for(var B=0,A=this.arrLayers.length;B<A;B++){if(this.arrLayers[B].target==D){C[this.arrLayers[B].owner]=B}}return C},indexOfLayers:function(C,B){for(var A=0;A<this.arrLayers.length;A++){if(this.arrLayers[A][C]==B){return A}}return -1},clearArrLayers:function(){this.arrLayers=[];this.beforeLayerOwnerIdArr=[]},release:function(){this.clearArrLayers()}};MyRecentListViewController={grpcode:null,page:1,countPerPage:10,recentData:null,init:function(){var A=$("selectMyCafeList").value;if(A=="none"){var B={myRecentList:[]};this.generateList(B)}else{this.sendRequestList(A,true);this.registerEventListener()}},sendRequestList:function(B,A){$("selectMyCafeList").disabled=true;this.grpcode=B||this.grpcode;A=A||false;if(!A){LoadingManager.showLoading("myRecentListViewer")}MyCafeDAO.loadRecentBbsList(this.grpcode,function(C){if(C){MyRecentListViewController.generateList(C);if(!A){LoadingManager.hideLoading()}}})},generateList:function(G){if(typeof G!="undefined"){this.recentData=G.myRecentList}var D=Math.floor((this.recentData.length+this.countPerPage-1)/this.countPerPage);if(D==0){D=1}var B={};B.prevPageEnable=!!(this.page-1);B.nextPageEnable=!(D==this.page);B.lastPage=(D==0)?1:D;var A=this.countPerPage*(this.page-1);var E=A+this.countPerPage;var F=[];if(this.recentData.length>0){for(var C=A;C<E;C++){if(typeof this.recentData[C]!="undefined"){F.push(this.recentData[C])}}}$("myRecentListViewer").innerHTML=getTemplateString("myRecentList.jst",{recentList:F});$("myRecentPagingViewer").innerHTML=getTemplateString("prevNextBtnPaging.jst",{nextPageEnable:B.nextPageEnable,prevPageEnable:B.prevPageEnable,page:this.page,lastPage:B.lastPage});$("selectMyCafeList").disabled=false},registerEventListener:function(){daum.Event.addEvent($("selectMyCafeList"),"change",this.onChangeMyCafe.bindAsEventListener(this));daum.Event.addEvent($("myRecentPagingViewer"),"click",this.onClickPageViewer.bindAsEventListener(this))},onChangeMyCafe:function(){var A=$("selectMyCafeList").value;if(typeof A=="undefined"||A==""){return }this.page=1;this.sendRequestList(A)},onClickPageViewer:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"&&A.className.indexOf("_btn_enable")>-1){if(A.className=="prev_btn_enable"){this.page--}else{if(A.className=="next_btn_enable"){this.page++}}this.generateList()}}};MyCafeController={currentAlimiTab:"",init:function(){this.registerEventListener()},registerEventListener:function(){daum.Event.addEvent($("myAlimiTab"),"click",this.onClickAlimiTab.bindAsEventListener(this))},onClickAlimiTab:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"){if(A.id=="alimiTab"){this.showAlimi()}else{if(A.id=="visitTab"){this.showVisit()}else{if(A.id=="gameTab"){this.showGame()}}}}},showAlimi:function(){if(this.currentAlimiTab=="alimi"){return }this.currentAlimiTab="alimi";$("alimiTab").className="activeAlimi";$("visitTab").className="inactiveVisit";$("gameTab").className="inactiveGame";MyAlimiListViewController.displayListViewer("show","load");MyVisitListViewController.displayListViewer("hide");GameListViewController.displayListViewer("hide")},showVisit:function(){if(this.currentAlimiTab=="visit"){return }this.currentAlimiTab="visit";$("alimiTab").className="inactiveAlimi";$("visitTab").className="activeVisit";$("gameTab").className="inactiveGame";MyAlimiListViewController.displayListViewer("hide");MyVisitListViewController.displayListViewer("show","load");GameListViewController.displayListViewer("hide")},showGame:function(){if(this.currentAlimiTab=="game"){return }this.currentAlimiTab="game";$("alimiTab").className="inactiveAlimi";$("visitTab").className="inactiveVisit";$("gameTab").className="activeGame";MyAlimiListViewController.displayListViewer("hide");MyVisitListViewController.displayListViewer("hide");GameListViewController.displayListViewer("show","load")}};MyAlimiListViewController={page:1,filter:null,countPerPage:10,currentFilterEl:"totalFilter",afterDelete:false,isListComplete:false,init:function(){this.sendRequestList(this.page,this.filter,this.countPerPage,false,true);this.registerEventListener()},sendRequestList:function(E,B,D,C,A){this.page=E||this.page;this.filter=B||this.filter;this.countPerPage=D||this.countPerPage;this.afterDelete=(C)?C:false;A=A||false;if(!A){LoadingManager.showLoading("myAlimiListViewer")}MyCafeDAO.loadCafeAlimiList(this.page,this.filter,this.countPerPage,this.afterDelete,function(F){if(F){MyAlimiListViewController.generateListCount(F.cntByGroup);MyAlimiListViewController.generateList(F);if(!A){LoadingManager.hideLoading()}}})},generateList:function(A){$("myAlimiListViewer").innerHTML=getTemplateString("myAlimiList.jst",{alimiList:A.alims});$("myAlimiPagingViewer").innerHTML=getTemplateString("prevNextBtnPaging.jst",{nextPageEnable:A.existNextPage,prevPageEnable:A.existPrevPage,page:A.page,lastPage:A.lastPage})},generateListCount:function(C){var A=[{key:"alimiTotal",value:(C.TOTAL)?C.TOTAL:0},{key:"alimiJoin",value:(C.JOIN)?C.JOIN:0},{key:"alimiRoleup",value:(C.ROLEUP)?C.ROLEUP:0},{key:"alimiComment",value:(C.COMMENT)?C.COMMENT:0},{key:"alimiReply",value:(C.REPLY)?C.REPLY:0},{key:"alimiQaReply",value:(C.QAREPLY)?C.QAREPLY:0},{key:"alimiAdoption",value:(C.ADOPTION)?C.ADOPTION:0},{key:"alimiScrap",value:(C.SCRAP)?C.SCRAP:0}];for(var B=0;B<A.length;B++){$(A[B].key).innerHTML=A[B].value}},registerEventListener:function(){daum.Event.addEvent($("myAlimiFilters"),"click",this.onclickApplyFilter.bindAsEventListener(this));daum.Event.addEvent($("myAlimiListViewer"),"click",this.onclickAlimiList.bindAsEventListener(this));daum.Event.addEvent($("myAlimiPagingViewer"),"click",this.onClickPageViewer.bindAsEventListener(this))},onclickApplyFilter:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&(A.tagName.toLowerCase()=="a"||A.tagName.toLowerCase()=="strong")){if(A.tagName.toLowerCase()=="strong"){A=A.parentNode}this.filter=A.hash.substr(1);if(this.currentFilterEl){$(this.currentFilterEl).className=""}this.currentFilterEl=A;this.currentFilterEl.className="selected";this.sendRequestList(1)}},onclickAlimiList:function(C){daum.Event.stopEvent(C);var B=daum.Event.getElement(C);if(typeof B!="undefined"&&(B.tagName.toLowerCase()=="a"||B.tagName.toLowerCase()=="span")){if(B.tagName.toLowerCase()=="span"){B=B.parentNode}if(B.className.indexOf("delete_alimi")>-1){var A=B.hash.substr(1).split("|");this.deleteAlimi(A)}else{if(B.className.indexOf("cafe_link")>-1){window.open(B.href)}}}},deleteAlimi:function(A){if(A.length==4){MyCafeDAO.deleteCafeAlimi(A[0],A[1],A[2],A[3],function(B){MyAlimiListViewController.sendRequestList(this.page,this.filter,this.countPerPage,true)})}},onClickPageViewer:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"&&A.className.indexOf("_btn_enable")>-1){if(A.className=="prev_btn_enable"){this.page--}else{if(A.className=="next_btn_enable"){this.page++}}this.sendRequestList()}},displayListViewer:function(A,B){if(typeof A=="undefined"){return }(A=="show")?$E("myAlimiViewer").show():$E("myAlimiViewer").hide();if(!this.isListComplete&&B=="load"){this.init();this.isListComplete=true}}};GroupListManager=function(B,A){if(B==undefined){alert("카페 그룹 관리가 생성 될 위치를 지정하셔야 합니다.");return }this.targetId=B;this.targetDiv=$(this.targetId);this.listUl={};this.moveDiv={};this.actionDiv={};this.groupNameInputTxt={};this.selected=null;this.beforeGroupName=null;this.groups=[];this.timer=null;this.groupNameInputSize=0;this.modifyDispordData=[];this.modifyNameData=[];this.addGroupData=[];this.delGroupData=[];this.options={maxGroupCount:10,maxGroupNameLength:10,data:null,groupCount:0};daum.extend(this.options,A,true);this.validator();this.init()};GroupListManager.prototype={validator:function(){if(!this.options.data){alert("카페 그룹 데이터가 없습니다.");return }},init:function(){this.targetDiv.innerHTML='<div class="button_div"><div class="move_div"></div><div class="action_div"></div></div><ul></ul><div class="main_div">그룹명<input type="text"/><span><span class="name_size">0</span> /'+this.options.maxGroupNameLength+"자</span></div>";this.groupNameInputTxt=$$("input",this.targetDiv)[0];this.groupNameInputSize=$C(this.targetDiv,"name_size")[0];this.listUl=$$("ul",this.targetDiv)[0];if(this.options.data.length<=this.options.maxGroupCount){for(var A=0;A<this.options.data.length;A++){var B=document.createElement("LI");this.listUl.appendChild(B);B.setAttribute("groupOrder",this.options.data[A].groupOrder);B.setAttribute("groupId",this.options.data[A].groupId);B.appendChild(document.createTextNode(this.options.data[A].groupName));this.options.groupCount++}}else{alert("최대 그룹 갯수를 초과 하였습니다.");return }this.groups=$$("li",this.listUl);this.moveDiv=$C(this.targetDiv,"move_div")[0];this.moveDiv.innerHTML='<a class="top_btn">맨위</a><a class="up_btn">위</a><a class="down_btn">아래</a><a class="bottom_btn">맨아래</a>';this.actionDiv=$C(this.targetDiv,"action_div")[0];this.actionDiv.innerHTML='<a class="add_btn">그룹추가</a><a class="del_btn">삭제</a>';this.initEvent()},initEvent:function(){for(var B=0;B<this.groups.length;B++){daum.addEvent(this.groups[B],"click",this.selectGroup.bind(this));daum.addEvent(this.groups[B],"dblclick",this.onclickChangeInputBox.bind(this))}var C=$$("a",this.actionDiv);daum.addEvent(C[0],"click",this.insertGroup.bind(this));daum.addEvent(C[1],"click",this.deleteGroup.bind(this));var D=$$("a",this.moveDiv);var A=["top","up","down","bottom"];for(var B=0;B<D.length;B++){daum.addEvent(D[B],"click",this.moveComponent.bind(this,A[B]))}daum.addEvent(this.groupNameInputTxt,"focus",this.modifyGroupName.bind(this));daum.addEvent(this.groupNameInputTxt,"blur",this.clearTimerInterval.bind(this));if(typeof this.options.saveBtnElement!="undefined"){daum.addEvent(this.options.saveBtnElement,"click",this.makeGroupListData.bind(this))}},selectGroup:function(C){daum.Event.stopEvent(C);var B=daum.getElement(C);var E=B.tagName.toLowerCase();var D=$$("input",this.listUl);var A="";if(this.selected===null&&E=="li"){this.selected=B}else{if(this.selected!==null&&E=="li"){this.selected.className=""}}if(D.length>0&&E!="input"){this.setInputBoxToListLi(D[0])}if(E=="li"){this.selected=B;this.selected.className="on";this.beforeGroupName=this.selected.firstChild.nodeValue;var F=this.selected.firstChild.nodeValue;this.groupNameInputTxt.value=F;this.focusElement(this.groupNameInputTxt)}},setInputBoxToListLi:function(B){var A=B.parentNode;var C=daum.Element.getNext(B);var D=B.value;daum.removeEvent(B,"focus",this.modifyGroupName);daum.removeEvent(B,"blur",this.clearTimerInterval);daum.removeEvent(B,"keyup",this.stopInsertGroupName);A.removeChild(B);A.removeChild(C);B=null;C=null;A.appendChild(document.createTextNode(this.removeTag(D)))},insertGroup:function(){if(this.options.groupCount>=this.options.maxGroupCount){alert("그룹은 최대 10개까지 만들 수 있습니다");return }var B=$$("input",this.listUl);if(B.length>0){this.setInputBoxToListLi(B[0])}var C="새그룹";var A=document.createElement("LI");this.listUl.appendChild(A);A.innerHTML=C;daum.addEvent(A,"click",this.selectGroup.bind(this));daum.addEvent(A,"dblclick",this.onclickChangeInputBox.bind(this));if(this.selected!=null){this.selected.className=""}this.selected=A;this.selected.className="on";this.selected.setAttribute("status","add");this.groupNameInputTxt.value=C;this.beforeGroupName=C;this.options.groupCount++;this.appendInputBox(A);this.moveAutoScroll(A)},onclickChangeInputBox:function(B){daum.Event.stopEvent(B);var A=daum.getElement(B);this.appendInputBox(A)},appendInputBox:function(B){if(B.tagName.toLowerCase()=="li"){var E=B.firstChild.nodeValue;var D=$$("input",this.listUl);if(D.length==0){var A=document.createElement("input");var C=document.createElement("div");B.innerHTML="";B.appendChild(A);B.appendChild(C);A.type="text";A.value=E;daum.addEvent(A,"focus",this.modifyGroupName.bind(this));daum.addEvent(A,"blur",this.clearTimerInterval.bind(this));daum.addEvent(A,"keyup",this.stopInsertGroupName.bind(this));C.innerHTML="그룹명을 입력해주세요.";C.className="noti_box";this.focusElement(A)}else{if(D.length>0){this.setInputBoxToListLi(D[0])}}}},deleteGroup:function(){if(this.selected==null){alert("삭제 할 그룹을 선택해주세요.");return }if(this.selected.getAttribute("groupId")=="1"){alert("기본 그룹은 삭제할 수 없습니다.");return }if(confirm(this.selected.innerHTML+" 그룹을 정말 삭제하시겠습니까?\n삭제시 해당 그룹의 카페는 모두 기본 그룹으로 이동됩니다.")){daum.removeEvent(this.selected,"click",this.selectGroup);this.listUl.removeChild(this.selected);var A=this.selected.getAttribute("status");if(A!="add"){var B=this.selected.getAttribute("groupId");this.delGroupData.push({joinGrpid:B})}this.options.groupCount--;this.selected=null;this.groupNameInputTxt.value=""}},moveComponent:function(A){if(this.selected==null){alert("이동 할 그룹을 선택해주세요.");return }else{if(this.selected.getAttribute("groupId")=="1"){alert("기본 그룹은 이동할 수 없습니다.");return }}if(A=="top"&&this.selected!=this.listUl.firstChild){try{this.listUl.insertBefore(this.selected,daum.getNext(this.listUl.firstChild))}catch(B){return }}else{if(A=="bottom"&&this.selected!=this.listUl.lastChild){try{this.listUl.appendChild(this.selected)}catch(B){return }}else{if(A=="up"&&this.selected!=daum.getNext(this.listUl.firstChild)){try{this.listUl.insertBefore(this.selected,daum.getPrev(this.selected))}catch(B){return }}else{if(A=="down"&&this.selected!=this.listUl.lastChild){try{this.listUl.insertBefore(daum.getNext(this.selected),this.selected)}catch(B){return }}}}}this.moveAutoScroll(this.selected)},modifyGroupName:function(D){var B=this;var C=this.getInputItem(D);var A=C.parentNode;if(this.selected!==null){this.timer=setInterval(function(){var H=(C===B.groupNameInputTxt)?B.selected.firstChild.nodeValue:B.groupNameInputTxt.value;var I=C.value.trim();var G=true;B.groupNameInputSize.innerHTML=B.getNameLength(I);G=B.validateGroupName(I);if(G!=true){var F=F=B.removeTag(H);if(C===B.groupNameInputTxt){C.value=F;this.focusElement(C)}else{A.innerHTML="";A.appendChild(document.createTextNode(F))}B.groupNameInputSize.innerHTML=B.getNameLength(H)}else{if(C===B.groupNameInputTxt){B.selected.firstChild.nodeValue=I}else{B.groupNameInputTxt.value=I}var E=B.selected.getAttribute("status");if(E!="add"){B.selected.setAttribute("status","mod")}}},100)}},stopInsertGroupName:function(A){if(A.keyCode==13){this.clearTimerInterval(A)}},clearTimerInterval:function(B){var A=this.getInputItem(B);this.validateGroupNameLength(A);if(A.value.trim().length>0&&this.selected!=null){if(A!==this.groupNameInputTxt){this.setInputBoxToListLi(A)}}clearInterval(this.timer)},removeTag:function(A){return A.replace(/<[^>]+>|\\|'|"/g,"")},getLiIndex:function(A){var C=$$("li",this.listUl);for(var B=0;B<C.length;B++){if(A===C[B]){return B}}},moveAutoScroll:function(A){var B=this.getLiIndex(A);if(B<6){this.listUl.scrollTop=(B*4)}else{this.listUl.scrollTop=((B-4)*23)}},getNameLength:function(D){var A="";var C=0;for(var B=0;B<D.length;B++){A=D.charAt(B);C+=A.byteLength()}return C/2},validateGroupName:function(C){var A=true;var B=this.getNameLength(C);if(B<=this.options.maxGroupNameLength){if(/'|"/.test(C)){alert("' 또는 \" 를 그룹 이름에 사용하실 수 없습니다. 다시 입력해주세요.");A=false}else{if(/<|>/.test(C)){alert("< 또는 > 를 그룹 이름에 사용하실 수 없습니다. 다시 입력해주세요.");A=false}else{if(/\\/.test(C)){alert("\\ 를 그룹 이름에 사용하실 수 없습니다. 다시 입력해주세요.");A=false}}}}else{alert("그룹 이름은 "+this.options.maxGroupNameLength+"자까지만 입력하실 수 있습니다");A=false}return A},getInputItem:function(D){var C=daum.getElement(D);var A=C.parentNode.className.toLowerCase();var B={};if(A=="main_div"){B=this.groupNameInputTxt}else{if(A=="on"){B=C}}return B},validateGroupNameLength:function(A){if(A.value.trim().length==0&&this.selected!=null){alert("그룹 이름이 비었습니다. 입력해주세요.");this.groupNameInputTxt.value=this.beforeGroupName;if(A===this.groupNameInputTxt){this.selected.innerHTML=this.beforeGroupName}else{A.value=this.beforeGroupName}if(this.selected.getAttribute("status")!="add"){this.selected.setAttribute("status","")}}},makeGroupListData:function(){var A=$$("li",this.listUl);for(var E=0;E<A.length;E++){var B=A[E].getAttribute("status");var C=A[E].getAttribute("groupId");var D=A[E].getAttribute("groupOrder");var F=A[E].firstChild.nodeValue;if(C==null&&B=="add"){this.addGroupData.push({joinGrpname:A[E].firstChild.nodeValue,dispord:E+1})}else{if(C!=null&&B=="mod"){this.modifyNameData.push({joinGrpid:parseInt(C,10),joinGrpname:F})}}if(C!=null&&D!=E+1){this.modifyDispordData.push({joinGrpid:parseInt(C,10),dispord:E+1})}}if(typeof this.options.saveCallback=="function"){this.options.saveCallback(this.modifyDispordData,this.modifyNameData,this.addGroupData,this.delGroupData)}},focusElement:function(B){var A=B.value;B.focus();B.value="";B.value=A;B.focus()}};LoadingManager={isInit:false,init:function(A){this.locTop=A;this.loadingLayer=$E("loadingLayer");this.shortLoading=$E("shortLoading");var B={allowscriptaccess:"always",quality:"high",loop:"false",menu:"false",wmode:"opaque",swliveconnect:"true"};daum.showFlash("http://cafeimg.daum-img.net/cf_img3/bbs/loding03.swf?version=10",16,16,"loadingFlash");this.isInit=true},showLoading:function(E,C){if(!this.isInit){this.init()}this.el=(typeof E!="undefined")?$E(E):$E(document.documentElement);var B=(this.el.offsetWidth/2)-(144/2);var A=(typeof C!="undefined")?C:(this.el.offsetHeight/2)-(44/2);var D=this.el.getCoords(false);this.loadingLayer.style.left=(B+D.left).px();this.loadingLayer.style.top=(A+D.top).px();this.loadingLayer.show()},hideLoading:function(){this.loadingLayer.hide()}};ClientErrorHandler=function(){};ClientErrorHandler.prototype={handleError:function(C,B,A){return ClientErrorHandler.handlers.defaultErrorHandler(C,B,A)},install:function(){window.onerror=this.handleError}};ClientErrorHandler.handlers={defaultErrorHandler:function(C,B,A){console.debug("클라이언트 오류입니다. \n오류 원인 : "+C,",\n주소 : "+B,"\n줄수 : "+A);return false}};ServerErrorHandler=function(){};ServerErrorHandler.prototype={handleError:function(A,B){if(B.code=="LOGIN_REQUIRED_ERROR"){errorHandler=ServerErrorHandler.handlers.loginErrorHandler}else{errorHandler=ServerErrorHandler.handlers.defaultErrorHandler}errorHandler(A,B)},install:function(){if(!dwr||!dwr.engine){throw"cannot find 'dwr' object. 'dwrEngine.js' required."}dwr.engine.setErrorHandler(this.handleError)}};ServerErrorHandler.handlers={loginErrorHandler:function(B,C){var A=encodeURIComponent(window.location.href);window.location.href="http://login.daum.net/accounts/loginform.do?daumauth=1&category=cafe&url="+A},defaultErrorHandler:function(A,B){if(!B||(!B.stackTrace&&(B.name||"").indexOf("dwr")<0)){new ClientErrorHandler().handleError(A,B.fileName,B.lineNumber)}else{alert(B.message)}}};function dispose(){try{dwr.engine.setErrorHandler(function(){});window.onerror=null;if(LayerManager){LayerManager.release()}}catch(A){}}TableSort=function(A){this.sortStore=A.sortStore;this.sortCallback=A.sortCallback;this.onRender()};TableSort.prototype={onRender:function(){if(!this.sortStore){return }var A=this.sortStore.length;for(var C=0;C<A;C++){var B=document.createElement("span");B.innerHTML=(this.sortStore[C].sortValue=="desc")?"▼":"▲";B.id=this.sortStore[C].sortEl+"_arrow";B.className="sort_arrow";this.sortStore[C].sortArrowEl=B;$(this.sortStore[C].sortEl).className="sort_button";$(this.sortStore[C].sortEl).appendChild(this.sortStore[C].sortArrowEl);this.sortStore[C].sortValue=this.sortStore[C].sortValue;daum.Event.addEvent($(this.sortStore[C].sortEl),"click",this.executeSort.bind(this,C))}},executeSort:function(B){var A=this.sortStore[B];if(A.sortValue=="desc"){A.sortValue="asc";A.sortArrowEl.innerHTML="▲"}else{A.sortValue="desc";A.sortArrowEl.innerHTML="▼"}this.sortCallback(A.sortType,A.sortValue.toString());this.sortReset(B)},sortReset:function(C){var A=this.sortStore.length;for(var B=0;B<A;B++){if(B==C){continue}this.sortStore[B].sortValue="desc";this.sortStore[B].sortArrowEl.innerHTML="▼"}}};GameListViewController={page:1,countPerPage:10,gameData:null,isListComplete:false,init:function(){this.sendRequestList()},sendRequestList:function(A){this.page=A||this.page;dwr.engine.beginBatch();WIMyGameAct.getGameRequestBoxList(6,function(B){if(B){GameListViewController.generateList(B)}});WIMyGameAct.getGameRequestBoxCount(function(B){$("gameCount").innerHTML=B});dwr.engine.endBatch()},generateList:function(G){if(typeof G!="undefined"){this.gameData=G}var E=Math.floor((this.gameData.length+this.countPerPage-1)/this.countPerPage);if(E==0){E=1}var B={};B.prevPageEnable=!!(this.page-1);B.nextPageEnable=!(E==this.page);B.lastPage=(E==0)?1:E;var C=[];var A=this.countPerPage*(this.page-1);var F=A+this.countPerPage;if(!!this.gameData.requestList&&this.gameData.requestList.length>0){for(var D=A;D<F;D++){var G=this.gameData.requestList[D];if(G){C.push(G)}}}$("gameListViewer").innerHTML=getTemplateString("gameActList.jst",{gameList:C})},displayListViewer:function(A,B){if(typeof A=="undefined"){return }(A=="show")?$E("gameViewer").show():$E("gameViewer").hide();if(!this.isListComplete&&B=="load"){this.init();this.isListComplete=true}},onClickPageViewer:function(B){daum.Event.stopEvent(B);var A=daum.Event.getElement(B);if(typeof A!="undefined"&&A.tagName.toLowerCase()=="a"&&A.className.indexOf("_btn_enable")>-1){if(A.className=="prev_btn_enable"){this.page--}else{if(A.className=="next_btn_enable"){this.page++}}this.generateList()}}};MyCafeDAO={loadMyCafeList:function(A,D,F,E,C,G,B){WIMyCafeList.getMyCafeList(A,D,F,E,C,G,{callback:function(H){B(H)}})},loadDetailCafeInfo:function(B,A){WIMyCafeList.getDetailCafeInfo(B,{callback:function(C){A(C)}})},loadFavoriteCafeCount:function(A){WIMyCafeList.getFavoriteCafeCount({callback:function(B){A(B)}})},addFavoriteCafe:function(B,A){WIMyCafeList.addFavoriteCafe(B,{callback:function(C){A(C)}})},removeFavoriteCafe:function(B,A){WIMyCafeList.removeFavoriteCafe(B,{callback:function(C){A(C)}})},moveCafeJoinGroup:function(C,A,B){WIMyCafeList.changeCafeJoinGroup(C,A,{callback:function(D){B(D)}})},withdrawCafe:function(B,A){WIMyCafeList.exitCafe(B,{callback:function(C){A(C)}})},loadMyCafeGroupList:function(B,A){WIFavoriteCafeManagement.getMyCafeList(B,{callback:function(C){A(C)}})},saveFavoriteCafeList:function(B,A){WIFavoriteCafeManagement.setFavoriteCafeList(B,{callback:function(C){A(C)}})},loadCafeAlimiList:function(E,C,D,B,A){WIMyAlimiList.getAlimiList(E,C,D,B,{callback:function(F){A(F)}})},deleteCafeAlimi:function(D,F,B,E,A,C){WIMyAlimiList.deleteAlimi(D,F,B,E,A,{callback:function(G){C(G)}})},loadVisitCafeList:function(A){WIRecentVisitCafeService.getRecentVisitCafeList({callback:function(B){A(B)}})},deleteVisitCafeList:function(A){WIRecentVisitCafeService.deleteVisitCafes({callback:function(B){A(B)}})},deleteVisitCafe:function(B,A){WIRecentVisitCafeService.deleteVisitCafe(B,{callback:function(C){A(C)}})},loadRecentMyCafeList:function(A){WIRecentList.getMyCafeList({callback:function(B){A(B)}})},loadRecentBbsList:function(A,C,B){WIRecentList.getRecentBbsList(A,C,{callback:function(D){B(D)}})},modifyJoinGroup:function(D,C,A,E,B){WIJoinGroupManagement.modifyJoinGroup(D,C,A,E,{callback:function(F){B(F)}})},loadMyArticleList:function(A,C,B){WIMyArticleList.getMyArticleList(A,C,{callback:function(D){B(D)}})},deleteArticle:function(A,C,B){WIMyArticleList.deleteMyArticle(A,C,{callback:function(D){B(D)}})}};
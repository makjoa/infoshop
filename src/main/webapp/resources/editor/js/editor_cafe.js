try{EditorJSLoader.readyState="loading"}catch(e){}var __TX_GLOBAL={domain:"daum.net",session_id:null};if(document&&__TX_GLOBAL.domain&&!window.Jaxer&&0<=document.domain.indexOf("daum.net")){document.domain=__TX_GLOBAL.domain}if(!("console" in window)){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}if(!window.StopWatch){StopWatch={output:[],index:0,start:function(){this._init=new Date().getTime()},lap:function(a,h){var d=new Date().getTime()-this._init;this.output.push("#"+(this.index++)+" : "+d+" , "+a)},printAll:function(){var d=console;for(var c=0,a=this.output.length;c<a;c++){d.log(this.output[c])}}}}var $tx={};(function(){Object.extend=function(d,j){for(var h in j){d[h]=j[h]}return d};window.Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};window.$break={};Function.prototype.bind=function(){var d=this,j=$A(arguments),h=j.shift();
return function(){return d.apply(h,j.concat($A(arguments)))}};Function.prototype.bindAsEventListener=function(j){var d=this,h=$A(arguments),j=h.shift();return function(k){return d.apply(j,[k||window.event].concat(h))}};var c=function(h){if(arguments.length>1){for(var d=0,k=[],j=arguments.length;d<j;d++){k.push($tx(arguments[d]))}return k}if(typeof h=="string"){h=document.getElementById(h)}return h};$tx=c;var a=navigator.userAgent.toLowerCase();Object.extend($tx,{chrome:(a.indexOf("chrome")!=-1),safari:(a.indexOf("safari")!=-1&&a.indexOf("chrome")==-1),gecko:(a.indexOf("firefox")!=-1),gecko_ver:(a.indexOf("firefox")!=-1)?parseFloat(a.replace(/.*firefox\/([\d\.]+).*/g,"$1")):0,msie:(a.indexOf("msie")!=-1),msie_ver:(a.indexOf("msie")!=-1)?parseFloat(navigator.appVersion.split("MSIE")[1]):0,msie_docmode:document.documentMode||0,msie8_compat:($tx.msie_ver==7&&(a.indexOf("trident/4.0")!=-1)),msie8_std:$tx.msie_ver==8&&(a.indexOf("trident/4.0")!=-1),webkit:(a.indexOf("applewebkit")!=-1),webkit_ver:(a.indexOf("applewebkit")!=-1)?parseFloat(a.replace(/.*safari\//g,"")):0,opera:(a.indexOf("opera")!=-1),presto:(a.indexOf("presto")!=-1),os_win:(a.indexOf("win")!=-1),os_mac:(a.indexOf("mac")!=-1),iphone:(a.indexOf("iphone")!=-1),ipod:(a.indexOf("ipod")!=-1),ipad:(a.indexOf("ipad")!=-1),ios:(a.indexOf("like mac os x")!=-1&&a.indexOf("mobile")!=-1),android:(a.indexOf("android")!=-1),android_ver:(a.indexOf("android")!=-1)?parseFloat(a.replace(/.*android[\s]*([\d\.]+).*/g,"$1")):0,blackberry:(a.indexOf("blackberry")!=-1),winphone:(a.indexOf("windows phone os")!=-1),wince:(a.indexOf("windows ce")!=-1)});
Object.extend($tx,{extend:Object.extend,browser:function(){if($tx.msie){return"msie"}else{if($tx.gecko){return"firefox"}else{if($tx.chrome){return"chrome"}else{if($tx.webkit){return"safari"}else{if($tx.opera){return"opera"}else{return""}}}}}}()});window.$must=function(k,h){var j=$tx(k);if(!j){var d=new Error("[Exception] "+h+" : not exist element("+k+")");throw d}return j};window.txlib=c})();(function(){$tx.extend($tx,{classNames:function(a){return a.className.split(" ")},hasClassName:function(j,k){var h=false;if(!j.className){return false}var d=j.className.split(" ");for(var a in d){if(d[a]==k){h=true;break}}return h},addClassName:function(a,d){if(!this.hasClassName(a,d)){a.className+=" "+d}},removeClassName:function(h,j){var d=h.className.split(" ");for(var a in d){if(d[a]==j){d.splice(a,1);break}}h.className=d.join(" ")},visible:function(a){return $tx.getStyle(a,"display")!="none"},toggle:function(a){a=$tx(a);$tx[$tx.visible(a)?"hide":"show"](a);return a},show:function(a){$tx(a).style.display="block";
return a},hide:function(a){$tx(a).style.display="none";return a}})})();(function(){$tx.extend($tx,{getOpacity:function(c){return $tx(c).getStyle("opacity")},setStyle:function(c,h,d){c=$tx(c);var k=c.style;for(var j in h){if(j=="opacity"){$tx.setOpacity(c,h[j])}else{k[(j=="float"||j=="cssFloat")?(k.styleFloat===undefined?"cssFloat":"styleFloat"):(d?j:j.camelize())]=h[j]}}return c}});var a=function(d,h){d=$tx(d);h=h=="float"?"cssFloat":h.camelize();var j=d.style[h];if(!j){var c=document.defaultView.getComputedStyle(d,null);j=c?c[h]:null}if(h=="opacity"){return j?parseFloat(j):1}return j=="auto"?null:j};$tx.extend($tx,{getStyle:a});if($tx.opera){$tx.extend($tx,{getStyle:function(c,d){switch(d){case"left":case"top":case"right":case"bottom":if(a(c,"position")=="static"){return null}default:return a(c,d)}}})}else{if($tx.msie){$tx.extend($tx,{getStyle:function(c,d){c=$tx(c);d=(d=="float"||d=="cssFloat")?"styleFloat":d.camelize();var h=c.style[d];if(!h&&c.currentStyle){h=c.currentStyle[d]}if(d=="opacity"){if(h=($tx.getStyle(c,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(h[1]){return parseFloat(h[1])/100
}}return 1}if(h=="auto"){if((d=="width"||d=="height")&&($tx.getStyle(c,"display")!="none")){return c["offset"+d.capitalize()]+"px"}return null}return h}})}}$tx.extend($tx,{setOpacity:function(c,d){c=$tx(c);c.style.opacity=(d==1||d==="")?"":(d<0.00001)?0:d;return c}});if($tx.msie){$tx.extend($tx,{setOpacity:function(c,j){c=$tx(c);var h=$tx.getStyle(c,"filter"),d=c.style;if(j==1||j===""){d.filter=h.replace(/alpha\([^\)]*\)/gi,"");return c}else{if(j<0.00001){j=0}}d.filter=h.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+(j*100)+")";return c}})}else{if($tx.gecko){$tx.extend($tx,{setOpacity:function(c,d){c=$tx(c);c.style.opacity=(d==1)?0.999999:(d==="")?"":(d<0.00001)?0:d;return c}})}}})();(function(){$tx.extend($tx,{cumulativeOffset:function(c){var a=0,d=0;do{a+=c.offsetTop||0;d+=c.offsetLeft||0;c=c.offsetParent}while(c);return[d,a]},cumulativeScroll:function(c){var a=0,d=0;do{a+=c.scrollTop||0;d+=c.scrollLeft||0;c=c.offsetParent}while(c);return[d,a]},positionedOffset:function(c){var a=0,h=0;
do{a+=c.offsetTop||0;h+=c.offsetLeft||0;c=c.offsetParent;if(c){if(c.tagName=="BODY"){break}var d=$tx.getStyle(c,"position");if(d=="relative"||d=="absolute"){break}}}while(c);return[h,a]},getDimensions:function(d){var l=$tx.getStyle(d,"display");if(l!="none"&&l!=null){return{width:d.offsetWidth,height:d.offsetHeight}}var c=d.style;var k=c.visibility;var h=c.position;var a=c.display;c.visibility="hidden";c.position="absolute";c.display="block";var m=d.clientWidth;var j=d.clientHeight;c.display=a;c.position=h;c.visibility=k;return{width:m,height:j}}});if($tx.webkit){$tx.cumulativeOffset=function(c){var a=0,d=0;do{a+=c.offsetTop||0;d+=c.offsetLeft||0;if(c.offsetParent==document.body){if($tx.getStyle(c,"position")=="absolute"){break}}c=c.offsetParent}while(c);return[d,a]}}})();(function(){$tx.extend($tx,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(a){return $tx(a.target||a.srcElement)
},isLeftClick:function(a){return(((a.which)&&(a.which==1))||((a.button)&&(a.button==1)))},pointerX:function(a){return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},pointerY:function(a){return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},stop:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},findElement:function(d,c){var a=$tx.element(d);while(a.parentNode&&(!a.tagName||!a.tagName.toUpperCase||(a.tagName.toUpperCase()!=c.toUpperCase()))){a=a.parentNode}return a},observers:false,_observeAndCache:function(h,d,c,a){if(!this.observers){this.observers=[]}if(h.addEventListener){this.observers.push([h,d,c,a]);h.addEventListener(d,c,a)}else{if(h.attachEvent){this.observers.push([h,d,c,a]);h.attachEvent("on"+d,c)}}},unloadCache:function(){if(!$tx.observers){return}for(var a=0,c=$tx.observers.length;a<c;a++){$tx.stopObserving.apply(this,$tx.observers[a]);
$tx.observers[a][0]=null}$tx.observers=false},observe:function(h,d,c,a){h=$tx(h);a=a||false;if(d=="keypress"&&($tx.webkit||h.attachEvent)){d="keydown"}$tx._observeAndCache(h,d,c,a)},stopObserving:function(h,d,c,a){h=$tx(h);a=a||false;if(d=="keypress"&&($tx.webkit||h.attachEvent)){d="keydown"}if(h.removeEventListener){h.removeEventListener(d,c,a)}else{if(h.detachEvent){try{h.detachEvent("on"+d,c)}catch(j){}}}}});if($tx.msie){$tx.observe(window,"unload",$tx.unloadCache,false)}})();(function(){$tx.extend(Object,{inspect:function(a){try{if(a===undefined){return"undefined"}if(a===null){return"null"}return a.inspect?a.inspect():a.toString()}catch(c){if(c instanceof RangeError){return"..."}throw c}},toJSON:function(a){var d=typeof a;switch(d){case"undefined":case"function":case"unknown":return;case"boolean":return a.toString()}if(a===null){return null}if(a.toJSON){return a.toJSON()}if(a.ownerDocument===document){return}var c=[];for(var j in a){var h=Object.toJSON(a[j]);if(h!==undefined){c.push(j.toJSON()+": "+h)
}}return"{"+c.join(", ")+"}"},clone:function(a){return Object.extend({},a)}});$tx.extend(Object,{toEncode:function(a){var d=typeof a;switch(d){case"undefined":case"function":case"unknown":return;case"number":case"boolean":case"date":return a}if(a===null){return null}if(a.toEncode){return a.toEncode()}if(a.ownerDocument===document){return}var c={};for(var j in a){if(a[j]){var h=Object.toEncode(a[j]);if(h!==undefined){c[j]=h}}}return c},toDecode:function(a){var d=typeof a;switch(d){case"undefined":case"function":case"unknown":return;case"number":case"boolean":case"date":return a}if(a===null){return null}if(a.toDecode){return a.toDecode()}if(a.ownerDocument===document){return}var c={};for(var j in a){if(a[j]){var h=Object.toDecode(a[j]);if(h!==undefined){c[j]=h}}}return c}})})();(function(){$tx.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});$tx.extend(String.prototype,{gsub:function(j,d){var a="",h=this,c;
d=arguments.callee.prepareReplacement(d);while(h.length>0){if(c=h.match(j)){a+=h.slice(0,c.index);a+=String.interpret(d(c));h=h.slice(c.index+c[0].length)}else{a+=h,h=""}}return a},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},toQueryParams:function(h){var a=this.strip().match(/([^?#]*)(#.*)?$/);if(!a){return{}}var d={};var c=null;a[1].split(h||"&").each(function(m){var l=null,j=null;var k=m.match(/([\w_]+)=(.*)/);if(k){c=l=decodeURIComponent(k[1]);if(k[2]){j=decodeURIComponent(k[2])}}else{if(c){l=c;j=d[l];j+="&"+decodeURIComponent(m)}else{return}}if(l in d){if(d[l].constructor!=Array){d[l]=[d[l]]}d[l].push(j)}else{d[l]=j}});return d},toArray:function(){return this.split("")},times:function(d){var a="";for(var c=0;c<d;c++){a+=this}return a},camelize:function(){var h=this.split("-"),a=h.length;if(a==1){return h[0]}var d=this.charAt(0)=="-"?h[0].charAt(0).toUpperCase()+h[0].substring(1):h[0];for(var c=1;c<a;
c++){d+=h[c].charAt(0).toUpperCase()+h[c].substring(1)}return d},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},inspect:function(c){var a=this.gsub(/[\x00-\x1f\\]/,function(d){var h=String.specialChar[d[0]];return h?h:"\\u00"+d[0].charCodeAt().toPaddedString(2,16)});if(c){return'"'+a.replace(/"/g,'\\"')+'"'}return"'"+a.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(true)},include:function(a){return this.indexOf(a)>-1},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)}});String.prototype.gsub.prepareReplacement=function(c){if(typeof c=="function"){return c}var a=new Template(c);return function(d){return a.evaluate(d)}};$tx.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},getRegExp:function(){return this.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/\^/g,"\\^").replace(/\)/g,"\\)").replace(/\(/g,"\\(").replace(/\]/g,"\\]").replace(/\[/g,"\\[").replace(/\$/g,"\\$").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/&/g,"(&|&amp;)")
},toEncoded:function(){return this.replace(/\s/g,"+")},toNumber:function(){return(isNaN(this)?0:parseInt(this,10))},toFloat:function(){return(isNaN(this)?0:parseFloat(this))},getRealLength:function(){var d=this;var a=0;for(var c=0;c<d.length;c++){a+=(escape(d.charAt(c)).charAt(1)=="u")?2:1}return a},cutRealLength:function(d){var h=this;var a=0;for(var c=0;c<h.length;c++){a+=(escape(h.charAt(c)).charAt(1)=="u")?2:1;if(a>d){return h.substring(0,c-3).concat("...")}}return h},getCut:function(d){var h=this;var a=0;for(var c=0;c<h.length;c++){a+=(escape(h.charAt(c)).charAt(1)=="u")?2:1;if(a>d){return h.substring(0,c+1)}}return h.substring(0)},parsePx:function(){if(this==null||this.length==0){return 0}else{if(this.indexOf("px")>-1){return this.substring(0,this.indexOf("px")).toNumber()}else{return this.toNumber()}}},toPx:function(){if(this.indexOf("px")>-1){return this+""}else{return this+"px"}},isPx:function(){var a=this;if(a.trim()==""){return false}else{if(a.indexOf("px")!=-1){a=this.parsePx()
}}return !isNaN(a)},toByteUnit:function(){return this.toNumber().toByteUnit()},toEncode:function(){return encodeURIComponent(this)},toDecode:function(){return decodeURIComponent(this)},toCurrency:function(){var c=this;for(var a=0;a<Math.floor((c.length-(1+a))/3);a++){c=c.substring(0,c.length-(4*a+3))+","+c.substring(c.length-(4*a+3))}return c},replaceAll:function(a,c){a=a.replace(new RegExp("(\\W)","g"),"\\$1");c=c.replace(new RegExp("\\$","g"),"$$$$");return this.replace(new RegExp(a,"gm"),c)}})})();(function(){Date.prototype.toJSON=function(){return'"'+this.getFullYear()+"-"+(this.getMonth()+1).toPaddedString(2)+"-"+this.getDate().toPaddedString(2)+"T"+this.getHours().toPaddedString(2)+":"+this.getMinutes().toPaddedString(2)+":"+this.getSeconds().toPaddedString(2)+'"'}})();(function(){$tx.extend(Number.prototype,{toPaddedString:function(d,c){var a=this.toString(c||10);return"0".times(d-a.length)+a},toJSON:function(){return isFinite(this)?this+0:"null"},toTime:function(){return Math.floor(this/60).toString().toPaddedString(2)+":"+(this%60).toString().toPaddedString(2)
},toByteUnit:function(){var d;var a=["GB","MB","KB"];if(this==0){return"0"+a[2]}for(var c=0;c<a.length;c++){d=this/Math.pow(1024,3-c);if(d<1){continue}return(Math.round(d*10)/10)+a[c]}return"1"+a[2]},toPx:function(){return this.toString()+"px"},parsePx:function(){return this+0},isPx:function(){return true},toNumber:function(){return this+0},toCurrency:function(){return this.toString().toCurrency()},getRegExp:function(){return this.toString().getRegExp()}})})();(function(){$tx.extend(Array.prototype,{each:function(c){var a=0;try{this._each(function(h){c(h,a++)})}catch(d){if(d!=$break){throw d}}return this},_each:function(c){for(var a=0,d=this.length;a<d;a++){c(this[a])}},include:function(a){var c=false;this.each(function(d){if(d==a){c=true;throw $break}});return c},pluck:function(c){var a=[];this.each(function(h,d){a.push(h[c])});return a},select:function(c){var a=[];this.each(function(h,d){if(c(h,d)){a.push(h)}});return a},inject:function(a,c){this.each(function(h,d){a=c(a,h,d)});return a
},without:function(){var a=$A(arguments);return this.select(function(c){return !a.include(c)})},last:function(){return this[this.length-1]},flatten:function(){return this.inject([],function(c,a){return c.concat(a&&a.constructor==Array?a.flatten():[a])})},detect:function(c){var a;this.each(function(h,d){if(c(h,d)){a=h;throw $break}});return a},toJSON:function(){var a=[];this.each(function(c){var d=Object.toJSON(c);if(d!==undefined){a.push(d)}});return"["+a.join(", ")+"]"},compact:function(){return this.select(function(a){return(a!=null)&&(a!="")})},uniq:function(a){return this.inject([],function(h,d,c){if(0==c||(a?h.last()!=d:!h.include(d))){h.push(d)}return h})},toMap:function(c){var a={};this.each(function(h,d){a[h[c]]=h});return a}});Array.prototype.findAll=Array.prototype.select;if($tx.opera){Array.prototype.concat=function(){var k=[];for(var c=0,d=this.length;c<d;c++){k.push(this[c])}for(var c=0,d=arguments.length;c<d;c++){if(arguments[c].constructor==Array){for(var a=0,h=arguments[c].length;
a<h;a++){k.push(arguments[c][a])}}else{k.push(arguments[c])}}return k}}$tx.extend(Array.prototype,{toEncode:function(){var a=[];this.each(function(c){var d=Object.toEncode(c);if(d!==undefined){a.push(d)}});return a},toDecode:function(){var a=[];this.each(function(c){var d=Object.toDecode(c);if(d!==undefined){a.push(d)}});return a}});window.$A=Array.from=function(h){if(!h){return[]}if(h.toArray){return h.toArray()}else{var c=[];for(var a=0,d=h.length;a<d;a++){c.push(h[a])}return c}};if($tx.webkit){$A=Array.from=function(h){if(!h){return[]}if(!(typeof h=="function"&&h=="[object NodeList]")&&h.toArray){return h.toArray()}else{var c=[];for(var a=0,d=h.length;a<d;a++){c.push(h[a])}return c}}}})();(function(){var a=function(c){if(c instanceof a){this.merge(c)}else{Object.extend(this,c||{})}};$tx.extend(a,{toQueryString:function(d){var c=[];c.add=arguments.callee.addPair;this.prototype._each.call(d,function(j){if(!j.key){return}var h=j.value;if(h&&typeof h=="object"){if(h.constructor==Array){h.each(function(k){c.add(j.key,k)
})}return}c.add(j.key,h)});return c.join("&")},toJSON:function(c){var d=[];this.prototype._each.call(c,function(j){var h=Object.toJSON(j.value);if(h!==undefined){d.push(j.key.toJSON()+": "+h)}});return"{"+d.join(", ")+"}"}});a.toQueryString.addPair=function(c,h,d){c=encodeURIComponent(c);if(h===undefined){this.push(c)}else{this.push(c+"="+(h==null?"":encodeURIComponent(h)))}};$tx.extend(a.prototype,{_each:function(d){for(var c in this){var h=this[c];if(h&&h==a.prototype[c]){continue}var j=[c,h];j.key=c;j.value=h;d(j)}},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},merge:function(c){return $H(c).inject(this,function(d,h){d[h.key]=h.value;return d})},remove:function(){var c;for(var d=0,h=arguments.length;d<h;d++){var j=this[arguments[d]];if(j!==undefined){if(c===undefined){c=j}else{if(c.constructor!=Array){c=[c]}c.push(j)}}delete this[arguments[d]]}return c},toQueryString:function(){return a.toQueryString(this)},inspect:function(){return"#<Hash:{"+this.map(function(c){return c.map(Object.inspect).join(": ")
}).join(", ")+"}>"},toJSON:function(){return a.toJSON(this)}});window.$H=function(c){if(c instanceof a){return c}return new a(c)}})();(function(){if(typeof(HTMLElement)!="undefined"){var d=HTMLElement.prototype;var c=d.__proto__={__proto__:d.__proto__};if(HTMLElement.prototype.__defineSetter__){c.__defineSetter__("innerText",function(j){this.textContent=j})}if(HTMLElement.prototype.__defineGetter__){c.__defineGetter__("innerText",function(){return this.textContent})}}if(typeof(XMLDocument)!="undefined"){if(XMLDocument.prototype.__defineGetter__){XMLDocument.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(Node)!="undefined"){if(Node.prototype&&Node.prototype.__defineGetter__){Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}}if(typeof(document.implementation)!="undefined"){if(document.implementation.hasFeature("XPath","3.0")){if(typeof(XMLDocument)!="undefined"){XMLDocument.prototype.selectNodes=function(l,n){if(!n){n=this
}var m=this.defaultNS;var j=this.evaluate(l,n,{normalResolver:this.createNSResolver(this.documentElement),lookupNamespaceURI:function(p){switch(p){case"dflt":return m;default:return this.normalResolver.lookupNamespaceURI(p)}}},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var o=[];for(var k=0;k<j.snapshotLength;k++){o[k]=j.snapshotItem(k)}return o};XMLDocument.prototype.setProperty=function(k,j){if(k=="SelectionNamespaces"&&j.indexOf("xmlns:dflt")==0){this.defaultNS=j.replace(/^.*=\'(.+)\'/,"$1")}};XMLDocument.prototype.defaultNS;XMLDocument.prototype.selectSingleNode=function(k,l){if(!l){l=this}var j=this.selectNodes(k,l);if(j.length>0){return j[0]}else{return null}};XMLDocument.prototype.createNode=function(j,l,k){if(j==1){return this.createElementNS(k,l)}else{return null}}}if(typeof(Element)!="undefined"){Element.prototype.selectNodes=function(j){if(this.ownerDocument.selectNodes){return this.ownerDocument.selectNodes(j,this)}else{throw"For XML Elements Only"}};Element.prototype.selectSingleNode=function(j){if(this.ownerDocument.selectSingleNode){return this.ownerDocument.selectSingleNode(j,this)
}else{throw"For XML Elements Only"}};Element.prototype.text;var h=Element.prototype;var a=h.__proto__={__proto__:h.__proto__};if(Element.prototype.__defineSetter__){a.__defineSetter__("text",function(j){this.textContent=j})}if(Element.prototype.__defineGetter__){a.__defineGetter__("text",function(){return this.textContent})}if(window.origElement){window.origElement.prototype.selectNodes=Element.prototype.selectNodes;window.origElement.prototype.selectSingleNode=Element.prototype.selectSingleNode}}}}})();window.tx={};function each(d,j){for(var h=0,c=d.length;h<c;h++){j(d[h])}}function installHyperscript(c,a){each("a big blockquote br b center code dd dl dt div em font form h1 h2 h3 h4 h5 h6 hr img iframe input i li ol option pre p script select small span strike strong style sub sup table tbody td textarea tr ul u".split(" "),function(d){c[d]=function(){var h=a.createElement(d);each(arguments,function(k){if(k.nodeType){h.appendChild(k)}else{if(typeof k=="string"||typeof k=="number"){if(d=="textarea"){if($tx.msie){h.value+=k
}else{h.text+=k}}else{h.innerHTML+=k}}else{if(typeof k=="array"){for(var m=0;m<k.length;m++){h.appendChild(k[m])}}else{for(var j in k){if(j=="style"){for(var l in k[j]){if((l=="float"||l=="cssFloat")){h[j][h[j].styleFloat===undefined?"cssFloat":"styleFloat"]=k[j][l]}else{h[j][l]=k[j][l]}}}else{if(["more","less","longDesc"].include(j)){if(h.setAttribute){h.setAttribute(j,k[j])}}else{if(["colSpan","rowSpan","cellPadding","cellSpacing"].include(j)){if(h.setAttribute){h.setAttribute(j,k[j])}}else{if(k[j]){h[j]=k[j]}}}}}}}}});return h}})}installHyperscript(window.tx,document);(function(){function evaluate(data,tpl){if(!data){return""}if(tpl.indexOf("{if:")>-1){tpl=tpl.replace(/#\{if:([_\w]+)([=><!]+)([_'"\-\w]+)\}([\s\S]*?)#\{\/if:\1\}/gm,function(full,start,sign,value,condtpl){if(data[start]==null){return full}var _condition=false;try{sign=((sign=="=")?"==":sign);var _left='"'+(data[start]+"").replace(/['"]/g,"")+'"';var _right='"'+value.replace(/['"]/g,"")+'"';eval("_condition = ("+_left+sign+_right+")")
}catch(e){_condition=false}if(_condition){return evaluate(data,condtpl)}else{return""}})}if(tpl.indexOf("{for:")>-1){tpl=tpl.replace(/#\{for:([_\w]+):?(\d*):?(\d*)\}([\s\S]*?)#\{\/for:\1\}/gm,function(full,start,maxCnt,cutCnt,looptpl){if(!data[start]||!data[start].length){return full}var _list=data[start];var _listTpl=[];maxCnt=!!maxCnt?(isNaN(maxCnt)?_list.length:parseInt(maxCnt)):_list.length;cutCnt=!!cutCnt?(isNaN(cutCnt)?0:parseInt(cutCnt)):0;for(var i=0,len=Math.min(_list.length,maxCnt);i<len;i++){_listTpl.push(evaluate(_list[i],looptpl))}return _listTpl.join("").substring(cutCnt)})}return tpl.replace(/#\{([_\w]+)\}/g,function(full,name){if(data[name]!=null){return data[name]}else{return full}})}window.Template=function(template){this.template=template};Template.prototype.evaluate=function(data){return evaluate(data,this.template)};Template.prototype.evaluateToDom=function(data,element){if(typeof(element)==="string"){element=document.getElementById(element)}element.innerHTML=evaluate(data,this.template)
};Template.prototype.evaluateAsDom=function(data,context){var _tmpNode=(context||document).createElement("div");_tmpNode.innerHTML=evaluate(data,this.template);return _tmpNode.firstChild}})();(function(){var a,j,d;var k={"#":function(n,o){if((a=/(\S*)#(\S+)/.exec(o))!==null){var m=a[1];var p=a[2];if(!n.getElementById){n=n.ownerDocument}if(j=n.getElementById(p)){if(m.length<1||j.nodeName.toLowerCase()==m){return[j]}}}return[]},".":function(o,t){if((a=/(\S*)\.(\S+)/.exec(t))!==null){var n=((a[1]==="")?"*":a[1]);var m=a[2];if((d=o.getElementsByTagName(n)).length>0){var q=[];for(var p=0;p<d.length;p++){var r=d[p];if((new RegExp("(^| )"+m+"($| )")).test(r.className)){q.push(r)}}return q}}return[]},"*":function(m,p){if((d=m.getElementsByTagName(p)).length>0){var o=[];for(var n=0;n<d.length;n++){o.push(d[n])}return o}return[]}};var c=function(m,q){if(m.length<1){return[]}var p;if((f=/(\.|#)/.exec(q))!==null){if(k[f[1]]){p=f[1]}}p=p||"*";var o=[];for(var n=0;n<m.length;n++){o=o.concat(k[p](m[n],q))
}return o};var l=function(m,p){var o=[m];var q=p.split(" ");for(var n=0;n<q.length;n++){o=c(o,q[n])}return o};var h=function(p,m,q){q=!!q;if(p.nodeType!==1&&p.nodeType!==9){return(q?[]:null)}if(!m||typeof m!=="string"){return(q?[]:null)}var o;var r=[];var t=m.split(",");for(var n=0;n<t.length;n++){o=l(p,t[n]);if(o&&o.length>0){r=r.concat(o);if(!q){break}}}if(q){return r}else{return r[0]}};window.dGetty=function(){if(arguments.length==1){if(typeof(arguments[0])==="string"){return h(document,arguments[0])}}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){return h(arguments[0],arguments[1])}}}return null};window.dGetties=function(){if(arguments.length==1){if(typeof(arguments[0])==="string"){return h(document,arguments[0],true)}}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){return h(arguments[0],arguments[1],true)}}}return[]}})();(function(){var a,j,d;var k={"#":function(m,n){if((a=/(\S*)#(\S+)/.exec(n))!==null){var l=a[1];
var o=a[2];if(l.length<1||m.nodeName.toLowerCase()==l){if(m.id==o){return true}}}return false},".":function(n,o){if((a=/(\S*)\.(\S+)/.exec(o))!==null){var m=a[1];var l=a[2];if(m.length<1||n.nodeName.toLowerCase()==m){if(n.className.indexOf(l)>-1){return true}}}return false},"*":function(m,n){var l=n;if(m.nodeName.toLowerCase()==l){return true}return false}};var c=function(l,n){var m;if((f=/(\.|#)/.exec(n))!==null){if(k[f[1]]){m=f[1]}}m=m||"*";return k[m](l,n)};var h=function(n,l){if(n.nodeType!==1){return false}var o=false;var p=l.split(",");for(var m=0;m<p.length;m++){o=c(n,p[m]);if(o){break}}return o};window.dChecky=function(){if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){return h(arguments[0],arguments[1])}}return false}})();(function(){var a,h,d;var j={"#":function(m,o){if((a=/(\S*)#(\S+)/.exec(o))!==null){var l=((a[1]==="")?"*":a[1]);var p=a[2];var n=m;while(n){if(n.nodeName.toLowerCase()=="body"){break}if(l=="*"||n.nodeName.toLowerCase()==l){if(n.id==p){return n
}}n=n.parentNode}}return null},".":function(n,p){if((a=/(\S*)\.(\S+)/.exec(p))!==null){var m=((a[1]==="")?"*":a[1]);var l=a[2];var o=n;while(o){if(o.nodeName.toLowerCase()=="body"){break}if(m=="*"||o.nodeName.toLowerCase()==m){if(o.className.indexOf(l)>-1){return o}}o=o.parentNode}}return null},"*":function(m,q){var o=m;var p={};var r=q.split(",");for(var n=0,l=r.length;n<l;n++){p[r[n]]=true}while(o){if(o.nodeName.toLowerCase()=="body"){break}if(p[o.nodeName.toLowerCase()]){return o}o=o.parentNode}return null}};var k=function(m,o){var n;if((f=/(\.|#|:\w+)/.exec(o))!==null){if(j[f[1]]){n=f[1]}}n=n||"*";var l=null;if((l=j[n](m,o))!=null){return l}return null};var c=function(p,m){if(!m||typeof m!=="string"){return null}var o=p;var q=m.split(" ");for(var n=0,l=q.length;n<l;n++){if((o=k(o,q[n]))==null){return null}}return o};window.dFindy=function(){if(arguments.length==1){throw new Error("need more arguments")}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){return c(arguments[0],arguments[1])
}}}return null}})();(function(){var a=function(d){this.selectSingleNode=function(h){if(!d){return null}return d.selectSingleNode(h)};this.selectNodes=function(h){if(!d){return[]}return d.selectNodes(h)};this.getAttributeNode=function(h){if(!d){return null}return d.getAttributeNode(h)};this.hasChildNodes=function(){if(!d){return false}return d.hasChildNodes()};this.text=d?(d.textContent||d.text):null;this.type=d?d.nodeType:0;this.name=(d&&d.nodeType==1)?(d.nodeName||""):"";return this};a.prototype={xText:function(d){d=d||"";var h=this.text;h=(h||"").trim();if(h===""){return d}else{if(typeof(d)==="number"){return(isNaN(h)?0:parseInt(h))}else{if(typeof(d)==="boolean"){return !!h}else{return h}}}},xAttr:function(h,d){d=d||"";var j=this.getAttributeNode(h);var k=(!j)?"":j.nodeValue.trim();if(k===""){return d}else{if(typeof(d)==="number"){return(isNaN(k)?0:parseInt(k))}else{if(typeof(d)==="boolean"){return !!k}else{return k}}}},xGet:function(d){return xGetty(this,d)},xGets:function(d){return xGetties(this,d)
}};var c=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML4.DOMDocument","MSXML3.DOMDocument","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XmlDom"];window.xCreate=function(j){if(!!(window.attachEvent&&!window.opera)){var h=(function(){var l=null;for(var k=0;k<c.length;k++){try{l=new ActiveXObject(c[k])}catch(m){}if(l!==null){return l}}return null})();if(h===null){return null}h.async=false;h.loadXML(j);if(h.parseError.errorCode!==0){return null}return new a(h)}else{var d=new DOMParser();var h=d.parseFromString(new String(j),"text/xml");return new a(h)}};window.xGetty=function(d,h){if(d===null){return null}return new a(d.selectSingleNode(h))};window.xGetties=function(k,m){if(k===null){return[]}var l=[];var h=k.selectNodes(m);for(var j=0,d=h.length;j<d;j++){l.push(new a(h[j]))}return l}})();(function(){var d={yyyy:/(\d{4})/,MM:/(\d{2})/,dd:/(\d{2})/,HH:/(\d{2})/,mm:/(\d{2})/,ss:/(\d{2})/,yy:/(\d{2})/,M:/([0-1]*\d)/,d:/([0-3]*\d)/,EEE:/(\uc77c|\uc6d4|\ud654|\uc218|\ubaa9|\uae08|\ud1a0)/};
var a=["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"];function c(h){this.pattern=h}c.prototype={parse:function(h){var j={};this.pattern.replace(/(\w)\1*/g,function(k){if(d[k]){h=h.replace(d[k],function(l,m){j[k]=m;return""})}return k});return new Date(Date.parse([Math.max(1,parseInt(j.MM||j.M||"01",10)),"/",Math.max(1,parseInt(j.dd||j.d||"01",10)),"/",(j.yyyy||j.yy||new Date().getFullYear())," ",j.HH||"00",":",j.mm||"00",":",j.ss||"00"].join("")))},format:function(h){return this.pattern.replace("yyyy",h.getFullYear()).replace("MM",(h.getMonth()+1).toPaddedString(2)).replace("dd",h.getDate().toPaddedString(2)).replace("HH",h.getHours().toPaddedString(2)).replace("mm",h.getMinutes().toPaddedString(2)).replace("ss",h.getSeconds().toPaddedString(2)).replace("yy",h.getYear()).replace("M",h.getMonth()+1).replace("d",h.getDate()).replace("EEE",a[h.getDay()])}};window.DateFormat=c})();var swfobject=function(){var K="undefined",y="object",Z="Shockwave Flash",ad="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",Y="SWFObjectExprInst",E="onreadystatechange",V=window,o=document,A=navigator,aa=false,ab=[m],u=[],U=[],P=[],q,X,L,I,Q=false,a=false,t,N,r=true,T=function(){var ah=typeof o.getElementById!=K&&typeof o.getElementsByTagName!=K&&typeof o.createElement!=K,ao=A.userAgent.toLowerCase(),af=A.platform.toLowerCase(),al=af?/win/.test(af):/win/.test(ao),aj=af?/mac/.test(af):/mac/.test(ao),am=/webkit/.test(ao)?parseFloat(ao.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ae=!+"\v1",an=[0,0,0],ai=null;
if(typeof A.plugins!=K&&typeof A.plugins[Z]==y){ai=A.plugins[Z].description;if(ai&&!(typeof A.mimeTypes!=K&&A.mimeTypes[x]&&!A.mimeTypes[x].enabledPlugin)){aa=true;ae=false;ai=ai.replace(/^.*\s+(\S+\s+\S+$)/,"$1");an[0]=parseInt(ai.replace(/^(.*)\..*$/,"$1"),10);an[1]=parseInt(ai.replace(/^.*\.(.*)\s.*$/,"$1"),10);an[2]=/[a-zA-Z]/.test(ai)?parseInt(ai.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof V.ActiveXObject!=K){try{var ak=new ActiveXObject(ad);if(ak){ai=ak.GetVariable("$version");if(ai){ae=true;ai=ai.split(" ")[1].split(",");an=[parseInt(ai[0],10),parseInt(ai[1],10),parseInt(ai[2],10)]}}}catch(ag){}}}return{w3:ah,pv:an,wk:am,ie:ae,win:al,mac:aj}}(),p=function(){if(!T.w3){return}if((typeof o.readyState!=K&&o.readyState=="complete")||(typeof o.readyState==K&&(o.getElementsByTagName("body")[0]||o.body))){k()}if(!Q){if(typeof o.addEventListener!=K){o.addEventListener("DOMContentLoaded",k,false)}if(T.ie&&T.win){o.attachEvent(E,function(){if(o.readyState=="complete"){o.detachEvent(E,arguments.callee);
k()}});if(V==top){(function(){if(Q){return}try{o.documentElement.doScroll("left")}catch(ae){setTimeout(arguments.callee,0);return}k()})()}}if(T.wk){(function(){if(Q){return}if(!/loaded|complete/.test(o.readyState)){setTimeout(arguments.callee,0);return}k()})()}z(k)}}();function k(){if(Q){return}try{var ag=o.getElementsByTagName("body")[0].appendChild(J("span"));ag.parentNode.removeChild(ag)}catch(ah){return}Q=true;var ae=ab.length;for(var af=0;af<ae;af++){ab[af]()}}function R(ae){if(Q){ae()}else{ab[ab.length]=ae}}function z(af){if(typeof V.addEventListener!=K){V.addEventListener("load",af,false)}else{if(typeof o.addEventListener!=K){o.addEventListener("load",af,false)}else{if(typeof V.attachEvent!=K){n(V,"onload",af)}else{if(typeof V.onload=="function"){var ae=V.onload;V.onload=function(){ae();af()}}else{V.onload=af}}}}}function m(){if(aa){ac()}else{O()}}function ac(){var ae=o.getElementsByTagName("body")[0];var ah=J(y);ah.setAttribute("type",x);var ag=ae.appendChild(ah);if(ag){var af=0;
(function(){if(typeof ag.GetVariable!=K){var ai=ag.GetVariable("$version");if(ai){ai=ai.split(" ")[1].split(",");T.pv=[parseInt(ai[0],10),parseInt(ai[1],10),parseInt(ai[2],10)]}}else{if(af<10){af++;setTimeout(arguments.callee,10);return}}ae.removeChild(ah);ag=null;O()})()}else{O()}}function O(){var an=u.length;if(an>0){for(var am=0;am<an;am++){var af=u[am].id;var ai=u[am].callbackFn;var ah={success:false,id:af};if(T.pv[0]>0){var al=d(af);if(al){if(M(u[am].swfVersion)&&!(T.wk&&T.wk<312)){D(af,true);if(ai){ah.success=true;ah.ref=G(af);ai(ah)}}else{if(u[am].expressInstall&&H()){var ap={};ap.data=u[am].expressInstall;ap.width=al.getAttribute("width")||"0";ap.height=al.getAttribute("height")||"0";if(al.getAttribute("class")){ap.styleclass=al.getAttribute("class")}if(al.getAttribute("align")){ap.align=al.getAttribute("align")}var ao={};var ae=al.getElementsByTagName("param");var aj=ae.length;for(var ak=0;ak<aj;ak++){if(ae[ak].getAttribute("name").toLowerCase()!="movie"){ao[ae[ak].getAttribute("name")]=ae[ak].getAttribute("value")
}}W(ap,ao,af,ai)}else{w(al);if(ai){ai(ah)}}}}}else{D(af,true);if(ai){var ag=G(af);if(ag&&typeof ag.SetVariable!=K){ah.success=true;ah.ref=ag}ai(ah)}}}}}function G(ah){var ae=null;var af=d(ah);if(af&&af.nodeName=="OBJECT"){if(typeof af.SetVariable!=K){ae=af}else{var ag=af.getElementsByTagName(y)[0];if(ag){ae=ag}}}return ae}function H(){return !a&&M("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function W(ah,ai,ae,ag){a=true;L=ag||null;I={success:false,id:ae};var al=d(ae);if(al){if(al.nodeName=="OBJECT"){q=l(al);X=null}else{q=al;X=ae}ah.id=Y;if(typeof ah.width==K||(!/%$/.test(ah.width)&&parseInt(ah.width,10)<310)){ah.width="310"}if(typeof ah.height==K||(!/%$/.test(ah.height)&&parseInt(ah.height,10)<137)){ah.height="137"}o.title=o.title.slice(0,47)+" - Flash Player Installation";var ak=T.ie&&T.win?"ActiveX":"PlugIn",aj="MMredirectURL="+V.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ak+"&MMdoctitle="+o.title;if(typeof ai.flashvars!=K){ai.flashvars+="&"+aj}else{ai.flashvars=aj}if(T.ie&&T.win&&al.readyState!=4){var af=J("div");
ae+="SWFObjectNew";af.setAttribute("id",ae);al.parentNode.insertBefore(af,al);al.style.display="none";(function(){if(al.readyState==4){al.parentNode.removeChild(al)}else{setTimeout(arguments.callee,10)}})()}B(ah,ai,ae)}}function w(af){if(T.ie&&T.win&&af.readyState!=4){var ae=J("div");af.parentNode.insertBefore(ae,af);ae.parentNode.replaceChild(l(af),ae);af.style.display="none";(function(){if(af.readyState==4){af.parentNode.removeChild(af)}else{setTimeout(arguments.callee,10)}})()}else{af.parentNode.replaceChild(l(af),af)}}function l(ai){var ah=J("div");if(T.win&&T.ie){ah.innerHTML=ai.innerHTML}else{var af=ai.getElementsByTagName(y)[0];if(af){var aj=af.childNodes;if(aj){var ae=aj.length;for(var ag=0;ag<ae;ag++){if(!(aj[ag].nodeType==1&&aj[ag].nodeName=="PARAM")&&!(aj[ag].nodeType==8)){ah.appendChild(aj[ag].cloneNode(true))}}}}}return ah}function B(ap,an,af){var ae,ah=d(af);if(T.wk&&T.wk<312){return ae}if(ah){if(typeof ap.id==K){ap.id=af}if(T.ie&&T.win){var ao="";for(var al in ap){if(ap[al]!=Object.prototype[al]){if(al.toLowerCase()=="data"){an.movie=ap[al]
}else{if(al.toLowerCase()=="styleclass"){ao+=' class="'+ap[al]+'"'}else{if(al.toLowerCase()!="classid"){ao+=" "+al+'="'+ap[al]+'"'}}}}}var am="";for(var ak in an){if(an[ak]!=Object.prototype[ak]){am+='<param name="'+ak+'" value="'+an[ak]+'" />'}}ah.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ao+">"+am+"</object>";U[U.length]=ap.id;ae=d(ap.id)}else{var ag=J(y);ag.setAttribute("type",x);for(var aj in ap){if(ap[aj]!=Object.prototype[aj]){if(aj.toLowerCase()=="styleclass"){ag.setAttribute("class",ap[aj])}else{if(aj.toLowerCase()!="classid"){ag.setAttribute(aj,ap[aj])}}}}for(var ai in an){if(an[ai]!=Object.prototype[ai]&&ai.toLowerCase()!="movie"){j(ag,ai,an[ai])}}ah.parentNode.replaceChild(ag,ah);ae=ag}}return ae}function j(ag,ae,af){var ah=J("param");ah.setAttribute("name",ae);ah.setAttribute("value",af);ag.appendChild(ah)}function F(af){var ae=d(af);if(ae&&ae.nodeName=="OBJECT"){if(T.ie&&T.win){ae.style.display="none";(function(){if(ae.readyState==4){c(af)}else{setTimeout(arguments.callee,10)
}})()}else{ae.parentNode.removeChild(ae)}}}function c(ag){var af=d(ag);if(af){for(var ae in af){if(typeof af[ae]=="function"){af[ae]=null}}af.parentNode.removeChild(af)}}function d(ag){var ae=null;try{ae=o.getElementById(ag)}catch(af){}return ae}function J(ae){return o.createElement(ae)}function n(ag,ae,af){ag.attachEvent(ae,af);P[P.length]=[ag,ae,af]}function M(ag){var af=T.pv,ae=ag.split(".");ae[0]=parseInt(ae[0],10);ae[1]=parseInt(ae[1],10)||0;ae[2]=parseInt(ae[2],10)||0;return(af[0]>ae[0]||(af[0]==ae[0]&&af[1]>ae[1])||(af[0]==ae[0]&&af[1]==ae[1]&&af[2]>=ae[2]))?true:false}function C(aj,af,ak,ai){if(T.ie&&T.mac){return}var ah=o.getElementsByTagName("head")[0];if(!ah){return}var ae=(ak&&typeof ak=="string")?ak:"screen";if(ai){t=null;N=null}if(!t||N!=ae){var ag=J("style");ag.setAttribute("type","text/css");ag.setAttribute("media",ae);t=ah.appendChild(ag);if(T.ie&&T.win&&typeof o.styleSheets!=K&&o.styleSheets.length>0){t=o.styleSheets[o.styleSheets.length-1]}N=ae}if(T.ie&&T.win){if(t&&typeof t.addRule==y){t.addRule(aj,af)
}}else{if(t&&typeof o.createTextNode!=K){t.appendChild(o.createTextNode(aj+" {"+af+"}"))}}}function D(ag,ae){if(!r){return}var af=ae?"visible":"hidden";if(Q&&d(ag)){d(ag).style.visibility=af}else{C("#"+ag,"visibility:"+af)}}function S(af){var ag=/[\\\"<>\.;]/;var ae=ag.exec(af)!=null;return ae&&typeof encodeURIComponent!=K?encodeURIComponent(af):af}var h=function(){if(T.ie&&T.win){window.attachEvent("onunload",function(){var aj=P.length;for(var ai=0;ai<aj;ai++){P[ai][0].detachEvent(P[ai][1],P[ai][2])}var ag=U.length;for(var ah=0;ah<ag;ah++){F(U[ah])}for(var af in T){T[af]=null}T=null;for(var ae in swfobject){swfobject[ae]=null}swfobject=null})}}();return{registerObject:function(ai,ae,ah,ag){if(T.w3&&ai&&ae){var af={};af.id=ai;af.swfVersion=ae;af.expressInstall=ah;af.callbackFn=ag;u[u.length]=af;D(ai,false)}else{if(ag){ag({success:false,id:ai})}}},getObjectById:function(ae){if(T.w3){return G(ae)}},embedSWF:function(ai,ao,al,an,af,ah,ag,ak,am,aj){var ae={success:false,id:ao};if(T.w3&&!(T.wk&&T.wk<312)&&ai&&ao&&al&&an&&af){D(ao,false);
R(function(){al+="";an+="";var aq={};if(am&&typeof am===y){for(var at in am){aq[at]=am[at]}}aq.data=ai;aq.width=al;aq.height=an;var au={};if(ak&&typeof ak===y){for(var ar in ak){au[ar]=ak[ar]}}if(ag&&typeof ag===y){for(var ap in ag){if(typeof au.flashvars!=K){au.flashvars+="&"+ap+"="+ag[ap]}else{au.flashvars=ap+"="+ag[ap]}}}if(M(af)){var av=B(aq,au,ao);if(aq.id==ao){D(ao,true)}ae.success=true;ae.ref=av}else{if(ah&&H()){aq.data=ah;W(aq,au,ao,aj);return}else{D(ao,true)}}if(aj){aj(ae)}})}else{if(aj){aj(ae)}}},switchOffAutoHideShow:function(){r=false},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:M,createSWF:function(ag,af,ae){if(T.w3){return B(ag,af,ae)}else{return undefined}},showExpressInstall:function(ag,ah,ae,af){if(T.w3&&H()){W(ag,ah,ae,af)}},removeSWF:function(ae){if(T.w3){F(ae)}},createCSS:function(ah,ag,af,ae){if(T.w3){C(ah,ag,af,ae)}},addDomLoadEvent:R,addLoadEvent:z,getQueryParamValue:function(ah){var ag=o.location.search||o.location.hash;
if(ag){if(/\?/.test(ag)){ag=ag.split("?")[1]}if(ah==null){return S(ag)}var af=ag.split("&");for(var ae=0;ae<af.length;ae++){if(af[ae].substring(0,af[ae].indexOf("="))==ah){return S(af[ae].substring((af[ae].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var ae=d(Y);if(ae&&q){ae.parentNode.replaceChild(q,ae);if(X){D(X,true);if(T.ie&&T.win){q.style.display="block"}}if(L){L(I)}}a=false}}}}();var Trex={__PAGE_PATH:"#host/pages/",__WORD_JOINER:($tx.safari&&$tx.os_win)?"":"\ufeff",__WORD_JOINER_REGEXP:/\ufeff/g,__KEY:{ENTER:"13",DELETE:"46",SPACE:"32",BACKSPACE:"8",PASTE:"86",CUT:"88"},I:{},X:{},define:function(a,c){return Object.extend(a,c)},available:function(c,a){if(!$tx("tx_"+a)){return false}if(!c){return false}if(c.use==false){return false}return true},getSWF:window.getSWF};(function(c){function d(j){var h=j;while(h.$reference){h=h.$reference}return h}function a(m){var k=m.constructor.superclass;if(k){var o=k.prototype.initialize;k.prototype.initialize=function(){this.$reference=m
};var n=new k();k.prototype.initialize=o;var j=function(p){if(!n[p]){return null}return function(){var u=arguments;var t=d(m);var q=t.$super;t.$super=n.$super;var r=n[p].apply(t,u);t.$super=q;return r}};var l={};for(var h in n){if(h.charAt(0)!="$"){if(typeof(n[h])=="function"){l[h]=j(h)}}}m.$super=l}}c.Class={create:function(j){var h=function(){var l=this.constructor.prototype;for(var k in l){if(l[k]&&typeof(l[k])==="object"){if(l[k].constructor==Array){this[k]=[].concat(l[k])}else{this[k]=Object.extend({},l[k])}}}a(this);var m=arguments;this.initialize.apply(this,m)};return c.Class.draft(j,h)},draft:function(l,m){var j=m?m:function(){a(this)};if(l.$const){Object.extend(j,l.$const)}if(l.$extend){Object.extend(j.prototype,l.$extend.prototype);j.superclass=l.$extend}if(l.$mixins){var k=$A(l.$mixins);k.each(function(n){Object.extend(j.prototype,n)})}for(var h in l){if(h.charAt(0)!="$"){j.prototype[h]=l[h]}}return j},overwrite:function(k,j){var h=k;if(h.prototype){Object.extend(h.prototype,j)
}return h}};c.Mixin=c.Faculty={create:function(k){var j={};for(var h in k){if(k[h]&&typeof(k[h])==="object"){if(k[h].constructor==Array){j[h]=[].concat(k[h])}else{j[h]=Object.extend({},k[h])}}else{j[h]=k[h]}}return j},toClass:function(h,j){return c.Class.create(Object.extend({initialize:j?j:function(){}},h))}}})(Trex);(function(a){Object.extend(a,{installs:[],registers:[],modules:[],modulesX:[],install:function(d,c){c.desc="[install] "+d;a.installs.push(c)},register:function(d,c){c.desc="[register] "+d;a.registers.push(c)},module:function(d,c){c.desc="[module] "+d;a.modules.push(c)},moduleX:function(d,c){c.desc="[moduleX] "+d;a.modulesX.push(c)},invoke:function(o,k,n,c,d,h){for(var j=0,l=o.length;j<l;j++){var m=o[j];if(m.desc){}m(k,n,c,d,h)}},invokeInstallation:function(h,j,k,d,c){a.invoke(a.installs,h,j,k,d,c)},invokeRegisters:function(h,j,k,d,c){a.invoke(a.registers,h,j,k,d,c)},invokeModules:function(h,j,k,d,c){a.invoke(a.modules,h,j,k,d,c)},group:function(c){},groupEnd:function(){}})
})(Trex);(function(a){a.Ev={__EDITOR_PANEL_MOUSEDOWN:"editor.panel.mousedown",__CANVAS_PANEL_KEYDOWN:"canvas.panel.keydown",__CANVAS_PANEL_KEYUP:"canvas.panel.keyup",__CANVAS_PANEL_MOUSEDOWN:"canvas.panel.mousedown",__CANVAS_PANEL_MOUSEUP:"canvas.panel.mouseup",__CANVAS_PANEL_MOUSEOVER:"canvas.panel.mouseover",__CANVAS_PANEL_MOUSEOUT:"canvas.panel.mouseout",__CANVAS_PANEL_CLICK:"canvas.panel.click",__CANVAS_PANEL_DBLCLICK:"canvas.panel.dbclick",__CANVAS_PANEL_SCROLLING:"canvas.panel.scrolling",__IFRAME_LOAD_COMPLETE:"iframe.load.complete",__CANVAS_SOURCE_PANEL_CLICK:"canvas.source.panel.click",__CANVAS_SOURCE_PANEL_KEYDOWN:"canvas.source.panel.mousedown",__CANVAS_SOURCE_PANEL_MOUSEDOWN:"canvas.source.panel.mousedown",__CANVAS_TEXT_PANEL_CLICK:"canvas.text.panel.click",__CANVAS_MODE_CHANGE:"canvas.mode.change",__TOOL_CLICK:"toolbar.button.click",__TOOL_SHORTCUT_KEY:"toolbar.shortcut",__ON_SUBMIT:"editor.submit",__CANVAS_HEIGHT_CHANGE:"canvas.height.change",__CANVAS_PANEL_QUERY_STATUS:"canvas.panel.style.change",__CANVAS_PANEL_DELETE_SOMETHING:"canvas.panel.delkey.press",__ENTRYBOX_ENTRY_ADDED:"entrybox.entryadded",__ENTRYBOX_ENTRY_MODIFIED:"entrybox.entrymodified",__ENTRYBOX_ENTRY_REMOVED:"entrybox.entryremoved",__ENTRYBOX_ALL_ENTRY_REMOVED:"entrybox.removed.all.perfectly",__ATTACHBOX_SHOW:"attachbox.show",__ATTACHBOX_HIDE:"attachbox.hide",__CANVAS_BEFORE_UNLOAD:"canvas.unload",__CANVAS_ENTRY_ADDED:"canvas.entry.added",__COMMAND_NODE_ADDED:"cmd.entry.added",__CMD_ALIGN_LEFT:"align.left",__CMD_ALIGN_CENTER:"align.center",__CMD_ALIGN_RIGHT:"align.right",__CMD_ALIGN_FULL:"align.full",__CMD_ALIGN_IMG_LEFT:"align.img.left",__CMD_ALIGN_IMG_CENTER:"align.img.center",__CMD_ALIGN_IMG_FLOAT_LEFT:"align.img.floatleft",__CMD_ALIGN_IMG_FLOAT_RIGHT:"align.img.floatright",__CANVAS_MODE_INITIALIZE:"canvas.mode.initialize",__CANVAS_DATA_INITIALIZE:"canvas.load.data",__ENTRYBOX_ENTRY_REFRESH:"entrybox.entryrefresh",__PASTE_SEARCHRESULT:"trex.paste.info",__RUNTIME_EXCEPTION:"editor.runtime.exception",__REPORT_TO_MAGPIE:"editor.report.magpie",__SHOULD_CLOSE_MENUS:"editor.shouldclosemenus",__AUTOSAVER_LIST_OPENED:"editor.autosaver.listopened"}
})(Trex);var TrexEvent={fire:function(d,a){if(d&&d.tagName){var c=a[d.tagName.toLowerCase()];if(c){c(d,a)}else{TrexEvent.propagateToParent(d,a)}}else{}},propagateToParent:function(c,a){var h=c.parentNode;if(h&&h.tagName&&h.tagName.toLowerCase){var d=a[h.tagName.toLowerCase()];if(d){d(h,a)}else{TrexEvent.propagateToParent(h,a)}}},stopPropagation:function(a){}};Trex.__CONFIG_COMMON={thumbs:{options:[{color:"#FF0000"},{color:"#FF5E00"},{color:"#FFBB00"},{color:"#FFE400"},{color:"#ABF200"},{color:"#1FDA11"},{color:"#00D8FF"},{color:"#0055FF"},{color:"#0900FF"},{color:"#6600FF"},{color:"#FF00DD"},{color:"#FF007F"},{color:"#000000"},{color:"#FFFFFF"},{color:"#FFD8D8"},{color:"#FAE0D4"},{color:"#FAECC5"},{color:"#FAF4C0"},{color:"#E4F7BA"},{color:"#CEFBC9"},{color:"#D4F4FA"},{color:"#D9E5FF"},{color:"#DAD9FF"},{color:"#E8D9FF"},{color:"#FFD9FA"},{color:"#FFD9EC"},{color:"#F6F6F6"},{color:"#EAEAEA"},{color:"#FFA7A7"},{color:"#FFC19E"},{color:"#FFE08C"},{color:"#FAED7D"},{color:"#CEF279"},{color:"#B7F0B1"},{color:"#B2EBF4"},{color:"#B2CCFF"},{color:"#B5B2FF"},{color:"#D1B2FF"},{color:"#FFB2F5"},{color:"#FFB2D9"},{color:"#D5D5D5"},{color:"#BDBDBD"},{color:"#F15F5F"},{color:"#F29661"},{color:"#F2CB61"},{color:"#E5D85C"},{color:"#BCE55C"},{color:"#86E57F"},{color:"#5CD1E5"},{color:"#6699FF"},{color:"#6B66FF"},{color:"#A366FF"},{color:"#F261DF"},{color:"#F261AA"},{color:"#A6A6A6"},{color:"#8C8C8C"},{color:"#CC3D3D"},{color:"#CC723D"},{color:"#CCA63D"},{color:"#C4B73B"},{color:"#9FC93C"},{color:"#47C83E"},{color:"#3DB7CC"},{color:"#4174D9"},{color:"#4641D9"},{color:"#7E41D9"},{color:"#D941C5"},{color:"#D9418D"},{color:"#747474"},{color:"#5D5D5D"},{color:"#980000"},{color:"#993800"},{color:"#997000"},{color:"#998A00"},{color:"#6B9900"},{color:"#2F9D27"},{color:"#008299"},{color:"#003399"},{color:"#050099"},{color:"#3D0099"},{color:"#990085"},{color:"#99004C"},{color:"#4C4C4C"},{color:"#353535"},{color:"#670000"},{color:"#662500"},{color:"#664B00"},{color:"#665C00"},{color:"#476600"},{color:"#22741C"},{color:"#005766"},{color:"#002266"},{color:"#030066"},{color:"#290066"},{color:"#660058"},{color:"#660033"},{color:"#212121"},{color:"#000000"}],transparent:{color:"transparent",border:"#999999",image:"#iconpath/ic_transparent4.gif?rv=1.0.1",thumb:"#iconpath/txt_transparent.gif?rv=1.0.1",thumbImage:"#iconpath/color_transparent_prev.gif?rv=1.0.1"}},textbox:{options:[{data:"txc-textbox1",style:{padding:"10px",backgroundColor:"#ffffff",border:"1px solid #f7f7f7"}},{data:"txc-textbox2",style:{padding:"10px",backgroundColor:"#eeeeee",border:"1px solid #eeeeee"}},{data:"txc-textbox3",style:{padding:"10px",backgroundColor:"#fefeb8",border:"1px solid #fefeb8"}},{data:"txc-textbox4",style:{padding:"10px",backgroundColor:"#fedec7",border:"1px solid #fedec7"}},{data:"txc-textbox5",style:{padding:"10px",backgroundColor:"#e7fdb5",border:"1px solid #e7fdb5"}},{data:"txc-textbox6",style:{padding:"10px",backgroundColor:"#dbe8fb",border:"1px solid #dbe8fb"}},{data:"txc-textbox7",style:{padding:"10px",backgroundColor:"#ffffff",border:"1px dashed #cbcbcb"}},{data:"txc-textbox8",style:{padding:"10px",backgroundColor:"#eeeeee",border:"1px dashed #c1c1c1"}},{data:"txc-textbox9",style:{padding:"10px",backgroundColor:"#fefeb8",border:"1px dashed #f3c534"}},{data:"txc-textbox10",style:{padding:"10px",backgroundColor:"#fedec7",border:"1px dashed #fe8943"}},{data:"txc-textbox11",style:{padding:"10px",backgroundColor:"#e7fdb5",border:"1px dashed #9fd331"}},{data:"txc-textbox12",style:{padding:"10px",backgroundColor:"#dbe8fb",border:"1px dashed #79a5e4"}},{data:"txc-textbox13",style:{padding:"10px",backgroundColor:"#ffffff",border:"1px solid #cbcbcb"}},{data:"txc-textbox14",style:{padding:"10px",backgroundColor:"#eeeeee",border:"1px solid #c1c1c1"}},{data:"txc-textbox15",style:{padding:"10px",backgroundColor:"#fefeb8",border:"1px solid #f3c534"}},{data:"txc-textbox16",style:{padding:"10px",backgroundColor:"#fedec7",border:"1px solid #fe8943"}},{data:"txc-textbox17",style:{padding:"10px",backgroundColor:"#e7fdb5",border:"1px solid #9fd331"}},{data:"txc-textbox18",style:{padding:"10px",backgroundColor:"#dbe8fb",border:"1px solid #79a5e4"}},{data:"txc-textbox19",style:{padding:"10px",backgroundColor:"#ffffff",border:"3px double #cbcbcb"}},{data:"txc-textbox20",style:{padding:"10px",backgroundColor:"#eeeeee",border:"3px double #c1c1c1"}},{data:"txc-textbox21",style:{padding:"10px",backgroundColor:"#fefeb8",border:"3px double #f3c534"}},{data:"txc-textbox22",style:{padding:"10px",backgroundColor:"#fedec7",border:"3px double #fe8943"}},{data:"txc-textbox23",style:{padding:"10px",backgroundColor:"#e7fdb5",border:"3px double #9fd331"}},{data:"txc-textbox24",style:{padding:"10px",backgroundColor:"#dbe8fb",border:"3px double #79a5e4"}}]}};
var TrexConfig=function(){var __IS_SETUP=false;var __POST_PROCESSOR=[];var __TREX_PARAM={};var __TREX_CONFIGURE={dinoHost:"http://editor.daum.net",cdnHost:"http://s1.daumcdn.net/editor",wrapper:"tx_trex_container",form:"tx_editor_form",params:[],events:{preventUnload:true,useHotKey:true},save:{},adaptor:{},toolbar:{},sidebar:{attachbox:{},embeder:{},attacher:{},searcher:{}},plugin:{}};var __ICON_IMAGES_PATH="http://i1.daumcdn.net/icon/editor/";var __DECO_IMAGES_PATH="http://i1.daumcdn.net/deco/contents/";var _deepcopy=function(preset,service){var _dest=preset;if(!service){return _dest}for(var _name in service){switch(typeof(service[_name])){case"string":case"number":case"boolean":case"date":case"function":_dest[_name]=service[_name];break;default:if(service[_name]){if(service[_name].constructor==Array){_dest[_name]=[].concat(service[_name])}else{_dest[_name]=_dest[_name]||{};_deepcopy(_dest[_name],service[_name])}}else{_dest[_name]=null}break}}return _dest};var _createAnchors=function(){with(__TREX_CONFIGURE){return{Tool:toolbar,Sidebar:sidebar,Plugin:plugin,Adaptor:adaptor,Save:save,Attacher:sidebar.attacher,Embeder:sidebar.embeder,Searcher:sidebar.searcher}
}};var _addParameter=function(tname,pname){if(__IS_SETUP){throw new Error("configure is already setup (addParameter)")}__TREX_PARAM[tname]=pname};var _trexConfig={getUrl:function(url,params){if(url==null){return null}url=url.replace(/#host/g,__TREX_CONFIGURE.txHost).replace(/#path\/?/g,__TREX_CONFIGURE.txPath);url=url.replace(/#cmnhost/g,__TREX_CONFIGURE.dinoHost);url=url.replace(/#cdnhost/g,__TREX_CONFIGURE.cdnHost);for(var _name in __TREX_PARAM){url=url.replace(new RegExp("#".concat(_name),"g"),__TREX_CONFIGURE[__TREX_PARAM[_name]])}if(params){for(var name in params){url=url.replace(new RegExp("#".concat(name),"g"),params[name])}}return url},getPopFeatures:function(features){if(features==null){return null}if(typeof(features)==="string"){return features}var popFeatures=[];["toolbar","location","directories","menubar"].each(function(name){popFeatures.push(name+"="+(features[name]||"no"))});["scrollbars","resizable"].each(function(name){popFeatures.push(name+"="+(features[name]||"yes"))});
["width","height"].each(function(name){popFeatures.push(name+"="+(features[name]||"500"))});["left","top"].each(function(name){popFeatures.push(name+"="+(features[name]||"100"))});return popFeatures.join(",")},getDecoPath:function(url,subpath){if(__TREX_CONFIGURE.txDecoPath){url=url.replace(/#decopath\/?/,__TREX_CONFIGURE.txDecoPath)}else{subpath=subpath?subpath+"/":"";url=url.replace(/#decopath\/?/,__DECO_IMAGES_PATH+subpath)}return url},getIconPath:function(url,subpath){if(__TREX_CONFIGURE.txIconPath){url=url.replace(/#iconpath\/?/,__TREX_CONFIGURE.txIconPath)}else{subpath=subpath?subpath+"/":"";url=url.replace(/#iconpath\/?/,__ICON_IMAGES_PATH+subpath)}return url},setup:function(config){_deepcopy(__TREX_CONFIGURE,config);__TREX_CONFIGURE.params.each(function(name){_addParameter(name,name)});__POST_PROCESSOR.each(function(fn){fn(__TREX_CONFIGURE)});__IS_SETUP=true;return __TREX_CONFIGURE},addParameter:function(tname,pname){_addParameter(tname,pname)},clone:function(config){return _deepcopy({},config)
},merge:function(){var _config={};$A(arguments).each(function(source){_deepcopy(_config,source)});return _config}};_trexConfig.add=function(config,postprocessing){if(__IS_SETUP){throw new Error("configure is already setup (mergeConfig)")}_deepcopy(__TREX_CONFIGURE,config);if(postprocessing){__POST_PROCESSOR.push(postprocessing)}};_trexConfig.get=function(key){return __TREX_CONFIGURE[key]};var _addConfig=function(key,config,postprocessing){if(__IS_SETUP){throw new Error("configure is already setup (mergeConfig)")}this[key]=this[key]||{};_deepcopy(this[key],config);if(postprocessing){__POST_PROCESSOR.push(postprocessing)}};var _getConfig=function(key){return this[key]};var _anchors=_createAnchors();for(var _name in _anchors){_trexConfig["add"+_name]=_addConfig.bind(_anchors[_name]);_trexConfig["get"+_name]=_getConfig.bind(_anchors[_name])}return _trexConfig}();var TrexMessage=function(){var c={};var d=function(l,h){var k=l;for(var j in h){switch(typeof(h[j])){case"undefined":case"null":case"string":case"number":case"boolean":case"date":case"function":k[j]=h[j];
break;default:if(h[j].constructor==Array){k[j]=[].concat(h[j])}else{d(k[j]||{},h[j])}break}}return k};var a={getMsg:function(j){var h=c[j]||"";if(h.indexOf("#iconpath")>-1){h=TrexConfig.getIconPath(h)}if(h.indexOf("#decopath")>-1){h=TrexConfig.getDecoPath(h)}return h},addMsg:function(h){d(c,h)},printAll:function(){var j=console;for(var h in c){j.log(h+"="+c[h])}}};return a}();window.TXMSG=TrexMessage.getMsg;Trex.MarkupTemplate={};(function(){var a={};Trex.define(Trex.MarkupTemplate,{add:function(c,d){a[c]=d},get:function(c){if(!a[c]){return{evaluate:function(){return""},evaluateToDom:function(){return""}}}if(typeof(a[c])=="string"){var d=a[c].replace(/@[\w\.]+/g,function(h){return TXMSG(h)});a[c]=new Template(d)}return a[c]},splitList:function(p,l,j){var h={row:[]};var n=j.length;var m=h.row;for(var o=0;o<p;o++){m.push({col:[]});var c=m.last().col;for(var d=0;d<l;d++){var k={image:"",data:"&nbsp;",klass:""};if(o*l+d<n){if(typeof(j[o*l+d])=="string"){k.data=j[o*l+d]}else{k=Object.extend(k,j[o*l+d])
}}c.push(k)}}return h}})})();var $tom={};(function(){var k={"%body":["body"],"%text":["#text","br"],"%element":["#element"],"%control":["img","object","hr","table","button","iframe"],"%inline":["span","font","u","i","b","em","strong","big","small","a","sub","sup","span"],"%block":["p","div","ul","ol","h1","h2","h3","h4","h5","h6","pre","dl","hr","table","button"],"%paragraph":["p","li","dd","dt","h1","h2","h3","h4","h5","h6","td","th","div","caption"],"%wrapper":["div","ul","ol","dl","pre","xmp","table","button"],"%innergroup":["li","dd","dt","td","th"],"%outergroup":["ul","ol","dl","tr","tbody","thead","tfoot","table"],"%tablegroup":["td","th","tr","tbody","thead","tfoot","table"],"%listgroup":["li","ul","ol"],"%datagroup":["dd","dt","dl"],"%listhead":["ul","ol"]};var c={};for(var d in k){c[d]={};if(k[d]){$A(k[d]).each(function(l){c[d][l]=true})}}function a(l){var n={};var m=l.split(",");m.each(function(p){if(c[p]){for(var o in c[p]){n[o]=true}}else{n[p]=true}});return n}var j=Trex.Class.create({initialize:function(l){this.patterns=l;
this.map=a(l)},hasParts:function(){return(this.patterns.length>0)},include:function(n){var m=a(n);for(var l in m){if(this.map[l]){return true}}return false},memberOf:function(n){var m=a(n);for(var l in this.map){if(m[l]){return true}}return false},extract:function(o){var n=a(o);var m=[];for(var l in this.map){if(n[l]){m.push(l)}}return $tom.translate(m.join(","))},getExpression:function(){if(!this.exprs){var m=[];for(var l in this.map){m.push(l)}this.exprs=m.join(",")}return this.exprs}});var h={};Object.extend($tom,{translate:function(l){if(!h[l]){h[l]=new j(l)}return h[l]}})})();Object.extend($tom,{__POSITION:{__START_OF_TEXT:-1,__MIDDLE_OF_TEXT:0,__END_OF_TEXT:1,__EMPTY_TEXT:-2}});Object.extend($tom,{isElement:function(a){return $tom.kindOf(a,"%element")},isBody:function(a){return $tom.kindOf(a,"%body")},isBlock:function(a){return $tom.kindOf(a,"%block")},isParagraph:function(a){return $tom.kindOf(a,"%paragraph")},isInline:function(a){if(this.isText(a)){return true}return $tom.kindOf(a,"%inline")
},isText:function(a){return $tom.kindOf(a,"%text")},isControl:function(a){return $tom.kindOf(a,"%control")},getName:function(a){return((a&&a.nodeType==1)?a.nodeName.toLowerCase():"")},getText:function(a){return a.textContent||a.text||a.innerText||""},getLength:function(a){if(!a){return 0}if(a.nodeType==1){return a.childNodes.length}else{if(a.nodeType==3){return a.nodeValue.length}}return 0},indexOf:function(a){if(!a){return -1}var h=-1;var d=a.parentNode;var c=d.firstChild;while(c){h++;if(c==a){break}c=c.nextSibling}return h},hasContent:function(c,a){if(!c||c.nodeType!=3){return true}var d=$tom.removeMeaninglessSpace(c.nodeValue);if(a){d=d.replace(Trex.__WORD_JOINER_REGEXP,"")}return(d!="")},hasChildren:function(c,a){if(!c){return false}var d=$tom.removeMeaninglessSpace(c.innerHTML);if(a){d=d.replace(Trex.__WORD_JOINER_REGEXP,"")}if(!d){return false}if(d.stripTags()){return true}if(d.search(/<(img|br|hr)\s?[^>]*>/i)>-1){return true}if(d.search(/<span\sid="?tx_(start|end)_marker"?><\/span>/i)>-1){return true
}return false},hasData:function(c,a){if(!c){return false}var d="";if(c.nodeType==1){d=c.innerHTML}else{d=c.nodeValue}d=$tom.removeMeaninglessSpace(d);if(d==""){return false}if(d.stripTags()!=""){return true}if(a){return false}if(d.search(/<br\s?\/?>/i)>-1){return true}return false},removeMeaninglessSpace:function(a){return a.replace(/(^[\f\n\r\t\v\u2028\u2029]*)|([\f\n\r\t\v\u2028\u2029]*$)/g,"")}});Object.extend($tom,{find:function(){var a,c;if(arguments.length==1){if(typeof(arguments[0])==="string"){a=document;c=arguments[0]}}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){a=arguments[0];c=arguments[1]}}}if(!c){return null}var d=$tom.translate(c);return dFindy(a,d.getExpression())},collect:function(){var a,c;if(arguments.length==1){if(typeof(arguments[0])==="string"){a=document;c=arguments[0]}}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){a=arguments[0];c=arguments[1]}}}if(!c){return null}var d=$tom.translate(c);
return dGetty(a,d.getExpression())},collectAll:function(){var a,c;if(arguments.length==1){if(typeof(arguments[0])==="string"){a=document;c=arguments[0]}}else{if(arguments.length==2){if(arguments[0].nodeType&&typeof(arguments[1])==="string"){a=arguments[0];c=arguments[1]}}}if(!c){return[]}var d=$tom.translate(c);return dGetties(a,d.getExpression())}});(function(){function a(c){if(c){if(typeof(c)==="function"){return c}else{var d=$tom.translate(c);return function(h){if(h.nodeType==1){if(d.include("#element")){return true}else{return dChecky(h,d.getExpression())}}else{return d.include("#text")}}}}else{return null}}Object.extend($tom,{kindOf:function(c,d){if(!c||!d){return false}return a(d)(c)},ancestor:function(d,h){if(!d||!d.parentNode){return null}var j=a(h);var c=d.parentNode;while(c){if($tom.isBody(c)){return null}if(!j||j(c)){break}c=c.parentNode}return c},descendant:function(c,d){var h=$tom.descendants(c,d,true);if(h.length==0){return null}return h[0]},descendants:function(d,j,m){m=m||false;
if(!d||!d.firstChild){return[]}var c=false;var l=a(j);var k=[];var h=function(p){if(m&&c){return}if(!$tom.first(p)){return}var q=$tom.children(p);for(var o=0,n=q.length;o<n;o++){if(!l||l(q[o])){k.push(q[o]);c=true}else{h(q[o])}}};h(d);return k},children:function(d,h){var j=[];if(!d||!d.firstChild){return j}var k=a(h);var c=$tom.first(d);while(c){if(!k||k(c)){j.push(c)}c=c.nextSibling}return j},next:function(d,h){if(!d||!d.nextSibling){return null}var j=a(h);var c=d.nextSibling;while(c){if($tom.hasContent(c)){if(!j||j(c)){break}}c=c.nextSibling}return c},previous:function(d,h){if(!d||!d.previousSibling){return null}var j=a(h);var c=d.previousSibling;while(c){if($tom.hasContent(c)){if(!j||j(c)){break}}c=c.previousSibling}return c},first:function(d,h){if(!d||!d.firstChild){return null}var j=a(h);var c=d.firstChild;while(c){if($tom.hasContent(c)){if(!j||j(c)){break}}c=c.nextSibling}return c},last:function(d,h){if(!d||!d.lastChild){return null}var j=a(h);var c=d.lastChild;while(c){if($tom.hasContent(c)){if(!j||j(c)){break
}}c=c.previousSibling}return c},extract:function(h,m,j){var k=[];if(!h||!m){return k}var l=a(j);var c=false;var d=h.firstChild;while(d){if($tom.include(d,m)){c=true}if(l&&l(d)){k.push(d)}else{if(c){break}else{k=[]}}d=d.nextSibling}return k},parent:function(c){if(!c||!c.parentNode){return null}return c.parentNode},body:function(d){if(!d||!d.parentNode){return null}var c=d.parentNode;while(c){if($tom.isBody(c)){return c}c=c.parentNode}return null},top:function(d,h){h=h||false;var c=d;while($tom.first(c)){c=$tom.first(c)}if(h){return c}else{if($tom.kindOf(c,"#tx_start_marker,#tx_end_marker")){c=c.nextSibling||c.parentNode}else{if($tom.kindOf(c,"%control")){c=c.parentNode}}return c}},bottom:function(d,h){h=h||false;var c=d;while($tom.last(c)){c=$tom.last(c)}if(h){return c}else{if($tom.kindOf(c,"#tx_start_marker,#tx_end_marker")){c=c.previousSibling||c.parentNode}else{if($tom.kindOf(c,"%control")){c=c.parentNode}}return c}},include:function(d,h){if(!d||!h){return false}if(d==h){return true}var c=h;
while(c){if($tom.isBody(c)){return false}else{if(c==d){return true}}c=c.parentNode}return false}})})();Object.extend($tom,{insertFirst:function(a,c){if(!a||!c){return}if(a.firstChild){a.insertBefore(c,a.firstChild)}else{a.appendChild(c)}return c},insertAt:function(a,c){if(!a||!c){return}c.parentNode.insertBefore(a,c);return a},insertNext:function(a,c){if(!a||!c){return}if(c.nextSibling){c.parentNode.insertBefore(a,c.nextSibling)}else{c.parentNode.appendChild(a)}return a},append:function(a,c){if(!a||!c){return}a.appendChild(c);return c},remove:function(a){if(!a){return}if(a.parentNode){a.parentNode.removeChild(a)}a=null},html:function(c,a){if(!c){return}c.innerHTML=a||"";return c},clean:function(a){return $tom.html(a)},stuff:function(d,c){if(!d){return d}if($tom.hasChildren(d,true)){return d}if(d.lastChild){var a=d;while(a.lastChild){a=a.lastChild}$tom.insertNext(c,a)}else{$tom.append(d,c)}return d}});Object.extend($tom,{moveChild:function(a,d,c,j){if(!a||!d){return}c=Math.min(Math.max(c||0),a.childNodes.length);
j=Math.min(Math.max(j||a.childNodes.length),a.childNodes.length);if(c>=j){return}var h=c;while(h++<j){d.appendChild(a.childNodes[c])}},moveChildToParent:function(a){if(!a){return}while(a.firstChild){a.parentNode.insertBefore(a.firstChild,a)}}});Object.extend($tom,{replace:function(a,c){if(!a||!c){return null}if($tom.getName(a)==$tom.getName(c)){$tom.remove(c);return a}else{$tom.insertAt(c,a);$tom.moveChild(a,c);$tom.remove(a);return c}},clone:function(c,a){return c.cloneNode(!!a)}});Object.extend($tom,{wrap:function(a,c){if(!a||!c){return null}if(!c.length){c=[].concat(c)}$tom.insertAt(a,c[0]);c.each((function(d){$tom.append(a,d)}));return a},unwrap:function(a){if(!a){return null}var c=$tom.first(a);$tom.moveChildToParent(a);$tom.remove(a);return c}});Object.extend($tom,{divideText:function(c,d){if(!$tom.isText(c)){return c}if(d<=0||d>=c.length){return c}var a=c.cloneNode(false);c.deleteData(d,c.length);a.deleteData(0,d);$tom.insertNext(a,c);return a},divideNode:function(h,j){if(!$tom.isElement(h)){return null
}var c=h.childNodes.length-j;var a=h.cloneNode(false);for(var d=0;d<c;d++){$tom.insertFirst(a,h.lastChild)}$tom.insertNext(a,h);return a},divideParagraph:function(h){var c=h;var a=$tom.indexOf(h);var d=c;while(c){if($tom.isBody(c)){break}else{if($tom.kindOf(c,"td,th,%wrapper,%outergroup")){break}else{if($tom.kindOf(c,"#tx_start_marker,#tx_end_marker")){a=$tom.indexOf(c)}else{if($tom.isControl(c)){a=$tom.indexOf(c)}else{if($tom.isText(c)){c=$tom.divideText(c,a);a=$tom.indexOf(c)}else{c=$tom.divideNode(c,a);a=$tom.indexOf(c);d=c;if($tom.kindOf(c,"p,li,dd,dt,h1,h2,h3,h4,h5,h6")){break}}}}}}c=c.parentNode}return d},split:function(d,a){if(!d){return null}var c=d;var h=[c];$A(d.getElementsByTagName(a)).each(function(j){if($tom.last(c)!=j){c=$tom.divideNode(c,$tom.indexOf(j)+1);h.push(c)}});return h}});Object.extend($tom,{paragraphOf:function(a){if(!a){return"p"}var c=$tom.translate(a);if(c.memberOf("ul,ol")){return"li"}else{if(c.memberOf("dl")){return"dd"}else{if(c.memberOf("tr,tbody,thead,tfoot,table")){return"td"
}else{return"p"}}}},inlineOf:function(){return"span"},outerOf:function(a){if(!a){return"span"}var c=$tom.translate(a);if(c.memberOf("li")){return"ol"}else{if(c.memberOf("dd,dt")){return"dl"}else{if(c.memberOf("td,th,tr")){return"table"}else{return"p"}}}}});(function(){var c=0;var h=Trex.Class.create({$const:{__FONT_SIZE_BASIS:9,__REG_EXT_NUMBER:new RegExp("[0-9.]+"),__REG_EXT_UNIT:new RegExp("px|pt|em")},initialize:function(){this.unitConverter={px2em:1/12,px2pt:9/12,em2px:12/1,em2pt:9/1,pt2px:12/9,pt2em:1/9}},calculate:function(n,l){if(n==null||n.length==0){n="0em"}if(l==null||l.length==0){l="0em"}var q=this.extractSign(l);var o=this.extractUnit(n);var m=this.extractUnit(l);var k=this.extractNumber(n).toNumber();var j=this.extractNumber(l).toNumber();if(o!=m){if(this.unitConverter[o+"2"+m]){k*=this.unitConverter[o+"2"+m]}}var p=0;if(q=="-"){p=Math.max(k-j,0)}else{p=(k+j)}p=(Math.round(p*10)/10);if(p==0){return null}else{return p+m}},needCalculation:function(j){if(j==null){return false}else{return(j.charAt(0)=="+"||j.charAt(0)=="-")
}},extractSign:function(k){var l="+";var j;if(k.charAt(0)=="+"||k.charAt(0)=="-"){l=k.charAt(0)}return l},extractNumber:function(l){var j=0;var k;if((k=l.match(h.__REG_EXT_NUMBER))!=null){j=k[0]}if(l.indexOf("%")>-1){j=j/100}return j},extractUnit:function(l){var j="em";var k;if((k=l.match(h.__REG_EXT_UNIT))!=null){j=k[0]}return j}});var d=new h();var a={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellPadding:"cellPadding",cellSpacing:"cellSpacing",more:"more",less:"less"};Object.extend($tom,{applyAttributes:function(l,k){if(!$tom.isElement(l)){return}for(var j in k){if(j=="style"){$tom.applyStyles(l,k[j])}else{$tom.setAttribute(l,j,k[j])}}},removeAttributes:function(l,k){if(!$tom.isElement(l)){return}for(var j in k){if(j=="style"){$tom.removeStyles(k[j])}else{l.removeAttribute(j,c)}}},existAttributes:function(m,l){if(!$tom.isElement(m)){return false
}var n;for(var k in l){if(k=="style"){for(var j in l[k]){n=m.style[j];return(n!=null&&n.length>0)}}else{n=m[k];return(n!=null&&n.length>0)}}return false},getAttribute:function(k,j){if(!$tom.isElement(k)){return null}if(k&&k.getAttribute){return k.getAttribute(a[j]||j)}else{return null}},setAttribute:function(k,j,m){if(!$tom.isElement(k)){return}if(m==null||m.length==0||m==0){k.removeAttribute(j,c)}else{if(a[j]){k.setAttribute(a[j],m)}else{try{k[j]=m}catch(l){k.setAttribute(a[j]||j,m)}}}},applyStyles:function(l,k){var m;for(var j in k){if(d.needCalculation(k[j])){m=d.calculate(l.style[j],k[j])}else{m=k[j]}if(m==null||m.length==0){m=null}l.style[((j=="float")?((l.style.styleFloat===undefined)?"cssFloat":"styleFloat"):j)]=m}var n=$tom.getAttribute(l,"style");if(n==null){l.removeAttribute("style",c)}},removeStyles:function(l,k){for(var j in k){l.style[((j=="float")?((l.style.styleFloat===undefined)?"cssFloat":"styleFloat"):j)]=null}var m=$tom.getAttribute(l,"style");if(m==null){l.removeAttribute("style",c)
}},getStyleText:function(j){return $tom.getAttribute(j,"style")},setStyleText:function(j,k){return $tom.setAttribute(j,"style",k)}})})();Object.extend($tom,{goInto:function(c,a){if(!c||!c.scrollIntoView){return}c.scrollIntoView(a)},getScrollTop:function(a){if(!a){return 0}return(a.documentElement.scrollTop||a.body.scrollTop)},setScrollTop:function(c,a){if(!c){return}if(c.documentElement.scrollTop){c.documentElement.scrollTop=a}else{c.body.scrollTop=a}},getScrollLeft:function(a){if(!a){return 0}return(a.documentElement.scrollLeft||a.body.scrollLeft)},setScrollLeft:function(a,c){if(!a){return}if(a.documentElement.scrollLeft){a.documentElement.scrollLeft=c}else{a.body.scrollLeft=c}},getPosition:function(j,p){if(!j){return{x:0,y:0,width:0,height:0}}p=!!p;j=$tx(j);var n=(p)?$tx.cumulativeOffset(j):$tx.positionedOffset(j);var k;var m=j.style.display;if(m!="none"&&m!=null){k={width:j.offsetWidth,height:j.offsetHeight}}else{var d=j.style;var o=d.visibility;var l=d.position;var c=d.display;d.visibility="hidden";
d.position="absolute";d.display="block";var a=j.clientWidth;var h=j.clientHeight;d.display=c;d.position=l;d.visibility=o;k={width:a,height:h}}return{x:n[0],y:n[1],width:k.width,height:k.height}},getWidth:function(c){var a=c.style.width;if(a.isPx()){return a.parsePx()}return c.offsetWidth},setWidth:function(c,a){$tom.applyStyles(c,{width:a})},getHeight:function(c){var a=c.style.height;if(a.isPx()){return a.parsePx()}return c.offsetHeight},setHeight:function(c,a){$tom.applyStyles(c,{height:a})},replacePngPath:function(d){if($tx.msie&&$tx.msie_ver<7){if(document.location.href.indexOf("http://")>-1){return}try{var k=$tx.getStyle(d,"filter");var c=/src='([^']+)'/.exec(k)[1];if(!c||c=="none"){return}else{if(c.indexOf("http://")>-1){return}}var a=document.location.href.split("/");a.push("css");a.pop();c=c.replace(/\.\.\//g,function(l){a.pop();return""});var h=a.join("/")+"/"+c;d.style.filter=k.replace(/src='([^']+)'/,"src='"+h+"'")}catch(j){alert(j)}}}});(function utils(a){a.Util={_dispElIds:[],getDispElId:function(){var c;
do{c="tx_entry_"+Math.floor(Math.random()*10000)}while(a.Util._dispElIds.include(c));a.Util._dispElIds.push(c);return c},generateKey:function(){return parseInt(Math.random()*100000000)},toStyleString:function(d){var h=[];for(var c in d){if(d[c]){h.push(c.replace(/([A-Z])/g,"-$1").toLowerCase());h.push(":");h.push(d[c]);h.push(";")}}return h.join("")},toAttrString:function(d){var h=[];for(var c in d){if(d[c]){h.push(" "+c+'="'+d[c]+'"')}}return h.join("")},getMatchValue:function(h,d,j){var c;if((c=h.exec(d))!=null){return c[j]}else{return null}},getAttachmentType:function(c){c=(c||"").toLowerCase();switch(c){case"image/jpg":case"image/jpeg":case"image/png":case"image/tiff":case"image/gif":case"image/bmp":case"image/x-jg":case"image/ief":case"image/pict":case"jpg":case"bmp":case"gif":case"png":return"image";default:return"file"}},thumburl:function(c){c=(c||"").toLowerCase();switch(c){case"doc":case"docx":return TrexConfig.getIconPath("#iconpath/pn_word.gif?rv=1.0.1");case"xls":case"xlsx":return TrexConfig.getIconPath("#iconpath/pn_xls.gif?rv=1.0.1");
case"ppt":case"pptx":return TrexConfig.getIconPath("#iconpath/pn_ppt.gif?rv=1.0.1");case"pdf":return TrexConfig.getIconPath("#iconpath/pn_pdf.gif?rv=1.0.1");case"txt":return TrexConfig.getIconPath("#iconpath/pn_txt.gif?rv=1.0.1");case"hwp":return TrexConfig.getIconPath("#iconpath/pn_hwp.gif?rv=1.0.1");case"zip":case"alz":return TrexConfig.getIconPath("#iconpath/pn_zip.gif?rv=1.0.1");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return TrexConfig.getIconPath("#iconpath/pn_mp3.gif?rv=1.0.1");case"avi":case"mpeg":case"wmv":case"asf":return TrexConfig.getIconPath("#iconpath/pn_movie.gif?rv=1.0.1");case"swf":return TrexConfig.getIconPath("#iconpath/pn_swf.gif?rv=1.0.1");case"htm":case"html":return TrexConfig.getIconPath("#iconpath/pn_html.gif?rv=1.0.1");case"jpg":case"gif":case"png":case"bmp":TrexConfig.getIconPath("#iconpath/pn_etc.gif?rv=1.0.1");default:return TrexConfig.getIconPath("#iconpath/pn_etc.gif?rv=1.0.1")}},prevurl:function(c){c=(c||"").toLowerCase();
switch(c){case"doc":case"docx":return TrexConfig.getIconPath("#iconpath/p_word_s.gif?rv=1.0.1");case"xls":case"xlsx":return TrexConfig.getIconPath("#iconpath/p_xls_s.gif?rv=1.0.1");case"ppt":case"pptx":return TrexConfig.getIconPath("#iconpath/p_ppt_s.gif?rv=1.0.1");case"pdf":return TrexConfig.getIconPath("#iconpath/p_pdf_s.gif?rv=1.0.1");case"txt":return TrexConfig.getIconPath("#iconpath/p_txt_s.gif?rv=1.0.1");case"hwp":return TrexConfig.getIconPath("#iconpath/p_hwp_s.gif?rv=1.0.1");case"zip":case"alz":return TrexConfig.getIconPath("#iconpath/p_zip_s.gif?rv=1.0.1");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return TrexConfig.getIconPath("#iconpath/p_mp3_s.gif?rv=1.0.1");case"avi":case"mpeg":case"wmv":case"asf":return TrexConfig.getIconPath("#iconpath/p_movie_s.gif?rv=1.0.1");case"swf":return TrexConfig.getIconPath("#iconpath/p_swf_s.gif?rv=1.0.1");case"htm":case"html":return TrexConfig.getIconPath("#iconpath/p_html_s.gif?rv=1.0.1");case"jpg":return TrexConfig.getIconPath("#iconpath/p_jpg_s.gif?rv=1.0.1");
case"gif":return TrexConfig.getIconPath("#iconpath/p_gif_s.gif?rv=1.0.1");case"png":case"bmp":return TrexConfig.getIconPath("#iconpath/p_png_s.gif?rv=1.0.1");default:return TrexConfig.getIconPath("#iconpath/p_etc_s.gif?rv=1.0.1")}},getMatchedClassName:function(k,j){var c=false;var d="";for(var h=0;h<j.length;h++){d=j[h];if($tx.hasClassName(k,d)){c=d;break}}return c},getAllAttributesFromEmbed:function(c){var j={};c=c.replace(/<embed|>/ig,"");try{var h=/(\w+)=((?:\")[^\"]+(?:\"|$)|(?:')[^']+(?:'|$)|(?:[^\"'][^ \n]+($| |\n)))/ig;while((result=h.exec(c))!=null){j[result[1].trim().toLowerCase()]=result[2].replace(/^(\"|')/i,"").replace(/(\"|')$/i,"").trim()}}catch(d){}return j},getAllAttributes:function(h){var j={};var c;var d=new RegExp('style="[^"]*(?:width|WIDTH)\\s*:\\s*([0-9]+)px[^"]*"',"g");while((c=d.exec(h))!=null){j.width=c[1]}d=new RegExp('style="[^"]*(?:height|HEIGHT)\\s*:\\s*([0-9]+)px[^"]*"',"g");while((c=d.exec(h))!=null){j.height=c[1]}d=new RegExp('\\s+([a-zA-Z]+)="([^"]*)"',"g");
while((c=d.exec(h))!=null){if(!j[c[1].toLowerCase()]){j[c[1].toLowerCase()]=c[2]}}d=new RegExp("\\s+([a-zA-Z]+)='([^']*)'","g");while((c=d.exec(h))!=null){if(!j[c[1].toLowerCase()]){j[c[1].toLowerCase()]=c[2]}}d=new RegExp("\\s+([a-zA-Z]+)=([^\\s>]*)","g");while((c=d.exec(h))!=null){if(!j[c[1].toLowerCase()]){j[c[1].toLowerCase()]=c[2]}}return j}};a.HtmlCreator={createTableMarkup:function(l,m,h){var d=[];d.push('<table unselectable="on">');d.push("<tbody>");var c=h.length;var k;for(var n=0;n<l;n++){d.push("<tr>");for(var j=0;j<m;j++){if(n*m+j<c){k=h[n*m+j];if(k.image){d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+((k.klass)?k.klass:"")+'"><img src="'+k.image+'" data="'+k.data+'"/></span></a></td>')}else{d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+((k.klass)?k.klass:"")+'">'+k.data+"</span></a></td>")}}else{d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="">&nbsp;</span></a></td>')}}d.push("</tr>")}d.push("</tbody>");
d.push("</table>");return d.join("\n")}};a.String={escapeQuot:function(c){return c.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;")},unescapeQuot:function(c){return c.replace(new RegExp("&quot;","gi"),'"').replace(new RegExp("&#39;","g"),"'")},htmlspecialchars:function(c){return a.String.escapeQuot(c.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;"))},unHtmlspecialchars:function(c){return a.String.unescapeQuot(c.replace(new RegExp("&amp;","gi"),"&").replace(new RegExp("&lt;","gi"),"<").replace(new RegExp("&gt;","gi"),">"))},parseAttribute:function(c,j){var k=new RegExp("(^|\\W)"+j+'="([^"]*)"',"gi");var h=new RegExp("(^|\\W)"+j+"='([^']*)'","gi");var d=new RegExp("(^|\\W)"+j+"=([^\\s>]*)","gi");if(result=k.exec(c)){return result[2]}else{if(result=h.exec(c)){return result[2]}else{if(result=d.exec(c)){return result[2]}else{return""}}}},changeAttribute:function(c,k,n){var l=new RegExp("(^|\\W)"+k+'="([^"]*)"',"gi");
var j=new RegExp("(^|\\W)"+k+"='([^']*)'","gi");var h=new RegExp("(^|\\W)"+k+"=([^\\s>]*)","gi");var d=new RegExp("<([\\w]+\\s*)","gi");var m=false;if(c.search(l)>-1){m=true;c=c.replace(l,n)}if(c.search(j)>-1){m=true;c=c.replace(j,n)}if(c.search(h)>-1){m=true;c=c.replace(h,n)}if(!m){c=c.replace(d,"<$1"+n+" ")}return c}};a.Validator=a.Class.create({initialize:function(){},strip:function(c){return c.stripTags().replace(/&nbsp;/g,"").replace(a.__WORD_JOINER_REGEXP,"").trim()},exists:function(c){if(!c){return false}if(this.strip(c)==""){if(c.search(/<(img|iframe|embed|table|hr|script|TXDB)/i)<0){return false}}return true},equals:function(c,d){if(!c||!d){return false}if(c.search(/<(img|iframe|embed|table|hr|script|TXDB)/i)<0){if(this.strip(c)==this.strip(d)){return true}}return false}});a.Repeater=a.Class.create({initialize:function(c){this.execHandler=c},start:function(c){if(this.tItv){this.clear()}this.tItv=window.setInterval(this.onTimer.bind(this),c)},clear:function(){window.clearInterval(this.tItv);
this.tItv=null},onTimer:function(){if(this.execHandler!=null){this.execHandler()}}});a.Timer=a.Class.create({initialize:function(c){this.execHandler=c},start:function(c){window.setTimeout(this.onTimer.bind(this),c)},onTimer:function(){if(this.execHandler!=null){this.execHandler()}}});a.Paging=a.Class.create({$const:{DEFAULT_PAGE_SIZE:5,DEFAULT_BLOCK_SIZE:10},initialize:function(d,c){this.data=d;this.currentpage=c.initPage||1;this.totalrow=c.totalrow||this.getTotalRow();this.pagesize=c.pagesize||a.Paging.DEFAULT_PAGE_SIZE;this.blocksize=c.blocksize||a.Paging.DEFAULT_PAGE_SIZE;this.totalpage=Math.ceil(this.totalrow/this.pagesize);this.totalblock=Math.ceil(this.totalpage/this.blocksize)},getNextPage:function(){return(this.currentpage<this.totalpage)?this.currentpage+1:0},getPrevPage:function(){return(this.currentpage>1)?this.currentpage-1:0},getNextBlock:function(){var c=Math.ceil(this.currentpage/this.blocksize);return(c<this.totalblock)?c*this.blocksize+1:0},getPrevBlock:function(){var c=Math.ceil(this.currentpage/this.blocksize);
return(c>1)?(c-2)*this.blocksize+1:0},getPageList:function(){var d=[];var c=Math.ceil(this.currentpage/this.blocksize)-1;var j=(c*this.blocksize+1);var k=Math.min(this.totalpage,(j+this.blocksize-1));for(var h=j;h<=k;h++){d.push(h)}return d},movePage:function(c){this.currentpage=c||this.currentpage},getOnePageData:function(){var c=[];var j=(this.currentpage-1)*this.pagesize;var d=Math.min(this.currentpage*this.pagesize,this.totalrow);for(var h=j;h<d;h++){c.push(this.data[h])}return c},getTotalRow:function(){return this.data.length}});a.Slidebar=a.Class.create({initialize:function(c){this.elContext=c.el;this.knobWidth=c.knobWidth;this.isDisabled=false;this.handler=function(h){if(!this.isDisabled&&typeof c.handler=="function"){c.handler(h)}};this.logicObj={interval:c.interval||5,min:c.min||0,max:c.max||100};this.physicObj={min:0,width:c.barSize||100};this.physicObj.max=this.physicObj.width-this.knobWidth;this.physicObj.interval=this.logicObj.interval*this.physicObj.max/this.logicObj.max;this.startPos=0;
this.startX=0;this.isDrag=false;this.result=0;var d=$tom.collect(this.elContext,"dd.tx-slide");$tom.collect(d,"span.tx-slide-min").innerHTML="";$tom.collect(d,"span.tx-slide-max").innerHTML="";this.bindEvent();this.setKnobPosition(c.defaultValue||c.min||0)},regenerate:function(c){c=parseInt(c*this.physicObj.width/this.logicObj.max);this.setKnobPosition(c)},bindEvent:function(){var h=$tom.collect(this.elContext,"dd.tx-slide");var d=$tom.collect(h,"a.tx-slide-prev");var c=$tom.collect(h,"a.tx-slide-next");var k=$tom.collect(h,"div.tx-slide-bar");var j=this.elKnob=$tom.collect(h,"div.tx-slide-knob");$tx.observe(j,"mousedown",function(l){this.isDrag=true;this.startPos=this.getKnobPosition();this.startX=l.clientX;$tx.stop(l)}.bind(this));$tx.observe(j,"mouseup",function(l){this.isDrag=false}.bind(this));$tx.observe(this.elContext,"mousemove",function(l){if(this.isDrag){this.setKnobPosition(this.startPos+l.clientX-this.startX);$tx.stop(l);this.handler(this.result)}}.bind(this));$tx.observe(d,"click",function(n){var m=Math.round(this.physicObj.interval)-1;
var l=this;var o=function(){var p=l.getKnobPosition();l.setKnobPosition(p-1);if(m-->0){setTimeout(o,10)}else{l.handler(l.result)}};o();$tx.stop(n)}.bind(this));$tx.observe(c,"click",function(n){var m=Math.round(this.physicObj.interval);var l=this;var o=function(){var p=l.getKnobPosition();l.setKnobPosition(p+1);if(--m>0){setTimeout(o,10)}else{l.handler(l.result)}};o();$tx.stop(n)}.bind(this));$tx.observe(this.elContext,"mouseup",function(l){if(this.isDrag){this.isDrag=false}}.bind(this));$tx.observe(j,"click",function(l){$tx.stop(l)}.bind(this));$tx.observe(k,"click",function(m){if(!this.isDrag){var l=m.layerX||m.x;this.setKnobPosition(l-this.knobWidth/2);this.handler(this.result)}}.bind(this))},getKnobPosition:function(){var c=$tx.getStyle(this.elKnob,"left");return c.parsePx()},setKnobPosition:function(c){c=(c<this.physicObj.max)?c:this.physicObj.max;c=(c>this.physicObj.min)?c:this.physicObj.min;$tx.setStyle(this.elKnob,{left:c.toPx()});this.result=Math.round(c*this.logicObj.interval/this.physicObj.interval)
},setDisable:function(){this.isDisabled=true},setEnable:function(){this.isDisabled=false},getDisabled:function(){return this.isDisabled}});a.DynamicSizer=a.Class.create({initialize:function(c){this.config=c;this.wrapper=c.el;this.elEventContext=tx.div({className:"tx-dynamic-sizer-context"});this.currentSize={row:0,col:0};this.dynamicSizingEnabled=true;if(!c.moveHandler){c.moveHandler=function(){}}if(!c.clickHandler){c.clickHandler=function(){}}this.wrapper.appendChild(this.elEventContext);this.previewTable=new a.DynamicSizer.PreviewTable({parentEl:this.elEventContext,mouseOverHandler:this.changeSize.bind(this),mouseClickHandler:this.selectSize.bind(this)})},clear:function(){this.dynamicSizingEnabled=true;this.changeSize(0,0)},changeSize:function(d,c){if(this.dynamicSizingEnabled){this.currentSize.row=d;this.currentSize.col=c;this._changeSelectionSize(d,c);this.config.moveHandler(d,c)}},_changeSelectionSize:function(d,c){this.previewTable.moveSelectionPos(d,c)},toggleDynamicSizing:function(){this.dynamicSizingEnabled=!this.dynamicSizingEnabled;
if(this.dynamicSizingEnabled){this.selection.enableResize()}else{this.selection.disableResize()}},selectSize:function(c){this.config.clickHandler(c,this.currentSize)},getCurruentSize:function(){return this.currentSize}});a.DynamicSizer.PreviewTable=a.Class.create({$const:{DEFAULT_TD_STYLE:{},DEFAULT_TABLE_PROPERTY:{cellpadding:"0",cellspacing:"1"},MAX_SIZE:{COL:10,ROW:10}},initialize:function(d){this.config=d;this.elTable=null;this.elTable=this.generateTable("tx-event");this.elSelection=tx.div({className:"tx-selection"},this.generateTable("tx-selection"));var h=this.generateTable("tx-panel");this.eventBinding();d.parentEl.appendChild(this.elTable);d.parentEl.appendChild(this.elSelection);d.parentEl.appendChild(h);var j=$tom.getPosition(this.elTable);var c=a.DynamicSizer.PreviewTable.MAX_SIZE;this.cellSize={width:Math.round((j.width-j.x)/c.COL),height:(j.height-j.y)/c.ROW}},generateTable:function(l){var h=tx.tbody();var d=a.DynamicSizer.PreviewTable;for(var k=0;k<d.MAX_SIZE.ROW;k++){var n=tx.tr();
for(var c=0;c<d.MAX_SIZE.COL;c++){var o=tx.td(tx.div({style:d.DEFAULT_TD_STYLE}));o=this.setCoordToAttr(o,c+1,k+1);n.appendChild(o)}h.appendChild(n)}var m=tx.table(d.DEFAULT_TABLE_PROPERTY);$tx.addClassName(m,l||"");m.appendChild(h);return m},moveSelectionPos:function(j,d){var h=(d*this.cellSize.width).toPx();var c=(j*this.cellSize.height).toPx();$tx.setStyle(this.elSelection,{width:h,height:c})},setCoordToAttr:function(d,c,h){d.setAttribute("col",c);d.setAttribute("row",h);return d},getCoordFromAttr:function(c){return{col:c.getAttribute("col")||0,row:c.getAttribute("row")||0}},eventBinding:function(){this.mouseOverHandler=this.config.mouseOverHandler;this.mouseClickHandler=this.config.mouseClickHandler;var c=this;var h=function(l){var k=$tx.element(l)||{};var j=(k.tagName||"").toUpperCase();if(k&&j=="TD"){var m=c.getCoordFromAttr(k);c.mouseOverHandler(m.row,m.col)}$tx.stop(l)};var d=function(j){c.mouseClickHandler(j)};$tx.observe(this.elTable,"mouseover",h);$tx.observe(this.elTable,"click",d)
}})})(Trex);Trex.ImageScale=Trex.Class.create({initialize:function(d,c){if(!d.imageurl){return}if(d.actualwidth){return}var a=function(j,h){d.actualwidth=j;d.actualheight=h;if(c){c(j,h)}};setTimeout(function(){var h=new Image();h.onerror=function(){h=null};if(h.onreadystatechange){h.onreadystatechange=function(){if(this.readyState=="complete"){a(this.width,this.height);h=null}}}else{h.onload=function(){a(this.width,this.height);h=null}}h.src=d.imageurl},10)}});Trex.ImageResizer=Trex.Class.create({initialize:function(m,d){var j=m;var l=d.maxWidth||200;var k=d.maxHeight||200;var h=d.defImgUrl;var a=d.onComplete||function(o,n){};function c(t,p){var q,o;var r=t.width;var n=t.height;if(r==l&&n==k){o=l;q=k}else{if(r<l&&n<k){o=r;q=n}else{q=k;o=Math.floor(k*(r/n));if(o>l){o=l;q=Math.floor(l*(n/r))}}}j.width=o;j.height=q;j.src=p;_tmpImage=null;a(o,q)}this.execResize=function(n){var o=new Image();o.onerror=function(){j.width=l;j.height=k;j.src=h;o=null};if(o.onreadystatechange){o.onreadystatechange=function(){if(this.readyState=="complete"){c(o,n)
}}}else{o.onload=function(){c(o,n)}}o.src=n}}});Trex.Flash={DEFAULT:{flashvar:{debug:"false"},paraObj:{allowScriptAccess:"always",quality:"low",menu:"false",scale:"noscale",salign:"tl",loop:"false"},attrObj:{bgcolor:"#FFFFFF"}},minFlashVer:"9.0.45",load:function(a,d,l,o,c){var n=$tx.extend({},Trex.Flash.DEFAULT.flashvar);var h=$tx.extend({},Trex.Flash.DEFAULT.paraObj);var j=$tx.extend({},Trex.Flash.DEFAULT.attrObj);var m=o?o:{};$tx.extend(n,m.flashvarObj);$tx.extend(h,m.paraObj);$tx.extend(j,m.attrObj);j.id=l;if(!$tx(d)){document.body.appendChild(tx.div({id:d}))}var k=null;if(c){k=function(p){c(p.success)}}swfobject.embedSWF(a,d,m.width?m.width:"0",m.height?m.height:"0",this.minFlashVer,false,n,h,j,k)},get:function(a){return swfobject.getObjectById(a)},getPlayerVersion:function(){return swfobject.getFlashPlayerVersion()},hasPlayerVersion:function(a){return swfobject.hasFlashPlayerVersion(a)},ready:function(c,a){if(!Trex.Flash.get(c)){setTimeout(function(){Trex.Flash.ready(c,a)},500);return
}setTimeout(a,500)}};function $txSWF(a){return Trex.Flash.get(a)}Trex.I.XHRequester=Trex.Faculty.create({createXMLHttp:function(){var c=null;try{if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{if(window.ActiveXObject){c=new ActiveXObject("Msxml2.XMLHTTP");if(!c){c=new ActiveXObject("Microsoft.XMLHTTP")}}}return c}catch(a){return null}},sendRequest:function(a,c,d,h,m,n){if(c==null&&c!=""){return null}var k=null;var j=this.createXMLHttp();if(j==null){return null}var o=function(){if(j.status==200){if(a.toUpperCase()=="HEAD"){k=m(j.getAllResponseHeaders())}else{k=m(j.responseText)}}else{k=n(j.status)}j=null};try{if(h){j.onreadystatechange=function(){if(j.readyState==4){o()}}}if(a.toUpperCase()=="POST"){j.open("POST",c,h);j.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.setRequestHeader("Content-Length",d.length);j.setRequestHeader("Connetion","close");j.send(d)}else{if(d&&d.length>0){c=c+((c.indexOf("?")>-1)?"&":"?")+d
}j.open(a.toUpperCase(),c,h);j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.send(null)}if(!h){o()}return k}catch(l){return null}}});Trex.Responder={callbacks:{},process:function(c,a){},newKey:function(){var a="exe_"+Math.floor(Math.random()*100000);if(this[a]){return this.newKey()}else{return a}},register:function(c){var a=this.newKey();this.callbacks[a]=function(d){c(d);this.callbacks[a]=null}.bind(this);return a}};Trex.I.FHRequester=Trex.Faculty.create({sendRequest:function(a,c,h,k,l,n,m){var o=this;var d=Trex.Flash.get("tx_fhr");if(d){o.sendFhrRequest(a,c,h,k,l,n,m)}else{var j=TrexConfig.getUrl("#cmnhost/swf/FHR3.swf?v=2");Trex.Flash.load(j,"tx_fhr_target","tx_fhr",null,function(){o.waitFhr(function(){o.sendFhrRequest(a,c,h,k,l,n,m)})})}},waitFhr:function(d){var c=50;(function a(){var h=Trex.Flash.get("tx_fhr");if(h){d()}else{if(c>0){setTimeout(a,Math.max(10*c,100))}else{}}})()},sendFhrRequest:function(a,d,h,k,o,t,r){var c=Trex.Flash.get("tx_fhr");var q=Trex.Responder.register(o);
var n='Trex.Responder.callbacks["'+q+'"]';var p="Trex.Responder.process";if(t){var m=Trex.Responder.register(function(w,u){if(w==-1){t(w,u)}else{if(typeof r=="function"){r(w,u)}}});p='Trex.Responder.callbacks["'+m+'"]'}if(d.charAt(0)==="/"){d="http://"+document.location.host+d}if(a.toUpperCase()=="GET"){if(!h){h=""}else{d=d+((d.indexOf("?")>-1)?"&":"?")+h}}if(d){var j=50;(function l(){if(c.send){c.send(a,d,h,n,p)}else{if(j>0){j=j-1;setTimeout(l,Math.max(10*j,100))}}})()}}});Trex.I.JSRequester=Trex.Faculty.create({importScript:function(d,k,j,m){if(d==null&&d!=""){return null}k=k||"utf-8";j=j||document;try{var h=j.getElementsByTagName("head")[0]||j.documentElement;var c=j.createElement("script");c.type="text/javascript";c.charset=k;c.src=d;var a=false;c.onload=c.onreadystatechange=function(){if(!a&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){a=true;if(m){m()}c.onload=c.onreadystatechange=null;if(h&&c.parentNode){h.removeChild(c)}}};h.insertBefore(c,h.firstChild)
}catch(l){console.log(l)}}});window.$stop={};window.$propagate={};Trex.I.JobObservable=Trex.Faculty.create({jobObservers:{},observeJob:function(c,a){if(!this.jobObservers[c]){this.jobObservers[c]=[]}this.jobObservers[c].push(a)},reserveJob:function(h,c,d){d=d||500;if(!this.jobObservers[h]){this.jobObservers[h]=[]}var a=this;this.jobObservers[h].push(function(){var j=$A(arguments);setTimeout(function(){c.apply(a,j)},d)})},fireJobs:function(d){var a=this;var c=$A(arguments).slice(1);if(!this.jobObservers[d]){return}try{this.jobObservers[d].each(function(j){j.apply(a,c)})}catch(h){if(h!=$stop){throw h}}}});Trex.I.KeyObservable=Trex.Faculty.create({keyObservers:{},observeKey:function(d,c){var a=function(h){return(h.ctrlKey?"T":"F")+(h.altKey?"T":"F")+(h.shiftKey?"T":"F")+"_"+h.keyCode}(d);if(!this.keyObservers[a]){this.keyObservers[a]=[]}this.keyObservers[a].push(c)},fireKeys:function(h){var d=function(k){return(k.ctrlKey?"T":"F")+(k.altKey?"T":"F")+(k.shiftKey?"T":"F")+"_"+k.keyCode}(h);if(!this.keyObservers[d]){return
}var a=this;var c=false;try{this.keyObservers[d].each(function(k){try{k.apply(a,[h])}catch(l){if(l==$propagate){c=true}}})}catch(j){if(j!=$stop){throw j}}if(!c){try{$tx.stop(h)}catch(j){}}},registerKeyEvent:function(a){try{$tx.observe(a,"keydown",this.fireKeys.bind(this),true)}catch(c){}}});Trex.I.ElementObservable=Trex.Faculty.create({elementObservers:{},observeElement:function(d,a){if(d==null){this.observeElement({tag:"*tx-final-body*"},a)}else{if(d.length){for(var c=0;c<d.length;c++){var h=d[c];this.observeElement(h,a)}}else{if(!this.elementObservers[d.tag]){this.elementObservers[d.tag]={}}if(!d.klass){d.klass="*tx-all-class*"}if(!this.elementObservers[d.tag][d.klass]){this.elementObservers[d.tag][d.klass]=[]}this.elementObservers[d.tag][d.klass].push(a)}}},fireElements:function(h){if(!h){return}var d=h;var c=$A(arguments).slice(1);var a=this;try{if($tom.kindOf(d,"img,hr,table,button,iframe")){var k=this.collectObserverByElement(d.nodeName.toLowerCase(),d.className);if(k){k.each(function(l){l.apply(a,[d].concat(c))
})}}else{while(d){var k=this.collectObserverByElement(d.nodeName.toLowerCase(),d.className);if(k){k.each(function(l){l.apply(a,[d].concat(c))})}if($tom.isBody(d)){break}d=$tom.parent(d)}}}catch(j){if(j!=$stop){throw j}}this.fireFinally()},fireFinally:function(){var a=this;var c=$A(arguments).slice(1);var d=this.collectObserverByElement("*tx-final-body*");if(d){d.each(function(h){h.apply(a,[null].concat(c))})}},collectObserverByElement:function(c,a){if(!this.elementObservers[c]){return null}var j=[];a=a||"";if(a!=""){var d=a.split(" ");for(var h in this.elementObservers[c]){if(d.include(h)){j.push(this.elementObservers[c][h])}}}if(this.elementObservers[c]["*tx-all-class*"]){j.push(this.elementObservers[c]["*tx-all-class*"])}return j.flatten()}});Trex.I.MouseoverObservable=Trex.Faculty.create({mouseoverObservers:{},observeMouseover:function(a,c,d){if(!this.mouseoverObservers[a]){this.mouseoverObservers[a]={success:[],fail:[],flag:false}}this.mouseoverObservers[a]["success"].push(c);if(d){this.mouseoverObservers[a]["fail"].push(d)
}},fireMouseover:function(h){if(!h){return}var d=h;var a=this;try{for(var c in this.mouseoverObservers){this.mouseoverObservers[c].flag=false}while(d){var l=this.collectMouseoverObserver(d);if(l.length>0){var k=this.getPositionByNode(d);l.each(function(m){m.apply(a,[d,k])})}if($tom.isBody(d)){break}d=$tom.parent(d)}}catch(j){if(j!=$stop){throw j}}this.runMouseoverFailHandler()},runMouseoverFailHandler:function(){var c=[];for(var a in this.mouseoverObservers){if(!this.mouseoverObservers[a].flag){c.push(this.mouseoverObservers[a]["fail"])}}c.flatten().each(function(d){d()})},collectMouseoverObserver:function(l){var m=[];var d=l.className||"";var c=l.tagName;if(c){c=c.toLowerCase();if(this.mouseoverObservers[c]){m.push(this.mouseoverObservers[c]["success"]);this.mouseoverObservers[c]["flag"]=true}}if(d!=""){var h=d.split(" ");for(var k=0,a=h.length;k<a;k++){var j=c+"."+h[k];if(this.mouseoverObservers[j]){m.push(this.mouseoverObservers[j]["success"]);this.mouseoverObservers[j]["flag"]=true}}}return m.flatten()
}});Trex.I.Runnable=Trex.Faculty.create({isRunning:false,repeater:null,threads:[],startThread:function(a){if(this.repeater){this.repeater.clear()}else{this.repeater=new Trex.Repeater(this.runThread.bind(this))}this.repeater.start(a)},stopThread:function(){this.repeater.clear()},runThread:function(){if(this.isRunning){return}if(this.threads.length>0){this.isRunning=true;(this.threads.shift())();this.isRunning=false}},putThread:function(a,c){if(c){this.threads.unshift(a)}else{this.threads.push(a)}}});TrexMessage.addMsg({"@menu.pallete.revert":"\uae30\ubcf8\uc0c9\uc73c\ub85c","@adoptor.label":"\uac00\ub098\ub2e4","@adoptor.transparent":"\ud22c\uba85"});Trex.MarkupTemplate.add("menu.colorpallete.text",'#{for:items}<li class="tx-menu-list-item" style="background-color:#{color}"><a unselectable="on" style="color:#{text}">#{label}</a></li>#{/for:items}');Trex.MarkupTemplate.add("menu.colorpallete.thumb",'#{for:items}<li class="tx-menu-list-item" unselectable="on" style="background-color:#{color};border:none;#{if:image!=null}background-image:url(#{image})#{/if:image};"></li>#{/for:items}');
Trex.MarkupTemplate.add("menu.colorpallete.revert",'<p class="tx-pallete-revert"><a unselectable="on" href="javascript:;" title="@menu.pallete.revert">@menu.pallete.revert</a></p>');Trex.I.ColorPallete=Trex.Faculty.create({isGradeInit:false,isPickerDisplayed:false,onregenerated:function(a,c){this.setColorValueAtInputbox(c)},setColorValueAtInputbox:function(d){if(!d){return}if(typeof d!="string"&&d.toString){var d=d.toString()}var h=d.split("|")[0];if(!Trex.Color.getValidColor(h)){h="#000000"}var a=$tom.collect(this.elInner,"p.tx-pallete-input input");var c=$tom.collect(this.elInner,"p.tx-pallete-input span");if(d&&a&&c){a.value=h;c.style.backgroundColor=h}},hookEvent:function(x){var p=this.elMenu;var n=this.elInner=$tom.collect(p,"div.tx-menu-inner");var q=$tom.collect(n,"ul.tx-pallete-text-list");if(x.texts){var y=TXMSG("@adoptor.label");var r=x.texts.options;Trex.MarkupTemplate.get("menu.colorpallete.text").evaluateToDom({items:r},q);var m=$tom.collectAll(q,"li");this.addColorClickEvent(m,r)
}else{n.removeChild(q);q=null}if(x.thumbs){var t=!!x.needTrans;var o=[].concat(x.thumbs.options);if(t){o.pop();o.push(Object.extend({},x.thumbs.transparent))}var j=$tom.collect(n,"ul.tx-pallete-thumb-list");Trex.MarkupTemplate.get("menu.colorpallete.thumb").evaluateToDom({items:o},j);var c=$tom.collectAll(j,"li");this.addColorClickEvent(c,o)}this.elPicker=$tom.collect(n,"div.tx-pallete-picker");var d=$tom.collect(n,"div.tx-pallete-buttons");var w=this.elMore=$tom.collect(d,"p.tx-pallete-more a");$tx.observe(w,"click",this.togglePicker.bind(this));if(x.needRevert){$tom.insertFirst(d,Trex.MarkupTemplate.get("menu.colorpallete.revert").evaluateAsDom({}));$tx.observe($tom.collect(d,"p.tx-pallete-revert a"),"click",function(z){this.onSelect(z,null);this.hide()}.bind(this))}var l=$tom.collect(this.elInner,"p.tx-pallete-input");var a=this.elPreview=$tom.collect(l,"span");var u=this.elInput=$tom.collect(l,"input");var k=this.elEnter=$tom.collect(l,"a");var h=this;$tx.observe(u,"blur",function(){h.lastValue=u.value
});$tx.observe(k,"click",this.onColorEnter.bind(this))},addColorClickEvent:function(k,c){for(var h=0,a=k.length;h<a;h++){var d=k[h];var j=c[h];$tx.observe(d,"click",this.onSelect.bindAsEventListener(this,j.color+(j.text?"|"+j.text:"")))}},_generatePicker:function(){var c=this.elPicker;var d=$tom.collect(c,"div.tx-pallete-pickerbox");$tx.observe(d,"mouseout",this.onMouseOut.bind(this));var h=this.elChromaBar=$tom.collect(d,"div.tx-chromabar");$tom.replacePngPath(h);$tx.observe(h,"mousedown",this.onChromDown.bindAsEventListener(this));$tx.observe(h,"mousemove",this.onChromMove.bindAsEventListener(this));$tx.observe(h,"mouseup",this.onChromUp.bindAsEventListener(this));this.elHueBar=$tom.collect(d,"div.tx-huebar");var a=this.elHueBar;this.hueDownHandler=this.onHueDown.bindAsEventListener(this);this.hueMoveHandler=this.onHueMove.bindAsEventListener(this);this.hueUpHandler=this.onHueUp.bindAsEventListener(this);this.hueClickHandler=this.onHueClick.bindAsEventListener(this);$tx.observe(a,"mousedown",this.hueDownHandler);
$tx.observe(a,"click",this.hueClickHandler);this.nColWidth=150;this.nColHeight=120;this.nHueHeight=120;this.mRGB={r:0,g:0,b:0};this.mHSV={h:0,s:100,v:100};this.setHueColor("FF0000")},reinitGrade:function(){var c=$tx.cumulativeOffset(this.elMenu);var a=$tx.positionedOffset(this.elChromaBar);this.iChromPos={x:(c[0]+a[0]),y:(c[1]+a[1])};a=$tx.positionedOffset(this.elHueBar);this.iHuePos={x:(c[0]+a[0]),y:(c[1]+a[1])}},onColorEnter:function(c){var a;if(this.elInput.value==TXMSG("@adoptor.transparent")){a="transparent"}else{a=Trex.Color.getValidColor(this.elInput.value)}if(a!==null){this.onSelect(c,a)}this.hide()},previewColor:function(a){this.changeColor(a)},onMouseOut:function(){if(this.lastValue!==null&&this.lastValue!==undefined&&this.mousedownDetected){this.changeColor(this.lastValue)}},changeColor:function(a){a=Trex.Color.getHexColor(a);this.elPreview.style.backgroundColor=a;if(a=="transparent"){this.elInput.value=TXMSG("@adoptor.transparent")}else{this.elInput.value=a}},enterColor:function(){if(this.elInput.value==TXMSG("@adoptor.transparent")){this.changeColor("transparent")
}else{if(this.elInput.value.length==7){var a=Trex.Color.getValidColor(this.elInput.value);if(a!==null){this.changeColor(a)}}}},togglePicker:function(d){var a=this.elMore;var c=this.elPicker;if(this.isPickerDisplayed){a.className="tx-more-down";$tx.hide(c)}else{a.className="tx-more-up";$tx.show(c);if($tx.msie&&$tx.msie_ver<7){c.style.padding="1px";setTimeout(function(){c.style.padding="0px"},0)}if(!this.isGradeInit){this._generatePicker();this.isGradeInit=true;this.reinitGrade()}}this.isPickerDisplayed=!this.isPickerDisplayed;$tx.stop(d)},getChromCoords:function(c){var d=(c.clientX-this.iChromPos.x)+document.documentElement.scrollLeft;var a=(c.clientY-this.iChromPos.y)+document.documentElement.scrollTop;d=Math.min(this.nColWidth,Math.max(0,d));a=Math.min(this.nColHeight,Math.max(0,a));return{x:d,y:a}},getHueCoords:function(d){var a=$tx.cumulativeScroll($tx.element(d))[1];var h=(d.clientX-this.iHuePos.x)+document.documentElement.scrollLeft;var c=(d.clientY-this.iHuePos.y+a);h=Math.min(this.nHueHeight,Math.max(0,c));
c=Math.min(this.nColWidth,Math.max(0,h));return{x:h,y:c}},getColorByEvent:function(a,j){var d=(a/(this.nColWidth))*100;var c=(1-j/(this.nColHeight))*100;var h=3;d=Math.floor(Math.min(Math.max(d,0),100));if(d<h){d=0}else{if(d>100-h){d=100}}c=Math.floor(Math.min(Math.max(c,0),100));if(c<h){c=0}else{if(c>100-h){c=100}}this.mHSV.s=d;this.mHSV.v=c;this.mRGB=this.hsv2rgb(this.mHSV.h,this.mHSV.s,this.mHSV.v);return this.rgb2hex(this.mRGB.r,this.mRGB.g,this.mRGB.b)},onChromDown:function(a){this.mousedownDetected=true},onChromMove:function(c){if(this.mousedownDetected){var d=this.getChromCoords(c);var a=this.getColorByEvent(d.x,d.y);this.previewColor(a)}},onChromUp:function(c){var d=this.getChromCoords(c);var a=this.getColorByEvent(d.x,d.y);this.previewColor(a);this.lastValue=a;this.mousedownDetected=false},getHueByEvent:function(a,j){var c=parseInt((a/(this.nHueHeight))*360);this.mHSV.h=Math.floor(Math.min(Math.max(c,0),360));var d=this.hsv2rgb(this.mHSV.h,100,100);return this.rgb2hex(d.r,d.g,d.b)
},setHueColor:function(a){this.elChromaBar.style.backgroundColor=a},onHueDown:function(a){$tx.observe(document,"mousemove",this.hueMoveHandler);$tx.observe(document,"mouseup",this.hueUpHandler)},onHueMove:function(c){var d=this.getHueCoords(c);var a=this.getHueByEvent(d.x,d.y);this.setHueColor(a)},onHueClick:function(c){var d=this.getHueCoords(c);var a=this.getHueByEvent(d.x,d.y);this.setHueColor(a)},onHueUp:function(){$tx.stopObserving(document,"mousemove",this.hueMoveHandler);$tx.stopObserving(document,"mouseup",this.hueUpHandler)},hex2rgb:function(a){this.mRGB.r=(this.toDec(a.substr(0,1))*16)+this.toDec(a.substr(1,1));this.mRGB.g=(this.toDec(a.substr(2,1))*16)+this.toDec(a.substr(3,1));this.mRGB.b=(this.toDec(a.substr(4,1))*16)+this.toDec(a.substr(5,1));return this.mRGB},toDec:function(c){var a="0123456789ABCDEF";return a.indexOf(c.toUpperCase())},rgb2hex:function(d,c,a){d=d.toString(16);if(d.length==1){d="0"+d}c=c.toString(16);if(c.length==1){c="0"+c}a=a.toString(16);if(a.length==1){a="0"+a
}return"#"+d+c+a},hsv2rgb:function(d,p,n){d%=360;p/=100;n/=100;var a=0;g=0;b=0;if(p===0){a=Math.floor(n*255);g=Math.floor(n*255);b=Math.floor(n*255)}else{var k=d/60;var j=Math.floor(k);var o=n*(1-p);var m=n*(1-p*(k-j));var l=n*(1-p*(1-(k-j)));var c=0;nG=0;nB=0;if(j===0){c=n;nG=l;nB=o}else{if(j==1){c=m;nG=n;nB=o}else{if(j==2){c=o;nG=n;nB=l}else{if(j==3){c=o;nG=m;nB=n}else{if(j==4){c=l;nG=o;nB=n}else{if(j==5){c=n;nG=o;nB=m}}}}}}a=Math.floor(c*255);g=Math.floor(nG*255);b=Math.floor(nB*255)}return{r:a,g:g,b:b}},rgb2hsv:function(c,m,q){var j=(c/255);var p=(m/255);var u=(q/255);var l=0;s=0;v=0;var t=Math.min(j,p,u);var d=Math.max(j,p,u);var o=d-t;v=o;if(o===0){l=0;s=0}else{s=o/d;var n=(((d-j)/6)+(o/2))/o;var a=(((d-p)/6)+(o/2))/o;var k=(((d-u)/6)+(o/2))/o;if(j==d){l=k-a}else{if(p==d){l=(1/3)+n-k}else{if(u==d){l=(2/3)+a-n}}}if(l<0){l+=1}if(l>1){l-=1}}return{h:l,s:s,v:v}}});Trex.Color={getHexColor:function(c){c=c.trim();if(c.indexOf("rgb")<0){if(c.length>0&&(c.indexOf("-moz-use")>-1||c=="transparent")){return"transparent"
}else{return c}}if(/rgba\s?\((0,\s?){3}0\)/i.test(c)){return"transparent"}var a=c.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*\d*\)/i);if(!a){return c}a.shift();if(a.length<3){return c}var k;var j="#";for(var d=0;d<3;d++){k=parseInt(a[d].trim()).toString(16).toUpperCase();if(k.length==1){j=j.concat("0"+k)}else{if(k.length>2){j=j.concat("FF")}else{j=j.concat(""+k)}}}return j},getValidColor:function(c){if(c===null||c=="transparent"){return"transparent"}var a=c.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);if(a===null||c.length>8){return null}if(a[1].length==3){return"#"+a[1]+a[1]}else{return"#"+a[1]}},getOptColor:function(c,d){if(!c||c.length!=7||c.charAt(0)!="#"){return"#e5e5e5"}c=c.substring(1,7).toLowerCase();d=isNaN(d)?100:d;var j="#";var l,a;for(var k=0;k<3;k++){l=parseInt(c.substr(k*2,2),16);a=Math.round(Math.floor((255-l)*(1-d*0.01)+l*(d*0.02))).toString(16);if(a.length==1){j+="0"+a}else{if(a.length>2){j+="ff"}else{j+=a}}}return j}};Trex.I.CookieBaker=Trex.Faculty.create({cookieName:null,cookieValue:null,initCookie:function(a,c){this.cookieName=a;
this.cookieValue=function(){var j=document.cookie.split(";");for(var h=0;h<j.length;h++){var d=j[h].replace(/^\s+/,"");if(d.indexOf(a+"=")==0){return d.substring(a.length+1)}}return null}()||"";this.maxCnt=c||3},writeCookie:function(c,h){var a=this.cookieName;if(h){(time=new Date()).setTime(new Date().getTime()+h*24*60*60*1000);var d="; expires="+time.toGMTString()}else{var d=""}if(c===null){c=""}document.cookie=a+"="+c+d+"; path=/";this.cookieValue=c},readCookie:function(){if(this.cookieValue==="null"){return null}return this.cookieValue},eraseCookie:function(){var a=this.cookieName;this.writeCookie(a,"",-1)},extractOptions:function(a,d){var h=a.toMap("data");var c=[];d.split("|").compact().each(function(j){if(h[j]){c.push(h[j])}}.bind(this));return c},mergeValues:function(d,c){var a=d.split("|").compact();if(a.include(c)){return d}if(a.length>=this.maxCnt){a.pop()}a.unshift(c);return a.join("|")}});Trex.I.AlignExecution=Trex.Mixin.create({executeAlignImageMode:function(d){var j=this.constructor.__ImageModeProps.image;
var c=d.getControl();if(!c){return}d.apply(c,j);var a=this.constructor.__ImageModeProps.paragraph;if(a){var h=$tom.find(c,"%paragraph");d.apply(h,a)}},executeAlignTextMode:function(j){var a=this.constructor.__TextModeProps.paragraph;var d=j.getControl();if(d&&$tom.kindOf(d,"button")){var l=$tom.find(d,"%paragraph");if(l){j.apply(l,a)}var c=$tom.collect(d,"blockquote");if(c){c.style.margin=this.constructor.__TextModeProps.button["style"]["margin"]}}else{var k=j.blocks(function(){return"%paragraph"});j.apply(k,a);var h=[];k.each(function(n){var m;m=$tom.collectAll(n,"table,hr");m.each(function(o){h.push(o)})});j.apply(h,{align:a.style["textAlign"]})}},queryImageFloat:function(c){var a=c.getControl();if(a){return c.queryStyle(a,"float")}else{return null}},queryTextAlign:function(d){var c=d.findNode("%paragraph");var a=d.queryStyle(c,"textAlign");if(!a){a=d.queryAttr(c,"align")}if(!a||a=="start"||a=="auto"||a=="-webkit-auto"){a="left"}return a},queryControlAlign:function(c){var a=c.getControl();
if(a){_value=c.queryAttr(a,"align");return _value||null}else{return null}}});Trex.I.ListExecution=Trex.Mixin.create({executeToList:function(d,a,c){this.rngLstNodes=[];this.newGrpNode=function(){var j=d.newNode(a);d.apply(j,c);return j};this.newLstNode=function(){return d.newNode("li")};this.newPrNode=function(){return d.newNode("p")};var h=d.blocks(function(){return"%wrapper,%paragraph"});this._wrapList(d,h);$A(this.rngLstNodes).each(function(j){d.stuffNode(j)})},_wrapList:function(h,c){var d=null;var a=this;$A(c).each(function(m){if($tom.kindOf(m,"td,th")){var l=$tom.descendants(m,"%wrapper,%paragraph");if(l.length==0){var o=a.newPrNode();$tom.moveChild(m,o);$tom.append(m,o);l=[o]}a._wrapList(h,l)}else{if($tom.kindOf(m,"li")){if(d){$tom.append(d,m)}else{d=a.newGrpNode();var k=$tom.parent(m);if($tom.kindOf(k,"ul,ol")){var j=$tom.divideNode(k,$tom.indexOf(m));$tom.insertAt(d,j);$tom.append(d,m);if(!$tom.hasChildren(k)){$tom.remove(k)}if(!$tom.hasChildren(j)){$tom.remove(j)}}else{$tom.append(d,m)
}}a.rngLstNodes.push(m)}else{if(!d){d=a.newGrpNode();$tom.insertAt(d,m)}var n=a.newLstNode();if($tom.kindOf(m,"%wrapper")){$tom.wrap(n,m)}else{if($tom.kindOf(m,"%paragraph")){$tom.replace(m,n)}else{$tom.wrap(n,m)}}$tom.append(d,n);a.rngLstNodes.push(n)}}})},executeOffList:function(a){var c=a.blocks(function(){return"%listhead"});$A(c).each(function(j){var d="p";if($tom.ancestor(j,"%listgroup")){d="li"}var h=$tom.children(j,"li");$A(h).each(function(k){$tom.replace(k,a.newNode(d))});$tom.unwrap(j)})}});Trex.I.IndentExecution=Trex.Mixin.create({executeIndentByKeyEvent:function(a){if(a.isCollapsed()){var c=a.compareTextPos();if(c==$tom.__POSITION.__MIDDLE_OF_TEXT){this.executeAppendPadding(a);return}else{if(c==$tom.__POSITION.__END_OF_TEXT||c==$tom.__POSITION.__EMPTY_TEXT){if(a.findNode("td")){this.goNextCell(a);return}}}}this.executeIndentParagraph(a)},executeOutdentByKeyEvent:function(a){if(a.isCollapsed()){var c=a.compareTextPos();if(c==$tom.__POSITION.__START_OF_TEXT||c==$tom.__POSITION.__EMPTY_TEXT){if(a.findNode("td")){this.goPreviousCell(a);
return}}}this.executeOutdentParagraph(a)},executeIndentParagraph:function(a){var h=a.blocks(function(){return"%paragraph"});if(!h){return null}var j={style:{marginLeft:"+4em"}};var d;var c;$A(h).each(function(l){if($tom.kindOf(l,"li,dd,dt")){var k=$tom.ancestor(l,"ul,ol,dl");if(k){if(k!=d){c=null}if(c){$tom.append(c,l)}else{c=$tom.wrap($tom.clone(k),l)}d=k}else{$tom.applyAttributes(l,j)}}else{if($tom.kindOf(l,"td,th")){var m=a.newNode("p");$tom.moveChild(l,m);$tom.append(l,m);$tom.applyAttributes(m,j)}else{$tom.applyAttributes(l,j)}}})},executeOutdentParagraph:function(a){var c=a.blocks(function(){return"%paragraph"});if(!c){return null}var d={style:{marginLeft:"-4em"}};$A(c).each(function(k){if($tom.kindOf(k,"li,dd,dt")){var j=$tom.ancestor(k,"ul,ol,dl");if(j){var h=$tom.divideNode(j,$tom.indexOf(k));var l=$tom.ancestor(h,"ul,ol,dl");if(l){$tom.insertAt(k,h)}else{var m=$tom.replace(k,a.newNode("p"));$tom.insertAt(m,h)}if(!$tom.first(j,"li")){$tom.remove(j)}if(!$tom.first(h,"li")){$tom.remove(h)
}}else{$tom.applyAttributes(k,d)}}else{$tom.applyAttributes(k,d)}})},goNextCell:function(c){var h=c.findNode("td,th");var a=$tom.ancestor(h,"table");var d=$tom.collectAll(a,"td,th");while(d.length>0){if(h==d.shift()){break}}if(d.length>0){c.bookmarkInto(d[0])}else{c.bookmarkToNext(a)}},goPreviousCell:function(c){var h=c.findNode("td,th");var a=$tom.ancestor(h,"table");var d=$tom.collectAll(a,"td,th");while(d.length>0){if(h==d.pop()){break}}if(d.length>0){c.bookmarkInto(d[d.length-1])}else{c.bookmarkToPrevious(a)}},executeAppendPadding:function(a){a.pasteContent("&nbsp;&nbsp;&nbsp;&nbsp;",false)}});Trex.MarkupTemplate.add("button.itsnew",'<em class="tx-itsnew" title="new">new</em>');Trex.MarkupTemplate.add("button.select.text","<span>#{data}</span>");Trex.Button=Trex.Class.create({$const:{__borderClasses:{"tx-btn-trans":true,"tx-btn-lbg":true,"tx-btn-bg":true,"tx-btn-rbg":true,"tx-btn-lrbg":true,"tx-slt-tlbg":true,"tx-slt-tbg":true,"tx-slt-trbg":true,"tx-slt-blbg":true,"tx-slt-bbg":true,"tx-slt-brbg":true,"tx-slt-31bg":true,"tx-slt-31lbg":true,"tx-slt-31rbg":true,"tx-slt-70bg":true,"tx-slt-59bg":true,"tx-slt-42bg":true,"tx-slt-56bg":true,"tx-btn-nlrbg":true,"tx-btn-43lrbg":true,"tx-btn-52lrbg":true,"tx-btn-57lrbg":true,"tx-btn-71lrbg":true,"tx-btn-48lbg":true,"tx-btn-48rbg":true,"tx-btn-30lrbg":true,"tx-btn-46lrbg":true,"tx-btn-67lrbg":true,"tx-btn-49lbg":true,"tx-btn-58bg":true,"tx-btn-46bg":true,"tx-btn-49rbg":true,"tx-btn-widget":true,"tx-btn-widget-tbg":true,"tx-btn-widget-brbg":true},addBorderClass:function(a){Trex.Button.__borderClasses[a]=true
},getBorderClass:function(h){var a=$tx.classNames(h);for(var d=0;d<a.length;d++){var c=a[d];var j=Trex.Button.__borderClasses[c];if(j){return c}}}},hasState:null,isRadioButton:null,isDisabled:null,lastValue:null,lastText:null,elButton:null,elIcon:null,borderClass:null,_command:function(){},setCommand:function(a){this._command=a},initialize:function(a){var j=this.config=a;if(j.borderClass){Trex.Button.addBorderClass(j.borderClass)}this.itsNew=!!j.itsnew;this.useSync=!!j.sync;this.hasState=!!j.status;this.isRadioButton=!!j.radio;this.isDisabled=false;this.lastValue=j.selectedValue||null;if(a.el){this.elButton=a.el}else{var c=j.id||"tx_"+j.identity;this.elButton=$must(c+(j.initializedId||""))}var h=this.elButton;var d=this.elIcon=$tom.collect(h,"a");if(!d){throw new Error("[Exception]Trex.Button : can't find elIcon for button '"+c+"'")}this.borderClass=Trex.Button.getBorderClass(h);if(this.oninitialized){this.oninitialized.bind(this)(j)}this.generate();if(this.itsNew){$tom.append(d,Trex.MarkupTemplate.get("button.itsnew").evaluateAsDom({}))
}if(j.selectedValue&&this.setValue){this.setValue(j.selectedValue)}if(j.selectedText&&this.setText){this.setText(j.selectedText)}if(j.selectedState&&this.setState){this.setState(j.selectedState)}},generate:function(){var a=this.elIcon;$tx.observe(a,"mousedown",this.onMouseDown.bindAsEventListener(this));$tx.observe(a,"mouseover",this.onMouseOver.bindAsEventListener(this));$tx.observe(a,"mouseout",this.onMouseOut.bindAsEventListener(this));$tx.observe(a,"keydown",this.onKeyDown.bindAsEventListener(this));$tx.observe(a,"click",this.onClick.bindAsEventListener(this));if(this.ongenerated){this.ongenerated.bind(this)(this.config)}},getCurrentBorderClass:function(h){var a=$tx.classNames(h);for(var d=0;d<a.length;d++){var c=a[d];if(c.indexOf(this.borderClass)!=-1){return c}}return"undefined"},normalState:function(){var a=this.getCurrentBorderClass(this.elButton);if(a==this.borderClass){return}$tx.removeClassName(this.elButton,a);$tx.addClassName(this.elButton,this.borderClass)},hoveredState:function(){var a=this.getCurrentBorderClass(this.elButton);
$tx.removeClassName(this.elButton,a);$tx.addClassName(this.elButton,this.borderClass+"-hovered");this.decreaseZindex()},pushedState:function(){var a=this.getCurrentBorderClass(this.elButton);$tx.removeClassName(this.elButton,a);$tx.addClassName(this.elButton,this.borderClass+"-pushed")},currentState:function(){var c=this.getCurrentBorderClass(this.elButton);var a="normal";if(c.indexOf("-pushed")!=-1){a="pushed"}else{if(c.indexOf("-hovered")!=-1){a="hovered"}}return a},isPushed:function(){return("pushed"==this.currentState())},hasMenu:function(){return this.tool?!!(this.tool.menu):false},onMouseDown:function(a){if(a){$tx.stop(a)}if(this.isDisabled){return}if(this.hasMenu()||this.hasState){if(this._command(a)===false){return}}else{this.evsessionstarted=true}if(this.isPushed()){this.normalState()}else{this.pushedState()}},onMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onMouseOut:function(){if(this.evsessionstarted){this.normalState();this.evsessionstarted=false
}if(this.isDisabled||this.isPushed()){return}this.normalState()},onClick:function(a){if(a){$tx.stop(a)}if(this.isDisabled){return}if(!this.hasState){this._command();this.normalState();this.evsessionstarted=false}},onKeyDown:function(a){if(a.keyCode===13){this.onMouseDown(a);this.onClick(a)}},updateAfterCommand:function(a,c){this.setValueAndText(a,c);this.normalState()},setValueAndText:function(a,c){this.setValue(a);this.setText(c)},setValue:function(a){if(a){this.lastValue=a}},setText:function(a){this.lastText=a},getValue:function(){return this.lastValue},getText:function(){return this.lastText},setState:function(a){if(a){this.pushedState()}else{this.normalState()}},setClassName:function(a){this.elIcon.className=a},disable:function(){if(this.elButton){this.isDisabled=true;$tx.addClassName(this.elButton,"tx-disable")}},enable:function(){if(this.elButton){this.isDisabled=false;$tx.removeClassName(this.elButton,"tx-disable")}},release:function(){if(this.isDisabled){return}if(this.hasMenu()||!this.hasState){this.normalState()
}},increaseZindex:function(){var a=10;if($tom.parent(this.elButton)){$tx.setStyle($tom.parent(this.elButton),{zIndex:a})}},decreaseZindex:function(){var a=4;if($tom.parent(this.elButton)){$tx.setStyle($tom.parent(this.elButton),{zIndex:a})}}});Trex.Button.Select=Trex.Class.create({$extend:Trex.Button,ongenerated:function(){Trex.MarkupTemplate.get("button.select.text").evaluateToDom({data:$tom.getText(this.elIcon)},this.elIcon);this.elText=$tom.collect(this.elIcon,"span");var a=$tom.collect(this.elButton,"a.tx-arrow");if(a){$tx.observe(a,"mousedown",this.onMouseDown.bindAsEventListener(this));$tx.observe(a,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));$tx.observe(a,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));$tx.observe(a,"click",this.onClick.bindAsEventListener(this))}},setText:function(a){this.elText.innerText=a},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.hoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return
}this.normalState()}});Trex.Button.Splits=Trex.Class.create({$extend:Trex.Button,ongenerated:function(){var c=this.elButton;var a=this.elArrow=$tom.collect(c,"a.tx-arrow");if(!a){throw new Error("[Exception]Trex.Button.Splits : not exist element(a.tx-arrow)")}$tx.observe(a,"mousedown",this.onArrowMouseDown.bindAsEventListener(this));$tx.observe(a,"mouseover",this.onArrowMouseOver.bindAsEventListener(this));$tx.observe(a,"mouseout",this.onArrowMouseOut.bindAsEventListener(this));$tx.observe(a,"click",this.onArrowClick.bindAsEventListener(this))},arrowHoveredState:function(){var a=this.getCurrentBorderClass(this.elButton);$tx.removeClassName(this.elButton,a);$tx.addClassName(this.elButton,this.borderClass+"-arrow-hovered")},arrowPushedState:function(){var a=this.getCurrentBorderClass(this.elButton);$tx.removeClassName(this.elButton,a);$tx.addClassName(this.elButton,this.borderClass+"-arrow-pushed")},onMouseDown:function(a){if(this.isDisabled){return}if(this.isPushed()){this._command();this.normalState();
this.commandexecuted=true}else{this.pushedState();this.commandexecuted=false;this.evsessionstarted=true}},onClick:function(a){if(this.isDisabled){return}if(!this.commandexecuted){this.tool.execute(this.lastValue,this.lastText);this.evsessionstarted=false}else{this.commandexecuted=false}this.normalState();if(a){$tx.stop(a)}},onArrowMouseDown:function(){if(this.isDisabled){return}if(this._command()===false){return}if(this.isPushed()){this.normalState()}else{this.arrowPushedState()}},onArrowClick:function(a){if(this.isDisabled){return}if(a){$tx.stop(a)}},onArrowMouseOver:function(){if(this.isDisabled||this.isPushed()){return}this.arrowHoveredState()},onArrowMouseOut:function(){if(this.isDisabled||this.isPushed()){return}if(this.commandexecuted){this.commandexecuted=false}this.normalState()}});Trex.Button.Toggle=Trex.Class.create({$extend:Trex.Button,setValue:function(a){if(a){this.pushedState()}else{this.normalState()}}});Trex.Button.Widget=Trex.Class.create({$extend:Trex.Button.Select,setText:function(a){this.elIcon.innerText=a;
if(this.lastText){$tx.removeClassName(this.elIcon,this.lastText)}$tx.addClassName(this.elIcon,a);this.lastText=a},setMenu:function(d,a){this.hasState=true;var c=this;d.setCommand(function(){var h=a.apply(this,arguments);c.updateAfterCommand.apply(c,arguments);return h});c.setCommand(function(){if(!c.isPushed()){var h=c.getValue();d.show(h)}else{d.hide()}return true})}});Trex.Button.ColorWidget=Trex.Class.create({$extend:Trex.Button.Widget,setValue:function(a){$tx.setStyle(this.elIcon.parentNode,{backgroundColor:a});this.lastValue=a},setText:function(){}});TrexMessage.addMsg({"@menu.pallete.enter":"\uc785\ub825","@menu.pallete.more":"\ub354\ubcf4\uae30"});Trex.Menu=Trex.Class.create({isInit:false,isDisplayed:false,_command:function(){},setCommand:function(a){this._command=a},initialize:function(a){var d=this.config=a;var h;if(d.el){h=d.el;if(!h){throw new Error("[Exception]Trex.Menu : not exist element("+d.el+")")}}else{var c=d.id;var j=((d.initializedId)?d.initializedId:"");if(!c){if(!d.identity){throw new Error("[Exception]Trex.Menu : not exist config - id")
}c="tx_"+d.identity+"_menu"}h=$tx(c+j);if(!h){throw new Error("[Exception]Trex.Menu : not exist element("+c+")")}}this.elMenu=h;if(d.top){h.style.top=d.top+"px"}if(d.left){h.style.left=d.left+"px"}if(this.oninitialized){this.oninitialized.bind(this)(a)}if(this.ongenerated){this.generateHandler=this.ongenerated.bind(this)}if(this.onregenerated){this.regenerateHandler=this.onregenerated.bind(this)}},generate:function(a){if(this.generateHandler){var c=this.config;this.generateHandler(c,a)}},regenerate:function(a){if(this.initHandler){this.initHandler()}if(this.regenerateHandler){var c=this.config;this.regenerateHandler(c,a)}},onSelect:function(d,h){var c=$A(arguments);var a=c.shift();this._command.apply(this,c);this.hide();$tx.stop(a)},onCancel:function(){if(this.cancelHandler){this.cancelHandler()}this.hide()},visible:function(){return this.isDisplayed},show:function(a){$tx.show(this.elMenu);if(this.isInit){this.regenerate(a)}else{if(!!this.config.listseturl){this.lazyGenerate(a)}else{this.generate(a);
this.isInit=true;this.regenerate(a)}}if(this.showSpecial){this.showSpecial()}this.isDisplayed=true},lazyGenerate:function(a){var c=this;new (Trex.Class.create({$mixins:[Trex.I.JSRequester],initialize:function(){this.importScript(c.config.listseturl,"utf-8",document,function(){c.generate();c.isInit=true;c.regenerate(a)})}}))()},hide:function(a){$tx.hide(this.elMenu);this.isDisplayed=false},toggle:function(a){if(this.isDisplayed){this.hide()}else{this.show()}},release:function(a){if(!this.isInit){return}this.hide(a)}});Trex.MarkupTemplate.add("menu.select",'<ul class="tx-menu-list" unselectable="on">#{items}</ul>');Trex.MarkupTemplate.add("menu.select.item",'<li class="tx-menu-list-item"><a class="#{klass}" href="javascript:;" unselectable="on">#{label}</a></li>');Trex.Menu.Select=Trex.Class.create({$extend:Trex.Menu,generate:function(){var d=this.config;var a=this.getCheckedConfig(d);var c=this.generateList(a);$tom.insertFirst(this.elMenu,c);if(this.generateHandler){this.generateHandler(d)
}if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}},getCheckedConfig:function(a){var c=a.options.select(function(d){if(d.expired==true){return false}else{return true}})||[];return c},generateList:function(j){var c=Trex.MarkupTemplate.get("menu.select").evaluateAsDom({items:this.generateListItem(j)});var h=$tom.collectAll(c,"li a");for(var a=0;a<j.length;a++){var k=j[a];var d=h[a];$tx.observe(d,"click",this.onSelect.bindAsEventListener(this,k.data,k.title))}return c},generateListItem:function(d){var a=[];for(var c=0;c<d.length;c++){a.push(Trex.MarkupTemplate.get("menu.select.item").evaluate(d[c]))}return a.join("")},onSelect:function(){var c=$A(arguments);var a=c.shift();this._command.apply(this,c);this.hide();$tx.stop(a)}});Trex.MarkupTemplate.add("menu.items",['<table unselectable="on"><tbody>',"	#{for:row}<tr>",'		#{for:col}<td class="tx-menu-list-item">','<a href="javascript:;"><span class="#{klass}">','#{if:image!=""}<img src="#{image}" data="#{data}"/>#{/if:image}','#{if:image=""}#{data}#{/if:image}',"</span></a>","		</td>#{/for:col}","	</tr>#{/for:row}","</tbody></table>"].join(""));
Trex.MarkupTemplate.add("menu.list",['<div class="tx-menu-inner">','	<div class="tx-menu-list">',"   	#{items}","    </div>","</div>"].join(""));Trex.Menu.List=Trex.Class.create({$extend:Trex.Menu,generate:function(){var d=this.config;var a=d.options.select(function(h){if(h.expired==true){return false}else{return true}})||[];this.cols=d.cols||1;this.rows=d.rows||a.length;var c=this.generateList(a);$tom.insertFirst(this.elMenu,c);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(d)}},generateList:function(c){var a=Trex.MarkupTemplate.splitList(this.rows,this.cols,c);var d=Trex.MarkupTemplate.get("menu.list").evaluateAsDom({items:Trex.MarkupTemplate.get("menu.items").evaluate(a)});$tx.observe(d,"click",this.onSelect.bindAsEventListener(this));$tx.observe(d,"mouseover",this.onItemMouseOver.bindAsEventListener(this));$tx.observe(d,"mouseout",this.onItemMouseOut.bindAsEventListener(this));
return d},onItemMouseOver:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.addClassName(c,"tx-item-hovered")}$tx.stop(a)},onItemMouseOut:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.removeClassName(c,"tx-item-hovered")}$tx.stop(a)},onSelect:function(c){var d=$tx.findElement(c,"span");if(d.tagName&&d.tagName.toLowerCase()=="span"){var a;if(d.firstChild&&d.firstChild.nodeType==1&&d.firstChild.tagName.toLowerCase()=="img"){a=$tom.getAttribute(d.firstChild,"data")||""}else{a=d.innerText}this._command(a);this.hide()}$tx.stop(c)}});Trex.MarkupTemplate.add("menu.matrix",['<div class="tx-menu-inner">','	<ul class="tx-menu-matrix-title">','		#{for:matrices}<li class=""><a href="javascript:;" class="tx-menu-matrix-title-item">#{title}</a></li>#{/for:matrices}',"	</ul>",'	<div class="tx-menu-matrix-listset">','   	#{for:matrices}<div class="tx-menu-matrix-list #{klass}">',"       	#{items}","		</div>#{/for:matrices}","    </div>","</div>"].join(""));
Trex.Menu.Matrix=Trex.Class.create({$extend:Trex.Menu,generate:function(){var d=this.config;var a=this.matrices=d.matrices.select(function(h){if(!h.onlyIE||$tx.msie){return true}else{return false}})||[];this.cols=d.cols||10;this.rows=d.rows||5;var c=this.generateMatrix(a);$tom.insertFirst(this.elMenu,c);if(this.ongeneratedList){this.generateList=this.ongeneratedList.bind(this)}if(this.ongeneratedListItem){this.generateListItem=this.ongeneratedListItem.bind(this)}if(this.generateHandler){this.generateHandler(d)}this.showFirstTab()},regenerate:function(){if(this.showFirstTab){this.showFirstTab()}if(this.regenerateHandler){var a=this.config;this.regenerateHandler(a)}},generateMatrix:function(n){var o=this;var k=this.elMenu;var c=this.cols;var m=this.rows;n.each(function(q){var p=Trex.MarkupTemplate.splitList(m,c,q.options);q.items=Trex.MarkupTemplate.get("menu.items").evaluate(p)});var l=Trex.MarkupTemplate.get("menu.matrix").evaluateAsDom({matrices:n});var j=$tom.collectAll(l,"div.tx-menu-matrix-listset div.tx-menu-matrix-list");
var a=$tom.collectAll(l,"ul.tx-menu-matrix-title li");var h=false;var d=0;n.each(function(p){var r=j[d];$tx.observe(r,"click",o.onSelect.bindAsEventListener(o));$tx.observe(r,"mouseover",o.onItemMouseOver.bindAsEventListener(o));$tx.observe(r,"mouseout",o.onItemMouseOut.bindAsEventListener(o));var q=a[d];$tx.observe(q,"click",o.onTitleClick.bindAsEventListener(o,q,r));if(p.defaultshow==true){o.showFirstTab=o.onTitleClick.bindAsEventListener(o,q,r);h=true}d++});if(!h){this.showFirstTab=this.onTitleClick.bindAsEventListener(this,a[0],j[0]);h=true}return l},onTitleClick:function(d,c,a){if(this.lastElList!=a){$tx.show(a);if(this.lastElList){$tx.hide(this.lastElList)}this.lastElList=a;if(this.lastElTitleItem){$tx.removeClassName(this.lastElTitleItem,"tx-selected")}$tx.addClassName(c,"tx-selected");this.lastElTitleItem=c}if(d){$tx.stop(d)}},onItemMouseOver:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.addClassName(c,"tx-item-hovered")}$tx.stop(a)
},onItemMouseOut:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.removeClassName(c,"tx-item-hovered")}$tx.stop(a)},onSelect:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){this._command(c.innerText);this.hide()}$tx.stop(a)}});Trex.MarkupTemplate.add("menu.colorPallete",['<div class="tx-menu-inner">','<ul class="tx-pallete-text-list"></ul>','<ul class="tx-pallete-thumb-list"></ul>','<p class="tx-pallete-input"><span style="background-color: rgb(7, 3, 3);"></span><input type="text" class="tx-color-value"/><a class="tx-enter">@menu.pallete.enter</a></p>','<div class="tx-pallete-buttons">','	<p class="tx-pallete-more"><a class="tx-more-down" href="javascript:;">@menu.pallete.more</a></p>',"</div>",'<div class="tx-pallete-picker">','	<div class="tx-pallete-pickerbox">','		<div class="tx-chromabar" style="background-color: rgb(255, 0, 0);"></div><div class="tx-huebar"></div>',"	</div>","</div>","</div>"].join(""));
Trex.Menu.ColorPallete=Trex.Class.create({$extend:Trex.Menu,$mixins:[Trex.I.ColorPallete],generate:function(c){var d=this.config;var h=this.elMenu;Trex.MarkupTemplate.get("menu.colorPallete").evaluateToDom({},h);var a=d.thumbs.transparent;d.thumbs.transparent=Object.extend(d.thumbs.transparent,{image:TrexConfig.getIconPath(a.image),thumb:TrexConfig.getIconPath(a.thumb),thumbImage:TrexConfig.getIconPath(a.thumbImage)});if(!this.hookEvent){throw new Error("[Exception]Trex.Menu.ColorPallete : not implement function(hookEvent)")}this.hookEvent(d);if(this.generateHandler){this.generateHandler(d)}},onSelect:function(){var c=$A(arguments);var a=c.shift();this._command.apply(this,c);this.remainColor(c);this.hide();$tx.stop(a)},remainColor:function(a){if(a){this.setColorValueAtInputbox(a)}}});Trex.MarkupTemplate.add("blackbox",'<div class="tx-blackbox">		<div class="tx-blackbox-panel"></div>		<div class="tx-content"></div>	</div>');Trex.BlackBox=Trex.Class.create({initialize:function(){},make:function(d){var c=this.elBlackbox=Trex.MarkupTemplate.get("blackbox").evaluateAsDom({});
var h=this.holder=d||document.body;$tom.insertFirst(h,c);this.elBlackboxPanel=$tom.collect(c,"div.tx-blackbox-panel");this.elContentArea=$tom.collect(c,"div.tx-content");var a=this.calculatePanelSize();this.panelWidth=a[0];this.panelHeight=a[1]},show:function(a){this.makeScrollbar();this._append(a)},_append:function(c){if(this.elContentArea.firstChild!=null){return false}$tom.append(this.elContentArea,c);var a=this.calculatePanelSize();this.panelWidth=a[0];this.panelHeight=a[1];$tx.setStyle(this.elBlackbox,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});$tx.setStyle(this.elBlackboxPanel,{width:this.panelWidth.toPx(),height:this.panelHeight.toPx()});$tx.show(this.elBlackbox);this.alignCenter()},hide:function(){$tx.hide(this.elBlackbox);this.elContentArea.removeChild(this.elContentArea.firstChild);this.removeScrollbar()},makeScrollbar:function(){if($tx.msie){document.body.scroll="yes"}else{document.body.style.overflow="scroll"}},removeScrollbar:function(){if($tx.msie){document.body.scroll=""
}else{document.body.style.overflow=""}},calculatePanelSize:function(){var a=$tom.getPosition(this.holder);return[a.width,a.height]},resizeBlackbox:function(a){this.panelHeight=a;$tx.setStyle(this.elBlackbox,{height:this.panelHeight.toPx()});$tx.setStyle(this.elBlackboxPanel,{height:this.panelHeight.toPx()});this.alignCenter()},alignCenter:function(){var k=$tx.getStyle(this.elBlackbox,"width");var a=$tx.getStyle(this.elBlackbox,"height");var d=this.calculatePanelSize();this.panelWidth=d[0];this.panelHeight=d[1];var j=$tom.getPosition(this.elContentArea.firstChild);var c=j.width.parsePx();var l=j.height.parsePx();var h=(this.panelWidth-c)/2;var m=(this.panelHeight>l*2)?(this.panelHeight-l)/2:0;$tx.setStyle(this.elContentArea,{marginLeft:h.toPx(),marginTop:"30px"})}});Trex.install("editor.getBlackBox & canvas.getBlackBox",function(d,h,j,c,a){var k=new Trex.BlackBox();d.getBlackBox=function(){return k};c.getBlackBox=function(){return k}});Trex.module("generate blackbox",function(h,j,k,c,a){var l=h.getBlackBox();
var d=h.getWrapper();l.make(d);c.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},l.hide.bind(l));h.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},l.hide.bind(l));c.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(m){l.resizeBlackbox(m.parsePx())})});Trex.MarkupTemplate.add("noticebox",'<div class="tx-noticebox">	<dl>		<dt>			<span>#{head}</span>			<a href="javascript:;">close</a>		</dt>		<dd>			<p>#{body}</p>			<div>				<a href="javascript:;"><img src="#{confirm}" border="0"/></a>				<a href="javascript:;"><img src="#{cancel}" border="0" /></a>			</div>		</dd>	</dl></div>');Trex.NoticeBox=Trex.Class.create({initialize:function(c,a){this.make({head:c.head,body:c.body,confirm:c.confirm||"http://i1.daumcdn.net/icon/editor/btn_confirm_s1.gif?rv=1.0.1",cancel:c.cancel||"http://i1.daumcdn.net/icon/editor/btn_cancel_s1.gif?rv=1.0.1"});this.blackbox=a},make:function(a){if(this.elBox){return this}a=a||{};var c=this.elBox=Trex.MarkupTemplate.get("noticebox").evaluateAsDom(a);
$tx.observe($tom.collect(c,"dt a"),"click",this.cancel.bind(this));$tx.observe($tom.collectAll(c,"dd div a")[0],"click",this.confirm.bind(this));$tx.observe($tom.collectAll(c,"dd div a")[1],"click",this.cancel.bind(this));return this},weave:function(d,c,a){this.confirmHandler=d;this.cancelHandler=c;this.completeHandler=a;return this},show:function(){this.blackbox.show(this.elBox)},hide:function(a){this.blackbox.hide();return false},confirm:function(a){if(this.confirmHandler){this.confirmHandler()}return false},cancel:function(a){if(this.cancelHandler){this.cancelHandler()}this.hide(a);return false},complete:function(a){if(this.completeHandler){this.completeHandler()}this.hide(a);return false}});Trex.install("editor.newNoticeBox",function(d,h,j,c,a){d.newNoticeBox=function(k){return new Trex.NoticeBox(k,d.getBlackBox())}});Trex.Editor=Trex.Class.create({$mixins:[Trex.I.JobObservable,Trex.I.KeyObservable],toolbar:null,sidebar:null,canvas:null,config:null,initialize:function(d){var m=this,l=this.config=TrexConfig.setup(d);
var k=this.canvas=new Trex.Canvas(m,l);var c=this.toolbar=new Trex.Toolbar(m,l);var j=this.sidebar=new Trex.Sidebar(m,l);Trex.invokeInstallation(m,c,j,k,l);var a=l.events;var h=function(n){if(a.useHotKey){m.fireKeys(n)}};$tx.observe(document,"keydown",h.bindAsEventListener(this),false);k.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var n=new Date().getTime();var q=Math.round((n-Editor.initStartTime)/100)/10;m.fireJobs(Trex.Ev.__IFRAME_LOADING_TIME,q);var p=m.getInitializedId();var o=$tx("tx_loading"+p);if(!o){return}if(k.mode!=Trex.Canvas.__WYSIWYG_MODE){k.fireJobs(Trex.Ev.__CANVAS_MODE_INITIALIZE,Trex.Canvas.__WYSIWYG_MODE,k.mode)}$tx.hide(o)});Trex.invokeRegisters(m,c,j,k,l);Trex.invokeModules(m,c,j,k,l)},getToolbar:function(){return this.toolbar},getSidebar:function(){return this.sidebar},getCanvas:function(){return this.canvas},getUsedWebfont:function(){return this.canvas.getUsedWebfont()},getConfig:function(){return this.config},getParam:function(c){var a={},d=this.config;d.params.each(function(h){if(d[h]){a[h]=d[h]
}});return a[c]},getWrapper:function(){return $must(this.config.wrapper)},getInitializedId:function(){return this.config.initializedId||""},saveEditor:function(){this.setDisableUnloadHandler();this.getSaver().submit()},loadEditor:function(a){this.getSaver().load(a)},getContent:function(){return this.getSaver().getContent()},getAttachments:function(c,a){return this.getSaver().getAttachments(c,a)},getEmbeddedData:function(a){return this.getSaver().getEmbeddedData(a)},getResults:function(a){return this.getSaver().getResults(a)},getAutosaveSeq:function(){return(this.getAutoSaver&&this.getAutoSaver())?this.getAutoSaver().getCurSeq():"0"}});(function(){Editor=Trex.Class.create({$const:{__ACTIVE:false,__PANEL_LOADED:false,__EDITOR_LOADED:false,__MULTI_LIST:[],__SELECTED_INDEX:0},initialize:function(c){if(Trex.hmailLogging){Trex.hmailLogging(c)}Editor.initStartTime=new Date().getTime();StopWatch.start();var h;try{Editor.__EDITOR_LOADED=false;Editor.__PANEL_LOADED=false;h=new Trex.Editor(c);var j=h.getInitializedId();
if(j!=null){var a=j==""?0:j;Editor.__MULTI_LIST[a]=h;Editor.__SELECTED_INDEX=a}Object.extend(Editor,h);Editor.__EDITOR_LOADED=true;Editor.__ACTIVE=true}catch(d){if(h){h.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,d);throw d}else{throw"_editor_not_defined!"+d}}}});Editor.modify=function(a){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(a)}}else{setTimeout(this.modify.bind(this,a),10)}};Editor.restore=function(a){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.getAutoSaver&&this.getAutoSaver()){this.getAutoSaver().load(a)}}else{setTimeout(this.restore.bind(this,a),10)}};Editor.save=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.saveEditor){this.saveEditor()}}else{setTimeout(this.saveEditor.bind(this),10)}return false};Editor.focus=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var a=this.getCanvas();if(a){a.focus()}}else{setTimeout(this.focus.bind(this),10)}return false};Editor.focusOnTop=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var a=this.getCanvas();
if(a){a.focusOnTop()}}else{setTimeout(this.focusOnTop.bind(this),10)}return false};Editor.focusOnBottom=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){var a=this.getCanvas();if(a){a.focusOnBottom()}}else{setTimeout(this.focusOnBottom.bind(this),10)}return false};Editor.permitUnload=function(){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){this.setDisableUnloadHandler()}else{setTimeout(this.permitUnload.bind(this),500)}};Editor.onPanelLoadComplete=function(a){if(Editor.__PANEL_LOADED==true&&Editor.__EDITOR_LOADED==true){if(a){a()}}else{setTimeout(Editor.onPanelLoadComplete.bind(Editor,a),500)}};Editor.switchEditor=function(a){Editor.__SELECTED_INDEX=a;Object.extend(Editor,Editor.__MULTI_LIST[a])};Editor.focusOnForm=function(a){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){window.focus();var c=Editor.getForm();if(c.getElementByName(a)){c.getElementByName(a).focus()}}else{setTimeout(Editor.focusOnForm.bind(Editor,a),500)}return false};Editor.fromHdrive=function(k){var c=[];
for(var h=0;h<k.length;h++){c.push(k[h])}var a={content:"",attachments:c};if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){if(this.loadEditor){this.loadEditor(a);var l=Editor.getAttachBox().datalist;for(var d=0;d<l.length;d++){l[d].execAppend()}}}else{setTimeout(this.fromHdrive.bind(this,k),10)}};Editor.prototype.switchEditor=Editor.switchEditor;Editor.prototype.focusOnForm=Editor.focusOnForm})();Trex.Toolbar=Trex.Class.create({$mixins:[Trex.I.JobObservable],el:null,tools:null,initialize:function(a,c){this.canvas=a.getCanvas();var d=c.initializedId||"";this.el=$must("tx_toolbar_basic"+d,"Trex.Toolbar")},disableToolbar:function(){var c=this.tools;for(var a in c){if(c[a].button){c[a].button.disable()}}},serializeToolValues:function(){var h=this.tools;var a={};for(var d in h){var c=h[d];a[d]=c.button.lastValue}return a},widgetSeq:0,makeWidget:function(d,k,h){var c=this;var j=this.canvas;var a=new (function(){this.identity="widget"+(++c.widgetSeq);this.wysiwygonly=true;this.menuFoldAuto=true;
this.canvas=j;this.toolbar=c})();Trex.Tool.prototype.weave.bind(a)(d,k,h);this.tools[a.identity]=a;return a}});Trex.install("editor.getTool",function(h,j,k,d,c){var a=j.tools={};h.getTool=function(l){if(a[l]!=null){return a[l]}else{if(arguments.length==0){return a}else{return null}}}});Trex.register("new tools",function(k,m,a,c,d){var l=m.tools;var h=d.initializedId||"";for(var o in Trex.Tool){var n=Trex.Tool[o]["__Identity"];if(n){var j=TrexConfig.getTool(n,d);j.initializedId=h;if(Trex.available(j,n+h)){l[n]=new Trex.Tool[o](k,m,j)}}}if(!!c.config.readonly){m.disableToolbar()}});Trex.module("bind events with tools",function(h,m,a,c,d){var k=m.tools;var l=function(t,r){if(t==r){return}for(var p in k){var o=k[p];var q=o.button;if(Trex.Canvas.__WYSIWYG_MODE==r){q.enable()}else{if(Trex.Canvas.__WYSIWYG_MODE==t){if(o.wysiwygonly){q.disable()}else{q.enable()}}}}};c.observeJob(Trex.Ev.__CANVAS_MODE_CHANGE,l);c.observeJob(Trex.Ev.__CANVAS_MODE_INITIALIZE,l);var n=function(q){for(var p in k){var o=k[p];
if(q!=o.identity){if(o.button){o.button.release();o.button.decreaseZindex()}if(o.menu&&o.menuFoldAuto){o.menu.release()}}}};c.observeJob(Trex.Ev.__CANVAS_PANEL_CLICK,n);c.observeJob(Trex.Ev.__CANVAS_SOURCE_PANEL_CLICK,n);c.observeJob(Trex.Ev.__CANVAS_TEXT_PANEL_CLICK,n);m.observeJob(Trex.Ev.__TOOL_CLICK,n);c.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},n);h.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:27},n);$tx.observe(document,"click",function(p){var q=$tx.element(p);var o=["tx-sidebar","tx-toolbar-basic","tx-toolbar-advanced","tx-sidebar-boundary","tx-toolbar-boundary","tx-toolbar-boundary"];if(Trex.Util.getMatchedClassName(q,o)){n("-")}},false);var j=function(){h.fireJobs(Trex.Ev.__SHOULD_CLOSE_MENUS)};m.observeJob(Trex.Ev.__TOOL_CLICK,j)});Trex.Tool=Trex.Class.draft({identity:null,button:null,menu:null,initialize:function(c,d,a){if(!this.constructor.__Identity){throw new Error("[Exception]Trex.Tool : not implement const(__Identity)")}this.identity=this.constructor.__Identity;
if(!c){throw new Error("[Exception]Trex.Tool : not exist argument(editor)")}this.editor=c;this.toolbar=d;this.canvas=c.getCanvas();this.config=a;this.wysiwygonly=((a.wysiwygonly!=null)?a.wysiwygonly:true);this.menuFoldAuto=((a.menuFoldAuto!=null)?a.menuFoldAuto:true);this.buttonCfg=TrexConfig.merge({id:"tx_"+this.identity},a);this.menuCfg=TrexConfig.merge({id:"tx_"+this.identity+"_menu"},a);this.oninitialized.bind(this)(a)},oninitialized:function(a){throw new Error("[Exception]Trex.Tool : not implements function(oninitialized)")},weave:function(j,a,c,m){var h=this;var n=this.identity;var l=this.toolbar;var k=this.canvas;this.button=j;j.tool=this;var d=null;if(!a){j.setCommand(d=function(){l.fireJobs(Trex.Ev.__TOOL_CLICK,n);var o=c.apply(h,arguments);return o})}else{this.menu=a;a.tool=this;a.initHandler=m||function(){};a.cancelHandler=function(){j.setState(false)};a.setCommand(d=function(){var o=c.apply(h,arguments);j.updateAfterCommand.apply(j,arguments);return o});j.setCommand(function(p){l.fireJobs(Trex.Ev.__TOOL_CLICK,n,p);
if(!j.isPushed()){var q=j.getValue();j.increaseZindex();a.show(q)}else{a.hide()}if($tx.msie){var o=k.getProcessor();if(o.restoreRange){setTimeout(function(){o.restoreRange()},0)}}return true})}this.execute=d},bindKeyboard:function(d,h){var c=this.toolbar;var a=this.identity;this.canvas.observeKey(d,function(j){h(j);c.fireJobs(Trex.Ev.__TOOL_SHORTCUT_KEY,a)})}});Trex.Sidebar=Trex.Class.create({$const:{__REG_ENTRY_ATTR_PAIR_Q:new RegExp('([\\w]+)="([^"]+)"',"g"),__REG_ENTRY_ATTR_PAIR_NQ:new RegExp("([\\w]+)=([\\w]+)","g")},$mixins:[Trex.I.JobObservable],entryboxRegistry:null,initialize:function(a,d){var c=a.getCanvas();var h=(d.initializedId)?d.initializedId:"";this.entryboxRegistry={};this.getFields=function(){var j=[];for(var l in this.entryboxRegistry){var k=this.entryboxRegistry[l];j=j.concat(k.getFields())}return j};this.syncSidebar=function(){var j=c.getContent();for(var k in this.entryboxRegistry){this.entryboxRegistry[k].syncBox(j)}};this.emptyEntries=function(){for(var j in this.entryboxRegistry){this.entryboxRegistry[j].empty()
}};c.observeJob(Trex.Ev.__CANVAS_PANEL_DELETE_SOMETHING,function(){this.syncSidebar()}.bind(this))}});Trex.EntryBox=Trex.Class.draft({$mixins:[Trex.I.JobObservable],autoSeq:0,datalist:[],initialize:function(c,a,d){throw new Error("[Exception]Trex.EntryBox : not implements function(initialize)")},newSeq:function(){return(++this.autoSeq)},syncSeq:function(a){this.autoSeq=(a>this.autoSeq)?a:this.autoSeq;return a},empty:function(){this.fireJobs(Trex.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED);this.datalist=[];entry=null},append:function(a){this.datalist.push(a);this.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_ADDED,a)},modify:function(a){this.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_MODIFIED,a)},remove:function(a){a.deletedMark=true;this.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_REMOVED,a)},syncBox:function(a){this.datalist.each(function(c){c.execSync(a)})},getFields:function(){var a=[];this.datalist.each(function(c){a.push(c.getField())});return a.select(function(c){return(c!=null)})},getEntries:function(a){if(!a){return this.datalist
}var c=[];this.datalist.each(function(d){if(d.type==a){c.push(d)}});return c}});Trex.Entry=Trex.Class.draft({$mixins:[Trex.I.JobObservable],existStage:false,deletedMark:false,initialize:function(d,c,h,a){throw new Error("[Exception]Trex.Entry : not implements function(initialize)")},setExistStage:function(a){this.existStage=a},execRegister:function(){this.register();this.entryBox.append(this);this.setExistStage(true)},execReload:function(){if(this.reload){this.reload()}this.entryBox.append(this);this.exchangeHandlerAtReload()},execRemove:function(){this.remove();this.entryBox.remove(this)},execReplace:function(a){this.replace(a);this.entryBox.modify(this);this.setExistStage(true)},execAppend:function(){this.register();this.setExistStage(true)},execSync:function(a){this.setExistStage(this.checkExisted(a))},checkExisted:function(a){if(this.canvas.canHTML()){return(a.search(this.regHtml)>-1)}else{return(a.search(this.regText)>-1)}},getChangedContent:function(c,j,h,d){var a=false;if(c.search(j)>-1){a=true;
if(this.actor.canResized){c=this.getChangedContentWithAttr(c,j,h,d)}else{c=c.replace(j,h)}}this.setExistStage(a);return c},getChangedContentFromHtml:function(a){return this.getChangedContent(a,this.regHtml,this.dispText,["id","class"])},getChangedContentToHtml:function(a){return this.getChangedContent(a,this.regText,this.dispHtml)},getChangedContentAtSave:function(a){return this.getChangedContent(a,this.regHtml,this.saveHtml,["id","class"])},getChangedContentAtLoad:function(a){return this.getChangedContent(a,this.regLoad,this.dispHtml)},getChangedContentWithAttr:function(j,a,o,k){k=k||[];var d=Trex.Util.getAllAttributes(o);var l=function(u){var t=Trex.Util.getMatchValue(/<([a-z]*)/i,o,1);var w=["<"+t.toLowerCase()];var r=Trex.Util.getAllAttributes(u);for(var q in d){if(["width","height"].include(q)){if(!r[q]){w.push(q+'="'+d[q]+'"')}}else{w.push(q+'="'+d[q]+'"')}}for(var q in r){if(!k.include(q)){if(["width","height"].include(q)){w.push(q+'="'+r[q]+'"')}else{if(!d[q]){w.push(q+'="'+r[q]+'"')
}}}}w.push("/>");return w.join(" ")};var n=j;var h;a.lastIndex=0;while((h=a.exec(n))!=null){var c=h[0];var p=l(c);var m=c.getRegExp();j=j.replace(new RegExp(m,"gmi"),p)}return j},getField:function(){if(!this.field){return null}return{name:this.field.name,value:[this.field.value,this.existStage].join("|")}},exchangeHandlerAtReload:function(){}});Trex.Actor=Trex.Class.draft({$mixins:[Trex.I.JobObservable],isDisabled:false,initialize:function(c,a){throw new Error("[Exception]Trex.Actor : not implements function(initialize)")},execAttach:function(d,c){var a=this.createEntry(this.getDataForEntry(d),c);a.execRegister();this.canvas.fireJobs("canvas."+(c||this.constructor.__Identity)+".added",a)},getDatalist:function(){return this.entryBox.getEntries(this.name)},execReattach:function(j,d){var h=this.getDatalist();var k=this.getDataForEntry(j);if(h.length<1){var a=this.createEntry(k,d);a.execRegister()}else{var a=h[0];var c={regHtml:a.regHtml,regText:a.regText};a.setProperties(k);a.execReplace(c)
}},execReload:function(h,d,c){var a=this.createEntry(this.getDataForEntry(h,d),c);a.execReload()},existEntry:function(){return((this.getDatalist().length==0)?false:true)},getFirstEntryData:function(){var a=this.getDatalist();return((a.length==0)?null:a[0].data)}});Trex.install("editor.getDocParser",function(h,j,k,c,a){var d=new Trex.Docparser(h,k,a);h.getDocParser=function(){return d}});Trex.Docparser=Trex.Class.create({initialize:function(c,d,a){this.editor=c;this.sidebar=d;this.config=a},filters:{},registerFilter:function(a,c){this.filters[a]=c},getFilter:function(a){return this.filters[a]},executeFilters:function(h,d){for(var a in this.filters){var c=this.filters[a];if(c[h]){d=c[h](d)}}return d},getContentsAtChangingMode:function(c,a,d){if(a==d){return c}c=c||"";return this.executeFilters(a.concat("2").concat(d),c)},convertAtLoad:function(c,a,d){if(d=="original"){c=this.executeFilters(a.concat("@load"),c)}else{if(a!=d){c=this.executeFilters(d.concat("2").concat(a),c)}}return c},convertAtSave:function(d,c,a){if(a=="original"){d=this.executeFilters(c.concat("4save"),d)
}else{if(c!=a){d=this.executeFilters(c.concat("2").concat(a),d)}}return d},text2source:function(a){return this.executeFilters("text2source",a)},text2html:function(a){if(a===""){return this.config.canvas.bogus_html}return this.executeFilters("text2html",a)},source2text:function(a){return this.executeFilters("source2text",a)},source2html:function(a){if(a===""){return this.config.canvas.bogus_html}return this.executeFilters("source2html",a)},html2text:function(a){return this.executeFilters("html2text",a)},html2source:function(a){return this.executeFilters("html2source",a)}});Trex.install("editor.getEntryProxy",function(h,j,k,d,c){var a=new Trex.EntryProxy(h,k,c);h.getEntryProxy=function(){return a}});Trex.EntryProxy=Trex.Class.create({initialize:function(c,d,a){this.editor=c;this.sidebar=d;this.config=a},commands:{},registerCommand:function(a,c){this.commands[a]=c},getcommand:function(a){return this.commands[a]},executeCommand:function(d,c){for(var a in this.commands){var h=this.commands[a];
if(h[d]){h[d](c)}}},setAttachments:function(a,d){a=a||[];d=d||"";var c=this.editor.getAttachBox();c.empty();var h=this.sidebar.getAttacher();a.each(function(k){var j=h[k.attacher];if(j){j.execReload(k.data,d,k.type)}})},getAttachments:function(a,c){c=!!c;var d=[];a.each(function(h){if(h.deletedMark){return}if(c||h.existStage){d.push({attacher:h.actor.name,existStage:h.existStage,data:Object.extend(h.data,{tmpSeq:h.dataSeq})})}});return d}});Trex.install("editor.getForm",function(d,h,j,c,a){var k=new Trex.FormProxy(d,j,a);d.getForm=function(){return k}});Trex.FormProxy=Trex.Class.create({initialize:function(c,h,a){this.editor=c;this.sidebar=h;this.config=a;var d=this.elForm=document.forms[a.form]||document.getElementById(a.form);if(!d){throw new Error("[Exception]Trex.Form : not exist element - "+a.form)}d.onsubmit=function(){return false}},submit:function(){this.elForm.submit()},createField:function(a){this.elForm.appendChild(a)},getElements:function(){return this.elForm.elements},getElementByName:function(a){return this.elForm[a]
},getFormField:function(){var c={};var h=this.getElements();var a;for(var d=0;d<h.length;d++){a=h[d];if(!["select","input","textarea"].include(a.tagName.toLowerCase())){continue}if(!a.name&&!a.id){continue}if(a.tagName.toLowerCase()=="select"){if(a.selectedIndex>0){c[a.name]=a.options[a.selectedIndex].value}}else{if(a.type=="radio"&&!a.checked){continue}else{if(a.type=="checkbox"&&!a.checked){continue}else{c[a.name||a.id]=a.value}}}}return c},setFormField:function(a){if(!a){return}var l=this.getElements();var h;var c;for(var k=0;k<l.length;k++){h=l[k];if(!["select","input","textarea"].include(h.tagName.toLowerCase())){continue}if(h.name===null||h.name.length===0){continue}if(!a[h.name]){continue}c=a[h.name];if(h.tagName.toLowerCase()=="select"){for(var d=0;d<h.options.length;d++){if(h.options[d].value==c){h.options[d].selected=true;break}}}else{if(h.type=="radio"||h.type=="checkbox"){if(h.value==c){h.checked=true}continue}else{h.value=c}}}}});Trex.install("editor.getSaver & editor.getDataAsJSON & editor.setDataByJSON",function(d,h,j,c,a){var k=new Trex.Save(d,h,j,c,a);
d.getSaver=function(){return k};d.getDataAsJSON=function(){var l=c.getContent();var m=new Trex.Validator();if(!m.exists(l)){return null}return{inputmode:c.getCurrentPanel().getName(),content:l,attachments:function(){var n=j.getAttachments();return d.getEntryProxy().getAttachments(n,true)}(),formfield:d.getForm().getFormField()}};d.setDataByJSON=function(o){if(!o){return}var m=c.mode;var l=o.inputmode||m;if(l=="original"){}else{if(l!=m){c.fireJobs(Trex.Ev.__CANVAS_MODE_INITIALIZE,m,l);c.changeMode(l)}}var n=o.content;if(o.attachments){d.getEntryProxy().setAttachments(o.attachments,n)}if(n){n=d.getDocParser().convertAtLoad(n,m,l);c.initContent(n)}j.syncSidebar();if(o.formfield){d.getForm().setFormField(o.formfield)}}});Trex.Save=Trex.Class.create({editor:null,toolbar:null,sidebar:null,canvas:null,config:null,form:null,initialize:function(d,h,j,c,a){this.editor=d;this.toolbar=h;this.sidebar=j;this.canvas=c;this.config=a;this.form=d.getForm();this.docparser=d.getDocParser();this.entryproxy=d.getEntryProxy()
},save:function(){try{if(typeof(validForm)!="undefined"){if(!validForm(this.editor)){return false}}if(typeof(setForm)!="undefined"){if(!setForm(this.editor)){return false}}return true}catch(a){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,a);return false}},submit:function(){if(this.save()){this.editor.fireJobs(Trex.Ev.__ON_SUBMIT,this.editor);if(this.config.save&&typeof this.config.save.onSave=="function"){var a=this.config.save.onSave;setTimeout(function(){a()},500)}else{var c=this.form;setTimeout(function(){c.submit()},500)}}},getContent:function(c){var h=this.canvas;var a=h.mode;var j=c||"original";var d=h.getContent();d=this.docparser.convertAtSave(d,a,j);return d},getAttachments:function(c,a){a=a||false;var d=this.sidebar.getAttachments(c);return this.entryproxy.getAttachments(d,a)},getEmbeddedData:function(a){return this.sidebar.getEmbeddedData(a)},getResults:function(a){return this.sidebar.getResults(a)},load:function(a){if(!a){throw new Error("[Exception]Trex.Save : not exist argument(data)")
}if(typeof(loadForm)!="undefined"){loadForm(this.editor,a)}this.editor.setDataByJSON({inputmode:(!a.inputmode||a.inputmode=="html")?"original":a.inputmode,content:function(){var c=a.content;if(typeof c=="string"){return a.content}else{if(c&&c.nodeType&&(c.nodeType==1)){return a.content.value}else{return""}}}(),attachments:a.attachments});if(typeof(postLoad)!="undefined"){postLoad(this.editor,a)}},makeField:function(){var h=this.sidebar;var d=this.form;var a=this.getContent();d.createField(tx.textarea({name:"tx_content",style:{display:"none"}},a));var c=h.getFields();c.each(function(j){d.createField(tx.input({type:"hidden",name:j.name,value:j.value}))})}});Trex.module("new Trex.Resizer",function(h,j,l,d,c){var m=c.initializedId||"";var a=TrexConfig.get("resizer",c);var k=null;h.setMinHeight=function(n){return k.setMinHeight(n)};h.restoreMinHeight=function(){return k.restoreMinHeight()};if(Trex.available(a,"resizer"+m)){k=new Trex.Resizer(h,a)}});TrexConfig.add({resizer:{minHeight:200}});
Trex.Resizer=Trex.Class.create({$const:{__Identity:"resizer"},$mixins:[Trex.I.JobObservable],initialize:function(d,a){var k=0;if(!d){return}this.config=a;var l=d.getInitializedId();var c=this.elBar=$must("tx_resizer"+l,"Trex.Worker.Resizer");if(!c){return}if($tx.msie_ver=="5.5"){c.setAttribute("align","center")}this.resizeHeightAtService=function(m){if(typeof(resizeHeight)!="undefined"){resizeHeight(m)}};this.resizingHeightAtService=function(m){if(typeof(resizingEditorHeight)!="undefined"){resizingEditorHeight(m)}};this.minDragHeight=a.minHeight;var j;this.startDrag=function(n){var p=d.getCanvas();var o=p.getCurrentPanel();if(o==null){return}var m=o.getPosition();this.panelHeight=m.height;this.dragStartPosY=n.clientY;this.isDragging=true;$tx.observe(document,"mousemove",this.documentDraggingHandler);$tx.observe(document,"mouseup",this.stopDragHandler);if(o.getName()==Trex.Canvas.__WYSIWYG_MODE){this.panelTop=m.y;j=o.getDocument();if(j==null){return}p.fireJobs("canvas.height.beforechange");
$tx.observe(j,"mousemove",this.wysiwygDraggingHandler);$tx.observe(j,"mouseup",this.stopDragHandler)}$tx.stop(n)};this.stopDrag=function(m){var o=d.getCanvas();var n=o.getCurrentPanel();if(n==null){return}this.isDragging=false;$tx.stopObserving(document,"mousemove",this.documentDraggingHandler);$tx.stopObserving(document,"mouseup",this.stopDragHandler);if(j==null){return}$tx.stopObserving(j,"mousemove",this.wysiwygDraggingHandler);$tx.stopObserving(j,"mouseup",this.stopDragHandler);j=null;this.resizeHeightAtService(k);o.fireJobs("canvas.height.afterchange");$tx.stop(m)};this.dragingAtDocument=function(n){var p=d.getCanvas();if(this.isDragging){var o=p.getCurrentPanel();if(o==null){return}try{var m=Math.max((this.panelHeight+n.clientY-this.dragStartPosY),this.minDragHeight.parsePx()).toPx();o.setPanelHeight(m);k=m;p.fireJobs("canvas.height.change",m);this.resizingHeightAtService(m)}catch(q){}}$tx.stop(n)};this.dragingAtWysiwyg=function(n){var p=d.getCanvas();if(this.isDragging){var o=p.getCurrentPanel();
if(o==null){return}try{var r=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;var m=Math.max((this.panelHeight+n.clientY-this.dragStartPosY+this.panelTop-r),this.minDragHeight.parsePx()).toPx();o.setPanelHeight(m);p.fireJobs("canvas.height.change",m)}catch(q){}}$tx.stop(n)};this.startDragHandler=this.startDrag.bindAsEventListener(this);this.stopDragHandler=this.stopDrag.bindAsEventListener(this);this.documentDraggingHandler=this.dragingAtDocument.bindAsEventListener(this);this.wysiwygDraggingHandler=this.dragingAtWysiwyg.bindAsEventListener(this);this.isDragging=false;$tx.observe(c,"mousedown",this.startDragHandler);var h=d.getCanvas();h.observeJob("canvas.fullscreen.change",function(){$tx.hide(c)});h.observeJob("canvas.normalscreen.change",function(){$tx.show(c)})},setMinHeight:function(a){return this.minDragHeight=a.toPx()},restoreMinHeight:function(){return this.minDragHeight=this.config.minHeight||200}});(function(){var a=20;Trex.History=Trex.Class.create({});
Trex.History.prototype={canvas:null,initialContent:null,undoTaskList:null,redoTaskList:null,currentTask:null,snapshotData:{},inithandlers:[],isNewTypingForUndo:false,initialize:function(h,d){var c=this;var j=this.canvas=h;this.currentTask=new Trex.History.Task({content:d.bogus_html,scrollTop:0},function(k){c.inithandlers.each(function(l){l(k)})});this.currentTask.makeSnapshot(this.snapshotData);this.undoTaskList=[];this.redoTaskList=[];j.observeJob("canvas.panel.undo",function(){var n=j.getProcessor();if(!n){return}if(c.undoTaskList.length==0){return}if(c.isNewTypingForUndo){var m=c.getTextData();var l=c.getTextHandler();var k=new Trex.History.Task(m,l);k.makeBackup(c.snapshotData);c.redoTaskList=[k];k.undo();c.isNewTypingForUndo=false}else{var k=c.currentTask;if(c.redoTaskList.length>a-1){c.redoTaskList.shift()}c.redoTaskList.push(k);k.undo();k.makeSnapshot(c.snapshotData);var o=c.undoTaskList.last();if(c.undoTaskList.length>0){c.undoTaskList.pop()}c.currentTask=o}});j.observeJob("canvas.panel.redo",function(){var l=j.getProcessor();
if(!l){return}if(c.redoTaskList.length==0){return}var k=c.currentTask;if(c.undoTaskList.length>a-1){c.undoTaskList.shift()}c.undoTaskList.push(k);var m=c.redoTaskList.last();if(c.redoTaskList.length>0){c.redoTaskList.pop()}c.currentTask=m;m.redo();m.makeSnapshot(c.snapshotData)})},initHistory:function(c){Object.extend(this.snapshotData,c);this.isNewTypingForUndo=true},addInitHandler:function(d,c){Object.extend(this.current.current,d);this.inithandlers.push(c);Object.extend(this.snapshotData,d)},saveHistory:function(h,d){if(this.undoTaskList.length>a-1){this.undoTaskList.shift()}this.undoTaskList.push(this.currentTask);this.redoTaskList=[];if(!h){h=this.getTextData();d=this.getTextHandler()}var c=new Trex.History.Task(h,d);c.swapData(this.snapshotData);this.currentTask=c;this.isNewTypingForUndo=false},saveHistoryByKey:function(c){if(c.code==229){return}if(c.code==Trex.__KEY.ENTER||c.code==Trex.__KEY.SPACE){if(this.isNewTypingForUndo){this.saveHistory()}}else{if(c.code==Trex.__KEY.DELETE||c.code==Trex.__KEY.BACKSPACE){this.saveHistory()
}else{if((c.code==Trex.__KEY.PASTE||c.code==Trex.__KEY.CUT)&&c.ctrl){this.saveHistory()}else{if(((c.code>32&&c.code<41)&&c.shift)||(c.code==65&&c.ctrl)){if(this.isNewTypingForUndo){this.saveHistory()}}else{if(c.ctrl||c.shift||c.alt){}else{this.isNewTypingForUndo=true}}}}}},injectHistory:function(d,c){this.currentTask.injectHandler(c);this.currentTask.injectData(d,this.snapshotData)},getTextHandler:function(){var c=this.canvas;return function(d){c.setContent(d.content);setTimeout(function(){c.setScrollTop(d.scrollTop)},0)}},getTextData:function(){var c=this.canvas;return{content:c.getContent(),scrollTop:c.getScrollTop()}}};Trex.History.Task=Trex.Class.create({initialize:function(d,c){this.handler=[];this.previous={};this.current=Object.extend({},d);this.handler.push(c)},swapData:function(c){this.makeBackup(c);this.makeSnapshot(c)},makeBackup:function(d){for(var c in this.current){if(typeof d[c]=="string"||typeof d[c]=="number"){this.previous[c]=d[c]}else{this.previous[c]=Object.extend({},d[c])
}}},makeSnapshot:function(d){for(var c in this.current){d[c]=this.current[c]}},injectHandler:function(c){this.handler.push(c)},injectData:function(h,d){Object.extend(this.current,h);for(var c in h){if(typeof d[c]=="string"||typeof d[c]=="number"){this.previous[c]=d[c]}else{this.previous[c]=Object.extend({},d[c])}}for(var c in this.current){d[c]=this.current[c]}},redo:function(){for(var c=0;c<this.handler.length;c++){this.handler[c](this.current)}},undo:function(){for(var c=0;c<this.handler.length;c++){this.handler[c](this.previous)}}})})();(function(a){TrexConfig.add({canvas:{doctype:"html",mode:["text","html","source"],styles:{color:"#333333",fontFamily:"\ub3cb\uc6c0",fontSize:"9pt",backgroundColor:"#ffffff",lineHeight:"1.5",padding:"8px"},selectedMode:"html",readonly:false,initHeight:400,minHeight:200,ext:"html",param:"",bogus_html:(($tx.msie)?"<p>&nbsp;</p>":"<p><br/></p>"),newlinepolicy:"p",showGuideArea:true,convertingText:true}},function(d){var k=TrexConfig.get("canvas",d);var c=d.events;
k.initializedId=d.initializedId;k.useHotKey=c.useHotKey;var l=TrexConfig.getTool("switcher",d);if(a.available(l,"switcher"+k.initializedId)){k.mode=l.options.pluck("data")}var m=TrexConfig.getTool("fontfamily",d);if(a.available(m,"fontfamily"+k.initializedId)){if(m.webfont&&m.webfont.use){k.webfont=m.webfont;k.webfont.options.each(function(n){n.url=TrexConfig.getUrl(n.url)})}}var j=TrexConfig.get("resizer",d);if(j){k.minHeight=j.minHeight}var h="#host#path/pages/daumx/";if(typeof EditorJSLoader!="undefined"){h=EditorJSLoader.getPageBasePath()}k.wysiwygUrl=TrexConfig.getUrl([(k.wysiwygPath||h),"wysiwyg_",(k.serviceWysiwyg||""),((k.doctype=="html")?"html":"xhtml"),".",(k.ext?k.ext:"html"),"?prefix="+d.initializedId,"&",k.param].join(""))});TrexConfig.add({size:{}});a.Canvas=a.Class.create({$const:{__TEXT_MODE:"text",__HTML_MODE:"source",__WYSIWYG_MODE:"html",__WYSIWYG_PADDING:8,__IMAGE_PADDING:5},$mixins:[a.I.JobObservable,a.I.KeyObservable,a.I.ElementObservable,a.I.MouseoverObservable],editor:null,elContainer:null,config:null,history:null,panels:null,initialize:function(c,j){var k=this.editor=c;
var h=this;var d=this.config=TrexConfig.get("canvas",j);var l=((j.initializedId)?j.initializedId:"");this.elContainer=$tx("tx_canvas"+l);this.wysiwygEl=$tx("tx_canvas_wysiwyg_holder"+l);this.sourceEl=$tx("tx_canvas_source_holder"+l);this.textEl=$tx("tx_canvas_text_holder"+l);this.initConfig(j);this.createPanel();this.history=new a.History(this,d)},initConfig:function(h){var d=this.config;this.getRootConfig=function(){return h};this.getConfig=function(){return d};this.getStyleConfig=function(k){if(k){return d.styles[k]}else{return d.styles}};var c=TrexConfig.get("size",h);var j=$tx.getDimensions(this.elContainer);c.wrapWidth=j.width;if(!c.contentWidth){c.contentWidth=c.wrapWidth}c.contentPadding=d.styles.padding.parsePx();this.getSizeConfig=function(){return c}},createPanel:function(){var j=this;var h=this.config;this.panels={};this.mode=h.selectedMode||a.Canvas.__WYSIWYG_MODE;if($tx.ios||$tx.android){this.mode=a.Canvas.__TEXT_MODE}var d={text:function(k){return new a.Canvas.TextPanel(j,k)
},source:function(k){return new a.Canvas.HtmlPanel(j,k)},html:function(k){return new a.Canvas.WysiwygPanel(j,k)}};h.mode.each(function(k){if(d[k]){j.panels[k]=d[k](h)}});for(var c in j.panels){if(this.mode==c){j.panels[c].show()}else{j.panels[c].hide()}}j.observeJob("canvas.panel.iframe.load",function(k){j.fireJobs(a.Ev.__IFRAME_LOAD_COMPLETE,k)})},changeMode:function(j){var m=this.editor;var c=this.mode;if(c==j){return}var l=this.panels[c];var h=this.panels[j];if(!l||!h){throw new Error("[Exception]Trex.Canvas : not suppored mode")}var d=l.getContent();d=m.getDocParser().getContentsAtChangingMode(d,c,j);if(c==a.Canvas.__WYSIWYG_MODE){l.setContent("");try{this.focusOnTop()}catch(k){}}h.setContent(d);this.mode=j;this.fireJobs(a.Ev.__CANVAS_MODE_CHANGE,c,j);h.setPanelHeight(l.getPanelHeight());l.hide();h.show();try{if(j=="html"&&!this.getPanel("html").designModeActivated&&$tx.gecko){this.getPanel("html").el.contentDocument.designMode="on";this.getPanel("html").designModeActivated=true}}catch(k){throw k
}},focus:function(){this.panels[this.mode].focus()},focusOnTop:function(){if(!this.canHTML()){return}this.getProcessor().focusOnTop()},focusOnBottom:function(){if(!this.canHTML()){return}this.getProcessor().focusOnBottom()},getCanvasPos:function(){var c=$tx.cumulativeOffset(this.elContainer);return{x:c[0],y:c[1]}},setCanvasSize:function(c){if(this.panels[this.mode]&&c.height){this.panels[this.mode].setPanelHeight(c.height)}else{throw new Error("[Exception]Trex.Canvas : argument has no property - size.height ")}},canHTML:function(){return(this.mode==a.Canvas.__WYSIWYG_MODE)?true:false},getPanel:function(c){if(this.panels[c]){return this.panels[c]}else{return null}},getCurrentPanel:function(){if(this.panels[this.mode]){return this.panels[this.mode]}else{return null}},getProcessor:function(c){if(!c){return this.panels[this.mode].getProcessor()}else{return this.panels[c].getProcessor()}},getContent:function(){var c=this.panels[this.mode].getContent();if(c){c=c.replace(a.__WORD_JOINER_REGEXP,"")
}return c},getScrollTop:function(){if(!this.canHTML()){return 0}return this.panels[this.mode].getScrollTop()},setScrollTop:function(c){if(!this.canHTML()){return}this.panels[this.mode].setScrollTop(c)},setContent:function(c){this.panels[this.mode].setContent(c);this.includeWebfontCss(c)},initContent:function(c){this.history.initHistory({content:c});this.panels[this.mode].setContent(c);this.includeWebfontCss(c);this.fireJobs(a.Ev.__CANVAS_DATA_INITIALIZE,a.Canvas.__WYSIWYG_MODE,null)},includeWebfontCss:function(c){if(!this.canHTML()){return}return this.panels[this.mode].includeWebfontCss(c)},getUsedWebfont:function(){if(!this.canHTML()){return[]}return this.panels[this.mode].getUsedWebfont()},runScript:function(c){if(!this.canHTML()){return[]}this.panels[this.mode].runScript(c)},importScript:function(c,d){if(!this.canHTML()){return[]}this.panels[this.mode].importScript(c,d)},query:function(d){if(!this.canHTML()){return null}var c=this.getProcessor();return d(c)},execute:function(h){var d=this.history;
var c=this.getProcessor();if(this.canHTML()){if($tx.msie){setTimeout(function(){c.restoreRange();h(c);d.saveHistory();c.restore()},0)}else{h(c);c.focus();d.saveHistory();c.restore()}}else{h(c)}},moveCaret:function(c){if(!c){return}if(!this.canHTML()){return}this.getProcessor().moveCaretWith(c)},pasteContent:function(h,c,d){c=c||false;this.execute(function(j){j.pasteContent(h,c,d)})},pasteNode:function(h,c,d){if(!this.canHTML()){return}c=c||false;this.execute(function(j){j.pasteNode(h,c,d)})},addStyle:function(c){this.panels[this.mode].addStyle(c)},getStyle:function(c){return this.panels[this.mode].getStyle(c)},getPositionByNode:function(c){if(!this.canHTML()){return{x:0,y:0,width:0,height:0}}return this.panels[this.mode].getPositionByNode(c)}})})(Trex);Trex.module("focus body @after editor iframe load",function(d,h,j,c,a){c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(k){if(!c.canHTML()){return}try{var l=c.getProcessor();l.focusOnTop()}catch(m){}})});Trex.module("bind canvas events for close external menus",function(h,j,k,d,c){var a=function(){h.fireJobs(Trex.Ev.__SHOULD_CLOSE_MENUS)
};d.observeJob(Trex.Ev.__CANVAS_PANEL_CLICK,a);d.observeJob(Trex.Ev.__CANVAS_SOURCE_PANEL_CLICK,a);d.observeJob(Trex.Ev.__CANVAS_TEXT_PANEL_CLICK,a)});Trex.module("make getter for 'iframeheight' and 'iframetop' size",function(h,j,k,d,c){var l=0;var a=0;d.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(m){l=m.parsePx()});d.observeJob("canvas.apply.background",function(){var n=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);var m=$tom.getPosition(n.el);a=m.y});d.reserveJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var n=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);l=n.getPanelHeight().parsePx();var m=$tom.getPosition(n.el);a=m.y},300);d.getIframeHeight=function(){return l};d.getIframeTop=function(){return a}});Trex.Canvas.BasedPanel=Trex.Class.draft({initialize:function(d,c){this.config=c;this.canvas=d;this.elHolder=this.getHolder(c);this.el=this.getPanel(c);if(!this.el){throw new Error("[Exception]Trex.Canvas.Panel : panel element is not founded")}var a=this.constructor.__MODE;this.getName=function(){return a
};this.lastHeight=c.initHeight?c.initHeight.toPx():"400px"},focus:function(){this.el.focus()},show:function(){try{$tx.show(this.elHolder)}catch(a){}},hide:function(){try{$tx.hide(this.elHolder)}catch(a){}},getStyle:function(a){if(this.el.style[a]){return this.el.style[a]}else{return null}},addStyle:function(c){for(var a in c){if(this.el.style[a]){this.el.style[a]=c[a]}}},getPosition:function(){return $tom.getPosition(this.el)},getPanelHeight:function(){return $tom.getHeight(this.el).toPx()},setPanelHeight:function(a){a=a.toPx();if(this.lastHeight==a){return}$tom.setHeight(this.el,a);this.lastHeight=a}});(function(){Trex.Canvas.WysiwygPanel=Trex.Class.create({$extend:Trex.Canvas.BasedPanel,$const:{__MODE:Trex.Canvas.__WYSIWYG_MODE},initialize:function(canvas,config){var _panel=this;var _canvas=canvas;config=Object.extend({},config);this.$super.initialize(canvas,config);var _elPanel=this.el;var _win=_elPanel.contentWindow;var _doc;var _processor;var _name=this.constructor.__MODE;this.getName=function(){return _name
};this.getDocument=function(){return _doc};this.getWindow=function(){return _win};this.getContent=function(){return _doc.body.innerHTML};this.setContent=function(content){var _content,_pNodes,_node,len,i;_content=content?content.replace(Trex.__WORD_JOINER_REGEXP,""):config.bogus_html;if($tx.msie){_content=_content.replace(/(<script|<style)/i,Trex.__WORD_JOINER+"$1")}_doc.body.innerHTML=_content;if($tx.msie){_pNodes=$tom.collectAll(_doc.body,"p,li");len=_pNodes.length;for(i=0;i<len;i+=1){_node=_pNodes[i];if($tom.getLength(_node)==0&&_node.tagName.toLowerCase()!="p"){try{_node.innerHTML="&nbsp;"}catch(ignore){}}if($tom.getLength(_node)==1&&_node.innerHTML=="&nbsp;"){_node.innerHTML=""}}}};this.getProcessor=function(){return _processor};this.getStyle=function(name){return $tx.getStyle(_doc.body,name)};this.addStyle=function(styles){try{for(var name in styles){_doc.body.style[name]=styles[name]}}catch(e){}};this.getScrollTop=function(){return $tom.getScrollTop(_doc)};this.setScrollTop=function(scrollTop){$tom.setScrollTop(_doc,scrollTop)
};this.getScrollLeft=function(){return $tom.getScrollLeft(_doc)};var _relative;this.getPositionByNode=function(node){return _relative.getRelative(node)};var _webfontLoader;this.includeWebfontCss=function(content){if($tx.msie){_webfontLoader.load(content)}};this.getUsedWebfont=function(){if(!$tx.msie){return[]}return _webfontLoader.getUsed()};var _scriptLoader;this.runScript=function(script,callback){_scriptLoader.runBy(script,callback)};this.importScript=function(url,callback){_scriptLoader.importBy(url,callback)};_canvas.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(panelDoc){_doc=panelDoc;installHyperscript(_win,_doc);_processor=new Trex.Canvas.ProcessorP(_win,_doc);_relative=new WysiwygRelative(_doc,_elPanel);_webfontLoader=new WebfontLoader(_doc,config);_scriptLoader=new ScriptLoader(_win,_doc);_win.txImportScript=function(url,callback){_panel.importScript(url,callback)};if(!(config.readonly||false)){if($tx.msie||$tx.chrome||$tx.webkit_ver>=3){_doc.body.setAttribute("contentEditable","true")
}else{setTimeout(function(){try{_doc.designMode="On";if($tx.gecko){_doc.execCommand("enableInlineTableEditing",false,false)}}catch(e){_panel.designModeActivated=false}},10)}}try{_panel.setBodyStyle(_doc,config.styles);_panel.setFontStyle(_doc,config.styles)}catch(e){}_panel.setContent();Editor.__PANEL_LOADED=true});_canvas.reserveJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(panelDoc){_panel.bindEvents(_win,_doc,_canvas,config)},500);_elPanel.setAttribute("src",config.wysiwygUrl)},bindEvents:function(win,doc,canvas,config){var _doc=doc;var _win=win;var _canvas=canvas;var _cvConfig=config;var _history=_canvas.history;var _processor=_canvas.getProcessor(Trex.Canvas.__WYSIWYG_MODE);var _cachedKeyCode;var _typingCount=0;var _isNewTypingForSync=false;var _queryKey={};[13,8,32,33,34,37,38,39,40,46].each(function(key){_queryKey[key]=true});var _wysiwyghandlers={keydown:function(ev){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_KEYDOWN,ev);if(config.useHotKey){_canvas.fireKeys(ev)}},keypress:function(ev){switch(ev.keyCode){case 8:case 16:case 17:case 18:case 32:case 33:case 34:case 37:case 38:case 39:case 40:case 46:case 229:return
}if(_cachedKeyCode&&_cachedKeyCode==ev.keyCode){return}else{if(++_typingCount>10){_queryState(ev);_typingCount=0}}_cachedKeyCode=ev.keyCode},keyup:function(ev){if(_queryKey[ev.keyCode]){_processor.clearDummy()}_history.saveHistoryByKey({code:ev.keyCode,ctrl:ev.ctrlKey||(ev.keyCode==17),alt:ev.altKey||(ev.keyCode==18),shift:ev.shiftKey||(ev.keyCode==16)});try{_isNewTypingForSync=true;_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_KEYUP,ev);if(_queryKey[ev.keyCode]){_queryState(ev)}if(ev.keyCode==Trex.__KEY.DELETE||ev.keyCode==Trex.__KEY.BACKSPACE){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_DELETE_SOMETHING)}}catch(ignore){}},mouseover:function(ev){try{_canvas.fireMouseover($tx.element(ev));_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_MOUSEOVER,ev)}catch(ignore){}},mouseout:function(ev){try{_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_MOUSEOUT,ev)}catch(ignore){}},mousedown:function(ev){_processor.clearDummy();try{_canvas.fireElements($tx.element(ev))}catch(ignore){}_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_MOUSEDOWN,ev);
if(_history.isNewTypingForUndo){_history.saveHistory()}},mouseup:function(ev){try{_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_MOUSEUP,ev);setTimeout(function(){_propertySyncHandler(true)},20)}catch(ignore){}},click:function(ev){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_CLICK,ev)},dblclick:function(ev){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_DBLCLICK,ev)},scroll:function(ev){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_SCROLLING,ev)}};var handlers=_wysiwyghandlers;for(var eventType in handlers){var handler=handlers[eventType];if(eventType=="keypress"){eventType=($tx.msie||$tx.webkit)?"keydown":"keypress"}if(eventType=="scroll"){if($tx.opera){setTimeout(function(){$tx.observe(_win,eventType,handler,false)},100)}else{$tx.observe(_win,eventType,handler,false)}}else{$tx.observe(_doc,eventType,handler,false)}}var _propertySyncHandler=function(isMouseEv){try{_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS);if(!isMouseEv){_canvas.fireElements(_processor.getTxSel().getNode())}}catch(e){}};var _queryState=function(ev){if(!_canvas.canHTML()){return
}var _processor=_canvas.getProcessor();setTimeout(function(){_propertySyncHandler()},0)};_canvas.syncProperty=function(isMouseEv){setTimeout(function(){_propertySyncHandler(isMouseEv)},20)};var _intvl=-1;var _checkContentChange=function(){if(_isNewTypingForSync){_canvas.fireJobs(Trex.Ev.__CANVAS_PANEL_DELETE_SOMETHING);_isNewTypingForSync=false}};setTimeout(function(){_intvl=setInterval(_checkContentChange,3000)},10000)},setBodyStyle:function(doc,styles){for(var _style in styles){if("||color||fontSize||fontFamily||lineHeight||".indexOf("||"+_style+"||")<0){doc.body.style[_style]=styles[_style]}}},setFontStyle:function(doc,styles){var _csses=new Template("			body, td, button {				color:#{color};				font-size:#{fontSize};				font-family:#{fontFamily};				line-height:#{lineHeight};			}			a, a:hover, a:link, a:active, a:visited { color:#{color}; }			div.txc-search-border { border-color:#{color}; }			div.txc-search-opborder { border-color:#{color}; }			img.tx-unresizable { width: auto !important; height: auto !important; }			button a { text-decoration:none #{if:browser=='firefox'}!important#{/if:browser}; color:#{color} #{if:browser=='firefox'}!important#{/if:browser}; }		").evaluate(Object.extend(styles,{browser:$tx.browser}));
var _elStyle=doc.createElement("style");_elStyle.setAttribute("type","text/css");if(_elStyle.styleSheet){_elStyle.styleSheet.cssText=_csses}else{_elStyle.textContent=_csses}doc.getElementsByTagName("head")[0].appendChild(_elStyle);for(var _style in styles){if("||color||fontSize||fontFamily||lineHeight||".indexOf("||"+_style+"||")>-1){doc.body.style[_style]=""}}},getPanel:function(config){var _initializedId=((config.initializedId)?config.initializedId:"");return $must("tx_canvas_wysiwyg"+_initializedId,"Trex.Canvas.WysiwygPanel")},getHolder:function(config){var _initializedId=((config.initializedId)?config.initializedId:"");return $must("tx_canvas_wysiwyg_holder"+_initializedId,"Trex.Canvas.WysiwygPanel")},focus:function(){var _processor=this.getProcessor();_processor.focus()},show:function(){this.$super.show();var _processor=this.getProcessor();if(_processor){setTimeout(function(){try{_processor.focusOnTop()}catch(e){}},100)}},hide:function(){var _processor=this.getProcessor();if(_processor){_processor.blur()
}this.$super.hide()}});var __SCROLL_WIDTH=16;var WysiwygRelative=Trex.Class.create({initialize:function(doc,elPanel){this.doc=doc;this.elPanel=elPanel},getRelative:function(node){var _relatives={x:0,y:0,width:0,height:0};if(node){var _position=$tom.getPosition(node,true);var _frameHeight=$tom.getHeight(this.elPanel);var _scrollTop=$tom.getScrollTop(this.doc);if(_position.y+_position.height<_scrollTop||_position.y>_scrollTop+_frameHeight){return _relatives}else{var _frameLeft=0;var _frameTop=0;var _frameWidth=$tom.getWidth(this.elPanel);var _scrollLeft=$tom.getScrollLeft(this.doc);_relatives.x=_frameLeft+((_scrollLeft>0)?0:_position.x);_relatives.width=Math.min(_frameWidth-_position.x-__SCROLL_WIDTH,_position.width-((_scrollLeft>0)?_scrollLeft-_position.x:0));_relatives.height=_position.height;_relatives.y=_position.y-_scrollTop+_frameTop}}return _relatives}});var WebfontLoader=Trex.Class.create({initialize:function(doc,config){this.doc=doc;this.styleCnt=0;this.defWebfont=config.styles.fontFamily;
this.useWebfont=(config.webfont&&config.webfont.use);this.webfontCfg=config.webfont||[];this.elStyleSheet=this.getStyleSheet()},load:function(content){if(!content){return}if(!this.useWebfont){return}var _matchs=[];content+=" // font-family:"+this.defWebfont;content.replace(/font-family\s*:\s*(\w*)/gi,function(full,name){_matchs.push(name);return full});if(_matchs.length==0){return}var _loader=this;setTimeout(function(){var _matchedSource=_matchs.uniq().join("||");_loader.webfontCfg.options.each(function(item){if(item.url&&_matchedSource.indexOf(item.data)>-1){_loader.imports(item)}})},10)},getUsed:function(){var _result=[];if(!this.useWebfont){return _result}this.webfontCfg.options.each(function(item){if(!item.url){_result.push(item.data)}});return _result},getStyleSheet:function(){return this.doc.styleSheets[this.styleCnt++]},imports:function(item){try{this.elStyleSheet.addImport(item.url,2)}catch(e){this.elStyleSheet=this.getStyleSheet();this.elStyleSheet.addImport(item.url,2)}item.url=null
}});var ScriptLoader=Trex.Class.create({$mixins:[Trex.I.FHRequester],isJsHolding:false,jsQueue:[],imported:[],initialize:function(win,doc){this.win=win;this.doc=doc},execScript:function(){if(this.jsQueue.length==0){return}if(!this.isJsHolding){this.isJsHolding=true;try{var _queue=this.jsQueue.shift();this.win.eval(_queue.script)}catch(ignore){}finally{if(typeof(_queue.callback)==="function"){_queue.callback()}this.isJsHolding=false}}setTimeout(this.execScript.bind(this),5)},runBy:function(script,callback){this.jsQueue.push({script:script,callback:callback});this.execScript()},importBy:function(url,callback){if(url.indexOf("cia.daum.net")<0&&this.imported.include(url)){if(typeof(callback)==="function"){callback()}return}this.imported.push(url);this.sendRequest("get",url,"",false,function(script){this.runBy(script,callback)}.bind(this),function(){})}})})();Trex.module("interrupt enter key action @ wysiwyg panel",function(d,h,k,c,a){var j=TrexConfig.get("canvas");if(j.newlinepolicy!="p"){return
}c.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:Trex.__KEY.ENTER},function(m){if(!c.canHTML()){return}var l=c.getProcessor();try{l.getTxSel().collapse(false);l.controlEnterByParagraph(m)}catch(n){if(n==$propagate){throw n}}});c.observeKey({ctrlKey:false,altKey:false,shiftKey:true,keyCode:Trex.__KEY.ENTER},function(m){if(!c.canHTML()){return}var l=c.getProcessor();try{l.getTxSel().collapse(false);l.controlEnterByLinebreak(m)}catch(n){if(n==$propagate){throw n}}})});Trex.Canvas.HtmlPanel=Trex.Class.create({$extend:Trex.Canvas.BasedPanel,$const:{__MODE:Trex.Canvas.__HTML_MODE},initialize:function(c,a){this.$super.initialize(c,a);var d=new Trex.Canvas.TextAreaProcessor(this.el);this.getProcessor=function(){return d};this.bindEvents();this.lastHeight=(this.lastHeight-9*2).toPx();if(!!a.readonly){this.setReadOnly()}if($tx.msie_ver=="8"){this.el.setAttribute("style","width: 500px; min-width: 100%; max-width: 100%;")}if(!a.styles.notApplyBgColorOnSourceMode){if(a.styles.backgroundColor){$tx.setStyle(this.el,{backgroundColor:a.styles.backgroundColor})
}if(a.styles.color){$tx.setStyle(this.el,{color:a.styles.color})}}},bindEvents:function(){var a={keydown:function(h){var j=this.canvas;var d=this.config;this.canvas.fireJobs(Trex.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,h)},keyup:function(d){this.canvas.getProcessor().savePosition()},mousedown:function(d){this.canvas.fireJobs(Trex.Ev.__CANVAS_SOURCE_PANEL_MOUSEDOWN,d)},mouseup:function(d){this.canvas.getProcessor().savePosition()},click:function(d){this.canvas.fireJobs(Trex.Ev.__CANVAS_SOURCE_PANEL_CLICK,d)}};for(var c in a){$tx.observe(this.el,c,a[c].bind(this),true)}},getPanel:function(a){var c=((a.initializedId)?a.initializedId:"");return $must("tx_canvas_source"+c,"Trex.Canvas.HtmlPanel")},getHolder:function(a){var c=((a.initializedId)?a.initializedId:"");return $must("tx_canvas_source_holder"+c,"Trex.Canvas.HtmlPanel")},show:function(){this.$super.show();var d=this.el;var c=this.elHolder;var a=this.getProcessor();setTimeout(function(){try{a.focusOnTop()}catch(h){}if($tx.msie&&$tx.msie_ver<7){c.style.padding="1px";
setTimeout(function(){c.style.padding="0px"},0)}},100)},getContent:function(){return this.el.value},setContent:function(c){var a=new Trex.Validator();if(a.exists(c)){this.el.value=c}else{this.el.value=""}},getPanelHeight:function(){return($tom.getHeight(this.el).parsePx()+2).toPx()},setPanelHeight:function(a){this.$super.setPanelHeight((a.parsePx()-2).toPx())},setReadOnly:function(){this.el.readOnly="true"}});Trex.Canvas.TextPanel=Trex.Class.create({$extend:Trex.Canvas.BasedPanel,$const:{__MODE:Trex.Canvas.__TEXT_MODE},initialize:function(c,a){this.$super.initialize(c,a);var d=new Trex.Canvas.TextAreaProcessor(this.el);this.getProcessor=function(){return d};this.bindEvents();this.lastHeight=(this.lastHeight-9*2).toPx();if(!!a.readonly){this.setReadOnly()}},bindEvents:function(){var a={keydown:function(d){},keyup:function(d){},mousedown:function(d){},mouseup:function(d){},click:function(d){this.canvas.fireJobs(Trex.Ev.__CANVAS_TEXT_PANEL_CLICK,d)}};for(var c in a){$tx.observe(this.el,c,a[c].bind(this),true)
}},getPanel:function(a){var c=((a.initializedId)?a.initializedId:"");return $must("tx_canvas_text"+c,"Trex.Canvas.TextPanel")},getHolder:function(a){var c=((a.initializedId)?a.initializedId:"");return $must("tx_canvas_text_holder"+c,"Trex.Canvas.TextPanel")},show:function(){this.$super.show();var d=this.el;var c=this.elHolder;var a=this.getProcessor();setTimeout(function(){try{a.focusOnTop()}catch(h){}if($tx.msie&&$tx.msie_ver<7){c.style.padding="1px";setTimeout(function(){c.style.padding="0px"},0)}},100)},getContent:function(){return this.el.value},setContent:function(a){this.el.value=a},getPanelHeight:function(){return($tom.getHeight(this.el).parsePx()+2).toPx()},setPanelHeight:function(a){this.$super.setPanelHeight((a.parsePx()-2).toPx())},setReadOnly:function(){this.el.readOnly="true"}});Trex.module("interrupt enter key action @ text panel",function(d,j,k,c,a){var h=c.config.newlinepolicy;var l=c.config.insertbr;if(h=="br"&&l){c.observeJob(Trex.Ev.__CANVAS_SOURCE_PANEL_KEYDOWN,function(m){if(c.canHTML()){return
}c.getProcessor().controlEnter(m)})}});Trex.I.Marker={};Trex.I.Marker.Standard={paste:function(){var a=this.processor.getRange();var l=a.endContainer;var j=a.startContainer;if(l.nodeType==9){l=this.processor.doc.body;j=this.processor.doc.body}var h=this.endMarker=this.processor.create("span",{id:"tx_end_marker"});var c=a.endOffset;if(l.nodeType==3){l.splitText(c);l.parentNode.insertBefore(h,l.nextSibling)}else{l.insertBefore(h,l.childNodes[c])}var k=this.startMarker=this.processor.create("span",{id:"tx_start_marker"});var d=a.startOffset;if(j.nodeType==3){j.splitText(d);j.parentNode.insertBefore(k,j.nextSibling)}else{j.insertBefore(k,j.childNodes[d])}},remove:function(){$tom.remove(this.startMarker);$tom.remove(this.endMarker)}};Trex.I.Marker.Trident={paste:function(){this.clear();var c=this.processor.getRange();var a=this.processor.doc.body;var h=c.duplicate();h.collapse(true);h.pasteHTML('<span id="tx_start_marker"></span>');this.startMarker=$tom.collect(a,"#tx_start_marker");var d=c.duplicate();
d.collapse(false);d.pasteHTML('<span id="tx_end_marker"></span>');this.endMarker=$tom.collect(a,"#tx_end_marker")},clear:function(){var a=this.processor.doc.body;$tom.remove($tom.collect(a,"#tx_start_marker"));$tom.remove($tom.collect(a,"#tx_end_marker"))},remove:function(){$tom.remove(this.startMarker);$tom.remove(this.endMarker)}};Trex.Canvas.Marker=Trex.Class.create({$mixins:[(($tx.msie)?Trex.I.Marker.Trident:Trex.I.Marker.Standard)],initialize:function(a){this.processor=a},backup:function(){this.processor.bookmarkWithMarker(this)},checkCollapsed:function(){return($tom.next(this.startMarker)==this.endMarker)}});Trex.I.Selection={};Trex.I.Selection.Standard={getSel:function(){return this.win.getSelection()},getText:function(){return this.getSel().toString()},getNode:function(){var a=this.getRange();if(a){var c=a.startContainer;if(c.nodeType==1){if($tom.isBody(c)){return(c)}else{return(c.childNodes[a.startOffset])}}else{return(c.parentNode)}}else{return null}},createRange:function(){return this.doc.createRange()
},createTextRange:function(){return this.doc.createRange()},getRange:function(d){var c=this.getSel();if(c&&c.rangeCount>0){if(d==null){if(c.rangeCount==1){return c.getRangeAt(0)}else{return this.mergeRange(c)}}else{var a=c.getRangeAt(0);a.collapse(d);return a}}else{return this.doc.createRange()}},isCollapsed:function(){var a=this.getSel();return(a&&a.isCollapsed)},collapse:function(c){var d=this.getSel();if(d&&d.rangeCount>0){var a=d.getRangeAt(0);a.collapse(c)}},getControl:function(){var c=this.getSel();var a;if($tx.opera){a=c.anchorNode.childNodes[c.anchorOffset];if(a==null){return null}if(c.isCollapsed&&a.tagName!="IMG"){return null}}else{if(c.isCollapsed){return null}a=c.anchorNode.childNodes[c.anchorOffset]}if($tom.kindOf(a,"%control")){return a}else{return null}},hasControl:function(){return(this.getControl()!=null)},selectControl:function(c){var a=this.createRange();a.selectNode(c);var d=this.getSel();d.removeAllRanges();d.addRange(a)},compareTextPos:function(){var a=this.getRange();
if(a){var c=a.startContainer;if(c.nodeType==3){if(c.textContent.trim().length==0){return $tom.__POSITION.__EMPTY_TEXT}else{if(a.startOffset==0){return $tom.__POSITION.__START_OF_TEXT}else{if(a.startOffset==c.textContent.length){return $tom.__POSITION.__END_OF_TEXT}else{return $tom.__POSITION.__MIDDLE_OF_TEXT}}}}}return $tom.__POSITION.__END_OF_TEXT},mergeRange:function(j){try{var h=[];for(var d=0,m=j.rangeCount;d<m;d++){h.push(j.getRangeAt(d))}j.removeAllRanges();var c=h[0].startContainer.childNodes[h[0].startOffset];var l=h[m-1].endContainer.childNodes[h[m-1].endOffset-1];var a=this.doc.createRange();try{a.setStart(c,0)}catch(k){a.collapse(true)}try{a.setEnd(l,l.childNodes.length)}catch(k){}j.addRange(a);return j.getRangeAt(0)}catch(k){return j.getRangeAt(0)}},setStart:function(a,c,h){try{a.setStart(c,h)}catch(d){a.collapse(true);a.setStart(c,h)}},setEnd:function(a,c,h){try{a.setEnd(c,h)}catch(d){a.collapse(false);a.setEnd(c,h)}},selectRange:function(a){var c=this.getSel();c.removeAllRanges();
c.addRange(a);return c}};Trex.I.Selection.Trident={getSel:function(){return this.doc.selection},getText:function(){return this.getSel().createRange().text},getNode:function(){var c=this.getSel();var a=c.type.toLowerCase();if(a==="control"){return(c.createRange().item(0))}else{return(c.createRange().parentElement())}},createRange:function(){var a=this.getSel();return a.createRange()},createTextRange:function(){return this.doc.body.createTextRange()},getRange:function(h){var d=this.getSel();var c=d.type.toLowerCase();if(c=="none"){return d.createRange()?d.createRange():function(){var j=this.doc.body.createTextRange();j.collapse(true);j.select();return j}()}if(h==null){return d.createRange()}else{if(c==="text"){var a=d.createRange();a.collapse(h);a.select();return d.createRange()}else{if(c==="control"){d.empty()}return d.createRange()}}},isCollapsed:function(){var d=this.getSel();var c=d.type.toLowerCase();if(c==="none"){return true}else{if(c==="control"){return true}else{if(c==="text"){var a=d.createRange();
if(a&&a.htmlText){return(a.htmlText.length==0)}else{return true}}else{return true}}}},collapse:function(d){var h=this.getSel();var c=h.type.toLowerCase();if(c==="text"){var a=h.createRange();a.collapse(d);a.select();return h.createRange()}else{if(c==="control"){h.empty()}return h.createRange()}},getControl:function(){var d=this.getSel();var a=d.type.toLowerCase();if(a==="control"){var c=d.createRange().item(0);if($tom.kindOf(c,"%control")){return c}else{return null}}else{return null}},hasControl:function(){var c=this.getSel();var a=c.type.toLowerCase();if(a==="control"){return true}else{return false}},selectControl:function(c){var a=this.doc.body.createControlRange();a.add(c);a.select()},compareTextPos:function(){var d=this.getSel();var c=d.type.toLowerCase();if(c==="none"){var a=d.createRange();var h=a.duplicate();h.moveToElementText(a.parentElement());if(h.text.trim().replace(Trex.__WORD_JOINER_REGEXP,"").length==0){return $tom.__POSITION.__EMPTY_TEXT}else{if(a.compareEndPoints("StartToStart",h)==0){return $tom.__POSITION.__START_OF_TEXT
}else{if(a.compareEndPoints("EndToEnd",h)==0){return $tom.__POSITION.__END_OF_TEXT}else{return $tom.__POSITION.__MIDDLE_OF_TEXT}}}}return $tom.__POSITION.__END_OF_TEXT},transTextRange:function(a,j,k,d){var h=this.createTextRange();var c=this.win.span(Trex.__WORD_JOINER);$tom.insertAt(c,j);h.moveToElementText(c);$tom.remove(c);h.collapse(true);h.moveStart("character",k);if(d){a.setEndPoint("StartToStart",h)}else{a.setEndPoint("EndToEnd",h)}return a},setStart:function(a,c,h){try{this.transTextRange(a,c,h,true)}catch(d){console.log(d)}return a},setEnd:function(a,c,h){try{this.transTextRange(a,c,h,false)}catch(d){console.log(d)}return a},selectRange:function(a){a.select()}};Trex.I.Selection.Gecko={};Trex.I.Selection.Webkit={getControl:function(){var h=this.getSel();if(h.isCollapsed){return null}if($tom.isElement(h.anchorNode)){var d=h.anchorNode.childNodes[h.anchorOffset];if($tom.kindOf(d,"%control")){return d}else{return null}}var c=$tom.previous(h.focusNode);var a=$tom.next(h.anchorNode);
if(c==a){return $tom.first(c,"%control")}else{return null}},selectControl:function(c){var a=this.createRange();a.selectNode(c);var d=this.getSel();d.removeAllRanges();d.addRange(a)}};Trex.I.Selection.Presto={};Trex.Canvas.Selection=Trex.Class.create({$mixins:[Trex.I.Selection.Standard,(($tx.msie)?Trex.I.Selection.Trident:{}),(($tx.gecko)?Trex.I.Selection.Gecko:{}),(($tx.webkit)?Trex.I.Selection.Webkit:{}),(($tx.presto)?Trex.I.Selection.Presto:{})],initialize:function(a){this.processor=a;this.win=a.win;this.doc=a.doc}});Trex.Canvas.Bookmark=Trex.Class.create({startContainer:null,startOffset:0,endContainer:null,endOffset:0,initialize:function(a){this.processor=a;this.win=a.win;this.doc=a.doc;this.dummy=function(){return a.newDummy()}},collapse:function(a){if(a){this.updateEnd(this.startContainer,this.startOffset)}else{this.updateStart(this.endContainer,this.endOffset)}},save:function(a){this.updateStart(a.startContainer,a.startOffset);this.updateEnd(a.endContainer,a.endOffset)},saveAroundNode:function(a){this.updateStartBefore($tom.top(a));
this.updateEndAfter($tom.bottom(a))},saveIntoFirst:function(c){var a=$tom.top(c);this.updateEndBefore(a);this.collapse(false)},saveIntoLast:function(c){var a=$tom.bottom(c);this.updateEndBefore(a);this.collapse(false)},savePreviousTo:function(c){if($tom.previous(c)){var a=$tom.top($tom.previous(c));this.updateEndAfter(a)}else{this.updateEndBefore(c)}this.collapse(false)},saveNextTo:function(c){if($tom.next(c)){var a=$tom.top($tom.next(c));this.updateEndBefore(a)}else{this.updateEndAfter(c)}this.collapse(false)},saveWithMarker:function(a){if(a.checkCollapsed()){this.updateEndAfter(a.endMarker);this.collapse(false)}else{this.updateStartBefore(a.startMarker);this.updateEndAfter(a.endMarker)}},select:function(d){if(this.isValid()){var a=d.createTextRange();try{d.setStart(a,this.startContainer,this.startOffset);d.setEnd(a,this.endContainer,this.endOffset)}catch(c){console.log(c)}d.selectRange(a)}this.reset()},isValid:function(){return this.isValidStartContainer()&&this.isValidEndContainer()},isValidStartContainer:function(){return this.doc.body===$tom.body(this.startContainer)
},isValidEndContainer:function(){return this.doc.body===$tom.body(this.endContainer)},updateStart:function(a,c){this.startContainer=a;this.startOffset=c},updateStartBefore:function(c){var a=this.dummy();$tom.insertAt(a,c);this.startContainer=a;this.startOffset=0},updateStartAfter:function(c){var a=this.dummy();$tom.insertNext(a,c);this.startContainer=a;this.startOffset=0},updateEnd:function(a,c){this.endContainer=a;this.endOffset=c},updateEndBefore:function(c){var a=this.dummy();if(c.nodeName&&c.nodeName.toUpperCase()=="P"&&!c.nodeValue){$tom.append(c,a)}else{$tom.insertAt(a,c)}this.endContainer=a;this.endOffset=0},updateEndAfter:function(c){var a=this.dummy();$tom.insertNext(a,c);this.endContainer=a;this.endOffset=0},reset:function(){this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0}});Trex.Canvas.TextAreaProcessor=Trex.Class.create({$mixins:[],initialize:function(a){this.el=a},focus:function(){this.el.focus()},focusOnTop:function(){var a=this.el;if(a.createTextRange){var c=a.createTextRange();
c.collapse(true);c.moveStart("character",0);c.moveEnd("character",0);c.select()}else{if(a.setSelectionRange){a.select();a.setSelectionRange(0,0)}else{a.focus()}}},blur:function(){window.focus()},savePosition:function(){if(this.el.createTextRange){this.currentPos=document.selection.createRange().duplicate()}},controlEnter:function(c){var a=this;a.insertTag("<br/>","")},insertTag:function(a,c){this.pasteContent(a+c);return true},pasteContent:function(c,d,a){this.el.value+=c}});Trex.I.Processor={};Trex.I.Processor.Standard={txSelection:null,initialize:function(c,a){this.win=c;this.doc=a;this.txSelection=new Trex.Canvas.Selection(this);this.bookmark=new Trex.Canvas.Bookmark(this)},getTxSel:function(){return this.txSelection},getSel:function(){return this.txSelection.getSel()},getRange:function(){return this.txSelection.getRange()},getBookmark:function(){return this.bookmark},isCollapsed:function(){return this.txSelection.isCollapsed()},getNode:function(){return this.txSelection.getNode()},getControl:function(){return this.txSelection.getControl()
},hasControl:function(){return this.txSelection.hasControl()},selectControl:function(a){return this.txSelection.selectControl(a)},getText:function(){return this.txSelection.getText()},compareTextPos:function(){return this.txSelection.compareTextPos()},findNode:function(a){try{return $tom.find(this.getNode(),a)}catch(c){return null}},queryStyle:function(d,c){if(!d){return null}c=((c=="float")?((d.style.styleFloat===undefined)?"cssFloat":"styleFloat"):c);if(d.style&&d.style[c]){return d.style[c]}else{if(d.currentStyle&&d.currentStyle[c]){return d.currentStyle[c]}else{if(window.getComputedStyle){var a=this.doc.defaultView.getComputedStyle(d,null);return((a)?a[c]:null)}}}return null},queryAttr:function(c,a){if(!c){return null}return $tom.getAttribute(c,a)},queryCommandState:function(c){try{return this.doc.queryCommandState(c)}catch(a){return false}},execCommand:function(j,a){try{this.doc.execCommand("styleWithCSS",false,true)}catch(h){try{this.doc.execCommand("useCSS",false,false)}catch(d){}}try{this.doc.execCommand(j,false,a)
}catch(c){}},execWithMarker:function(c){var a=new Trex.Canvas.Marker(this);this.bookmarkTo();try{a.paste();a.backup();c(a)}catch(d){console.log(d)}finally{a.remove()}},focus:function(){this.win.focus()},blur:function(){window.focus()},focusOnTop:function(){this.win.focus();this.moveCaretTo(this.doc.body,true);this.doc.body.scrollTop=0},focusOnBottom:function(){this.win.focus();this.moveCaretTo(this.doc.body,false);this.doc.body.scrollTop=this.doc.body.scrollHeight},moveCaretTo:function(c,a){if(!c){return}this.bookmarkInto(c,a);this.bookmark.select(this.txSelection)},moveCaretWith:function(c){if(!c){return}var a=this.findNode(c);if(a){this.bookmark.saveNextTo(a);this.bookmark.select(this.txSelection)}},selectAround:function(a){if(!a){return}this.bookmark.saveAroundNode(a);this.bookmark.select(this.txSelection)},bookmarkInto:function(c,a){if(!c){return}a=(a==null)?true:a;if(a){this.bookmark.saveIntoFirst(c)}else{this.bookmark.saveIntoLast(c)}},bookmarkToPrevious:function(a){if(!a){return}this.bookmark.savePreviousTo(a)
},bookmarkToNext:function(a){if(!a){return}this.bookmark.saveNextTo(a)},bookmarkTo:function(a){a=a||this.txSelection.getRange();this.bookmark.save({startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset})},bookmarkWithMarker:function(a){this.bookmark.saveWithMarker(a)},restore:function(){this.bookmark.select(this.txSelection)},create:function(){var c=$A(arguments),a=c.shift();var d=this.newNode(a);each(c,function(h){if(h.nodeType){$tom.append(d,h)}else{if(typeof(h)=="string"||typeof(h)=="number"){d.innerHTML+=h}else{if(typeof(h)=="array"){for(var j=0;j<h.length;j++){$tom.append(d,h[j])}}else{$tom.applyAttributes(d,h)}}}});return d},pasteNode:function(k,j,m){if(!k){return}if(!k.length){k=[].concat(k)}this.txSelection.collapse(false);var h=this.txSelection.getRange();if(j){var d,c,a;var l=this;this.execWithMarker(function(n){a=$tom.divideParagraph(n.endMarker);var o=$tom.kindOf(a,"p,li,dd,dt,h1,h2,h3,h4,h5,h6");if(o){d=$tom.previous(a);
c=$tom.clone(a)}else{a=l.newNode("p");$tom.insertAt(a,n.endMarker);c=l.newNode("p")}$tom.insertAt(c,a);k.each(function(p){$tom.append(c,p)});if(m){$tom.applyAttributes(c,m)}});if(d){if(!$tom.hasData(d)){this.stuffNode(d)}}this.stuffNode(a);this.bookmark.saveIntoFirst(a)}else{this.execWithMarker(function(n){k.each(function(o){$tom.insertAt(o,n.endMarker)})})}return k[0]},pasteContent:function(d,c,j){var a=this.create("div");a.innerHTML=d;var h=$tom.children(a);return this.pasteNode(h,c,j)},replace:function(d,a,c){this.bookmark.saveAroundNode(d);return $tom.replace(d,this.create(a,c))},blocks:function(h){var k=[];var a=this.getRange();var j=h();if(this.hasControl()){var d=this.getControl();if($tom.kindOf(d.parentNode,j)){k.push(d.parentNode)}}else{var c=this;this.execWithMarker(function(l){var n=c.getBlockRangeIterator(j,l.startMarker,l.endMarker);var m;while(n.hasNext()){m=n.next();if($tom.kindOf(m,"#tx_start_marker,#tx_end_marker")){}else{k.push(m)}}})}return k},inlines:function(j){var m=[];
var c=this.getRange();var k=j();var h=this;var l=function(){return h.create($tom.inlineOf())};if(this.hasControl()){var d=this.getControl();if($tom.kindOf(d,k)){m.push(d)}else{var a=l();$tom.insertNext(a,d);$tom.append(a,d)}}else{this.execWithMarker(function(o){if(o.checkCollapsed()){var n=l();$tom.append(n,h.newDummy());$tom.insertNext(n,o.startMarker);h.bookmarkTo({startContainer:n,startOffset:1,endContainer:n,endOffset:1});m.push(n)}else{var q=h.getInlineRangeIterator(k,o.startMarker,o.endMarker);var p;while(q.hasNext()){p=q.next();if($tom.kindOf(p,"#tx_start_marker,#tx_end_marker")){}else{if($tom.kindOf(p,"br")){}else{m.push(p)}}}}})}return m},controls:function(c){var d=[];var a=this.getRange();if(this.hasControl()){if($tom.kindOf(this.getControl(),c())){d.push(this.getControl())}}return d},addDummyNbsp:function(){},apply:function(c,a){if(!c){return null}if(!c.length){c=[].concat(c)}c.each(function(d){$tom.applyAttributes(d,a)});return c},wrap:function(d,a,c){if(!d){return null}if(!d.length){d=[].concat(d)
}c=c||{};return $tom.wrap(this.create(a,c),d)},unwrap:function(a){if(!a){return}this.bookmark.saveAroundNode(a);return $tom.unwrap(a)}};Trex.module("observe that @when control elements are focused at",function(d,h,j,c,a){if($tx.webkit||$tx.presto){c.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEDOWN,function(m){var l=c.getProcessor();var k=$tx.element(m);if($tom.kindOf(k,"img,hr,iframe,table")){var l=c.getProcessor();var n=$tom.find(k,"button");if(n){l.selectControl(n)}else{l.selectControl(k)}}else{if($tom.kindOf(k,"button")){l.selectControl(k)}}})}});Trex.I.Processor.Trident={stuffNode:function(a){if($tom.getLength(a)==0){a.innerHTML="&nbsp;"}return a},controlEnterByParagraph:function(d){var c=this.findNode("div");if(!c){throw $propagate}var h=this.findNode("%paragraph");if($tom.kindOf(h,"p")){if($tom.first(c,"p")==h){var a;this.execWithMarker(function(j){a=$tom.divideParagraph(j.endMarker)});this.stuffNode(h);this.stuffNode(a);this.moveCaretTo(a)}else{throw $propagate}}else{if($tom.kindOf(h,"li,td,th,dd,dt")){throw $propagate
}else{var a=this.newParagraph("p");this.execWithMarker(function(j){$tom.insertNext(a,j.endMarker)});this.moveCaretTo(a)}}},controlEnterByLinebreak:function(c){if(!!this.findNode("blockquote,div,p,strong,u,em,strike,span,font,td,body,li")){var a=this.getTxSel().getRange();a.pasteHTML("<br />\n");a.collapse(false);a.select()}}};Trex.module("delete image element @when backspace key event fires",function(d,h,j,c,a){if($tx.msie){c.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:Trex.__KEY.BACKSPACE},function(m){var l=c.getProcessor();if(l.hasControl()&&l.getControl()){try{var k=l.getControl();$tom.remove(k)}catch(n){}throw $stop}})}});Trex.module("delete table element @when backspace key event fires",function(d,h,j,c,a){if($tx.msie){var k;c.observeKey({ctrlKey:false,altKey:false,shiftKey:false,keyCode:Trex.__KEY.BACKSPACE},function(n){var m=c.getProcessor();var l=m.getRange();try{if(k==l.boundingLeft){var p=$tom.previous(m.getNode());if($tom.kindOf(p,"table")){$tom.remove(p)}}}catch(o){}k=l.boundingLeft;
throw $propagate})}});Object.extend(Trex.I.Processor.Trident,{lastRange:null,shouldHandleOnActivate:true,restoreRange:function(){if(!this.shouldHandleOnActivate){return}if(this.lastRange){try{this.lastRange.select()}catch(h){var d=this.getSel();var c=d.type.toLowerCase();if(c==="control"){d.empty();var a=d.createRange();a.collapse(false);a.select()}}finally{this.lastRange=null}}}});Trex.module("bind iframe activate or deactivate event",function(d,h,j,c,a){if($tx.msie){c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(k){var l=c.getProcessor(Trex.Canvas.__WYSIWYG_MODE);$tx.observe(k,"beforedeactivate",function(o){var m=o.toElement;if(m){l.shouldHandleOnActivate=false;l.lastRange=null}else{var n=$tx.element(o);if(!n||!$tom.isElement(n)){return}l.shouldHandleOnActivate=!$tom.kindOf(n,"iframe,object");l.lastRange=l.getRange()}});$tx.observe(k,"activate",function(m){l.lastRange=null})})}});Trex.I.Processor.Gecko={stuffNode:function(a){return $tom.stuff(a,this.newNode("br"))},controlEnterByParagraph:function(d){var c=this.findNode("li,td,th");
if(c){throw $propagate}var j=this.findNode("button");if(j){this.moveCaretTo($tom.next(j));throw $propagate}var a;this.getTxSel().collapse(false);var h=this.findNode("%paragraph");if(h){this.execWithMarker(function(k){a=$tom.divideParagraph(k.endMarker)});this.stuffNode(h)}else{a=this.newParagraph("p");this.execWithMarker(function(k){$tom.insertAt(a,k.endMarker)})}this.stuffNode(a);this.moveCaretTo(a)},controlEnterByLinebreak:function(a){throw $propagate}};Trex.I.Processor.Webkit={stuffNode:function(a){return $tom.stuff(a,this.newNode("br"))},controlEnterByParagraph:function(a){throw $propagate},controlEnterByLinebreak:function(h){var d=this;var c=this.getRange(false);var k=c.endContainer.parentNode;if(k&&(k.tagName=="P"||k.tagName=="DIV"||k.tagName=="BODY"||k.tagName=="BLOCKQUOTE")){if(k.tagName=="BLOCKQUOTE"||$tx.hasClassName(k,"txc-textbox")||$tx.hasClassName(k,"txc-moreless")){$tx.stop(h);var a=d.win.br();c.insertNode(a);c.selectNode(a);c.collapse(false);a=d.win.br();c.insertNode(a);
c.selectNode(a);c.collapse(false);var c=d.getRange(false);c.selectNodeContents(a.nextSibling);var j=d.getSel();j.removeAllRanges();j.addRange(c);j.collapseToStart()}}},queryCommandState:function(h){var a=this.getRange();if(this.hasControl()&&a.collapsed===false&&a.endOffset-a.startOffset===1){if(h==="bold"||h==="underline"||h==="italic"||h==="strikethrough"){var c=this.getControl();if(c.tagName==="IMG"||c.tagName==="BUTTON"){return false}}}try{return this.doc.queryCommandState(h)}catch(d){return false}},addDummyNbsp:function(a){var c;if(a.length===1){c=a[0];if(c.tagName.toLowerCase()==="span"&&c.childNodes.length===1&&c.firstChild.nodeType===3&&c.firstChild.data===""){c.firstChild.data="\u00A0"}}}};Trex.I.Processor.Presto={stuffNode:function(a){return $tom.stuff(a,this.newNode("br"))},controlEnterByParagraph:function(a){throw $propagate},controlEnterByLinebreak:function(a){throw $propagate}};Trex.I.Processor.StandardP={putBogusParagraph:function(){var d=this.doc.body;var c=$tom.last(d);
if(c&&$tom.kindOf(c,"p")){return}var a=this.newParagraph("p");if($tom.kindOf(c,"br")){$tom.replace(c,a)}else{$tom.append(d,a)}}};Trex.module("put bogus paragraph @when any key event fires",function(d,h,j,c,a){if($tx.msie){return}if(c.config.newlinepolicy=="p"){c.reserveJob(Trex.Ev.__CANVAS_PANEL_KEYUP,function(l){if(!c.canHTML()){return}var k=c.getProcessor();k.putBogusParagraph()},10)}});Trex.I.Processor.TridentP={};Trex.I.Processor.GeckoP={};Trex.I.Processor.WebkitP={};Trex.I.Processor.PrestoP={};(function(){var a=Trex.Class.create({initialize:function(h,d,j,c){this.processor=h;this.start=j;this.end=c||this.start;this.current=this.start;this.wTranslator=$tom.translate(d).extract("%wrapper");this.pTranslator=$tom.translate(d).extract("%paragraph")},hasNext:function(){return !!this.current},next:function(){var d=this.current;d=this.find(d);var c=d;if($tom.include(d,this.end)){c=null}else{while(c&&!$tom.next(c)){c=$tom.parent(c);if($tom.isBody(c)){c=null}}if(c){c=$tom.next(c)}}if(c==this.end){c=null
}this.current=c;return d},find:function(k){var h;var j=k;if(!$tom.hasContent(j)){return j}while(j){h=j;if($tom.isBody(j)){break}if($tom.kindOf(j,this.wTranslator.getExpression())){return j}if($tom.kindOf(j,"%wrapper,%outergroup")){j=$tom.descendant(h,this.pTranslator.getExpression());if(j){return j}j=$tom.descendant(h,"%paragraph");if(j){h=j;break}}if($tom.kindOf(j,this.pTranslator.getExpression())){return j}j=j.parentNode}var d=$tom.paragraphOf($tom.getName(h));var l=this.processor.newNode(d);var c=$tom.extract(h,k,"%text,%inline,img,object,embed,hr");$tom.wrap(l,c);this.processor.stuffNode(l);return l}});Object.extend(Trex.I.Processor.Standard,{getBlockRangeIterator:function(d,h,c){return new a(this,d,h,c)}})})();(function(){var a=Trex.Class.create({initialize:function(h,d,j,c){this.processor=h;this.start=j;this.end=c||this.start;this.current=this.start;this.iTranslator=$tom.translate(d).extract("%inline")},hasNext:function(){return !!this.current},next:function(){var d=this.current;d=this.find(d);
var c=d;if(d==this.end){c=null}else{while(c&&!$tom.next(c)){c=$tom.parent(c);if($tom.isBody(c)){c=null}}if(c){c=$tom.next(c)}}if($tom.include(c,this.end)){c=$tom.top(c,true)}this.current=c;return d},find:function(k){var j=k;if($tom.kindOf(j,"%paragraph,%outergroup,%block")||$tom.isBody(j)){var h=j;j=$tom.top(h,true);if(!j){var d=$tom.inlineOf();var c=this.processor.create(d);$tom.append(h,c);return c}}if($tom.kindOf(j,"br")){return j}else{if(!$tom.hasContent(j)){return j}}if($tom.kindOf(j,this.iTranslator.getExpression())){return j}var d=$tom.inlineOf();var c=this.processor.create(d);$tom.insertAt(c,j);if(j){$tom.append(c,j)}return c}});Object.extend(Trex.I.Processor.Standard,{getInlineRangeIterator:function(d,h,c){return new a(this,d,h,c)}})})();(function(){var a=null;var c={};var d={};Object.extend(Trex.I.Processor.Standard,{newNode:function(h){if(a!=this.doc){c={};a=this.doc}if(!c[h]){c[h]=this.win[h]()}return $tom.clone(c[h],false)},newText:function(h){return this.doc.createTextNode(h)
},newParagraph:function(h){if(a!=this.doc){d={};a=this.doc}if(!d[h]){d[h]=this.stuffNode(this.newNode(h))}return $tom.clone(d[h],true)}})})();(function(){var a=null;var c=null;var h=false;var d=[];Object.extend(Trex.I.Processor.Standard,{newDummy:function(j){j=!!j;if(a!=this.doc){c=null;d=[];a=this.doc}if(!c){c=this.doc.createTextNode(Trex.__WORD_JOINER)}var k=$tom.clone(c);if(!j){d.push(k);h=true}return k},clearDummy:function(){if(!h){return}for(var l=0,j=d.length-1;l<j;l++){try{var k=d.shift();if(k&&k.nodeValue){if(k.nodeValue==Trex.__WORD_JOINER){$tom.remove(k)}else{k.nodeValue==k.nodeValue.replace(Trex.__WORD_JOINER_REGEXP,"")}}}catch(m){}}h=false}})})();Trex.Canvas.Processor=Trex.Class.draft({$mixins:[Trex.I.Processor.Standard,(($tx.msie)?Trex.I.Processor.Trident:{}),(($tx.gecko)?Trex.I.Processor.Gecko:{}),(($tx.webkit)?Trex.I.Processor.Webkit:{}),(($tx.presto)?Trex.I.Processor.Presto:{})]});Trex.Canvas.ProcessorP=Trex.Class.create({$extend:Trex.Canvas.Processor,$mixins:[Trex.I.Processor.StandardP,(($tx.msie)?Trex.I.Processor.TridentP:{}),(($tx.gecko)?Trex.I.Processor.GeckoP:{}),(($tx.webkit)?Trex.I.Processor.WebkitP:{}),(($tx.presto)?Trex.I.Processor.PrestoP:{})]});
Trex.register("filter > mode change",function(n,o,a,h,k){function d(t){var u=[[new RegExp("<head[^>]*>.*?<\\/head>","gi"),""],[new RegExp("<script[^>]*>.*?<\\/script>","gi"),""],[new RegExp("<style[^>]*>.*?<\\/style>","gi"),""],[new RegExp("<!--.*?-->","gi"),""],[new RegExp("<h[1-6][^>]*>(.+?)<\\/h[1-6]>","gi"),"\n$1\n\n"],[new RegExp("\r\n(<p[^>]*>|<div[^>]*>|<ul[^>]*>|<ol[^>]*>|<li[^>]*>)","gi"),"$1"],[new RegExp("(<p[^>]*>(.+?)<\\/p>)","gi"),"$1\n"],[new RegExp("<br[^>]*>\\n","gi"),"\n"],[new RegExp("<br[^>]*>","gi"),"\n"],[new RegExp("(<ul[^>]*>|<\\/ul>|<ol[^>]*>|<\\/ol>|<\\/table>)","gi"),"\n\n"],[new RegExp("<td[^>]*>(.+?)<\\/td>\n?","gi"),"\t$1"],[new RegExp("<th[^>]*>(.+?)<\\/th>\n?","gi")," \t$1"],[new RegExp("<\\/tr>\n?","gi"),""],[new RegExp("<tr[^>]*>\n?","gi"),"\n"],[new RegExp("(<li[^>]*>(.+?)<\\/li>)","gi"),"\t$1\n"],[new RegExp("<[\\/a-zA-Z!]+[^>]*>","g"),""],[new RegExp("&nbsp;?","g")," "],[new RegExp("&quot;?","g"),'"'],[new RegExp("&gt;?","g"),">"],[new RegExp("&lt;?","g"),"<"],[new RegExp("&amp;?","g"),"&"],[new RegExp("&copy;?","g"),"(c)"],[new RegExp("&trade;?","g"),"(tm)"],[new RegExp("&#8220;?","g"),'"'],[new RegExp("&#8221;?","g"),'"'],[new RegExp("&#8211;?","g"),"_"],[new RegExp("&#8217;?","g"),"'"],[new RegExp("&#38;?","g"),"&"],[new RegExp("&#169;?","g"),"(c)"],[new RegExp("&#8482;?","g"),"(tm)"],[new RegExp("&#151;?","g"),"--"],[new RegExp("&#039;?","g"),"'"],[new RegExp("&#147;?","g"),'"'],[new RegExp("&#148;?","g"),'"'],[new RegExp("&#149;?","g"),"*"],[new RegExp("&reg;?","g"),"(R]"],[new RegExp("&bull;?","g"),"*"]];
var r=t;for(var q=0;q<u.length;q++){r=r.replace(u[q][0],u[q][1])}return r}function m(q){return q.replace(new RegExp("<br[^>]*>\\n","gi"),"\n")}function l(q){if(q!==null&&q.length!==0){q=q.replace(/&/g,"&amp;");q=q.replace(/ /g,"&nbsp;");q=q.replace(/\"/g,"&quot;");q=q.replace(/>/g,"&gt;");q=q.replace(/</g,"&lt;");if(q.lastIndexOf("\n")===q.length-1){q=q.substr(0,q.length-1)}if(q.lastIndexOf("\r")===q.length-1){q=q.substr(0,q.length-1)}q=q.replace(/\r\n|\r|\n/g,"<br>\n")}return q}function j(q){return q.replace(/<\/(p)><(p[\s>])/gi,"</$1>\n<$2")}function p(q){return q.replace(/<\/(p)>\n+<(p[\s>])/gi,"</$1><$2")}var c=n.getDocParser();c.registerFilter("filter/converting",{"text@load":function(q){return d(q)},"source@load":function(q){return q},"html@load":function(q){return q},text4save:function(r){var q;if(k.canvas.escapeTextModeContents){q=l(r)}else{q=r}try{q=m(q)}catch(t){}return q},source4save:function(q){return q},html4save:function(q){return q},text2source:function(q){return l(q)},text2html:function(q){return l(q)
},source2text:function(q){return d(q)},source2html:function(q){return p(q)},html2text:function(q){return d(q)},html2source:function(q){return j(q)}})});Trex.register("filter > clear redundancy",function(j,k,l,d,c){function a(o){var m=function(x,t,r){var w=0;var q=function(y,z,A){w++;if(A.length==0||A.trim().length==0){return""}else{return['<span style="',t,":",z,';">',A,"</span>"].join("")}};var u=new RegExp('(?:<span[^>;]*style="'+t+':[^";]*;?"[^>;]*>){'+r+"}<span\\s*style=['\"]?"+t+":\\s*(\\w+)[;'\"]*>([\\S\\s]*?)</span>(?:</span>){"+r+"}","gi");do{w=0;x=x.replace(u,q)}while(w>0);return x};var p=["font-size","font-family"];for(var n=0;n<p.length;n++){o=m(o,p[n],2);o=m(o,p[n],1)}o=o.replace(/<span([^>]*)><\/span>/gi,function(r,q){if(/ (?:id|class)=/i.test(q)){return r}return""});o=o.replace(/<font[^>]*><\/font>/gi,"");return o}var h=j.getDocParser();h.registerFilter("filter/redundancy",{"text@load":function(m){return m},"source@load":function(m){return a(m)},"html@load":function(m){return a(m)
},text4save:function(m){return m},source4save:function(m){return m},html4save:function(m){return m},text2source:function(m){return m},text2html:function(m){return m},source2text:function(m){return m},source2html:function(m){return m},html2text:function(m){return m},html2source:function(m){return a(m)}})});TrexMessage.addMsg({"@attacher.only.wysiwyg.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \ubcf8\ubb38\uc5d0 \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc5d0\ub514\ud130\ubaa8\ub4dc\uc5d0\uc11c \ucca8\ubd80\ubc15\uc2a4\uc758 \uc378\ub124\uc77c\uc744 \ud074\ub9ad\ud574\uc11c \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});Trex.Attachment=Trex.Class.draft({$extend:Trex.Entry,isChecked:false,attrs:{align:"left"},initialize:function(h,k){var d=this;var c=this.actor=h;var j=this.canvas=c.canvas;var a=this.entryBox=c.entryBox;this.type=this.constructor.__Identity;this.setProperties(k);if(this.oninitialized){this.oninitialized(h,k)}},setExistStage:function(a){this.existStage=a;
if(this.entryBox.changeState){this.entryBox.changeState(this)}},remove:function(){var a=this.canvas.getContent();if(this.canvas.canHTML()){if(a.search(this.regHtml)>-1){a=a.replace(this.regHtml,"");this.canvas.setContent(a)}}else{if(a.search(this.regText)>-1){a=a.replace(this.regText,"");this.canvas.setContent(a)}}},register:function(){if(Editor.getSidebar().addOnlyBox){return}var c=this.actor;if(c.boxonly){return}if(this.canvas.canHTML()){var d=this.pastescope;var h=this.dispHtml;if(this.objectStyle){h=h.replace(/<img /i,'<img style="'+Trex.Util.toStyleString(this.objectStyle)+'" ')}if(this.objectAttr){h=h.replace(/<img /i,"<img "+Trex.Util.toAttrString(this.objectAttr)+" ")}var a=this.paragraphStyle||{};this.canvas.execute(function(j){j.moveCaretWith(d);j.pasteContent(h,true,{style:a})})}else{if(this.actor.wysiwygonly){alert(TXMSG("@attacher.only.wysiwyg.alert"))}else{this.canvas.getProcessor().insertTag("",this.dispText)}}},replace:function(h){var d=this.canvas;var c=d.getContent();var a=this.actor;
if(!a.boxonly){if(d.canHTML()){if(c.search(h.regHtml)>-1){c=c.replace(h.regHtml,this.dispHtml);d.setContent(c)}else{d.pasteContent(this.dispHtml,true)}}else{if(c.search(h.regText)>-1){c=c.replace(h.regText,"");d.setContent(c)}alert(TXMSG("@attacher.only.wysiwyg.alert"))}}},setProperties:function(c){var a=this.data=c;this.key=this.actor.getKey(a)||"K"+Trex.Util.generateKey();this.field=this.getFieldAttr(a);this.boxAttr=this.getBoxAttr(a);this.objectAttr=this.getObjectAttr.bind(this)(a);this.objectStyle=this.getObjectStyle.bind(this)(a);this.paragraphStyle=this.getParaStyle.bind(this)(a);this.saveHtml=this.getSaveHtml.bind(this)(a);this.dispHtml=this.getDispHtml.bind(this)(a);this.dispText=this.getDispText.bind(this)(a);this.regLoad=this.getRegLoad.bind(this)(a);this.regHtml=this.getRegHtml.bind(this)(a);this.regText=this.getRegText.bind(this)(a)},getObjectAttr:function(a){return this.actor.config.objattr},getObjectStyle:function(a){return this.actor.config.objstyle},getParaStyle:function(a){return this.actor.config.parastyle||this.actor.config.defaultstyle||{}
}});TrexConfig.addSidebar("attachbox",{show:false,destroy:false});Trex.AttachBox=Trex.Class.create({$extend:Trex.EntryBox,isChecked:false,initialize:function(a,c){},checkAvailableCapacity:function(){return true},getAvailableCapacity:function(){return true},checkInsertableSize:function(a){return true}});Trex.install("editor.getAttachBox & sidebar.getAttachments",function(h,j,k,d,c){var a=new Trex.AttachBox(c,h);k.entryboxRegistry.attachbox=a;h.getAttachBox=function(){return a};k.getAttachments=a.getEntries.bind(a)});Trex.register("filter > attachers",function(j,k,l,d,c){var a=j.getAttachBox();var h=j.getDocParser();h.registerFilter("filter/attachments",{"text@load":function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regLoad,"")});return n},"source@load":function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regLoad,o.dispText)});return n},"html@load":function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regLoad,o.dispHtml)});return n
},text4save:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regText,"")});return n},source4save:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regText,o.saveHtml,["id","class"])});return n},html4save:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regHtml,o.saveHtml,["id","class"])});return n},text2source:function(m){return m},text2html:function(m){return m},source2text:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regText,"")});return n},source2html:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regText,o.dispHtml)});return n},html2text:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regHtml,"")});return n},html2source:function(n){var m=a.datalist;m.each(function(o){n=o.getChangedContent(n,o.regHtml,o.dispText,["id","class"])});return n}})});Trex.module("push history @when entrybox has changes",function(h,j,k,d,c){var a=h.getAttachBox();
a.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_REMOVED,function(m){d.history.saveHistory({deleted:true,content:d.getContent(),scrollTop:d.getScrollTop()},function(n){m.deletedMark=(n.deleted==true||n.deleted==undefined)?true:false;a.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_REFRESH,m);d.setContent(n.content)})});var l=function(m){if($tx.msie){setTimeout(function(){m()},0)}else{m()}};a.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_ADDED,function(m){l(function(){d.history.injectHistory({deleted:false},function(n){m.deletedMark=(n.deleted===false)?false:true;a.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_REFRESH,m)})})})});TrexMessage.addMsg({"@attacher.ins":"\uc0bd\uc785","@attacher.del":"\uc0ad\uc81c","@attacher.preview.image":"#iconpath/pn_preview.gif","@attacher.delete.confirm":"\uc0ad\uc81c\ud558\uc2dc\uba74 \ubcf8\ubb38\uc5d0\uc11c\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@attacher.delete.all.confirm":"\uc120\ud0dd\ud55c \ucca8\ubd80\ud30c\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc0ad\uc81c\ud558\uc2dc\uba74 \ubcf8\ubb38\uc5d0\uc11c\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.","@attacher.exist.alert":"\uc774\ubbf8 \ubcf8\ubb38\uc5d0 \uc0bd\uc785\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."});
Trex.install("attachbox.onAttachBoxInitialized @if config.sidebar.attachbox.show = true",function(h,j,k,d,c){var a=h.getAttachBox();if(c.sidebar.attachbox.show==true){Object.extend(a,Trex.I.AttachBox);a.onAttachBoxInitialized(c,d,h)}});Trex.I.AttachBox={useBox:true,isDisplay:false,lastSelectedEntry:null,onAttachBoxInitialized:function(k,j){var o=this;this.canvas=j;var l=((k.initializedId)?k.initializedId:"");this.elBox=$must("tx_attach_div"+l,"Trex.I.AttachBox");this.elList=$must("tx_attach_list"+l,"Trex.I.AttachBox");var p=$must("tx_attach_preview"+l,"Trex.I.AttachBox");this.elPreviewKind=$tom.collect(p,"p");var c=this.elPreviewImg=$tom.collect(p,"img");this.imageResizer=new Trex.ImageResizer(c,{maxWidth:147,maxHeight:108,defImgUrl:TXMSG("@attacher.preview.image"),onComplete:function(r,q){c.style.marginTop=Math.floor((108-q)/2).toPx()}});this.elDelete=$tom.collect("#tx_attach_delete"+l+" a");$tx.observe(this.elDelete,"click",this.onDeleteAll.bind(this));if(typeof showAttachBox=="function"){this.observeJob(Trex.Ev.__ATTACHBOX_SHOW,function(){showAttachBox()
})}if(typeof hideAttachBox=="function"){this.observeJob(Trex.Ev.__ATTACHBOX_HIDE,function(){hideAttachBox()})}var a=this.elProgress=$must("tx_upload_progress"+l,"Trex.I.AttachBox");this.elProgressPercent=$tom.collect(a,"div");this.elProgressTicker=$tom.collect(a,"p");this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_ADDED,function(q){o.registerEntryNode(q);o.displayBox()});this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_MODIFIED,function(q){o.modifyEntryNode(q);o.refreshPreview()});this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_REMOVED,function(q){o.removeEntryNode(q);o.displayBox();if(o.lastSelectedEntry&&o.lastSelectedEntry.key==q.key){o.refreshPreview()}});this.observeJob(Trex.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED,function(){o.datalist.each(function(q){o.removeEntryNode(q,true)});o.displayBox();if(o.lastSelectedEntry){o.refreshPreview()}});this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_REFRESH,function(q){o.displayBox();o.refreshEntryNode(q)});var m=$tx("tx_attach_up_size"+l),n=$tx("tx_attach_max_size"+l),h=$tx("tx_attach_group_used_size"+l),d=$tx("tx_attach_group_max_size"+l);
this.observeJob(Trex.Ev.__ENTRYBOX_CAPACITY_UPDATE,function(){var q=k.sidebar.capacity;if(q.show==false){return}if(m){m.innerText=q.uploaded.toByteUnit()}if(n){n.innerText=q.available.toByteUnit()}if(q.group){if(h){h.innerText=(q.group.used+q.uploaded).toByteUnit()}if(d){d.innerText=q.group.maximum.toByteUnit()}}})},onDeleteAll:function(a){if(this.datalist.length===0){return}if(!a&&!confirm(TXMSG("@attacher.delete.all.confirm"))){return}this.datalist.each(function(c){if(c.deletedMark==false){c.execRemove()}});this.initPreviewImage()},checkDisplay:function(){return this.isDisplay},setDisplay:function(a){this.isDisplay=a},displayBox:function(){var a=false;for(var c=0;c<this.datalist.length;c++){if(this.datalist[c].deletedMark==false){a=true}}if(this.isDisplay==a){return}if(a){$tx.show(this.elBox);this.fireJobs(Trex.Ev.__ATTACHBOX_SHOW,true)}else{$tx.hide(this.elBox);this.fireJobs(Trex.Ev.__ATTACHBOX_HIDE,false)}this.isDisplay=a},registerEntryNode:function(h){var k=tx.li();this.elList.appendChild(k);
h.elData=k;h.makeSelection=function(m){if(m){this.showEntryThumb(h)}else{this.hideEntryThumb(h)}}.bind(this);$tx.observe(k,"mouseover",this.onEntryMouseOver.bind(this,h));$tx.observe(k,"mouseout",this.onEntryMouseOut.bind(this,h));var j=tx.dl();k.appendChild(j);var c=h.elName=tx.dt({className:"tx-name",unselectable:"on"},h.boxAttr.name);j.appendChild(c);$tx.observe(k,"click",function(m){var n=$tx.element(m);if(n.className=="tx-delete"||n.className=="tx-insert"){return}if(m.ctrlKey){this.clickEntryWithCtrl(h)}else{if(m.shiftKey){this.clickEntryWithShift(h)}else{this.clickEntry(h)}}if(h.actor.name=="image"){if(!h.data.width||!h.data.height){new Trex.ImageScale(h.data)}}}.bind(this),false);var d=tx.dd({className:"tx-button"});j.appendChild(d);var a=tx.a({className:"tx-delete"},TXMSG("@attacher.del"));d.appendChild(a);$tx.observe(a,"click",function(){if(!confirm(TXMSG("@attacher.delete.confirm"))){return}h.execRemove()},false);var l=h.elInsert=tx.a({className:"tx-insert"},TXMSG("@attacher.ins"));
d.appendChild(l);$tx.observe(l,"click",function(){if(h.existStage&&!h.actor.config.multipleuse){alert(TXMSG("@attacher.exist.alert"))}else{h.execAppend()}},false)},changeState:function(c){var a=c.existStage;if(a&&!c.actor.config.multipleuse){$tx.addClassName(c.elData,"tx-existed")}else{$tx.removeClassName(c.elData,"tx-existed")}},modifyEntryNode:function(a){a.elName.innerText=a.boxAttr.name},removeEntryNode:function(a,c){if(c){a.elData.parentNode.removeChild(a.elData)}else{if(a.deletedMark){$tx.hide(a.elData)}}},refreshEntryNode:function(a){if(a.deletedMark){$tx.hide(a.elData)}else{$tx.show(a.elData)}},refreshPreview:function(){for(var c=0,a=this.datalist.length-1;c<a;++c){var d=this.datalist[c];if(this.lastSelectedEntry&&this.lastSelectedEntry.key==d.key&&d.deleteMark==false){this.setPreivewImage(d);return true}}for(var c=0,a=this.datalist.length-1;c<a;++c){var d=this.datalist[c];if(d.deletedMark==false&&$tx.hasClassName(d.elData,"tx-clicked")){this.setPreivewImage(d);return true}}this.initPreviewImage();
return false},setPreivewImage:function(a){this.imageResizer.execResize(a.boxAttr.image);this.lastSelectedEntry=a},initPreviewImage:function(){this.imageResizer.execResize(TXMSG("@attacher.preview.image"));this.lastSelectedEntry=null},showEntryThumb:function(a){$tx.addClassName(a.elData,"tx-clicked");$tx.removeClassName(a.elData,"tx-hovered")},hideEntryThumb:function(a){$tx.removeClassName(a.elData,"tx-clicked")},onEntryMouseOver:function(a){$tx.addClassName(a.elData,"tx-hovered")},onEntryMouseOut:function(a){$tx.removeClassName(a.elData,"tx-hovered")},startUpload:function(){this.elProgressPercent.style.width="0".toPx();$tx.setStyle(this.elList,{opacity:0.3});$tx.show(this.elProgress)},doUpload:function(c){var a=300;this.elProgressPercent.style.width=Math.floor(a*(isNaN(c)?0:parseFloat(c)*0.01)).toPx();this.elProgressTicker.innerText=Math.floor((isNaN(c)?0:parseFloat(c)))+"%"},endUpload:function(){$tx.hide(this.elProgress);$tx.setStyle(this.elList,{opacity:1})},clickEntry:function(a){if(this.lastSelectedEntry){if(this.lastSelectedEntry.key==a.key){return
}this.datalist.each(function(c){c.makeSelection(false)})}this.elPreviewKind.className=((a.boxAttr.className)?a.boxAttr.className:"");a.makeSelection(true);this.setPreivewImage(a)},clickEntryWithCtrl:function(a){if($tx.hasClassName(a.elData,"tx-clicked")){a.makeSelection(false);this.refreshPreview()}else{this.elPreviewKind.className=((a.boxAttr.className)?a.boxAttr.className:"");a.makeSelection(true);this.setPreivewImage(a)}},clickEntryWithShift:function(d){if($tx.hasClassName(d.elData,"tx-clicked")){d.makeSelection(false);this.lastSelectedEntry=null}else{var a=this.getIndexOf(d);var h;if(this.lastSelectedEntry){h=this.getIndexOf(this.lastSelectedEntry)}var k=h,j=a;if(a==h){k=j=a}else{if(a<h){k=a;j=h}}this.elPreviewKind.className=((d.boxAttr.className)?d.boxAttr.className:"");for(var c=k;c<j+1;c++){this.datalist[c].makeSelection(true)}this.setPreivewImage(d)}},getIndexOf:function(d){var c,a;for(c=0;c<this.datalist.length;c++){if(this.datalist[c]===d){a=true;break}}return a?c:-1},getSelectedList:function(c){var d=[];
var a;if(c){a=this.getAttachments(c)}else{a=this.datalist}a.each(function(h){if($tx.hasClassName(h.elData,"tx-clicked")){d.push(h)}});return d},removeSelection:function(a){a.each(function(c){$tx.removeClassName(c.elData,"tx-clicked")})}};TrexMessage.addMsg({"@attacher.can.modify.alert":"\uae30\uc874\uc5d0 \ub4f1\ub85d\ub41c #{title}\uc744(\ub97c) \uc218\uc815\ud560 \uc218 \uc788\ub294 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@attacher.can.modify.confirm":"#{title}\uc740(\ub294) \ud558\ub098\ub9cc \ub4f1\ub85d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ub2e4\uc2dc \uc62c\ub9ac\uc2dc\uba74 \uae30\uc874\uc758 #{title}\uc774(\uac00) \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@attacher.insert.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","@attacher.capacity.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4.","@attacher.size.alert":"\uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc5ec \ub354\uc774\uc0c1 \ub4f1\ub85d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});
Trex.install("sidebar.getAttacher & sidebar.getUploadAdaptor",function(j,k,l,d,c){var a=j.getAttachBox();var h=l.attachers={};l.getAttacher=function(m){if(h[m]!=null){return h[m]}else{if(arguments.length==0){return h}else{return null}}}});Trex.register("new attachers",function(k,m,a,c,d){var l=k.getAttachBox();var j=a.attachers;for(var h in Trex.Attacher){var n=Trex.Attacher[h]["__Identity"];if(n){if(!m.tools[n]){}j[n]=new Trex.Attacher[h](k,l,d)}}if(j.file){a.getUploadAdaptor=function(){return j.file.getAdaptor()}}});Trex.Attacher=Trex.Class.draft({$extend:Trex.Actor,canModified:false,canResized:false,initialize:function(c,h,a){this.editor=c;this.canvas=c.getCanvas();this.entryBox=h;var d=this.config=TrexConfig.getAttacher(this.constructor.__Identity,a);if(a.pvpage&&!!d.usepvpage){this.pvUrl=TrexConfig.getUrl(a.pvpage,{pvname:this.name})}this.boxonly=((d.boxonly!=null)?d.boxonly:false);this.isMultiple=((d.multiple!=null)?d.multiple:false);this.isCheckSize=((d.checksize!=null)?d.checksize:false);
this.wysiwygonly=((d.wysiwygonly!=null)?d.wysiwygonly:true);this.pastescope=d.pastescope;if(this.oninitialized){this.oninitialized(a)}this.attachHandler=this.attachHandler.bind(this)},execute:function(j){if(this.wysiwygonly&&!this.canvas.canHTML()){alert(TXMSG("@attacher.insert.alert"));return}if(this.isCheckSize&&!this.entryBox.checkAvailableCapacity()){alert(TXMSG("@attacher.capacity.alert"));return}if(!this.checkInsertable()){if(this.canModified){var c=new Template(TXMSG("@attacher.can.modify.alert"));alert(c.evaluate({title:this.title}))}else{var c=new Template(TXMSG("@attacher.can.modify.confirm"));if(!confirm(c.evaluate({title:this.title}))){return}}}if(this.clickHandler){this.clickHandler()}else{try{var a=this.config.popPageUrl;if(j){a=a+((a.indexOf("?")>-1)?"&":"?")+j}a=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(a):a);var h=window.open(a,"at"+this.name,this.config.features);h.focus()}catch(d){}}},attachHandler:function(c,a){if(this.checkInsertable()){if(this.isCheckSize&&!this.entryBox.checkInsertableSize(c.filesize)){alert(TXMSG("@attacher.size.alert"));
return}this.execAttach(c,a)}else{this.execReattach(c,a)}},createEntry:function(c,a){return this.createAttachment(c,a)},createAttachment:function(d,c){var a=this.constructor.__Identity;if(c){a=c}return new Trex.Attachment[a.capitalize()](this,d)},checkInsertable:function(){return(this.isMultiple||this.getDatalist().length===0)}});TrexMessage.addMsg({"@embeder.alert":"\uc5d0\ub514\ud130 \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uc0bd\uc785\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."});Trex.EmbedBox=Trex.Class.create({$extend:Trex.EntryBox,initialize:function(c,a){}});Trex.install("editor.getEmbedBox & sidebar.getEmbeder & sidebar.getEmbeddedData",function(h,j,k,d,c){var l=new Trex.EmbedBox(c,d,h);k.entryboxRegistry.embedbox=l;h.getEmbedBox=function(){return l};k.getEmbeddedData=l.getEntries.bind(l);var a=k.embeders={};k.getEmbeder=function(m){if(a[m]!=null){return a[m]}else{if(arguments.length==0){return a}else{return null}}}});Trex.register("new embeders",function(j,l,a,c,d){var n=j.getEmbedBox();var k=a.embeders;
for(var h in Trex.Embeder){var m=Trex.Embeder[h]["__Identity"];if(m){if(!l.tools[m]){}k[m]=new Trex.Embeder[h](j,n,d)}}});Trex.Embeder=Trex.Class.draft({$extend:Trex.Actor,canResized:false,initialize:function(c,h,a){this.editor=c;this.canvas=c.getCanvas();var d=this.config=TrexConfig.getEmbeder(this.constructor.__Identity,a);if(a.pvpage&&!!d.usepvpage){this.pvUrl=TrexConfig.getUrl(a.pvpage,{pvname:this.name})}this.wysiwygonly=((d.wysiwygonly!=null)?d.wysiwygonly:true);this.pastescope=d.pastescope;this.embedHandler=this.embedHandler.bind(this);if(this.oninitialized){this.oninitialized.bind(this)(a)}},execute:function(){if(this.wysiwygonly&&!this.canvas.canHTML()){alert(TXMSG("@embeder.alert"));return}if(this.clickHandler){this.clickHandler()}else{try{var a=this.config.popPageUrl;a=(this.pvUrl?this.pvUrl+((this.pvUrl.indexOf("?")>-1)?"&":"?")+"u="+escape(a):a);var d=window.open(a,"at"+this.name,this.config.features);d.focus()}catch(c){}}},embedHandler:function(a){this.execAttach(a)},createEntry:function(d,c){var a=this.constructor.__Identity;
if(c){a=c}return new Trex.EmbedEntry[a.capitalize()](this,d)},execAttach:function(j,h){var d=this.pastescope;var c=this.getCreatedHtml(j);var a=this.config.parastyle||this.config.defaultstyle||{};this.canvas.execute(function(k){k.moveCaretWith(d);k.pasteContent(c,true,a)})},execReattach:function(c,a){},execReload:function(c,a){},getReloadContent:function(h,d){if(!h.dispElId){return d}var a=this.getCreatedHtml(h);var c=new RegExp('<(?:img|IMG)[^>]*id="?'+h.dispElId+'"?[^>]*/?>',"gm");if(d.search(c)>-1){return d.replace(c,a)}return d}});Trex.EmbedEntry=Trex.Class.create({$extend:Trex.Entry,attrs:{align:"left"},initialize:function(h,k){var d=this;var c=this.actor=h;var j=this.canvas=c.canvas;var a=this.entryBox=c.entryBox;this.setProperties(k)},register:function(){if(this.canvas.canHTML()){var a=this.actor.config.defaultstyle;if(a){this.canvas.pasteContent(this.dispHtml,true,{style:a})}else{this.canvas.pasteContent(this.dispHtml,true)}}else{this.canvas.getProcessor().insertTag("",this.dispText)
}},setProperties:function(d){this.type=this.constructor.__Identity;var c=this.data=d;var a=this.key=c.key;this.dispHtml=this.getDispHtml(c);this.saveHtml=this.dispText=this.getDispText(c);this.regHtml=this.getRegHtml(c);this.regLoad=this.regText=this.getRegText(c)}});TrexMessage.addMsg({"@switcher.wysiwyg":"\uc5d0\ub514\ud130","@switcher.source":"HTML","@switcher.text":"\ud14d\uc2a4\ud2b8"});TrexConfig.addTool("switcher",{wysiwygonly:false,status:true,options:[{label:TXMSG("@switcher.wysiwyg"),title:TXMSG("@switcher.wysiwyg"),data:"html"},{label:TXMSG("@switcher.source"),title:TXMSG("@switcher.source"),data:"source"},{label:TXMSG("@switcher.text"),title:TXMSG("@switcher.text"),data:"text"}]});Trex.Tool.Switcher=Trex.Class.create({$const:{__Identity:"switcher"},$extend:Trex.Tool,oninitialized:function(c){var j=this.canvas;var l={};c.options.each(function(m){l[m.data]={title:m.title}});var h="";var k=c.options[0];var d=function(m){j.changeMode(m)};var a=function(n,m){if(n==m){return}if(h==m){return
}if(!l[m]){return}this.button.setValue(m);this.button.setText(l[m].title);h=m}.bind(this);j.observeJob(Trex.Ev.__CANVAS_MODE_CHANGE,a);j.observeJob(Trex.Ev.__CANVAS_MODE_INITIALIZE,a);this.weave.bind(this)(new Trex.Button.Select(TrexConfig.merge(this.buttonCfg,{selectedValue:k.data,selectedText:k.label})),new Trex.Menu.Select(this.menuCfg),d)}});TrexConfig.addTool("switchertoggle",{wysiwygonly:false,sync:true,status:true,options:[{label:"\uc5d0\ub514\ud130",title:"\uc5d0\ub514\ud130",data:"html"},{label:"HTML",title:"HTML",data:"source"}]});Trex.Tool.SwitcherToggle=Trex.Class.create({$const:{__Identity:"switchertoggle"},$extend:Trex.Tool,oninitialized:function(d){var a=this;var j=this.canvas;var h=function(){switch(j.mode){case"html":j.changeMode("source");break;case"source":j.changeMode("html");break}return false};this.weave.bind(this)(new Trex.Button.Toggle(TrexConfig.merge(this.buttonCfg,{borderClass:"tx-switchtoggle"})),null,h);var c=function(l,k){this.button.setValue(k=="source")}.bind(this);
j.observeJob(Trex.Ev.__CANVAS_MODE_CHANGE,c);j.observeJob(Trex.Ev.__CANVAS_MODE_INITIALIZE,c)}});TrexMessage.addMsg({"@fontfamily.gulim":"\uad74\ub9bc","@fontfamily.batang":"\ubc14\ud0d5","@fontfamily.dotum":"\ub3cb\uc6c0","@fontfamily.gungsuh":"\uad81\uc11c"});TrexConfig.addTool("fontfamily",{sync:true,status:true,useFavorite:true,options:[{label:TXMSG("@fontfamily.gulim")+'<span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:TXMSG("@fontfamily.gulim"),data:"Gulim,\uad74\ub9bc",klass:"tx-gulim"},{label:TXMSG("@fontfamily.batang")+'<span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:TXMSG("@fontfamily.batang"),data:"Batang,\ubc14\ud0d5",klass:"tx-batang"},{label:TXMSG("@fontfamily.dotum")+'<span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:TXMSG("@fontfamily.dotum"),data:"Dotum,\ub3cb\uc6c0",klass:"tx-dotum"},{label:TXMSG("@fontfamily.gungsuh")+' <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:TXMSG("@fontfamily.gungsuh"),data:"Gungsuh,\uad81\uc11c",klass:"tx-gungseo"},{label:'Arial <span class="tx-txt">(abcde)</span>',title:"Arial",data:"Arial",klass:"tx-arial"},{label:'Verdana <span class="tx-txt">(abcde)</span>',title:"Verda..",data:"Verdana",klass:"tx-verdana"}]});
Trex.Tool.FontFamily=Trex.Class.create({$const:{__Identity:"fontfamily"},$extend:Trex.Tool,$mixins:[Trex.I.CookieBaker],oninitialized:function(c){var k=this;var o=this.canvas;var p=o.getStyleConfig().fontFamily;var d=(($tx.msie&&c.webfont&&c.webfont.use)?c.webfont.options:[]);if(!$tx.msie){d.each(function(t){t.expired=true;t.url=TrexConfig.getUrl(t.url)})}var n=(c.options||[]).concat(d);var j={};n.each(function(w){var t=w.data.split(",");for(var u=0;u<t.length;u++){j[t[u].toLowerCase()]=w.title}});n.each(function(t){if(!j[t.title.toLowerCase()]){j[t.title.toLowerCase()]=t.title}});var q=function(t){if(j[t.toLowerCase()]){return j[t.toLowerCase()]}else{t=t.replace("_9","").replace("9","");if(j[t.toLowerCase()]){return j[t.toLowerCase()]}else{return j[p]}}};var h=false;if(c.useFavorite){if(d.length>0){h=true;k.initCookie("txFontFamilyFavorite")}}var m=function(t){o.includeWebfontCss("font-family: "+t);o.execute(function(u){if($tx.safari&&$tx.os_win){u.execCommand("fontname",t)}else{var w=u.inlines(function(x){if(x==="control"){return"img,hr,table"
}return"%text,span,font"});w.each(function(x){$tom.descendants(x,"%inline").each(function(y){$tom.applyAttributes(y,{style:{fontFamily:null},face:null})})});u.apply(w,{style:{fontFamily:t},face:null})}});if(h){k.writeCookie(k.mergeValues(k.readCookie(),t))}};var l=false;var r=function(){l=false;if(!h){return[]}k.menu.elMenu.scrollTop=0;var u=$tom.collect(k.menu.elMenu,"ul.tx-menu-favlist");if(u){$tom.remove(u)}var t=k.extractOptions(n,k.readCookie());var u=k.menu.generateList(t);$tom.insertFirst(k.menu.elMenu,u);$tx.addClassName(u,"tx-menu-favlist");return t};this.weave.bind(this)(new Trex.Button.Select(TrexConfig.merge(this.buttonCfg,{selectedValue:p,selectedText:q(p)})),new Trex.Menu.Select(TrexConfig.merge(this.menuCfg,{options:n})),m,r);if(d.length>0){$tx.addClassName(k.menu.elMenu,"tx-fontfamily-webfont-menu");var a=tx.input({type:"text",className:"tx-dummyfocus"});$tom.append(k.menu.elMenu,a);$tx.observe(k.menu.elMenu,"mousedown",function(t){if(t.offsetX<k.menu.elMenu.clientWidth){return
}a.style.top=t.offsetY.toPx();if(!l){a.focus();a.blur();k.menu.elMenu.focus();l=true}})}o.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var w=o.query(function(A){var z=A.findNode("%inline");return A.queryStyle(z,"fontFamily")});if(w==null){w=o.query(function(A){var z=A.findNode("%inline");return A.queryAttr("face")})}w=w||p;try{var t=w.split(",");var x="";for(var u=0;u<t.length;u++){var x=x||q(t[u])}k.button.setText(x)}catch(y){}})}});TrexConfig.addTool("fontsize",{sync:true,status:true,options:[{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (8pt)",title:"8pt",data:"8pt",klass:"tx-8pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (9pt)",title:"9pt",data:"9pt",klass:"tx-9pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (10pt)",title:"10pt",data:"10pt",klass:"tx-10pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (11pt)",title:"11pt",data:"11pt",klass:"tx-11pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (12pt)",title:"12pt",data:"12pt",klass:"tx-12pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (14pt)",title:"14pt",data:"14pt",klass:"tx-14pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8\ubc14\uc0ac (18pt)",title:"18pt",data:"18pt",klass:"tx-18pt"},{label:"\uac00\ub098\ub2e4\ub77c\ub9c8 (24pt)",title:"24pt",data:"24pt",klass:"tx-24pt"},{label:"\uac00\ub098\ub2e4 (36pt)",title:"36pt",data:"36pt",klass:"tx-36pt"}]});
Trex.Tool.FontSize=Trex.Class.create({$const:{__Identity:"fontsize"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var k=this.canvas;var m=k.getStyleConfig().fontSize;var d=c.options||[];var l={};d.each(function(n){l[n.data]=n.title});[{title:"8pt",data:"1"},{title:"10pt",data:"2"},{title:"12pt",data:"3"},{title:"14pt",data:"4"},{title:"18pt",data:"5"},{title:"24pt",data:"6"},{title:"36pt",data:"7"},{title:"7.5pt",data:"10px"},{title:"8pt",data:"11px"},{title:"9pt",data:"12px"},{title:"10pt",data:"13px"},{title:"11pt",data:"15px"},{title:"12pt",data:"16px"},{title:"14pt",data:"19px"},{title:"18pt",data:"24px"},{title:"24pt",data:"32px"},{title:"36pt",data:"48px"},{title:"8pt",data:"x-small"},{title:"10pt",data:"small"},{title:"12pt",data:"medium"},{title:"14pt",data:"large"},{title:"18pt",data:"x-large"},{title:"24pt",data:"xx-large"},{title:"36pt",data:"-webkit-xxx-large"}].each(function(n){l[n.data]=n.title});var j=function(n){if(l[n]){return l[n]}else{return n}};var h=function(n){k.execute(function(o){if($tx.safari&&$tx.os_win&&!(n=="9pt"||n=="11pt")){o.execCommand("fontsize",({"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"})[n])
}else{var p=o.inlines(function(q){if(q==="control"){return"img,hr,table"}return"%text,span,font"});p.each(function(q){$tom.descendants(q,"span,font").each(function(r){$tom.applyAttributes(r,{style:{fontSize:null},size:null})})});o.apply(p,{style:{fontSize:n},size:null});if($tx.safari&&$tx.os_win){o.addDummyNbsp(p)}}})};this.weave.bind(this)(new Trex.Button.Select(TrexConfig.merge(this.buttonCfg,{selectedValue:m,selectedText:j(m)})),new Trex.Menu.Select(this.menuCfg),h);k.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var n=k.query(function(q){var p=q.findNode("%inline");return q.queryStyle(p,"fontSize")});if(n==null){n=k.query(function(q){var p=q.findNode("%inline");return q.queryAttr("size")})}n=n||m;if(n.indexOf("px")!=-1){n=Math.round(parseFloat(n))+"px"}var o=j(n);a.button.setText(o)})}});TrexConfig.addTool("bold",{wysiwygonly:true,sync:true,status:true});Trex.Tool.Bold=Trex.Class.create({$const:{__Identity:"bold"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var k=this.canvas;
var h=new Trex.Button(this.buttonCfg);var d=function(){if(k.canHTML()){k.execute(function(l){l.execCommand("bold",null)});k.syncProperty()}else{h.setState(true);k.execute(function(l){l.insertTag("<strong>","</strong>")})}};this.weave.bind(this)(h,null,d);var j=false;k.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var l=k.query(function(m){return m.queryCommandState("bold")});if(j==l){return}a.button.setState(l);j=l});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:66},d)}});TrexConfig.addTool("underline",{wysiwygonly:true,sync:true,status:true});Trex.Tool.Underline=Trex.Class.create({$const:{__Identity:"underline"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var k=this.canvas;var h=new Trex.Button(this.buttonCfg);var d=function(){if(k.canHTML()){k.execute(function(l){l.execCommand("underline",null)});k.syncProperty("underline")}else{h.setState(true);k.execute(function(l){l.insertTag("<u>","</u>")})}};this.weave.bind(this)(h,null,d);var j=false;
k.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var l=k.query(function(m){return m.queryCommandState("underline")});if(j==l){return}a.button.setState(l);j=l});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:85},d)}});TrexConfig.addTool("italic",{wysiwygonly:true,sync:true,status:true});Trex.Tool.Italic=Trex.Class.create({$const:{__Identity:"italic"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var k=this.canvas;var h=new Trex.Button(this.buttonCfg);var d=function(){if(k.canHTML()){k.execute(function(l){l.execCommand("italic",null)});k.syncProperty("italic")}else{h.setState(true);k.execute(function(l){l.insertTag("<em>","</em>")})}};this.weave.bind(this)(h,null,d);var j=false;k.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var l=k.query(function(m){return m.queryCommandState("italic")});if(j==l){return}a.button.setState(l);j=l});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:73},d)}});TrexConfig.addTool("strike",{wysiwygonly:true,sync:true,status:true});
Trex.Tool.Strike=Trex.Class.create({$const:{__Identity:"strike"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var k=this.canvas;var h=new Trex.Button(this.buttonCfg);var d=function(){if(k.canHTML()){k.execute(function(l){l.execCommand("strikethrough",null)});k.syncProperty("strikethrough")}else{h.setState(true);k.execute(function(l){l.insertTag("<strike>","</strike>")})}};this.weave.bind(this)(h,null,d);var j=false;k.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var l=k.query(function(m){return m.queryCommandState("strikethrough")});if(j==l){return}a.button.setState(l);j=l});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:68},d)}});TrexConfig.addTool("forecolor",{defaultcolor:"#7c84ef",wysiwygonly:true,sync:false,status:true,useFavorite:true,thumbs:Trex.__CONFIG_COMMON.thumbs,needRevert:true});Trex.Tool.ForeColor=Trex.Class.create({$const:{__Identity:"forecolor"},$extend:Trex.Tool,$mixins:[Trex.I.CookieBaker],oninitialized:function(d){var a=this;
var k=this.canvas;var c=false;if(d.useFavorite){c=true;a.initCookie("txForeColorFavorite")}var m=d.defaultcolor;if(c){if(a.readCookie()){m=a.readCookie()}}var j=k.getStyleConfig("color");var h=function(n){if(k.canHTML()){k.execute(function(o){if(n==null){o.execCommand("forecolor",j)}else{o.execCommand("forecolor",n)}})}else{k.execute(function(o){o.insertTag('<span style="color: '+n+';" >',"</span>")})}if(n){$tx.setStyle(a.button.elButton,{backgroundColor:n})}if(c){a.writeCookie(n)}};this.weave.bind(this)(new Trex.Button.Splits(TrexConfig.merge(this.buttonCfg,{selectedValue:m})),new Trex.Menu.ColorPallete(this.menuCfg),h);try{$tx.setStyle(a.button.elButton,{backgroundColor:m})}catch(l){}}});TrexConfig.addTool("backcolor",{defaultcolor:"#9aa5ea",wysiwygonly:true,sync:false,status:true,useFavorite:true,texts:{options:[{color:"#ff0000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#e545d0",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#000000",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ff5e00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#7c43b1",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#848484",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffbb00",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#4673ff",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#66e8ff",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#ffe400",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#1fafda",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#8cfccb",text:"#000000",label:"\uac00\ub098\ub2e4"},{color:"#a8c40d",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#009999",text:"#ffffff",label:"\uac00\ub098\ub2e4"},{color:"#ffffff",text:"#000000",label:"\uac00\ub098\ub2e4"}]},thumbs:Trex.__CONFIG_COMMON.thumbs,needRevert:true,needTrans:false});
Trex.Tool.BackColor=Trex.Class.create({$const:{__Identity:"backcolor"},$extend:Trex.Tool,$mixins:[Trex.I.CookieBaker],oninitialized:function(a){var h=this;var m=this.canvas;var d=false;if(a.useFavorite){d=true;h.initCookie("txBackColorFavorite")}var n=a.defaultcolor;if(d){if(h.readCookie()){n=h.readCookie()}}var j="transparent";var o=m.getStyleConfig("color");var c=($tx.gecko||$tx.opera?"hilitecolor":"backcolor");var k=function(p){var r=p?p.split("|")[0]:null;var q=(p&&p.indexOf("|")>-1)?p.split("|")[1]:null;m.execute(function(t){if(m.canHTML()){if(r==null){t.execCommand(c,j);t.execCommand("forecolor",o)}else{t.execCommand(c,r);if(q){t.execCommand("forecolor",q)}}}else{m.execute(function(u){u.insertTag('<span style="background-color: '+r+';" >',"</span>")})}});if(r){$tx.setStyle(h.button.elButton,{backgroundColor:r})}if(d){h.writeCookie(p)}};this.weave.bind(this)(new Trex.Button.Splits(Object.extend(this.buttonCfg,{selectedValue:n})),new Trex.Menu.ColorPallete(this.menuCfg),k);try{$tx.setStyle(h.button.elButton,{backgroundColor:n.split("|")[0]})
}catch(l){}}});TrexConfig.addTool("alignleft",{sync:true,status:true,radio:true});Trex.Tool.AlignLeft=Trex.Class.create({$const:{__Identity:"alignleft"},$extend:Trex.Tool,$mixins:[Trex.I.AlignExecution],oninitialized:function(d){var a=this;var c=this.toolbar;var l=this.canvas;var k="left";var h="none";var m="none";a.imageAlignMode=false;var j=function(){l.execute(function(n){if(a.imageAlignMode){a.executeAlignImageMode(n);c.fireJobs(Trex.Ev.__CMD_ALIGN_IMG_LEFT)}else{a.executeAlignTextMode(n);c.fireJobs(Trex.Ev.__CMD_ALIGN_LEFT)}});l.syncProperty()};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,j);l.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){if(a.imageAlignMode){_data=l.query(function(p){var n=a.queryTextAlign(p);if(n==k){var o=a.queryImageFloat(p);o=o||"none";return(o==h)}else{return false}});a.button.setState(_data)}else{_data=l.query(function(p){var n=a.queryControlAlign(p);if(n==null){var o=a.queryTextAlign(p);return(o==k)}else{return(n==k)}});a.button.setState(_data)
}});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:188},j);Trex.Tool.AlignLeft.__ImageModeProps={paragraph:{align:null,style:{textAlign:k}},image:{style:{clear:m,"float":h,marginLeft:"",marginRight:""}}};Trex.Tool.AlignLeft.__TextModeProps={paragraph:{align:null,style:{textAlign:k}},button:{style:{margin:"0"}}}}});TrexConfig.addTool("aligncenter",{sync:true,status:true,radio:true});Trex.Tool.AlignCenter=Trex.Class.create({$const:{__Identity:"aligncenter"},$extend:Trex.Tool,$mixins:[Trex.I.AlignExecution],oninitialized:function(d){var a=this;var c=this.toolbar;var l=this.canvas;var k="center";var h="none";var m="none";a.imageAlignMode=false;var j=function(){l.execute(function(n){if(a.imageAlignMode){a.executeAlignImageMode(n);c.fireJobs(Trex.Ev.__CMD_ALIGN_IMG_CENTER)}else{a.executeAlignTextMode(n);c.fireJobs(Trex.Ev.__CMD_ALIGN_CENTER)}});l.syncProperty()};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,j);l.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){if(a.imageAlignMode){_data=l.query(function(p){var n=a.queryTextAlign(p);
if(n==k){var o=a.queryImageFloat(p);o=o||"none";return(o==h)}else{return false}});a.button.setState(_data)}else{_data=l.query(function(p){var n=a.queryControlAlign(p);if(n==null){var o=a.queryTextAlign(p);return(o==k)}else{return(n==k)}});a.button.setState(_data)}});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:190},j);Trex.Tool.AlignCenter.__ImageModeProps={paragraph:{align:null,style:{textAlign:k}},image:{style:{clear:m,"float":h,marginLeft:"",marginRight:""}}};Trex.Tool.AlignCenter.__TextModeProps={paragraph:{align:null,style:{textAlign:k}},button:{style:{margin:"0 auto"}}}}});TrexConfig.addTool("alignright",{sync:true,status:true,radio:true});Trex.Tool.AlignRight=Trex.Class.create({$const:{__Identity:"alignright"},$extend:Trex.Tool,$mixins:[Trex.I.AlignExecution],oninitialized:function(h){var k=this;var o=this.toolbar;var n=this.canvas;var d="right";var m="left";var a="both";var j="8px";var c="";k.imageAlignMode=false;var l=function(){n.execute(function(p){if(k.imageAlignMode){k.executeAlignImageMode(p);
o.fireJobs(Trex.Ev.__CMD_ALIGN_IMG_FLOAT_LEFT)}else{k.executeAlignTextMode(p);o.fireJobs(Trex.Ev.__CMD_ALIGN_RIGHT)}});n.syncProperty()};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,l);n.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){if(k.imageAlignMode){var p=n.query(function(r){var q=k.queryImageFloat(r);return(q==m)});k.button.setState(p)}else{var p=n.query(function(t){var q=k.queryControlAlign(t);if(q==null){var r=k.queryTextAlign(t)||"left";return(r==d)}else{return(q==d)}});k.button.setState(p)}});this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:191},l);Trex.Tool.AlignRight.__ImageModeProps={image:{style:{clear:a,"float":m,marginLeft:c,marginRight:j}}};Trex.Tool.AlignRight.__TextModeProps={paragraph:{align:null,style:{textAlign:d}},button:{style:{margin:"0 0 0 auto"}}}}});TrexConfig.addTool("alignfull",{sync:true,status:true,radio:true});Trex.Tool.AlignFull=Trex.Class.create({$const:{__Identity:"alignfull"},$extend:Trex.Tool,$mixins:[Trex.I.AlignExecution],oninitialized:function(h){var k=this;
var o=this.toolbar;var n=this.canvas;var d="justify";var m="right";var a="both";var j="8px";var c="";k.imageAlignMode=false;var l=function(){n.execute(function(p){if(k.imageAlignMode){k.executeAlignImageMode(p);o.fireJobs(Trex.Ev.__CMD_ALIGN_IMG_FLOAT_RIGHT)}else{k.executeAlignTextMode(p);o.fireJobs(Trex.Ev.__CMD_ALIGN_FULL)}});n.syncProperty()};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,l);n.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){if(k.imageAlignMode){var p=n.query(function(r){var q=k.queryImageFloat(r);return(q==m)});k.button.setState(p)}else{var p=n.query(function(t){var q=k.queryControlAlign(t);if(q==null){var r=k.queryTextAlign(t)||"left";return(r==d)}else{return(q==d)}});k.button.setState(p)}});Trex.Tool.AlignFull.__ImageModeProps={image:{style:{clear:a,"float":m,marginLeft:j,marginRight:c}}};Trex.Tool.AlignFull.__TextModeProps={paragraph:{align:null,style:{textAlign:d}},button:{style:{margin:"0"}}}}});TrexConfig.addTool("lineheight",{sync:false,status:true,options:[{label:"50%",title:"50%",data:"0.5"},{label:"80%",title:"80%",data:"0.8"},{label:"100%",title:"100%",data:"1.0"},{label:"120%",title:"120%",data:"1.2"},{label:"150%",title:"150%",data:"1.5"},{label:"180%",title:"180%",data:"1.8"},{label:"200%",title:"200%",data:"2.0"}]});
Trex.Tool.LineHeight=Trex.Class.create({$const:{__Identity:"lineheight"},$extend:Trex.Tool,oninitialized:function(c){var m=this.toolbar;var l=this.canvas;var j=l.getStyleConfig().lineHeight;var k=(c.options||[]);var d={};k.each(function(o){d[o.data]=o.title});var h=function(o){l.execute(function(p){var q=p.blocks(function(r){return"%paragraph"});p.apply(q,{style:{lineHeight:o}})})};this.weave.bind(this)(new Trex.Button.Select(TrexConfig.merge(this.buttonCfg,{selectedValue:j})),new Trex.Menu.Select(this.menuCfg),h);var a=j;var n=function(){var o=l.query(function(q){var p=q.findNode("%paragraph");return q.queryStyle(p,"lineHeight")});o=o||j;if(a==o){return}this.button.setText(o);a=o}.bind(this)}});TrexMessage.addMsg({"@styledlist.subtitle1":"\ucde8\uc18c","@styledlist.subtitle2":"\ub3d9\uadf8\ub77c\ubbf8","@styledlist.subtitle3":"\ub124\ubaa8","@styledlist.subtitle4":"\uc22b\uc790","@styledlist.subtitle5":"\ub85c\ub9c8\uc22b\uc790","@styledlist.subtitle6":"\uc54c\ud30c\ubcb3"});TrexConfig.addTool("styledlist",{sync:false,status:true,options:[{label:TXMSG("@styledlist.subtitle1"),title:"cancel",type:"cancel",data:"cancel",klass:"tx-styledlist-0"},{label:TXMSG("@styledlist.subtitle2"),title:"disc",type:"ul",data:"disc",klass:"tx-styledlist-1"},{label:TXMSG("@styledlist.subtitle3"),title:"square",type:"ul",data:"square",klass:"tx-styledlist-2"},{label:TXMSG("@styledlist.subtitle4"),title:"decimal",type:"ol",data:"decimal",klass:"tx-styledlist-3"},{label:TXMSG("@styledlist.subtitle5"),title:"upper-roman",type:"ol",data:"upper-roman",klass:"tx-styledlist-4"},{label:TXMSG("@styledlist.subtitle6"),title:"upper-alpha",type:"ol",data:"upper-alpha",klass:"tx-styledlist-5"}]});
Trex.Tool.StyledList=Trex.Class.create({$const:{__Identity:"styledlist"},$extend:Trex.Tool,$mixins:[Trex.I.ListExecution],oninitialized:function(d){var j=this;var n=this.toolbar;var m=this.canvas;var l="decimal";var h={};d.options.each(function(p){h[p.data]={type:p.type,klass:p.klass}});var a=function(p){if(h[p]){return h[p].klass}else{return h[l].klass}};var k=function(r){if(!h[r]){return}var q=h[r].type;var p=h[r].klass;var t={style:{listStyleType:r}};m.execute(function(u){if(q=="cancel"){j.executeOffList(u)}else{j.executeToList(u,q,t)}})};var o=function(){var p=m.query(function(r){return !!r.findNode("%listhead")});var q=$tom.collect(j.menu.elMenu,"li");if(p){$tx.show(q)}else{$tx.hide(q)}};this.weave.bind(this)(new Trex.Button.StyledList(this.buttonCfg),new Trex.Menu.Select(this.menuCfg),k,o);var c=l;m.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(){var p=m.query(function(t){var r=t.findNode("%listhead");return t.queryStyle(r,"listStyleType")});p=p||l;if(c==p){return}var q=a(p);
j.button.setText(q);c=p});this.bindKeyboard({ctrlKey:true,altKey:true,shiftKey:false,keyCode:85},k.bind(this,"disc"));this.bindKeyboard({ctrlKey:true,altKey:true,shiftKey:false,keyCode:79},k.bind(this,"decimal"))}});Trex.Button.StyledList=Trex.Class.create({$extend:Trex.Button.Select,setText:function(a){this.elIcon.className="tx-icon "+a}});TrexConfig.addTool("indent",{sync:false,status:false});Trex.Tool.Indent=Trex.Class.create({$const:{__Identity:"indent"},$extend:Trex.Tool,$mixins:[Trex.I.IndentExecution],oninitialized:function(c){var a=this;var j=this.canvas;var d=function(){j.execute(function(k){a.executeIndentParagraph(k)})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,d);var h=function(){j.execute(function(k){a.executeIndentByKeyEvent(k)})};this.bindKeyboard({ctrlKey:false,altKey:false,shiftKey:false,keyCode:9},h)}});TrexConfig.addTool("outdent",{sync:false,status:false});Trex.Tool.Outdent=Trex.Class.create({$const:{__Identity:"outdent"},$extend:Trex.Tool,$mixins:[Trex.I.IndentExecution],oninitialized:function(c){var a=this;
var j=this.canvas;var d=function(){j.execute(function(k){a.executeOutdentParagraph(k)})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,d);var h=function(){j.execute(function(k){a.executeOutdentByKeyEvent(k)})};this.bindKeyboard({ctrlKey:false,altKey:false,shiftKey:true,keyCode:9},h)}});TrexConfig.addTool("link",{wysiwygonly:true,sync:false,status:true});TrexMessage.addMsg({"@insertlink.cancel.image":"#iconpath/btn_cancel.gif?rv=1.0.1","@insertlink.confirm.image":"#iconpath/btn_confirm.gif?rv=1.0.1","@insertlink.invalid.url":"'HTTP://'\ub85c \uc2dc\uc791\ud558\ub294 URL\uc744 \uc785\ub825\ud574\uc8fc\uc2ed\uc2dc\uc624.","@insertlink.link.alt":"[#{title}]\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.","@insertlink.remove.image":"#iconpath/btn_remove.gif?rv=1.0.1","@insertlink.title":"\uc120\ud0dd\ub41c \ubd80\ubd84\uc5d0 \uac78\ub9b4 URL\uc8fc\uc18c\ub97c \ub123\uc5b4\uc8fc\uc138\uc694.","@insertlink.onclick.target":"\ud074\ub9ad \uc2dc","@insertlink.target.blank":"\uc0c8 \ucc3d","@insertlink.target.self":"\ud604\uc7ac\ucc3d","@insertlink.class.name":"tx-link"});
Trex.Tool.Link=Trex.Class.create({$const:{__Identity:"link"},$extend:Trex.Tool,oninitialized:function(j){var a=this;var h=this.toolbar;var m=this.canvas;var k=function(n){if(m.canHTML()){if(n){m.execute(function(o){var r={href:n.link,target:n.target?n.target:"_blank",className:n.className};if(o.findNode("a")){var q=o.findNode("a");$tom.applyAttributes(q,r)}else{if(o.hasControl()){var p=o.controls(function(){return"img"});$tom.wrap(o.create("a",r),p)}else{if(o.isCollapsed()){var q=o.create("a",r);q.innerHTML=n.link;o.pasteNode(q,false)}else{var p=o.inlines(function(){return"%text,img,a,%inline"});p.each(function(t){if($tom.hasChildren(t,true)){if($tom.kindOf(t,"a")){$tom.applyAttributes(t,r)}else{if($tom.kindOf(t,"img")){$tom.wrap(o.create("a",r),[t])}else{var w=$tom.getStyleText(t);var x=$tom.collectAll(t,"a");x.each(function(y){$tom.moveChildToParent(y);$tom.remove(y)});var u=o.create("a",r);$tom.setStyleText(u,w);$tom.replace(t,u)}}}else{$tom.remove(t)}})}}}})}else{m.execute(function(p){var o=p.findNode("a");
if(o){p.unwrap(o)}})}}else{m.execute(function(o){o.insertTag('<a href="'+n.link+'" target="'+n.target+'" >',"</a>")})}};var d="";var c=function(n){if(m.canHTML()){return m.query(function(r){var q=r.findNode("a");if(q){var p=$tom.getAttribute(q,"href");var o=$tom.getAttribute(q,"target");if(p!=null&&p.length>0){return{exist:true,value:p,target:o}}}return{exist:false,value:d}})}else{return{exist:false,value:d}}};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.Link(this.menuCfg),k,c);var l=function(n){a.button.onMouseDown(n)};this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:75},l)}});Trex.MarkupTemplate.add("menu.insertlink",['<div class="tx-menu-inner">',"    <dl>","        <dt>","            @insertlink.title","        </dt>","        <dd>",'            <input type="text" class="tx-text-input"/>',"        </dd>",'        <dd class="tx-rp">','            <span class="tx-text tx-first">@insertlink.onclick.target</span>','            <span><input type="radio" name="tx-insertlink-win" value="_blank"/><span class="tx-text">@insertlink.target.blank</span></span>','            <span><input type="radio" name="tx-insertlink-win" value="_top"/><span class="tx-text">@insertlink.target.self</span></span>',"        </dd>",'        <dd class="tx-hr">',"            <hr/>","        </dd>","        <dd>",'            <img width="32" height="21" src="@insertlink.confirm.image"/>','            <img width="32" height="21" src="@insertlink.cancel.image"/>','            <img width="51" height="21" src="@insertlink.remove.image" style="display: none;"/>',"        </dd>","    </dl>","</div>"].join(""));
Trex.Menu.Link=Trex.Class.create({$extend:Trex.Menu,ongenerated:function(){var l=this.elMenu;Trex.MarkupTemplate.get("menu.insertlink").evaluateToDom({},l);var a=$tom.collectAll(l,".tx-rp input");var c=this.newInput=a[0];$tx.observe(c,"click",function(n){c.checked="checked";j.checked=""});var j=this.currInput=a[1];$tx.observe(j,"click",function(n){j.checked="checked";c.checked=""});var h=function(n){if(!n){return _FALSE}n=n.trim();if(n.length==0){return _FALSE}if(!/http[s]?:\/\//.test(n)){return"http://"+n}else{return n}};var k=this.elInput=$tom.collect(l,"input.tx-text-input");$tx.observe(k,"keydown",function(o){if(o.keyCode==13){var p=h(k.value);if(!p){alert(TXMSG("@insertlink.invalid.url"));$tx.stop(o);return}var n=c.checked?c.value:j.value;this.onSelect(o,{link:p,target:n,className:TXMSG("@insertlink.class.name")});$tx.stop(o)}}.bindAsEventListener(this));var m=$tom.collectAll(l,"img");$tx.observe(m[0],"click",function(o){var p=h(k.value);if(!p){alert(TXMSG("@insertlink.invalid.url"));
$tx.stop(o);return}var n=c.checked?c.value:j.value;this.onSelect(o,{link:p,target:n,className:TXMSG("@insertlink.class.name")});$tx.stop(o)}.bind(this));$tx.observe(m[1],"click",function(){this.onCancel()}.bindAsEventListener(this));var d=$tx(m[2]);$tx.observe(d,"click",function(n){this.onSelect(n,null)}.bindAsEventListener(this));this.toggleRemoveBtn=function(n){d.style.display=((n)?"":"none")}},onregenerated:function(){var c=this.elInput;var a=this.initHandler();c.value=a.value;if(a.target=="_self"||a.target=="_top"){this.currInput.checked="checked";this.newInput.checked=""}else{this.newInput.checked="checked";this.currInput.checked=""}this.toggleRemoveBtn(a.exist);c.focus();if($tx.msie){setTimeout(function(){try{c.focus();var d=document.selection.createRange();d.move("character",c.value.length);d.select()}catch(h){}},100)}}});TrexConfig.addTool("richtextbox",{sync:false,status:true,rows:4,cols:6,borderwidth:1,bordercolor:"#cbcbcb",bgcolor:"#ffffff",padding:"10px",styles:[{klass:"",image:"http://i1.daumcdn.net/icon/editor/textbox/thum_line01.gif?rv=1.0.1",data:"solid"},{klass:"",image:"http://i1.daumcdn.net/icon/editor/textbox/thum_line02.gif?rv=1.0.1",data:"double"},{klass:"",image:"http://i1.daumcdn.net/icon/editor/textbox/thum_line03.gif?rv=1.0.1",data:"dashed"},{klass:"",image:"http://i1.daumcdn.net/icon/editor/textbox/thum_line04.gif?rv=1.0.1",data:"none"}],options:Trex.__CONFIG_COMMON.textbox.options,thumbs:Trex.__CONFIG_COMMON.thumbs});
TrexMessage.addMsg({"@richtextbox.add":"\ub354\ud558\uae30","@richtextbox.sub":"\ube7c\uae30","@richtextbox.alert":"1 \uc774\uc0c1 20 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@richtextbox.bg.color":"\ubc30\uacbd\uc0c9","@richtextbox.border.color":"\uc120 \uc0c9","@richtextbox.border.style":"\uc120 \uc2a4\ud0c0\uc77c","@richtextbox.border.width":"\uc120 \uad75\uae30"});Trex.Tool.RichTextBox=Trex.Class.create({$const:{__Identity:"richtextbox"},$extend:Trex.Tool,oninitialized:function(d){var j=this.canvas;var c=this.toolbar;var a=this;var h=function(){var l=a.menu;var k={borderStyle:l.elPreview.style.borderStyle,borderWidth:l.elPreview.style.borderWidth,borderColor:l.elPreview.style.borderColor,backgroundColor:l.elPreview.style.backgroundColor,padding:l.padding};if(j.canHTML()){j.execute(function(n){var o=n.blocks(function(p){return"%wrapper,%paragraph"});var m=n.wrap(o,"div",{className:"txc-textbox",style:k});c.fireJobs("cmd.textbox.added",m)})}else{j.execute(function(m){m.insertTag('<div class="txc-textbox">',"</div>")
})}};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.RichTextbox(this.menuCfg),h)}});Trex.MarkupTemplate.add("richtextbox.colorpallete",['<dd class="#{wrapClass}">','	<div class="tx-color-box">','		<a href="javascript:;" class="tx-color-bg-thumb" style="background-color:#{color}"></a>',"	</div>",'	<a href="javascript:;" class="tx-color-arrow-down"></a>','	<div class="tx-colorpallete" unselectable="on" style="display:none;z-index:15000;"></div>',"</dd>"].join(""));Trex.Menu.RichTextbox=Trex.Class.create({$extend:Trex.Menu,ongenerated:function(C){var o=this;var k={};C.options.each(function(F){k[F.data]=F.style});this.borderWidth=C.borderWidth||1;this.borderColor=C.borderColor||"#cbcbcb";this.bgColor=C.bgColor||"#ffffff";this.padding=C.padding;var B=this.generateBorderStyle.bind(this);var r=this.generateBorderWidth.bind(this);var w=this.generateBorderColor.bind(this);var n=this.generateBgColor.bind(this);var m=this.elMenu;var A=$tom.collect(m,"div.tx-menu-header");var h=$tom.collect(A,"div.tx-menu-preview-area");
var a=this.elPreview=$tom.collect(h,"div.tx-menu-preview");var E=this.elSwitch=$tom.collect(A,"div.tx-menu-switch");var x=$tom.collect(E,"div.tx-menu-simple");var z=$tom.collect(E,"div.tx-menu-advanced");var d=$tom.collect(m,"div.tx-menu-inner");var p=$tom.collect(m,"div.tx-menu-footer");var t=$tom.collect(p,"img.tx-menu-confirm");var c=$tom.collect(p,"img.tx-menu-cancel");(function u(){var H=o.simplePalette=tx.div({className:"tx-menu-list"});d.appendChild(H);var F=C.rows;var G=C.cols;H.innerHTML=Trex.HtmlCreator.createTableMarkup(F,G,C.options);$tx.observe(H,"click",function(I){var J=$tx.element(I);TrexEvent.fire(J,{span:function(M){var L;if(J.firstChild&&J.firstChild.nodeType==1&&J.firstChild.tagName.toLowerCase()=="img"){L=J.firstChild.title}else{L=J.innerText}var K=k[L];l(K)}});$tx.stop(I)})})();(function j(){var F=o.advancedPalette=tx.div({className:"tx-advanced-list"});d.appendChild(F);F.appendChild(tx.dl({style:{height:"24px"}},tx.dt(TXMSG("@richtextbox.border.style")),B()));F.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.width")),r()));
F.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.border.color")),w()));F.appendChild(tx.dl(tx.dt(TXMSG("@richtextbox.bg.color")),n()))})();var y=function(){o.borderWidthInput.value=parseInt(o.elPreview.style.borderWidth);o.borderColorInput.style.backgroundColor=o.elPreview.style.borderTopColor;o.bgColorInput.style.backgroundColor=o.elPreview.style.backgroundColor};var l=function(F){o.elPreview.style.border=F.border;o.elPreview.style.backgroundColor=F.backgroundColor};var D=function(F){if(F=="simple"){$tx.addClassName(x,"tx-selected");$tx.show(o.simplePalette);$tx.removeClassName(z,"tx-selected");$tx.hide(o.advancedPalette)}else{if(F=="advanced"){$tx.removeClassName(x,"tx-selected");$tx.hide(o.simplePalette);$tx.addClassName(z,"tx-selected");$tx.show(o.advancedPalette);y()}}};(function q(){$tx.observe(x,"click",D.bind(o,"simple"));$tx.observe(z,"click",D.bind(o,"advanced"));$tx.observe(t,"click",o.onSelect.bind(o));$tx.observe(c,"click",function(){o.onCancel()})})();D("simple");l(k["txc-textbox13"])
},generateBorderStyle:function(){var c=this;var a=tx.dd({className:"tx-border-area"});$tx.observe(a,"click",function(d){var h=$tx.element(d);TrexEvent.fire(h,{img:function(j){var k=j.getAttribute("data");c.elPreview.style.borderStyle=k;if(k=="double"&&c.borderWidthInput.value.toNumber()<3){c.elPreview.style.borderWidth="3px";c.borderWidthInput.value="3"}}});$tx.stop(d)});a.innerHTML=Trex.HtmlCreator.createTableMarkup(1,4,this.config.styles);return a},generateBorderWidth:function(){var k=this;var c=tx.dd({className:"tx-border-area"});var j=this.borderWidthInput=tx.input({type:"text",value:this.borderWidth});c.appendChild(j);var d=function(l,m){if(l>20){alert(TXMSG("@richtextbox.alert"));j.value=20}else{if(l<1){alert(TXMSG("@richtextbox.alert"));j.value=1}else{k.elPreview.style.borderWidth=l+"px";j.value=l}}};$tx.observe(j,"blur",function(l){d(j.value.toNumber(),l)});$tx.observe(j,"keydown",function(l){if(l.keyCode==$tx.KEY_RETURN){$tx.stop(l)}});var h=tx.a({href:"javascript:;",className:"btn_add"},TXMSG("@richtextbox.add"));
c.appendChild(h);$tx.observe(h,"click",function(l){d(j.value.toNumber()+1);$tx.stop(l)});var a=tx.a({href:"javascript:;",className:"btn_sub"},TXMSG("@richtextbox.sub"));c.appendChild(a);$tx.observe(a,"click",function(l){d(j.value.toNumber()-1);$tx.stop(l)});return c},generateBorderColor:function(){var m=this;var h=Trex.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.borderColor,wrapClass:"tx-color-wrap"});var j=$tom.collect(h,"div.tx-colorpallete");var a=function(n){m.elPreview.style.borderColor=l.style.backgroundColor=m.borderColor=n};var d=null;var k=function(){if(d==null){d=m.createColorPallete(j,a);d.show()}else{if(!$tx.visible(j)){d.show()}else{d.hide()}}};this.externalBorderColorToggler=function(){if($tx.visible(j)){d.hide()}};var l=this.borderColorInput=$tom.collect(h,".tx-color-box a");$tx.observe(l,"click",function(n){m.externalBgColorToggler();k();$tx.stop(n)});var c=$tom.collect(h,"a.tx-color-arrow-down");$tx.observe(c,"click",function(n){m.externalBgColorToggler();
k();$tx.stop(n)});return h},createColorPallete:function(a,d){var c=new Trex.Menu.ColorPallete({el:a,thumbs:this.config.thumbs});c.setCommand(d);return c},generateBgColor:function(){var m=this;var d=Trex.MarkupTemplate.get("richtextbox.colorpallete").evaluateAsDom({color:this.bgColor});var h=$tom.collect(d,"div.tx-colorpallete");var k=function(n){m.elPreview.style.backgroundColor=l.style.backgroundColor=m.bgColor=n};var c=null;var j=function(){if(c==null){c=m.createColorPallete(h,k);c.show()}else{if(!$tx.visible(h)){c.show()}else{c.hide()}}};this.externalBgColorToggler=function(){if($tx.visible(h)){c.hide()}};var l=this.bgColorInput=$tom.collect(d,".tx-color-box a");$tx.observe(l,"click",function(n){m.externalBorderColorToggler();j();$tx.stop(n)});var a=$tom.collect(d,"a.tx-color-arrow-down");$tx.observe(a,"click",function(n){m.externalBorderColorToggler();j();$tx.stop(n)});return d}});TrexConfig.addTool("quote",{sync:false,status:true,rows:2,cols:3,options:[{type:"image",data:"tx-quote1",image:"#iconpath/citation01.gif?rv=1.0.1"},{type:"image",data:"tx-quote2",image:"#iconpath/citation02.gif?rv=1.0.1"},{type:"image",data:"tx-quote3",image:"#iconpath/citation03.gif?rv=1.0.1"},{type:"image",data:"tx-quote4",image:"#iconpath/citation04.gif?rv=1.0.1"},{type:"image",data:"tx-quote5",image:"#iconpath/citation05.gif?rv=1.0.1"},{type:"cancel",data:"tx-quote6",image:"#iconpath/citation06.gif?rv=1.0.1"}]},function(a){var c=TrexConfig.getTool("quote",a);
c.options.each(function(d){d.image=TrexConfig.getIconPath(d.image,"quote")})});Trex.Tool.Quote=Trex.Class.create({$const:{__Identity:"quote"},$extend:Trex.Tool,oninitialized:function(c){var a=this;var j=this.canvas;var k={};c.options.each(function(l){k[l.data]={type:l.type}});var d=function(n){if(!k[n]){return}var m=k[n].type;var l="blockquote";var o={className:n};if(j.canHTML()){j.execute(function(q){var p=q.findNode(l);if(p){if(m=="cancel"){q.unwrap(p)}else{q.apply(p,o)}}else{if(m!="cancel"){var r=q.blocks(function(t){return"%wrapper,%paragraph"});r=r.select(function(t){if($tom.kindOf(t,"%innergroup")){q.wrap($tom.children(t),l,o);return false}else{return true}});q.wrap(r,l,o)}}})}else{j.execute(function(p){p.insertTag("<blockquote>","</blockquote>")})}};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.List(this.menuCfg),d);var h=function(l){a.button.onMouseDown(l)};this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:81},h)}});TrexConfig.addTool("table",{sync:false,status:true},function(c){var a=TrexConfig.get("canvas",c).styles.backgroundColor;
if(a!="transparent"){TrexConfig.getTool("table",c).bgcolor=a}});TrexMessage.addMsg({"@table.alert":"1 \uc774\uc0c1 99 \uc774\ud558\uc758 \uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."});Trex.Tool.Table=Trex.Class.create({$const:{__Identity:"table",__DEFAULT_TABLE_PROPERTY:{cellSpacing:0,cellPadding:1,border:0,style:{border:"none",borderCollapse:"collapse"}},__DEFAULT_TABLE_PROPERTY_STR:'cellspacing="0" cellpadding="0" border="0"',__DEFAULT_TABLE_STYLE:"border:none;border-collapse:collapse",__DEFAULT_BORDER_STYLE:"1px solid #000",__DEFAULT_TABLE_CLASS:"txc-table"},$extend:Trex.Tool,oninitialized:function(c){var a=this;this.tableSize={row:0,col:0};var h=this.canvas;this.config=c;var d=this.handler=function(k){var j=a.makeEmptyTable(k.row,k.col);h.execute(function(m){var l=m.pasteContent(j,true);m.bookmarkInto(l)})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.Table(this.menuCfg),d)},makeEmptyTable:function(p,a){var o=[];var m=this._createDefaultTableWidth();
o.push('<table class="'+Trex.Tool.Table.__DEFAULT_TABLE_CLASS+'" width="'+m+'" ');o.push(Trex.Tool.Table.__DEFAULT_TABLE_PROPERTY_STR);o.push(' style="');o.push(Trex.Tool.Table.__DEFAULT_TABLE_STYLE);o.push(";font-family:");o.push(this.editor.canvas.getStyle("fontFamily"));o.push(";font-size:");o.push(this.editor.canvas.getStyle("fontSize"));o.push('"><tbody>');var n=Trex.Tool.Table.__DEFAULT_BORDER_STYLE;var l=parseInt(100/a)+"%";var c=["border-bottom:",n,";border-right:",n,";"].join("");for(var k=0;k<p;k++){o.push("<tr>");for(var h=0;h<a;h++){var d=[c];o.push('<td style="width:');o.push(l);o.push(";");o.push(c);if(k==0){o.push("border-top:",n,";")}if(h==0){o.push("border-left:",n,";")}o.push(';">&nbsp;</td>\n')}o.push("</tr>\n")}o.push("</tbody></table>");return o.join("")},_createDefaultTableWidth:function(){var a=this.config.tableWidth;if(!a){var c=this.canvas.getSizeConfig().contentPadding||8;var a=(this.canvas.getSizeConfig().contentWidth||600)-c*2-3}return a}});Trex.Tool.Table.TemplateWizard=Trex.Class.create({initialize:function(){this.templateList=(typeof getTableTemplateList=="function")?getTableTemplateList():[{klass:"ex1",common:{backgroundColor:"transparent",borderTop:"none",borderLeft:"none",borderRight:"1px solid #d9d9d9",borderBottom:"1px solid #d9d9d9"},firstRow:{borderTop:"1px solid #000"},firstCol:{borderLeft:"1px solid #000"},lastCol:{borderRight:"1px solid #000"},lastRow:{borderBottom:"1px solid #000"},evenRow:{},oddRow:{}}];
this.currentTemplate=null},applyStyle:function(k,h){if(isNaN(h)){return}var d=new Trex.Tool.Table.TableCellMatrixer(k);var l=d.getTdMatrix();this.currentTemplate=this.templateList[h];for(var c=0;c<l.length;c++){for(var a=0;a<l[c].length;a++){this.setCellStyle(l[c][a],{isEvenRow:(c%2)==1,isFirstRow:c==0,isLastRow:c==l.length-1,isFirstCol:a==0,isLastCol:(a==l[c].length-1)})}}},setCellStyle:function(c,a){var d=this.currentTemplate;var h=Object.extend({},d.common);Object.extend(h,(a.isEvenRow)?d.evenRow:d.oddRow);Object.extend(h,(a.isFirstRow)?d.firstRow:(a.isLastRow)?d.lastRow:{});Object.extend(h,(a.isLastCol)?d.lastCol:{});Object.extend(h,(a.isFirstCol)?d.firstCol:{});txlib.setStyle(c,h)},getTemplateList:function(){return this.templateList}});Trex.Tool.Table.TableCellMatrixer=Trex.Class.create({initialize:function(h){this.rowSize=this.initRowSize(h);this.colSize=this.initColSize(h);var d=$tom.first(h,"tbody")||h;this.tdMatrix=this.createTdMatrix(d);for(var c=0;c<this.tdMatrix.length;c++){for(var a=0;
a<this.tdMatrix[c].length;a++){var k=this.tdMatrix[c][a];if(k.cols>1){k.cols--;this.tdMatrix[c].splice(a+1,0,k)}}}for(var c=0;c<this.tdMatrix.length;c++){for(var a=0;a<this.tdMatrix[c].length;a++){var k=this.tdMatrix[c][a];if(k.rows>1){k.rows--;this.tdMatrix[c+1].splice(a,0,k)}}}},createTdMatrix:function(c){var h=[];var j=$tom.children(c,"tr");for(var d=0,a=j.length;d<a;d++){h.push(this.createTdArray(j[d]))}return h},createTdArray:function(j){var h=[];var d=$tom.children(j,"td");for(var c=0,a=d.length;c<a;c++){h.push(this.decorateSingleTd(d[c]))}return h},decorateSingleTd:function(d){var c=parseInt(d.getAttribute("colSpan")||1);var a=parseInt(d.getAttribute("rowSpan")||1);d.cols=c;d.rows=(a-1)*c+1;return d},initRowSize:function(a){return a.rows.length},initColSize:function(c){var a=0;var d=$tom.children($tom.collect(c,"tr"),"td");d.each(function(j){var h=parseInt(j.getAttribute("colSpan")||1);a+=h});return a},getRowSize:function(){return this.rowSize},getColSize:function(){return this.colSize
},getTdMatrix:function(){return this.tdMatrix}});TrexMessage.addMsg({"@table.title.insert":"\ud45c\uc0bd\uc785 &nbsp;","@table.title.setDirectly":"\ud45c \uc9c1\uc811\uc124\uc815","@table.title.row":"\uc5f4 \uac1c\uc218","@table.title.col":"\ud589 \uac1c\uc218"});Trex.MarkupTemplate.add("menu.table.direct",["<div>@table.title.setDirectly</div>",'<div class="tx-table-input-area">','<div class="tx-field tx-col-field">@table.title.row<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.row+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.row-</a></div>','<div class="tx-field tx-row-field">@table.title.col<input type="text" value="1"><a class="tx-btn tx-btn-add" href="javascript:;">@table.title.col+</a><a class="tx-btn tx-btn-sub" href="javascript:;">@table.title.col-</a></div>',"</div>"].join(""));Trex.Menu.Table=Trex.Class.create({$const:{MAX_ROW:99,MAX_COL:99},$extend:Trex.Menu,ongenerated:function(a){this.rowSize=1;this.colSize=1;this.elInnerPreview=$tom.collect(this.elMenu,"div.tx-menu-inner .tx-menu-preview");
this.dynamicSizer=this.generateDynamicSizer(this.elInnerPreview);this.elInnerRowCol=$tom.collect(this.elMenu,"div.tx-menu-inner .tx-menu-rowcol");this.generateTextSizer(this.elInnerRowCol);this.elButtonArea=$tom.collect(this.elMenu,"div.tx-menu-inner .tx-menu-enter");this.generateButtonArea(this.elButtonArea)},onregenerated:function(){this.showDynamicSizer()},showDynamicSizer:function(){this.dynamicSizer.clear();$tx.show(this.elInnerPreview);$tx.hide(this.elInnerRowCol);$tx.hide(this.elButtonArea)},showTextSizer:function(){$tx.hide(this.elInnerPreview);$tx.show(this.elInnerRowCol);$tx.show(this.elButtonArea)},generateDynamicSizer:function(h){var c=this;var l=tx.span();var j=tx.div({className:"tx-dynamic-sizer-display"},TXMSG("@table.title.insert"),l);h.appendChild(j);var k=new Trex.DynamicSizer({el:h,clickHandler:this.onSelect.bind(this),moveHandler:function(n,m){l.innerHTML=n+"x"+m}});var a=tx.a({href:"javascript:;"},TXMSG("@table.title.setDirectly"));$tx.observe(a,"click",function(m){c.showTextSizer();
$tx.stop(m)});var d=tx.div({className:"tx-more-button"});d.appendChild(a);h.appendChild(d);return k},generateTextSizer:function(c){var a=this;Trex.MarkupTemplate.get("menu.table.direct").evaluateToDom({},c);var h={calculate:function(m,k,l){m=parseInt(m);if(m+l>k||m+l<1){alert(TXMSG("@table.alert"));return m}else{return m+l}},getValidValue:function(m,l,k){if(m<0||m>k){alert(TXMSG("@table.alert"));return l}else{return m}}};var d=$tom.collect(c,"div.tx-col-field input");$tx.observe(d,"blur",function(){d.value=a.colSize=h.getValidValue(d.value,a.colSize,Trex.Menu.Table.MAX_COL)});$tx.observe($tom.collect(c,"div.tx-col-field a.tx-btn-add"),"click",function(){d.value=a.colSize=h.calculate(a.colSize,Trex.Menu.Table.MAX_COL,1);return false});$tx.observe($tom.collect(c,"div.tx-col-field a.tx-btn-sub"),"click",function(){d.value=a.colSize=h.calculate(a.colSize,Trex.Menu.Table.MAX_COL,-1);return false});var j=$tom.collect(c,"div.tx-row-field input");$tx.observe(j,"blur",function(){j.value=a.rowSize=h.getValidValue(j.value,a.rowSize,Trex.Menu.Table.MAX_ROW)
});$tx.observe($tom.collect(c,"div.tx-row-field a.tx-btn-add"),"click",function(){j.value=a.rowSize=h.calculate(a.rowSize,Trex.Menu.Table.MAX_ROW,1);return false});$tx.observe($tom.collect(c,"div.tx-row-field a.tx-btn-sub"),"click",function(){j.value=a.rowSize=h.calculate(a.rowSize,Trex.Menu.Table.MAX_ROW,-1);return false})},generateButtonArea:function(d){var a=this;var h=tx.div();var j=tx.a({href:"javascript:;",className:"tx-btn-confirm"},"\ud655\uc778");var c=tx.a({href:"javascript:;",className:"tx-btn-cancel"},"\ucde8\uc18c");$tx.observe(j,"click",function(k){a.onSelect(k,{row:a.rowSize,col:a.colSize})});$tx.observe(c,"click",function(){this.onCancel();return false}.bindAsEventListener(this));h.appendChild(j);h.appendChild(c);d.appendChild(h)}});TrexMessage.addMsg({"@emoticon.subtitle.person":"\uc0ac\ub78c","@emoticon.subtitle.animal":"\ub3d9\uc2dd\ubb3c","@emoticon.subtitle.thing":"\uc0ac\ubb3c","@emoticon.subtitle.etc":"\uae30\ud0c0"});TrexConfig.addTool("emoticon",{sync:false,status:true,rows:5,cols:7,matrices:[{title:TXMSG("@emoticon.subtitle.person"),klass:"tx-menu-matrix-per",options:["#decopath/per_01.gif?rv=1.0.1","#decopath/per_02.gif?rv=1.0.1","#decopath/per_03.gif?rv=1.0.1","#decopath/per_04.gif?rv=1.0.1","#decopath/per_05.gif?rv=1.0.1","#decopath/per_06.gif?rv=1.0.1","#decopath/per_07.gif?rv=1.0.1","#decopath/per_08.gif?rv=1.0.1","#decopath/per_09.gif?rv=1.0.1","#decopath/per_10.gif?rv=1.0.1","#decopath/per_11.gif?rv=1.0.1","#decopath/per_12.gif?rv=1.0.1","#decopath/per_13.gif?rv=1.0.1","#decopath/per_14.gif?rv=1.0.1","#decopath/per_15.gif?rv=1.0.1","#decopath/per_16.gif?rv=1.0.1","#decopath/per_17.gif?rv=1.0.1","#decopath/per_18.gif?rv=1.0.1","#decopath/per_19.gif?rv=1.0.1","#decopath/per_20.gif?rv=1.0.1","#decopath/per_21.gif?rv=1.0.1","#decopath/per_22.gif?rv=1.0.1","#decopath/per_23.gif?rv=1.0.1","#decopath/per_24.gif?rv=1.0.1","#decopath/per_25.gif?rv=1.0.1","#decopath/per_26.gif?rv=1.0.1","#decopath/per_27.gif?rv=1.0.1","#decopath/per_28.gif?rv=1.0.1","#decopath/per_29.gif?rv=1.0.1"]},{title:TXMSG("@emoticon.subtitle.animal"),klass:"tx-menu-matrix-ani",options:["#decopath/ani_01.gif?rv=1.0.1","#decopath/ani_02.gif?rv=1.0.1","#decopath/ani_03.gif?rv=1.0.1","#decopath/ani_04.gif?rv=1.0.1","#decopath/ani_05.gif?rv=1.0.1","#decopath/ani_06.gif?rv=1.0.1","#decopath/ani_07.gif?rv=1.0.1","#decopath/ani_08.gif?rv=1.0.1","#decopath/ani_09.gif?rv=1.0.1","#decopath/ani_10.gif?rv=1.0.1","#decopath/ani_11.gif?rv=1.0.1","#decopath/ani_12.gif?rv=1.0.1","#decopath/ani_13.gif?rv=1.0.1","#decopath/ani_14.gif?rv=1.0.1","#decopath/ani_15.gif?rv=1.0.1","#decopath/ani_16.gif?rv=1.0.1","#decopath/ani_17.gif?rv=1.0.1","#decopath/ani_18.gif?rv=1.0.1","#decopath/ani_19.gif?rv=1.0.1","#decopath/ani_20.gif?rv=1.0.1","#decopath/ani_21.gif?rv=1.0.1","#decopath/ani_22.gif?rv=1.0.1","#decopath/ani_23.gif?rv=1.0.1","#decopath/ani_24.gif?rv=1.0.1","#decopath/ani_25.gif?rv=1.0.1","#decopath/ani_26.gif?rv=1.0.1","#decopath/ani_27.gif?rv=1.0.1","#decopath/ani_28.gif?rv=1.0.1"]},{title:TXMSG("@emoticon.subtitle.thing"),klass:"tx-menu-matrix-things",defaultshow:true,options:["#decopath/things_01.gif?rv=1.0.1","#decopath/things_02.gif?rv=1.0.1","#decopath/things_03.gif?rv=1.0.1","#decopath/things_04.gif?rv=1.0.1","#decopath/things_05.gif?rv=1.0.1","#decopath/things_06.gif?rv=1.0.1","#decopath/things_07.gif?rv=1.0.1","#decopath/things_08.gif?rv=1.0.1","#decopath/things_09.gif?rv=1.0.1","#decopath/things_10.gif?rv=1.0.1","#decopath/things_11.gif?rv=1.0.1","#decopath/things_12.gif?rv=1.0.1","#decopath/things_13.gif?rv=1.0.1","#decopath/things_14.gif?rv=1.0.1","#decopath/things_15.gif?rv=1.0.1","#decopath/things_16.gif?rv=1.0.1","#decopath/things_17.gif?rv=1.0.1","#decopath/things_18.gif?rv=1.0.1","#decopath/things_19.gif?rv=1.0.1","#decopath/things_20.gif?rv=1.0.1","#decopath/things_21.gif?rv=1.0.1","#decopath/things_22.gif?rv=1.0.1","#decopath/things_23.gif?rv=1.0.1","#decopath/things_24.gif?rv=1.0.1","#decopath/things_25.gif?rv=1.0.1","#decopath/things_26.gif?rv=1.0.1","#decopath/things_27.gif?rv=1.0.1","#decopath/things_28.gif?rv=1.0.1","#decopath/things_29.gif?rv=1.0.1","#decopath/things_30.gif?rv=1.0.1","#decopath/things_31.gif?rv=1.0.1","#decopath/things_32.gif?rv=1.0.1","#decopath/things_33.gif?rv=1.0.1","#decopath/things_34.gif?rv=1.0.1","#decopath/things_35.gif?rv=1.0.1"]},{title:TXMSG("@emoticon.subtitle.etc"),klass:"tx-menu-matrix-etc",options:["#decopath/etc_01.gif?rv=1.0.1","#decopath/etc_02.gif?rv=1.0.1","#decopath/etc_03.gif?rv=1.0.1","#decopath/etc_04.gif?rv=1.0.1","#decopath/etc_05.gif?rv=1.0.1","#decopath/etc_06.gif?rv=1.0.1","#decopath/etc_07.gif?rv=1.0.1","#decopath/etc_08.gif?rv=1.0.1","#decopath/etc_09.gif?rv=1.0.1","#decopath/etc_10.gif?rv=1.0.1","#decopath/etc_11.gif?rv=1.0.1","#decopath/etc_12.gif?rv=1.0.1","#decopath/etc_13.gif?rv=1.0.1","#decopath/etc_14.gif?rv=1.0.1","#decopath/etc_15.gif?rv=1.0.1","#decopath/etc_16.gif?rv=1.0.1","#decopath/etc_17.gif?rv=1.0.1","#decopath/etc_18.gif?rv=1.0.1","#decopath/etc_19.gif?rv=1.0.1","#decopath/etc_20.gif?rv=1.0.1","#decopath/etc_21.gif?rv=1.0.1","#decopath/etc_22.gif?rv=1.0.1","#decopath/etc_23.gif?rv=1.0.1","#decopath/etc_24.gif?rv=1.0.1","#decopath/etc_25.gif?rv=1.0.1","#decopath/etc_26.gif?rv=1.0.1","#decopath/etc_27.gif?rv=1.0.1","#decopath/etc_28.gif?rv=1.0.1","#decopath/etc_29.gif?rv=1.0.1"]}]},function(a){var c=TrexConfig.getTool("emoticon",a);
c.matrices.each(function(h){for(var j=0,d=h.options.length;j<d;j++){h.options[j]=TrexConfig.getDecoPath(h.options[j],"emoticon")}})});Trex.Tool.Emoticon=Trex.Class.create({$const:{__Identity:"emoticon"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var c=this.handler=function(h){if(!h||h.trim().length==0){return}d.execute(function(k){var j=k.win.img({src:h,border:"0",className:"txc-emo"});k.pasteNode(j,false)})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.Matrix(this.menuCfg),c)}});TrexConfig.addTool("redo",{sync:false,status:false});Trex.Tool.ReDo=Trex.Class.create({$const:{__Identity:"redo"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var c=function(){d.getProcessor().blur();d.focus();setTimeout(function(){d.fireJobs("canvas.panel.redo")},0)};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,c);this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:89},function(){d.fireJobs("canvas.panel.redo");d.syncProperty("redo")
})}});TrexConfig.addTool("undo",{sync:false,status:false});Trex.Tool.UnDo=Trex.Class.create({$const:{__Identity:"undo"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var c=function(){d.getProcessor().blur();d.focus();setTimeout(function(){d.fireJobs("canvas.panel.undo")},20)};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,c);this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:90},function(){d.fireJobs("canvas.panel.undo");d.syncProperty("undo")})}});TrexConfig.addTool("horizontalrule",{wysiwygonly:true,sync:false,status:true,top:null,left:null,options:[{data:"tx-hr-border-1",image:"#iconpath/line01.gif?rv=1.0.2",html:'<hr style="border: black 0px none; border-top: black 1px solid; height: 1px"/>'},{data:"tx-hr-border-2",image:"#iconpath/line02.gif?rv=1.0.2",html:'<hr style="border: black 0px none; border-top: black 1px solid; border-bottom: black 3px solid; height: 7px"/>'},{data:"tx-hr-border-3",image:"#iconpath/line04.gif?rv=1.0.2",html:'<hr style="border: black 0px none; border-top: black 1px dotted; height: 1px"/>'},{data:"tx-hr-image-1",image:"#iconpath/line03.gif?rv=1.0.2",html:'<div style="background: url(#decopath/line03.gif?rv=1.0.1) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0px none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-2",image:"#iconpath/line05.gif?rv=1.0.2",html:'<div style="background: url(#decopath/line05.gif?rv=1.0.1) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0px none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-3",image:"#iconpath/line06.gif?rv=1.0.2",html:'<div style="background: url(#decopath/line06.gif?rv=1.0.1) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0px none; left: -9999px; position: relative; top: -9999px"></div>'},{data:"tx-hr-image-4",image:"#iconpath/line07.gif?rv=1.0.2",html:'<div style="background: url(#decopath/line08.gif?rv=1.0.1) repeat-x scroll left;  width: 99%; height: 15px"><hr style="border: black 0px none; left: -9999px; position: relative; top: -9999px"></div>'}]},function(a){var c=TrexConfig.getTool("horizontalrule",a);
c.options.each(function(d){d.image=TrexConfig.getIconPath(d.image,"horizontalrule");if(d.html){d.html=TrexConfig.getDecoPath(d.html,"horizontalrule")}})});Trex.Tool.HorizontalRule=Trex.Class.create({$const:{__Identity:"horizontalrule"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var h={};a.options.each(function(j){h[j.data]={html:j.html}});var c=function(k){if(!h[k]){return}var j=h[k];if(d.canHTML()){d.execute(function(l){l.pasteContent(j.html,true)})}else{d.execute(function(l){l.insertTag("",j.html)})}};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.List(this.menuCfg),c)}});TrexMessage.addMsg({"@specialchar.subtitle1":"\uc77c\ubc18\uae30\ud638","@specialchar.subtitle2":"\uc218\ud559\ubd80\ud638, \ud1b5\ud654\ub2e8\uc704","@specialchar.subtitle3":"\uc6d0 \uae30\ud638, \uad04\ud638","@specialchar.subtitle4":"\uc77c\ubcf8\uc5b4","@specialchar.subtitle5":"\ub85c\ub9c8\uc790, \uadf8\ub9ac\uc2a4"});TrexConfig.addTool("specialchar",{sync:false,status:true,rows:9,cols:20,top:null,left:null,matrices:[{title:TXMSG("@specialchar.subtitle1"),options:["\uff03","\uff06","\uff0a","\uff20","\xa7","\u203b","\u2606","\u2605","\u25cb","\u25cf","\u25ce","\u25c7","\u25c6","\u25a1","\u25a0","\u25b3","\u25b2","\u25bd","\u25bc","\u2192","\u2190","\u2191","\u2193","\u2194","\u3013","\u25c1","\u25c0","\u25b7","\u25b6","\u2664","\u2660","\u2661","\u2665","\u2667","\u2663","\u2299","\u25c8","\u25a3","\u25d0","\u25d1","\u2592","\u25a4","\u25a5","\u25a8","\u25a7","\u25a6","\u25a9","\u2668","\u260f","\u260e","\u261c","\u261e","\xb6","\u2020","\u2021","\u2195","\u2197","\u2199","\u2196","\u2198","\u266d","\u2669","\u266a","\u266c","\u327f","\u321c","\u2116","\u33c7","\u2122","\u33c2","\u33d8","\u2121","\xae","\xaa","\xba","\uff02","\uff08","\uff09","\uff3b","\uff3d","\uff5b","\uff5d","\u2018","\u2019","\u201c","\u201d","\u3014","\u3015","\u3008","\u3009","\u300a","\u300b","\u300c","\u300d","\u300e","\u300f","\u3010","\u3011","\uff01","\uff07","\uff0c","\uff0e","\uff0f","\uff1a","\uff1b","\uff1f","\uff3e","\uff3f","\uff40","\uff5c","\uffe3","\u3001","\u3002","\xb7","\u2025","\u2026","\xa8","\u3003","\u2015","\u2225","\uff3c","\u223c","\xb4","\uff5e","\u02c7","\u02d8","\u02dd","\u02da","\u02d9","\xb8","\u02db","\xa1","\xbf","\u02d0"]},{title:TXMSG("@specialchar.subtitle2"),options:["\uff0b","\uff0d","\uff1c","\uff1d","\uff1e","\xb1","\xd7","\xf7","\u2260","\u2264","\u2265","\u221e","\u2234","\u2642","\u2640","\u2220","\u22a5","\u2312","\u2202","\u2207","\u2261","\u2252","\u226a","\u226b","\u221a","\u223d","\u221d","\u2235","\u222b","\u222c","\u2208","\u220b","\u2286","\u2287","\u2282","\u2283","\u222a","\u2229","\u2227","\u2228","\uffe2","\u21d2","\u21d4","\u2200","\u2203","\u222e","\u2211","\u220f","\uff04","\uff05","\uffe6","\uff26","\u2032","\u2033","\u2103","\u212b","\uffe0","\uffe1","\uffe5","\xa4","\u2109","\u2030","?","\u3395","\u3396","\u3397","\u2113","\u3398","\u33c4","\u33a3","\u33a4","\u33a5","\u33a5","\u33a6","\u3399","\u339a","\u339b","\u339c","\u339d","\u339e","\u339f","\u33a0","\u33a1","\u33a2","\u33ca","\u338d","\u338e","\u338f","\u33cf","\u3388","\u3389","\u33c8","\u33a7","\u33a8","\u33b0","\u33b1","\u33b2","\u33b3","\u33b4","\u33b5","\u33b6","\u33b7","\u33b8","\u33b9","\u3380","\u3381","\u3382","\u3383","\u3384","\u33ba","\u33bb","\u33bc","\u33bd","\u33be","\u33bf","\u3390","\u3391","\u3392","\u3393","\u3394","\u2126","\u33c0","\u33c1","\u338a","\u338b","\u338c","\u33d6","\u33c5","\u33ad","\u33ae","\u33af","\u33db","\u33a9","\u33aa","\u33ab","\u33ac","\u33dd","\u33d0","\u33d3","\u33c3","\u33c9","\u33dc","\u33c6"]},{title:TXMSG("@specialchar.subtitle3"),options:["\u3260","\u3261","\u3262","\u3263","\u3264","\u3265","\u3266","\u3267","\u3268","\u3269","\u326a","\u326b","\u326c","\u326d","\u326e","\u326f","\u3270","\u3271","\u3272","\u3273","\u3274","\u3275","\u3276","\u3277","\u3278","\u3279","\u327a","\u327b","\u3200","\u3201","\u3202","\u3203","\u3204","\u3205","\u3206","\u3207","\u3208","\u3209","\u320a","\u320b","\u320c","\u320d","\u320e","\u320f","\u3210","\u3211","\u3212","\u3213","\u3214","\u3215","\u3216","\u3217","\u3218","\u3219","\u321a","\u321b","\u24d0","\u24d1","\u24d2","\u24d3","\u24d4","\u24d5","\u24d6","\u24d7","\u24d8","\u24d9","\u24da","\u24db","\u24dc","\u24dd","\u24de","\u24df","\u24e0","\u24e1","\u24e2","\u24e3","\u24e4","\u24e5","\u24e6","\u24e7","\u24e8","\u24e9","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u249c","\u249d","\u249e","\u249f","\u24a0","\u24a1","\u24a2","\u24a3","\u24a4","\u24a5","\u24a6","\u24a7","\u24a8","\u24a9","\u24aa","\u24ab","\u24ac","\u24ad","\u24ae","\u24af","\u24b0","\u24b1","\u24b2","\u24b3","\u24b4","\u24b5","\u2474","\u2475","\u2476","\u2477","\u2478","\u2479","\u247a","\u247b","\u247c","\u247d","\u247e","\u247f","\u2480","\u2481","\u2482"]},{title:TXMSG("@specialchar.subtitle4"),options:["\u3041","\u3042","\u3043","\u3044","\u3045","\u3046","\u3047","\u3048","\u3049","\u304a","\u304b","\u304c","\u304d","\u304e","\u304f","\u3050","\u3051","\u3049","\u3053","\u3054","\u3055","\u3056","\u3057","\u3058","\u3059","\u305a","\u305b","\u305c","\u305d","\u305e","\u305f","\u3060","\u3061","\u3062","\u3063","\u3064","\u3065","\u3066","\u3067","\u3068","\u3069","\u306a","\u306b","\u306c","\u306d","\u306e","\u306f","\u3070","\u3071","\u3072","\u3073","\u3074","\u3075","\u3076","\u3077","\u3078","\u3079","\u307a","\u307b","\u307c","\u307d","\u307e","\u307f","\u3080","\u3081","\u3082","\u3083","\u3084","\u3085","\u3086","\u3087","\u3088","\u3089","\u308a","\u308b","\u308c","\u308d","\u308e","\u308f","\u3090","\u3091","\u3092","\u3093","\u30a1","\u30a2","\u30a3","\u30a4","\u30a5","\u30a6","\u30a7","\u30a8","\u30a9","\u30aa","\u30ab","\u30ac","\u30ad","\u30ae","\u30af","\u30b0","\u30b1","\u30b2","\u30b3","\u30b4","\u30b5","\u30b6","\u30b7","\u30b8","\u30b9","\u30ba","\u30bb","\u30bc","\u30bd","\u30be","\u30bf","\u30c0","\u30c1","\u30c2","\u30c3","\u30c4","\u30c5","\u30c6","\u30c7","\u30c8","\u30c9","\u30ca","\u30cb","\u30cc","\u30cd","\u30ce","\u30cf","\u30d0","\u30d1","\u30d2","\u30d3","\u30d4","\u30d5","\u30d6","\u30d7","\u30d8","\u30d9","\u30da","\u30db","\u30dc","\u30dd","\u30de","\u30df","\u30e0","\u30e1","\u30e2","\u30e3","\u30e4","\u30e5","\u30e6","\u30e7","\u30e8","\u30e9","\u30ea","\u30eb","\u30ec","\u30ed","\u30ee","\u30ef","\u30f0","\u30f1","\u30f2","\u30f3","\u30f4","\u30f5","\u30f6"]},{title:TXMSG("@specialchar.subtitle5"),options:["\uff10","\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19","\u2170","\u2171","\u2172","\u2173","\u2174","\u2175","\u2176","\u2177","\u2178","\u2179","\u2160","\u2161","\u2162","\u2163","\u2164","\u2165","\u2166","\u2167","\u2168","\u2169","\u0391","\u0392","\u0393","\u0394","\u0395","\u0396","\u0397","\u0398","\u0399","\u039a","\u039b","\u039c","\u039d","\u039e","\u039f","\u03a0","\u03a1","\u03a3","\u03a4","\u03a5","\u03a6","\u03a7","\u03a8","\u03a9","\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"]}]});
TrexMessage.addMsg({"@specialchar.cancel.image":"#iconpath/btn_l_cancel.gif?rv=1.0.1","@specialchar.confirm.image":"#iconpath/btn_l_confirm.gif?rv=1.0.1","@specialchar.title":"\uc120\ud0dd\ud55c \uae30\ud638"});Trex.Tool.SpecialChar=Trex.Class.create({$const:{__Identity:"specialchar"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var c=function(h){if(!h){return}d.execute(function(j){j.pasteContent(h,false)})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.SpecialChar(this.menuCfg),c)}});Trex.MarkupTemplate.add("menu.specialchar.input",['<dl class="tx-menu-matrix-input">',"	<dt><span>@specialchar.title</span></dt>",'	<dd><input type="text" value=""/></dd>','	<dd><img class="tx-menu-btn-confirm" src="@specialchar.confirm.image" align="absmiddle"/></dd>','	<dd><img class="tx-menu-btn-cancel" src="@specialchar.cancel.image" align="absmiddle"/></dd>',"</dl>"].join(""));Trex.Menu.SpecialChar=Trex.Class.create({$extend:Trex.Menu.Matrix,ongenerated:function(c){var h=this.elMenu;
var a=Trex.MarkupTemplate.get("menu.specialchar.input").evaluateAsDom({});$tom.append($tom.collect(h,"div.tx-menu-inner"),a);var d=this.elInput=$tom.collect(a,"input");var j=$tom.collectAll(a,"img");if(j.length==2){$tx.observe(j[0],"click",function(){this._command(this.elInput.value);this.hide()}.bind(this));$tx.observe(j[1],"click",function(){this.onCancel()}.bind(this))}$tx.observe(d,"keydown",function(k){if(k.keyCode==13){$tx.stop(k);this._command(this.elInput.value);this.hide()}}.bind(this))},onregenerated:function(a){this.elInput.value="";this.elInput.focus()},onSelect:function(c){var h=this.elInput;var a=$tx.findElement(c,"span");if(a.tagName&&a.tagName.toLowerCase()!="span"){return}h.value+=(!a.innerText||a.innerText=="&nbsp;"||a.innerText.trim()=="")?"":a.innerText;$tx.stop(c);h.focus();if($tx.msie){try{var d=document.selection.createRange();d.move("character",h.value.length);d.select()}catch(j){}}}});TrexConfig.addTool("dictionary",{url:"http://engdic.daum.net/dicen/small_view_top.do",sync:false,status:false});
Trex.Tool.Dictionary=Trex.Class.create({$const:{__Identity:"dictionary"},$extend:Trex.Tool,oninitialized:function(a){var d=this.canvas;var c=function(){var k=d.query(function(l){return encodeURI(l.getText())});var h=(k.length>0)?"http://engdic.daum.net/dicen/small_search.do":a.url;var j=window.open(h+"?q="+k,"dicWin","width=410,height=550,scrollbars=yes");j.focus()};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,c)}});(function(){TrexConfig.addTool("background",{wysiwygonly:true,sync:false,status:true,thumbs:Trex.__CONFIG_COMMON.thumbs});var a;Trex.Tool.Background=Trex.Class.create({$const:{__Identity:"background"},$extend:Trex.Tool,oninitialized:function(c){var h=this.canvas;var d=function(k){h.fireJobs("canvas.apply.backgroundcolor",k);h.history.saveHistory({backgroundColor:k,backgroundImage:h.getStyle("backgroundImage")},function(l){j(l)});h.addStyle({backgroundColor:k,backgroundImage:""});a=k;h.getConfig().hasUserBgcolor=true};var j=function(k){h.addStyle({backgroundColor:k.backgroundColor});
if(k.backgroundImage){h.addStyle({backgroundImage:k.backgroundImage})}a=k.backgroundColor};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.ColorPallete(this.menuCfg),d)}});Trex.install("canvas.getBgColor & canvas.setBgColor & editor.getContentWithBg",function(j,k,l,h,d){a=d.canvas.articleBackgroundColor;h.getBgColor=function(){var m=a||h.getPanel("html").getStyle("backgroundColor");if(m){return Trex.Color.getHexColor(m)}else{return""}};h.setBgColor=function(m){h.getPanel("html").addStyle({backgroundColor:m||"transparent"})};j.getContentWithBg=function(){var m=h.getBgColor().toLowerCase();if(m=="transparent"){return j.getContent()}else{return['<table class="txc-wrapper" border="0" cellspacing="0" cellpadding="0"><tr>','<td bgcolor="',m,'">',j.getContent(),"</td>","</tr></table>"].join("")}};var c=h.initContent.bind(h);h.initContent=function(n){if(n.search(/<table[^>]*txc-wrapper[^>]*>/i)>-1){var m;n=n.replace(/<table[^>]*txc-wrapper[^>]*><tr><td([^>]*)>([\s\S]*?)<\/td><\/tr><\/table>/i,function(q,o,p){m=o.replace(/\sbgcolor="([#\w]*)"/,"$1");
return p});h.setBgColor(m)}c(n)};h.history.initHistory({backgroundColor:d.canvas.styles.backgroundColor,backgroundImage:d.canvas.styles.backgroundImage});h.reserveJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var m=h.config.articleBackgroundColor;if(m&&m!="transparent"){h.addStyle({backgroundColor:m,backgroundImage:""})}});h.observeJob("canvas.apply.letterpaper",function(m){if(m.id){h.getPanel("html").addStyle({backgroundColor:"transparent"})}})})})();TrexConfig.addTool("advanced",{sync:false,status:true,opened:false});Trex.Tool.Advanced=Trex.Class.create({$const:{__Identity:"advanced"},$extend:Trex.Tool,oninitialized:function(c){var k=this.canvas;var a=this.toolbar;var l=a.el;var j=$tom.collect(l.parentNode,"div.tx-toolbar-advanced");if(!j){return}a.observeJob("toolbar.advanced.fold",function(){$tx.hide(j);$tx.removeClassName(l,"tx-toolbar-basic-open")});a.observeJob("toolbar.advanced.spread",function(){$tx.show(j);$tx.addClassName(l,"tx-toolbar-basic-open")});var h=false;var d=function(){if(h){a.fireJobs("toolbar.advanced.fold")
}else{a.fireJobs("toolbar.advanced.spread")}h=!h};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,d);if(c.opened==true){j.show();$tx.addClassName(l,"tx-toolbar-basic-open");h=true}}});Trex.module("add drop-down menu button if extra buttons exist.",function(d,h,j,c,a){c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var k=$tom.collectAll(d.getWrapper(),"li.tx-list-extra div.tx-extra");if(k.length==0){return}k.each(function(m){var l=$tom.next(m,".tx-extra-menu");if(!l){return}h.makeWidget(new Trex.Button({el:m,sync:false,status:true}),new Trex.Menu({el:l}),function(){})})})});TrexConfig.addTool("fullscreen",{wysiwygonly:false,status:false,switched:false,minHeight:200,minWidth:766});TrexMessage.addMsg({"@fullscreen.attach.close.btn":"\ud30c\uc77c\ucca8\ubd80\ubc15\uc2a4","@fullscreen.noti.btn":"\uc77c\ubc18 \uae00\uc4f0\uae30\ub85c","@fullscreen.noti.span":"\ub113\uac8c\uc4f0\uae30 \ubc84\ud2bc\uc744 \ub2e4\uc2dc \ub204\ub974\uc2dc\uba74 \ucc98\uc74c \uae00\uc4f0\uae30 \ucc3d \ud06c\uae30\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4."});
Trex.Tool.FullScreen=Trex.Class.create({$const:{__Identity:"fullscreen"},$extend:Trex.Tool,oninitialized:function(d){var l=this.editor;var k=l.getCanvas();var a=l.getAttachBox();var j=l.getWrapper();if(!j){return}var c;var h=function(){if(!c){c=new Trex.FullScreen(l,d)}c.execute()};if(d.switched){if(!c){c=new Trex.FullScreen(l,d)}c.showFullScreen()}this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,h);this.bindKeyboard({ctrlKey:true,altKey:false,shiftKey:false,keyCode:77},h);l.observeKey({ctrlKey:true,altKey:false,shiftKey:false,keyCode:77},h)}});Trex.MarkupTemplate.add("fullscreen.notice",'<div class="tx-fullscreen-notice"><span>@fullscreen.noti.span</span><a href="#">@fullscreen.noti.btn</a></div>');Trex.MarkupTemplate.add("fullscreen.linebox",'<div class="tx-fullscreen-line">		<div class="tx-fullscreen-line-division">			<div class="tx-fullscreen-line-left">&nbsp;</div>			<div class="tx-fullscreen-line-right">&nbsp;</div>		</div>		<div class="tx-fullscreen-line-box">			<div class="tx-fullscreen-line-left">&nbsp;</div>			<div class="tx-fullscreen-line-right">&nbsp;</div>			<a href="#">@fullscreen.attach.close.btn</a>		</div>	</div>');
Trex.FullScreen=Trex.Class.create({initialize:function(c,a){if(!c){return}this.isInit=false;this.isFullScreen=false;this.wrapper=c.getWrapper();this.canvas=c.getCanvas();this.toolbar=c.getToolbar();this.attachBox=c.getAttachBox();this.elSavedHiddens=[];this.minHeight=a.minHeight;this.minWidth=a.minWidth;this.useAttachBox=(this.attachBox.elBox!==undefined);this.isAttachBoxDisplay=false;this.resizeHandler=this.resizeContainer.bind(this);this.toolbar.observeJob("toolbar.advanced.fold",function(){if(this.isFullScreen){this.resizeContainer()}}.bind(this));this.toolbar.observeJob("toolbar.advanced.spread",function(){if(this.isFullScreen){this.resizeContainer()}}.bind(this));if(typeof(showAttachBox)!="undefined"){this.showAttachBoxAtServiceForSave=showAttachBox}if(typeof(hideAttachBox)!="undefined"){this.hideAttachBoxAtServiceForSave=hideAttachBox}},execute:function(){if(this.isFullScreen){this.showNormalScreen()}else{this.showFullScreen()}},onAttachClick:function(){this.attachClickHandler(!this.isAttachBoxDisplay);
this.resizeContainer()},attachClickHandler:function(a){if(a){this.showAttachBox()}else{this.hideAttachBox()}},showNormalScreen:function(){if(!this.isFullScreen){return}this._showScrollbar();this.showNormalScreenAtService();var j=this.wrapper;if(!j){return}j.style.width="";$tx.removeClassName(j,"tx-editor-fullscreen");this.elSavedHiddens.each(function(l){l.style.visibility="visible"});if(parent){try{$tx.stopObserving(parent,"resize",this.resizeHandler)}catch(k){}}else{$tx.stopObserving(window,"resize",this.resizeHandler)}this.canvas.setCanvasSize({height:this.panelNormalHeight.toPx()});if(this.useAttachBox){this.attachClickHandler(this.attachBox.checkDisplay())}this.canvas.fireJobs("canvas.normalscreen.change");if(this.showAttachBoxAtServiceForSave){window.showAttachBox=this.showAttachBoxAtServiceForSave}if(this.hideAttachBoxAtServiceForSave){window.hideAttachBox=this.hideAttachBoxAtServiceForSave}var d=this.relativeParents.length;for(var c=0;c<d;c++){var a=this.relativeParents.pop();var h=this.relativeValues.pop();
$tx.setStyle(a,{position:h})}this.isFullScreen=false;if(!$tx.msie){setTimeout(function(){var l=$tom.collect($tx("tx_fullscreen"),"a");l.focus()}.bind(this),500)}},showFullScreen:function(){if(this.isFullScreen){return}if(!this.isInit){this.generate()}this._hideScrollbar();this.showFullScreenAtService();if(this.showAttachBoxAtServiceForSave){window.showAttachBox=function(){this.showAttachBox();this.resizeContainer()}.bind(this)}if(this.hideAttachBoxAtServiceForSave){window.hideAttachBox=function(){this.hideAttachBox();this.resizeContainer()}.bind(this)}var h=this.wrapper;if(!h){return}$tx.addClassName(h,"tx-editor-fullscreen");var j=[];["select","embed","object"].each(function(k){var l=$A(document.getElementsByTagName(k));l.each(function(m){m.style.visibility="hidden";j.push(m)})});this.elSavedHiddens=j;if(this.useAttachBox){this.attachClickHandler(this.attachBox.checkDisplay())}var d=this.canvas.getCurrentPanel();this.panelNormalHeight=d.getPosition().height;if(c){$tx.observe(c,"resize",this.resizeHandler)
}else{$tx.observe(window,"resize",this.resizeHandler)}this.canvas.fireJobs("canvas.fullscreen.change");window.wrapper=h;this.relativeParents=[];this.relativeValues=[];var c=h.offsetParent;while(c&&c.tagName&&c.tagName.toUpperCase()!="HTML"&&c.tagName.toUpperCase()!="BODY"){var a=$tx.getStyle(c,"position");if(a.toLowerCase()=="relative"){this.relativeParents.push(c);this.relativeValues.push(a);$tx.setStyle(c,{position:"static"})}c=c.offsetParent}this.isFullScreen=true;this.resizeContainer()},_hideScrollbar:function(){if(document.documentElement.scrollTop||document.documentElement.scrollLeft){document.documentElement.scrollTop=0;document.documentElement.scrollLeft=0}if(document.body.scrollTop||document.body.scrollLeft){document.body.scrollTop=0;document.body.scrollLeft=0}document.documentElement.style.overflow="hidden";document.body.style.overflow="hidden"},_showScrollbar:function(){document.documentElement.style.overflow="";document.body.style.overflow=""},generate:function(){if(this.isInit){return
}var j=this.wrapper;if(!j){return}var c=Trex.MarkupTemplate.get("fullscreen.notice").evaluateAsDom({});$tom.insertFirst(j,c);var m=$tom.collect(c,"a");$tx.observe(m,"click",function(){if(this.isFullScreen){this.showNormalScreen()}else{this.showFullScreen()}}.bind(this));var d=this.canvas.elContainer;var a=Trex.MarkupTemplate.get("fullscreen.linebox").evaluateAsDom({});$tom.insertNext(a,d);var l={className:"tx-fullscreen-line-box"};if($tx.msie_ver=="5.5"){l.align="center"}var k=$tom.collect(a,"div.tx-fullscreen-line-box");if($tx.msie_ver=="5.5"){k.align="center"}var h=this.elLineBtn=$tom.collect(k,"a");$tx.observe(h,"click",this.onAttachClick.bind(this));this.isInit=true},getAttachBoxPosition:function(){if(this.isAttachBoxDisplay){return $tom.getPosition(this.attachBox.elBox)}else{return{x:0,y:0,width:0,height:0}}},resizeContainer:function(){var l=function(){if($tx("tx_fullscreen_post_area")){return $tx.getDimensions($tx("tx_fullscreen_post_area"))}else{return{x:0,y:0,width:0,height:0}}};
if(!this.isFullScreen){return false}this.resizeScreenAtService();var d=this.canvas.getCanvasPos().y;var h=this.getAttachBoxPosition();var a=0;var c=l();if(document.documentElement.clientHeight>0){a=document.documentElement.clientHeight-d-17}else{a=document.documentElement.offsetHeight-d-17}a-=c.height;if(h.height>0){a-=h.height+20}a=Math.max(a,this.minHeight);this.canvas.setCanvasSize({height:a.toPx()});var k=0;if(document.documentElement.clientWidth>0){k=document.documentElement.clientWidth}else{k=document.documentElement.offsetWidth}k=Math.max(k,this.minWidth);var j=this.wrapper;if(!j){return}j.style.width=k.toPx()},showAttachBox:function(){if(this.attachBox.useBox){$tx.addClassName(this.elLineBtn,"tx-attach-close");$tx.show(this.attachBox.elBox);this.isAttachBoxDisplay=true}},hideAttachBox:function(){if(this.attachBox.useBox){$tx.removeClassName(this.elLineBtn,"tx-attach-close");$tx.hide(this.attachBox.elBox);this.isAttachBoxDisplay=false}},showFullScreenAtService:function(){if(typeof(showFullScreen)!="undefined"){showFullScreen()
}},showNormalScreenAtService:function(){if(typeof(showNormalScreen)!="undefined"){showNormalScreen()}},resizeScreenAtService:function(){if(typeof(resizeScreen)!="undefined"){resizeScreen()}}});TrexConfig.addTool("image",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@image.title":"\uc0ac\uc9c4"});Trex.Tool.Image=Trex.Class.create({$const:{__Identity:"image"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("image").execute()})}});TrexConfig.addAttacher("image",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,objattr:{},features:{left:250,top:65,width:797,height:644},popPageUrl:"#host#path/pages/trex/image.html"},function(a){var c=TrexConfig.getAttacher("image",a);c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Image=Trex.Class.create({$const:{__Identity:"image"},$extend:Trex.Attacher,name:"image",title:TXMSG("@image.title"),canModified:false,canResized:true,oninitialized:function(a){},getKey:function(a){return a.imageurl
},getDataForEntry:function(d){d.imageurl=this.encodeSpaceInUrl(d.imageurl);d.originalurl=this.encodeSpaceInUrl(d.originalurl);d.attachurl=this.encodeSpaceInUrl(d.attachurl);d.thumburl=d.thumburl||d.imageurl.replace(/\/image\//gm,"/P150x100/");if(!d.dispElId){d.dispElId=Trex.Util.getDispElId()}var a=((d.tmpSeq)?this.entryBox.syncSeq(d.tmpSeq):this.entryBox.newSeq());var c=Object.extend({dataSeq:a},d);return c},createEntry:function(c,a){return this.createAttachment(c,a)},encodeSpaceInUrl:function(a){if(!a){return}return a.replace(/ /g,"%20")},execAttach:function(d,c){var a=this.createEntry(this.getDataForEntry(d),c);a.execRegister()},execReload:function(h,d,c){var a=this.createEntry(this.getDataForEntry(h,d),c);a.execReload()}});Trex.Attachment.Image=Trex.Class.create({$const:{__Identity:"image"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_image",value:[a.thumburl,a.imageurl,a.originalurl,a.exifurl,a.filename,a.filesize].join("|")}},getBoxAttr:function(c){var a=c.width?c.width+"x"+c.height+" / ":"";
return{name:c.filename+" ("+a+c.filesize.toByteUnit()+")",image:c.thumburl}},getObjectAttr:function(c){var a=Object.extend({},this.actor.config.objattr);if(c.width){if(!a.width||a.width>c.width){a.width=c.width}}else{a.width=null}if(c.height){if(!a.height||a.height>c.height){a.height=c.height}}else{a.height=null}return a},getObjectStyle:function(d){var c={};if(this.actor.config.objstyle){c=Object.extend(c,this.actor.config.objstyle)}if(d.imagealign){var a={L:Trex.Tool.AlignLeft,C:Trex.Tool.AlignCenter,FL:Trex.Tool.AlignRight,FR:Trex.Tool.AlignFull}[d.imagealign];if(a&&a.__ImageModeProps&&a.__ImageModeProps.image){c=Object.extend(c,a.__ImageModeProps.image["style"])}}return c},getParaStyle:function(c){var d=Object.extend({},this.actor.config.parastyle||this.actor.config.defaultstyle);if(c.imagealign){var a={L:Trex.Tool.AlignLeft,C:Trex.Tool.AlignCenter,FL:Trex.Tool.AlignRight,FR:Trex.Tool.AlignFull}[c.imagealign];if(a&&a.__ImageModeProps&&a.__ImageModeProps.paragraph){d=Object.extend(d,a.__ImageModeProps.paragraph["style"])
}}return d},getSaveHtml:function(a){return'<img src="'+a.imageurl+'" class="txc-image"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.imageurl+'" class="txc-image"/>'},getDispText:function(a){return'<img src="'+a.imageurl+'" class="txc-image"/>'},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.imageurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegText:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.imageurl.getRegExp()+'"?[^>]*/?>',"gim")}});TrexConfig.addTool("file",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@file.title":"\ud30c\uc77c"});Trex.Tool.File=Trex.Class.create({$const:{__Identity:"file"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("file").execute()})}});TrexConfig.addAttacher("file",{multiple:true,multipleuse:false,checksize:true,boxonly:false,wysiwygonly:false,features:{left:250,top:65,width:450,height:404},popPageUrl:"#host#path/pages/trex/file.html"},function(a){var c=TrexConfig.getAttacher("file",a);
c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.File=Trex.Class.create({$const:{__Identity:"file"},$extend:Trex.Attacher,name:"file",title:TXMSG("@file.title"),canModified:true,canResized:false,oninitialized:function(c){var d=this.config;var a=this.entryBox},getKey:function(a){return a.key||a.attachurl},getDataForEntry:function(j){if(!j.dispElId){j.dispElId=Trex.Util.getDispElId()}var a=((j.tmpSeq)?this.entryBox.syncSeq(j.tmpSeq):this.entryBox.newSeq());var h=j.filename.split(".").pop().toLowerCase();var c;switch(h){case"jpg":case"gif":case"png":case"bmp":c=j.attachurl.replace("/attach/","/thumbnail/");break;default:c=Trex.Util.thumburl(h)}var d=Object.extend({dataSeq:a,thumburl:c,prevurl:Trex.Util.prevurl(j.filename.split(".").pop().toLowerCase())},j);return d}});Trex.Attachment.File=Trex.Class.create({$const:{__Identity:"file"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_file",value:[a.attachurl,a.filesize,a.filename].join("|")}
},getBoxAttr:function(j){var c=56;var d=j.filename;if(d.getRealLength()>c){var k=d.split(".");var h=k.pop();var a=k.join(".").cutRealLength(c-2);d=a+"."+h}return{name:d+" ("+j.filesize.toByteUnit()+")",image:j.thumburl}},getSaveHtml:function(a){return'<a href="'+a.attachurl+'"><img src="'+a.prevurl+'"/> '+a.filename+"</a>"},getDispHtml:function(a){return'<button id="'+a.dispElId+'" class="txc-file tx-unresizable"><img src="'+a.prevurl+'" ld="'+a.attachurl+'"/> '+a.filename+"</button>"},getDispText:function(a){return"["+TXMSG("@file.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:a|A)\\s*href="?'+a.attachurl.getRegExp()+'[^"]*"?[^>]*><(?:img|IMG)[^>]*/?>[\\S\\s]*?</(?:a|A)>',"gm")},getRegHtml:function(a){return new RegExp('<(?:button|BUTTON)[^>]*id="?'+a.dispElId+'"?[^>]*>[\\S\\s]*?'+a.attachurl.getRegExp()+"[\\S\\s]*?</(?:button|BUTTON)>","gm")},getRegText:function(a){return new RegExp("\\["+TXMSG("@file.title")+":"+a.dataSeq+"\\]","gm")}});TrexConfig.addTool("media",{wysiwygonly:true,sync:false,status:false});
TrexMessage.addMsg({"@media.title":"\uba40\ud2f0\ubbf8\ub514\uc5b4","@media.prev.url":"#iconpath/spacer2.gif?rv=1.0.1","@media.prev.url.tvpot":"#iconpath/img_multi_tvpot.gif?rv=1.0.1","@media.prev.url.wmp":"#iconpath/spacer2.gif?rv=1.0.1"});Trex.Tool.Media=Trex.Class.create({$const:{__Identity:"media"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getEmbeder("media").execute()})}});TrexConfig.addEmbeder("media",{wysiwygonly:true,useCC:false,features:{resizable:"yes",left:250,top:65,width:478,height:580},popPageUrl:"#host#path/pages/daumx/multimedia.html",allowNetworkingFilter:true,allowNetworkingSites:[{host:"www.youtube.com"},{host:"youtube.com"},{host:"api.v.daum.net"},{host:"tvpot.daum.net"},{host:"flvs.daum.net"},{host:"photo-contents.daum-img.net"},{host:"serviceapi.nmv.naver.com"},{host:"v.nate.com"},{host:"flvr.pandora.tv"},{host:"videofarm.daum.net"}]},function(a){var c=a.sidebar.embeder.media;
c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});(function(){Trex.Embeder.Media=Trex.Class.create({$const:{__Identity:"media"},$extend:Trex.Embeder,name:"media",title:TXMSG("@media.title"),canResized:true,getCreatedHtml:function(q,p){var o=q.code||a(q.url,this.config);return k(o)},getDataForEntry:function(p,o){}});Trex.register("filter > media ",function(q,r,u,p,o){var t=u.embeders.media.config;q.getDocParser().registerFilter("filter/embeder/media",{"text@load":function(w){return w},"source@load":function(w){return k(w)},"html@load":function(w){return k(w)},text4save:function(w){return w},source4save:function(w){w=m(w);w=h(w,t);return w},html4save:function(w){w=m(w);w=h(w,t);return w},text2source:function(w){return w},text2html:function(w){return w},source2text:function(w){return w},source2html:function(w){return k(w)},html2text:function(w){return m(w)},html2source:function(w){return m(w)}})});function j(r,q){var p,u,t,o;u="";p=/[\/]*\/\/([^\/]+)\//i.exec(r);
if(p&&p[1]){u=p[1]}o=q.allowNetworkingSites.length;for(t=0;t<o;t+=1){if(u==q.allowNetworkingSites[t].host){return true}}return false}function h(q,p){var o;if(p.allowNetworkingFilter==false){return q}o=q.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(u,y,x,r){var t,w;t=/<param[^>]*=[^\w]*movie[^\w]+[^>]*>/i.exec(x);if(t&&t[0]){w=/\s+value=["']?([^\s"']*)["']?/i.exec(t[0]);if(w&&w[1]){if(j(w[1],p)){return y+x+r}}}t=/<param[^>]*=[^\w]*src[^\w]+[^>]*>/i.exec(x);if(t&&t[0]){w=/\s+value=["']?([^\s"']*)["']?/i.exec(t[0]);if(w&&w[1]){if(j(w[1],p)){return y+x+r}}}x=x.replace(/<param[^>]*=[^\w]*allowNetworking[^\w]+[^>]*>/i,"");x='<param name="allowNetworking" value="internal" />'.concat(x);return y+x+r});o=o.replace(/(<embed)([^>]*)(><\/embed>|\/>)/gi,function(w,x,r,t){var u=/\s+src=["']?([^\s"']*)["']?/i.exec(r);if(u&&u[1]){if(j(u[1],p)){return x+r+t}}r=r.replace(/\s+allowNetworking=["']?[\w]*["']?/i,"").concat(' allowNetworking="internal"');return x+r+t});return o}function m(u){var q;
var t=new RegExp("<(?:img|IMG)[^>]*txc-media[^>]*/?>","gim");var r=u;while((q=t.exec(r))!=null){var p=q[0];var o=c(p);if(!$tx.msie&&o.indexOf("$")>-1){o=o.replace(/\$/g,"$$$$")}u=u.replace(p,o)}return u}function k(x){if($tx.msie){x=x.replace(/(<object[^>]*>)((?:\n|.)*?)(<\/object>)/gi,function(z,B,A,y){A=A.replace(/<param[^>]*=[^\w]*wmode[^\w]+[^>]*>/i,"");A=A.replace(/<param[^>]*=[^\w]*play[^\w]+[^>]*>/i,"");A='<param name="wmode" value="transparent" />'.concat(A);return B+A+y});x=x.replace(/(<embed)([^>]*)(>)/gi,function(A,B,y,z){y=y.replace(/\s+wmode=(["']?)(window|opaque|transparent)(["']?)/i," wmode=$1transparent$3");return B+y+z});return x}else{var r;var t=x;var p=new RegExp("<(?:script)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:script)>","gim");while((r=p.exec(t))!=null){var o=r[0];var u=r[1];var q=o.replace(/<embed/i,"<xxembed");x=x.replace(o,q)}var w=new RegExp("<(?:object|OBJECT)[^>]*>[\\S\\s]*?(<(?:embed|EMBED)[^>]*src=[^>]*>)[\\S\\s]*?</(?:object|OBJECT)>","gim");
while((r=w.exec(t))!=null){var o=r[0];var u=r[1];var q=n(o,u);x=x.replace(o,q)}w=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");while((r=w.exec(t))!=null){var o=r[0];var u=r[0];var q=n(o,u);x=x.replace(o,q)}x=x.replace(/<xxembed/i,"<embed");return x}}function n(q,A){var p=Trex.Util.getAllAttributesFromEmbed(A);var u=p.src;var w=(p.width||" ").parsePx();var x=(p.height||" ").parsePx();if(isNaN(w)||isNaN(x)){var B=d(u);w=B.width;x=B.height}var t="<embed";for(var r in p){t+=" "+r+'="'+p[r]+'"'}t+=">";var z=q.split(A);q=z[0]+t;for(var y=1;y<z.length;y++){q+=z[y]}var o=l(u);return'<img src="'+o.imageSrc+'" width="'+w+'" height="'+x+'" border="0" class="tx-entry-embed txc-media'+o.className+'" ld="'+encodeURIComponent(q)+'"/>'}function c(u){var o=Trex.Util.getAllAttributes(u);var t=o.ld;if(!t||t.length==0){return""}var q=o.width;var r=o.height;var w=decodeURIComponent(t);var z=w;if(w.indexOf("object")>-1||w.indexOf("OBJECT")>-1){var x;var A=new RegExp("<(?:embed|EMBED)[^>]*src=[^>]*(?:/?>|></(?:embed|EMBED)>)","gim");
while((x=A.exec(w))!=null){z=x[0]}}o=Trex.Util.getAllAttributes(z);var p=o.src;var y=d(p);if(isNaN(q)){w=Trex.String.changeAttribute(w,"width",' width="'+y.width+'"')}else{w=Trex.String.changeAttribute(w,"width",' width="'+q+'"')}if(isNaN(r)){w=Trex.String.changeAttribute(w,"height",' height="'+y.height+'"')}else{w=Trex.String.changeAttribute(w,"height",' height="'+r+'"')}return w}function a(t,r){var u,p,w,q,o;u=t.split(".").pop().split("?")[0].toLowerCase();p=d(t);if(t.indexOf("http://flvs.daum.net")==0){w=" allowScriptAccess='always'"}else{w=" allowScriptAccess='never'";if(r.allowNetworkingFilter&&j(t,r)==false){w+=" allowNetworking='internal'"}}q="http://tvpot.daum.net/clip/ClipViewByVid.do?vid=";if(t.indexOf(q)==0){o=t.substr(q.length);t="http://flvs.daum.net/flvPlayer.swf?vid="+o;u="swf";w=" allowScriptAccess='always'"}switch(u){case"swf":return'<embed src="'+t+"\" quality='high' "+w+" type='application/x-shockwave-flash' allowfullscreen='true' pluginspage='http://www.macromedia.com/go/getflashplayer' width='"+p.width+"' height='"+p.height+"'></embed>";
case"mp3":case"wma":case"asf":case"asx":case"mpg":case"mpeg":case"wmv":case"avi":return'<embed src="'+t+'" type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" width=\''+p.width+"' height='"+p.height+"'></embed>";case"mov":return'<embed src="'+t+'" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/indext.html" width=\''+p.width+"' height='"+p.height+"'></embed>";case"jpg":case"bmp":case"gif":case"png":return'<img src="'+t+'" border="0"/>';default:return'<embed src="'+t+"\" width='"+p.width+"' height='"+p.height+"' "+w+" ></embed>"}}function d(p){var o,q;if(p.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){o=400;q=80}else{if(p.indexOf("flvs.daum.net/flvPlayer")>-1){o=502;q=399}else{var r=p.split(".").pop().split("?")[0].toLowerCase();switch(r){case"mp3":case"wma":case"asf":case"asx":o=280;q=45;break;case"mpg":case"mpeg":case"wmv":case"avi":o=320;q=285;break;default:o=400;q=300;break}}}return{width:o,height:q}}function l(q){var o="";
var p="";if(q.indexOf("api.bloggernews.media.daum.net/static/recombox1")>-1){o="";p=TXMSG("@media.prev.url")}else{if(q.indexOf("flvs.daum.net/flvPlayer")>-1){o=" txc-media-tvpot";p=TXMSG("@media.prev.url.tvpot")}else{var r=q.split(".").pop().split("?")[0].toLowerCase();switch(r){case"mp3":case"wma":case"asf":case"asx":o=" txc-media-wmp";p=TXMSG("@media.prev.url.wmp");break;case"mpg":case"mpeg":case"wmv":case"avi":o=" txc-media-wmp";p=TXMSG("@media.prev.url.wmp");break;default:o="";p=TXMSG("@media.prev.url");break}}}return{className:o,imageSrc:p}}})();TrexMessage.addMsg({"@canvas.unload.message":"\uc9c0\uae08\uae4c\uc9c0 \uc791\uc131\ub41c \uae00\uc740 \uc548\uc804\ud558\uac8c \uc790\ub3d9 \uc800\uc7a5\ub418\uc5b4, \ud68c\uc6d0\ub2d8\uc774 \ub2e4\uc2dc \uae00\uc4f0\uae30 \ud558\uc2e4 \ub54c \ubd88\ub7ec\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4.","@canvas.unload.message.at.modify":"\uc9c0\uae08\uae4c\uc9c0 \uc791\uc131\ub41c \uae00\uc740 \uc548\uc804\ud558\uac8c \uc790\ub3d9 \uc800\uc7a5\ub418\uc5b4, \ud68c\uc6d0\ub2d8\uc774 \ub2e4\uc2dc \uc218\uc815\ud558\uc2e4 \ub54c \ubd88\ub7ec\uc62c \uc218\uc788\uc2b5\ub2c8\ub2e4."});
Trex.install("editor.isDisableUnloadHandler & editor.setDisableUnloadHandler",function(d,h,j,c,a){var k=true;d.isDisableUnloadHandler=function(l){return k};d.setDisableUnloadHandler=function(){k=false};d.setEnableUnloadHandler=function(){k=true}});Trex.module("observing beforeunload event",function(j,k,l,d,c){var a=c.events;var h=new Trex.Validator();$tx.observe(window,"beforeunload",function(m){if(j.isDisableUnloadHandler()){if(a.preventUnload){d.fireJobs(Trex.Ev.__CANVAS_BEFORE_UNLOAD);if(h.exists(d.getContent())){m.returnValue=TXMSG("@canvas.unload.message");return TXMSG("@canvas.unload.message")}}}},false)});TrexMessage.addMsg({"@align.image.align.center":"\uac00\uc6b4\ub370\uc815\ub82c","@align.image.align.full":"\uc624\ub978\ucabd\uae00\ud750\ub984","@align.image.align.left":"\uc67c\ucabd\uc815\ub82c","@align.image.align.right":"\uc67c\ucabd\uae00\ud750\ub984","@align.text.align.center":"\uac00\uc6b4\ub370\uc815\ub82c (Ctrl+.)","@align.text.align.full":"\uc591\ucabd\uc815\ub82c","@align.text.align.left":"\uc67c\ucabd\uc815\ub82c (Ctrl+,)","@align.text.align.right":"\uc624\ub978\ucabd\uc815\ub82c (Ctrl+/)"});
Trex.module("Register an eventhandler in order to change align icons upon toolbar when user click a specific image or not.",function(j,m,a,c,d){var h="tx-selected-image";var k=[m.tools.alignleft,m.tools.aligncenter,m.tools.alignright,m.tools.alignfull];var n=["txc-2image-c","txc-3image-c","txc-footnote","txc-jukebox","txc-movie","txc-gallery","txc-imazing","txc-map","txc-file","txc-emo","tx-entry-embed","txc-bgm","txc-pie"];var l=function(o){var p=function(q,t,w){var u=null;var r=null;if(!u){u=$tom.find(q.button.elButton,"li")}if(!r){r=$tx(q.button.elIcon)}r.title=w;if(t=="image"){if(!$tx.hasClassName(u,h)){$tx.addClassName(u,h)}q.imageAlignMode=true}else{if($tx.hasClassName(u,h)){$tx.removeClassName(u,h)}q.imageAlignMode=false}};p(k[0],o,o=="image"?TXMSG("@align.image.align.left"):TXMSG("@align.text.align.left"));p(k[1],o,o=="image"?TXMSG("@align.image.align.center"):TXMSG("@align.text.align.center"));p(k[2],o,o=="image"?TXMSG("@align.image.align.right"):TXMSG("@align.text.align.right"));
p(k[3],o,o=="image"?TXMSG("@align.image.align.full"):TXMSG("@align.text.align.full"))};c.observeElement([{tag:"body"},{tag:"table"},{tag:"hr"}],function(){l("text")});c.observeElement({tag:"img"},function(p){var o=Trex.Util.getMatchedClassName(p,n);if(o){l("text")}else{if($tom.find(p,"button")){l("text")}else{l("image")}}})});Trex.module("make padding area inside Canvas with editor width",function(l,u,w,d,G){var B;var q;var x;B=d.wysiwygEl;q=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);if(!q){return}x=q.el;var j=d.getSizeConfig();var p=j.wrapWidth.toNumber();var o=j.contentWidth.toNumber();var k=j.contentPadding.toNumber();var E=d.getStyleConfig().color;var a=5;var t=5;var r=16;var y=28;var h;var z;var C;function c(J){var I=0,H=0,K=0,L=0;if(J&&J.paddingTop){I=t+J.paddingTop}else{I=k}if(J&&J.paddingRight){H=a+J.paddingRight}else{H=k}if(p>o){H+=Math.max(Math.floor((p-o-2-r)/2),0)}if(J&&J.paddingBottom){K=t+J.paddingBottom}else{K=k}if(J&&J.paddingLeft){L=a+J.paddingLeft}else{L=k}if(p>o){L+=Math.max(Math.ceil((p-o-2-r)/2),0)
}return{paddingTop:I.toPx(),paddingRight:H.toPx(),paddingBottom:K.toPx(),paddingLeft:L.toPx()}}d.observeJob("canvas.apply.background",function(H){q.addStyle(c({paddingTop:(H&&H.topLeftHeight)?H.topLeftHeight.parsePx():0,paddingRight:(H&&H.midRightWidth)?H.midRightWidth.parsePx():0,paddingBottom:(H&&H.botLeftHeight)?H.botLeftHeight.parsePx():0,paddingLeft:(H&&H.midLeftWidth)?H.midLeftWidth.parsePx():0}))});d.observeJob("canvas.apply.letterpaper",function(H){q.addStyle(c({paddingTop:(H&&H.topHeight)?H.topHeight.parsePx():0,paddingRight:(H&&(H.midColor||H.midUrl))?k:0,paddingBottom:(H&&H.botHeight)?H.botHeight.parsePx():0,paddingLeft:(H&&(H.midColor||H.midUrl))?k:0}))});if(p<=o){return}var D=d.getConfig().showGuideArea;if(D==false){o=p}function n(){var H=(p-o-2-r)/2;if(H<y){return{leftWidth:"0",rightWidth:"0",rightPos:"0"}}else{return{leftWidth:Math.ceil(H).toPx(),rightWidth:Math.max(0,(Math.floor(H))).toPx(),rightPos:(o+Math.ceil(H)).toPx()}}}var A=function(){$tx.hide(_elLeftSpace);$tx.hide(_elRightSpace)
};var m=function(){$tx.show(_elLeftSpace);$tx.show(_elRightSpace)};d.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){C=q.getDocument();q.addStyle(c());var H=q.getPanelHeight();var I=n();_elLeftSpace=tx.div({className:"tx-wysiwyg-padding",style:{width:I.leftWidth,height:H,left:"0".toPx()}});_elLeftSpaceChild=tx.div({className:"tx-wysiwyg-padding-divL",style:{borderRight:"1px solid",borderBottom:"1px solid",borderColor:E}});_elLeftSpace.appendChild(_elLeftSpaceChild);B.insertBefore(_elLeftSpace,x);_elRightSpace=tx.div({className:"tx-wysiwyg-padding",style:{width:I.rightWidth,height:H,left:I.rightPos}});_elRightSpaceChild=tx.div({className:"tx-wysiwyg-padding-divR",style:{borderLeft:"1px solid",borderBottom:"1px solid",borderColor:E}});_elRightSpace.appendChild(_elRightSpaceChild);B.insertBefore(_elRightSpace,x);if(I.leftWidth.parsePx()<y){$tx.setStyle(_elLeftSpaceChild,{borderRight:"0 none",borderBottom:"0 none"})}if(I.rightWidth.parsePx()<y){$tx.setStyle(_elRightSpaceChild,{borderLeft:"0 none",borderBottom:"0 none"})
}q.getScrollTop=function(){return(C.documentElement.scrollTop||C.body.scrollTop)};q.setScrollTop=function(J){if(C.documentElement.scrollTop){C.documentElement.scrollTop=J}else{C.body.scrollTop=J}};if(d.mode!="html"){A()}});d.observeJob(Trex.Ev.__CANVAS_MODE_CHANGE,function(I,H){if(I==H){return}if(I==Trex.Canvas.__WYSIWYG_MODE){A()}else{if(H==Trex.Canvas.__WYSIWYG_MODE){m()}}});d.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(H){_elLeftSpace.style.height=H;_elRightSpace.style.height=H});var F=function(){q.addStyle(c());var H=n();$tx.setStyle(_elLeftSpace,{width:H.leftWidth});$tx.setStyle(_elRightSpace,{width:H.rightWidth,left:H.rightPos});if(H.leftWidth.parsePx()<y){$tx.setStyle(_elLeftSpaceChild,{borderRight:"0 none",borderBottom:"0 none"})}else{$tx.setStyle(_elLeftSpaceChild,{borderRight:"1px solid",borderBottom:"1px solid"})}if(H.rightWidth.parsePx()<y){$tx.setStyle(_elRightSpaceChild,{borderLeft:"0 none",borderBottom:"0 none"})}else{$tx.setStyle(_elRightSpaceChild,{borderLeft:"1px solid",borderBottom:"1px solid"})
}};d.observeJob("canvas.normalscreen.change",function(){p=j.wrapWidth;F()});d.observeJob("canvas.fullscreen.change",function(){p=document.body.clientWidth;F()});d.getCanvasGuideSize=function(){return n().leftWidth.parsePx()};if(!$tx.msie){if($tx.gecko){$tx.setStyle(x,{overflowX:"auto",overflowY:"auto"})}else{$tx.setStyle(x,{overflowX:"auto",overflowY:"scroll"})}}});Trex.module("Register an eventhandler in order to block resizing and editing search results & some images in wysiwig panel.",function(j,k,l,d,c){if($tx.msie){var a=function(m){if(m.onresizestart==null){m.onresizestart=function(){return false}}};d.observeElement({tag:"img",klass:"tx-unresizable"},a);d.observeElement({tag:"img",klass:"tx-entry-attach"},a);d.observeElement({tag:"img",klass:"txc-footnote"},a);d.observeElement({tag:"iframe",klass:"txc-map"},a)}var h;if($tx.msie){h=function(m){m.setAttribute("unselectable","on");$A(m.getElementsByTagName("*")).each(function(o){if(o.nodeName.charAt(0)!="/"){o.setAttribute("unselectable","on")
}});var n=d.getProcessor();n.selectControl(m)}}else{h=function(m){var n=d.getProcessor();n.selectControl(m);throw $stop}}d.observeElement({tag:"button"},h);d.observeElement({tag:"img"},function(m){var n=$tom.find(m,"button");if(n){h(n);throw $stop}})});Trex.module("in order to save history for image resizing on IE",function(l,m,a,d,h){var k=d.history;var c="";var j={};var n=null;d.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEDOWN,function(p){var o=$tx.element(p);if(o&&o.tagName&&o.tagName.toLowerCase()=="img"){n=o;j=$tom.getPosition(o)}});d.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEUP,function(r){if(n){var p=false;try{var q=$tom.getPosition(n);for(var o in q){if(q[o]!=j[o]){p=true}}if(p){k.saveHistory()}}catch(t){}finally{n=null}}})});(function(){var d={getEventElement:function(j){var h=$tx.findElement(j,"td");if(h&&h.tagName&&h.tagName.toUpperCase()=="TD"){return h}else{return null}},getMaxCoord:function(k){var h=this.getXCoords(k);var j=this.getYCoords(k);return{x:h[h.length-1],y:j[j.length-1]}
},getMinCoord:function(k){var h=this.getXCoords(k);var j=this.getYCoords(k);return{x:h[0],y:j[0]}},getYCoords:function(h){return this.getCoordsByKey(h,"row")},getXCoords:function(h){return this.getCoordsByKey(h,"col")},getCoordsByKey:function(l,j){var k=new RegExp(j+"(\\d+)","gim");var m=[];var h=l.getAttribute(j+"Class");h.trim().replace(k,function(n,o){m.push(o.toNumber())});return m},setSelect:function(h){$tx.setStyle(h,{backgroundImage:"url(http://i1.daumcdn.net/icon/editor/table_focus_50.png)"})},setUnselect:function(h){$tx.setStyle(h,{backgroundImage:""})},clearContent:function(h){h.setAttribute("unselectable","on");h.innerHTML="-"},clearCoords:function(h){h.setAttribute("colClass","");h.setAttribute("rowClass","")},setCoords:function(j,q,h){var n=q+1;var o=this.getRowSpan(j);var k="row ".times(o).replace(/(row)/g,function(r,t){return t+(n++)});var l=h+1;var p=this.getColSpan(j);var m="col ".times(p).replace(/(col)/g,function(r,t){return t+(l++)});j.setAttribute("colClass",m);j.setAttribute("rowClass",k)
},getColSpan:function(h){return parseInt(h.getAttribute("colSpan")||1)},getRowSpan:function(h){return parseInt(h.getAttribute("rowSpan")||1)}};var a={start:{x:-1,y:-1},top:-1,left:-1,bottom:-1,right:-1,init:function(h,j){this.start.x=this.left=this.right=h;this.start.y=this.top=this.bottom=j},clear:function(){this.top=this.left=this.bottom=this.right=this.start.x=this.start.y=-1},changeBoundary:function(h,j){this.top=Math.min(this.start.y,j);this.bottom=Math.max(this.start.y,j);this.left=Math.min(this.start.x,h);this.right=Math.max(this.start.x,h)},getRectCoord:function(){return{sx:this.left,sy:this.top,ex:this.right,ey:this.bottom}}};var c={canMerge:function(h,k){for(var j=h.sy;j<h.ey+1;j++){if(d.getMinCoord(k[j][h.sx]).x-1!=h.sx||d.getMaxCoord(k[j][h.ex]).x-1!=h.ex){return false}}for(var j=h.sx;j<h.ex+1;j++){if(d.getMinCoord(k[h.sy][j]).y-1!=h.sy||d.getMaxCoord(k[h.ey][j]).y-1!=h.ey){return false}}return true},canSplit:function(j,l){var k=d.getMinCoord(l[j.sy][j.sx]);var h=d.getMinCoord(l[j.ey][j.ex]);
return(k.x==h.x&&k.y==h.y&&k.x>0&&k.y>0)},isMergedCell:function(j,k){var h=d.getMaxCoord(k[j.sy][j.sx]);var l=d.getMinCoord(k[j.sy][j.sx]);if(h.x!=l.x||h.y!=l.y){return true}else{return false}},canRemoveRow:function(j,m){var h=j.sy;var n=j.ey;var l=m[0].length;for(var k=0;k<l;k++){if(h!=d.getMinCoord(m[j.sy][k]).y-1){return false}if(n!=d.getMaxCoord(m[j.ey][k]).y-1){return false}}return true},canRemoveCol:function(h,n){var m=h.sx;var l=h.ex;var k=n.length;for(var j=0;j<k;j++){if(m!=d.getMinCoord(n[j][h.sx]).x-1){return false}if(l!=d.getMaxCoord(n[j][h.ex]).x-1){return false}}return true},isAllRowSelected:function(h,j){return(j.length<=h.ey-h.sy+1)?true:false},isAllColSelected:function(h,j){return(j[0].length<=h.ex-h.sx+1)?true:false},canAddUpperRow:function(k,j){for(var h=0;h<j[0].length;h++){if(j[k-1][h]==j[k][h]){return false}}return true},canAddBelowRow:function(k,j){for(var h=0;h<j[0].length;h++){if(j[k+1][h]==j[k][h]){return false}}return true},canAddLeftCol:function(h,k){for(var j=0;
j<k.length;j++){if(k[j][h-1]==k[j][h]){return false}}return true},canAddRightCol:function(h,k){for(var j=0;j<k.length;j++){if(k[j][h+1]==k[j][h]){return false}}return true}};Trex.MarkupTemplate.add("table.edit",'<div class="tx-table-edit">			<ul class="tx-tab tx-tab-menu1">				<li><a href="javascript:;">\ud45c\uad6c\uc131</a></li>				<li><a href="javascript:;">\ub514\uc790\uc778</a></li>				<li><a href="javascript:;">\uc11c\uc2dd</a></li>			</ul>			<div class="tx-table-edit-layout">			<div class="tx-table-edit-layout-wrapper">				<div class="tx-table-edit-layout-insert">					<h4>\uc0bd\uc785</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-up" title="\uc704\uc5d0 \ucd94\uac00">\uc704</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-down" title="\uc544\ub798\uc5d0 \ucd94\uac00">\uc544\ub798</a></li>					</ul>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-left" title="\uc67c\ucabd\uc5d0 \ucd94\uac00">\uc67c\ucabd</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-right" title="\uc624\ub978\ucabd \ucd94\uac00">\uc624\ub978</a></li>					</ul>				</div>				<div class="tx-table-edit-layout-cell">					<h4>\uc0ad\uc81c</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-col" title="\uc5f4\uc0ad\uc81c">\uc5f4</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-row" title="\ud589\uc0ad\uc81c">\ud589</a></li>					</ul>					<h4 style="width:50px">\ubcd1\ud569/\ubd84\ud560</h4>					<ul class="tx-2cell">						<li class="tx-left"><a href="javascript:;" class="tx-merge" title="\ubcd1\ud569">\ud569</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-split" title="\ubd84\ud560">\ubd84</a></li>					</ul>				</div>				<div class="tx-table-edit-layout-align">					<h4>\uc815\ub82c</h4>					<ul class="tx-3cell">						<li class="tx-left"><a href="javascript:;" class="tx-top" title="\uc0c1\ub2e8">\uc0c1</a></li>						<li class="tx-center"><a href="javascript:;" class="tx-middle" title="\uc911\ub2e8">\uc911</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-bottom" title="\ud558\ub2e8">\ud558</a></li>					</ul>					<ul class="tx-3cell">						<li class="tx-left"><a href="javascript:;" class="tx-alignleft" title="\uc67c\ucabd \uc815\ub82c">\uc88c</a></li>						<li class="tx-center"><a href="javascript:;" class="tx-aligncenter" title="\uac00\uc6b4\ub370 \uc815\ub82c">\uc911</a></li>						<li class="tx-right"><a href="javascript:;" class="tx-alignright" title="\uc624\ub978\ucabd \uc815\ub82c">\uc6b0</a></li>					</ul>				</div>				</div>			</div>			<div class="tx-table-edit-design">			<div class="tx-table-edit-design-wrapper">				<dl>					<dt>\ud14c\ub450\ub9ac\uc120\ud0dd</dt>					<dd class="tx-table-edit-borderrange tx-btn-widget">						<a href="javascript:;" class="tx-icon">\ud14c\ub450\ub9ac</a>						<a href="javascript:;" class="tx-arrow">\ud14c\ub450\ub9ac</a>						<div class="tx-menu"></div>					</dd>					<dt>\uc120</dt>					<dd class="tx-table-edit-bordercolor tx-btn-widget-tbg">						<a href="javascript:;" class="tx-icon">\uc120\uc0c9</a>						<a href="javascript:;" class="tx-arrow">\uc120\uc0c9</a>						<div class="tx-colorpallete"></div>					</dd>					<dd class="tx-table-edit-borderwidth tx-btn-widget">						<a href="javascript:;" class="tx-icon">\uad75\uae30</a>						<a href="javascript:;" class="tx-arrow">\uad75\uae30</a>						<div class="tx-menu"></div>					</dd>					<dd class="tx-table-edit-borderstyle tx-btn-widget">						<a href="javascript:;" class="tx-icon">\uc2a4\ud0c0\uc77c</a>						<a href="javascript:;" class="tx-arrow">\uc2a4\ud0c0\uc77c</a>						<div class="tx-menu"></div>					</dd>					<dt>\ubc30\uacbd\uc0c9</dt>					<dd class="tx-table-edit-backcolor tx-btn-widget-brbg">						<a href="javascript:;" class="tx-icon">\ubc30\uacbd\uc0c9</a>						<a href="javascript:;" class="tx-arrow">\ubc30\uacbd\uc0c9</a>						<div class="tx-colorpallete" unselectable="on"></div>					</dd>				</dl>			</div>			</div>			<div class="tx-table-edit-template">			<div class="tx-table-edit-template-wrapper">				<ul>					<!--li class="tx-ex1"><a href="javascript:"></a></li-->				</ul>				<a href="javascript:;" class="tx-button-on">\ub354\ubcf4\uae30</a>				<ul class="tx-table-edit-template-all">					<!--li class="tx-ex1"><a href="javascript:"></a></li-->				</ul>			</div>			</div>			<div class="tx-table-edit-main">				<a href="javascript:;" class="tx-confirm">\ud655\uc778</a>				<a href="javascript:;" class="tx-cancel">\ucde8\uc18c</a>			</div>		</div>');
Trex.Menu.Table.TableEdit=Trex.Class.create({$const:{__OPTIONS:{WIDTH:[{label:"1pt",title:"1px",klass:"tx-1px",data:"1"},{label:"2pt",title:"2px",klass:"tx-2px",data:"2"},{label:"3pt",title:"3px",klass:"tx-3px",data:"3"},{label:"4pt",title:"4px",klass:"tx-4px",data:"4"},{label:"5pt",title:"5px",klass:"tx-5px",data:"5"},{label:"6pt",title:"6px",klass:"tx-6px",data:"6"},{label:"7pt",title:"7px",klass:"tx-7px",data:"7"}],RANGE:[{label:"\ubaa8\ub4e0 \ud14c\ub450\ub9ac",title:"\uc804\uccb4",klass:"tx-all",data:"all"},{label:"\ubc14\uae65 \ud14c\ub450\ub9ac",title:"\ubc14\uae65\ucabd",klass:"tx-out",data:"out"},{label:"\uc548\ucabd \ud14c\ub450\ub9ac",title:"\uc548\ucabd",klass:"tx-in",data:"in"},{label:"\uc704\ucabd \ud14c\ub450\ub9ac",title:"\uc704\ucabd",klass:"tx-top",data:"top"},{label:"\uc544\ub798\ucabd \ud14c\ub450\ub9ac",title:"\uc544\ub7ab\ucabd",klass:"tx-bottom",data:"bottom"},{label:"\uc67c\ucabd \ud14c\ub450\ub9ac",title:"\uc67c\ucabd",klass:"tx-left",data:"left"},{label:"\uc624\ub978\ucabd \ud14c\ub450\ub9ac",title:"\uc624\ub978\ucabd",klass:"tx-right",data:"right"}],STYLE:[{label:"\uc5c6\uc74c",title:"\uc5c6\uc74c",klass:"tx-none",data:"none"},{label:"\uc2e4\uc120",title:"\uc2e4\uc120",klass:"tx-solid",data:"solid"},{label:"\uad75\uc740\uc810\uc120",title:"\uad75\uc740\uc810\uc120",klass:"tx-dashed",data:"dashed"},{label:"\uc810\uc120",title:"\uc810\uc120",klass:"tx-dotted",data:"dotted"}]}},initialize:function(h){if(!h.table){alert("\ud3b8\uc9d1\ud560 \ud14c\uc774\ube14\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");
return}var j=this.config=$tx.extend({},h);this.previewTable=new Trex.Menu.Table.TableEdit.PreviewTable(j);this.realTable=new Trex.Menu.Table.TableEdit.TableEditor(j);this.elContainer=this.elPreviewArea=null;this.createTableEditLayer();this.blackBox=h.editor.getBlackBox();this.blackBox.show(this.elContainer);this.eventBinding();this.showMenu(0);this.borderRange="all"},createTableEditLayer:function(){this.elPreviewArea=tx.div({className:"tx-preview"});this.elPreviewArea.appendChild(this.previewTable.getTable());this.elContainer=tx.div({className:"tx-table-edit-container"});this.elContainer.appendChild(this.elPreviewArea);this.elMenu=Trex.MarkupTemplate.get("table.edit").evaluateAsDom({});this.elContainer.appendChild(this.elMenu);var h=tx.div({style:{clear:"both"}});h.style.clear="both";this.elContainer.appendChild(h)},_eventBindingTab:function(){var h=this.showMenu=function(p){if(isNaN(p)){return}for(var o=0;o<k.length;o++){$tx.removeClassName(m,"tx-tab-menu"+(o+1));$tx.hide(l[o])}$tx.addClassName(m,"tx-tab-menu"+(p+1));
$tx.show(l[p])};var m=$tom.collect(this.elMenu,"ul.tx-tab");var k=$tom.collectAll(m,"li");var l=[$tom.collect(this.elContainer,"div.tx-table-edit-layout"),$tom.collect(this.elContainer,"div.tx-table-edit-design"),$tom.collect(this.elContainer,"div.tx-table-edit-template")];var n=function(p,o){h(o);return false};for(var j=0;j<k.length;j++){$tx.observe(k[j],"click",n.bindAsEventListener(this,j))}},_eventBindingLayoutMenu:function(){var j=this;var m=$tom.collectAll($tom.collect(this.elMenu,".tx-table-edit-layout"),"a");var h=["addRowUpper","addRowBelow","addColLeft","addColRight","removeCol","removeRow","merge","split","changeTextValignTop","changeTextValignMiddle","changeTextValignBottom","changeTextAlignLeft","changeTextAlignCenter","changeTextAlignRight"];var o=function(u){var t=$tx.findElement(u,"li");var r=t.parentNode;if(t){var p=$tx.classNames(t)[0].replace("tx","");var q=r.className+p;r.className=q}};var l=function(q){var p=$tx.findElement(q,"ul");if(p){p.className=p.className.replace(/-right|-center|-left/,"")
}};var n=function(q,p){$tx.stop(q);j[h[p]]();return false};for(var k=0;k<m.length;k++){$tx.observe(m[k],"click",n.bindAsEventListener(this,k));$tx.observe(m[k],"mouseover",o);$tx.observe(m[k],"mouseout",l)}},_eventBindingDesignMenu:function(){var h=this;var k=$tom.collect(this.elMenu,"div.tx-table-edit-design");var j=this.config.editor.toolbar;var l=$tom.collect(k,"dd.tx-table-edit-backcolor a.tx-icon");j.makeWidget(new Trex.Button.ColorWidget({status:true,el:$tom.collect(k,"dd.tx-table-edit-backcolor")}),new Trex.Menu.ColorPallete({el:$tom.collect(this.elMenu,"dd.tx-table-edit-backcolor div.tx-colorpallete"),thumbs:Trex.__CONFIG_COMMON.thumbs}),function(o){if(!$tx.hasClassName(l,"tx-selected")){$tx.addClassName(l,"tx-selected")}h.changeCellStyle("changeBackColor",o)});var m=$tom.collect(k,"dd.tx-table-edit-borderrange a.tx-icon");j.makeWidget(new Trex.Button.Widget({status:true,el:$tom.collect(k,"dd.tx-table-edit-borderrange")}),new Trex.Menu.Select({el:$tom.collect(k,"dd.tx-table-edit-borderrange div.tx-menu"),options:Trex.Menu.Table.TableEdit.__OPTIONS.RANGE}),function(o){$tx.removeClassName(m,m.previousClassName||"tx-range");
m.previousClassName="tx-range-"+o;$tx.addClassName(m,"tx-range-"+o);h.setBorderRange(o)});var n=$tom.collect(k,"dd.tx-table-edit-bordercolor a.tx-icon");j.makeWidget(new Trex.Button.ColorWidget({status:true,el:$tom.collect(k,"dd.tx-table-edit-bordercolor")}),new Trex.Menu.ColorPallete({el:$tom.collect(this.elMenu,"dd.tx-table-edit-bordercolor div.tx-colorpallete"),thumbs:Trex.__CONFIG_COMMON.thumbs}),function(o){if(!$tx.hasClassName(n,"tx-selected")){$tx.addClassName(n,"tx-selected")}h.changeCellStyle("changeBorderColor",o)});j.makeWidget(new Trex.Button.Widget({status:true,el:$tom.collect(k,"dd.tx-table-edit-borderwidth")}),new Trex.Menu.Select({el:$tom.collect(k,"dd.tx-table-edit-borderwidth div.tx-menu"),options:Trex.Menu.Table.TableEdit.__OPTIONS.WIDTH}),function(p){var o=p.toPx();h.changeCellStyle("changeBorderWidth",o)});j.makeWidget(new Trex.Button.Widget({status:true,el:$tom.collect(k,"dd.tx-table-edit-borderstyle")}),new Trex.Menu.Select({el:$tom.collect(k,"dd.tx-table-edit-borderstyle div.tx-menu"),options:Trex.Menu.Table.TableEdit.__OPTIONS.STYLE}),function(o){h.changeCellStyle("changeBorderType",o)
})},_eventBidingTemplateMenu:function(){var o=$tom.collectAll(this.elMenu,"div.tx-table-edit-template ul");var n=o[0];var k=o[1];var l=(new Trex.Tool.Table.TemplateWizard()).getTemplateList();var h=this;var j=function(u,t,w){for(var r=0;r<u.length;r++){var q=tx.li({className:"tx-"+u[r].klass});var x=tx.a({href:"javascript:;"});var p=tx.span(" ");$tx.observe(x,"click",function(y){return function(){h.applyTemplateStyle(y);return false}}(r+w));x.appendChild(p);q.appendChild(x);t.appendChild(q)}};j(l.slice(10),k,10);j(l.slice(1,10),n,1);var m=$tom.collect(this.elMenu,"a.tx-button-on");$tx.observe(m,"click",function(){m.className=$tx.hasClassName(m,"tx-button")?"tx-button-on":"tx-button";"";$tx.toggle(k);return false})},_eventBindingMainMenu:function(){var k=this;var j=$tom.collect(this.elContainer,"div.tx-table-edit-main");var l=$tom.collect(j,"a.tx-confirm");$tx.observe(l,"click",function(){k.done();return false});var h=$tom.collect(j,"a.tx-cancel");$tx.observe(h,"click",function(){k.cancel();
return false})},eventBinding:function(){this._eventBindingTab();this._eventBidingTemplateMenu();this._eventBindingLayoutMenu();this._eventBindingDesignMenu();this._eventBindingMainMenu()},getContainer:function(){return this.elContainer},_executeLayoutCommand:function(h,j){this.previewTable.clearSelection();this.previewTable[h](j);this.previewTable.refreshCoord();this.realTable[h](j);this.previewTable.clearBoundary()},addRowUpper:function(){var h=this.previewTable.getSelectedRectCoord().sy;if(h<0){alert("\ucd94\uac00\ub420 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(h!=0&&!c.canAddUpperRow(h,this.previewTable.getTdMatrix())){alert("\uc88c\uc6b0\uce21\uc5d0 \ud569\uccd0\uc9c4 \ud589\uc774 \uc788\uc5b4\uc11c \ud589\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addRowUpper",h)},addRowBelow:function(){var h=this.previewTable.getSelectedRectCoord().ey;if(h<0){alert("\ucd94\uac00\ub420 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");
return}if(this.previewTable.getTdMatrix().length-1!=h&&!c.canAddBelowRow(h,this.previewTable.getTdMatrix())){alert("\uc88c\uc6b0\uce21\uc5d0 \ud569\uccd0\uc9c4 \ud589\uc774 \uc788\uc5b4\uc11c \ud589\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addRowBelow",h)},addColLeft:function(){var h=this.previewTable.getSelectedRectCoord().sx;if(h<0){alert("\ucd94\uac00\ub420 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(0!=h&&!c.canAddLeftCol(h,this.previewTable.getTdMatrix())){alert("\uc704\uc544\ub798\uc5d0 \ud569\uccd0\uc9c4 \uc5f4\uc774 \uc788\uc5b4\uc11c \uc5f4\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this._executeLayoutCommand("addColLeft",h)},addColRight:function(){var h=this.previewTable.getSelectedRectCoord().ex;if(h<0){alert("\ucd94\uac00\ub420 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(this.previewTable.getTdMatrix()[0].length-1!=h&&!c.canAddRightCol(h,this.previewTable.getTdMatrix())){alert("\uc704\uc544\ub798\uc5d0 \ud569\uccd0\uc9c4 \uc5f4\uc774 \uc788\uc5b4\uc11c \uc5f4\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");
return}this._executeLayoutCommand("addColRight",h)},removeRow:function(){var h=this.previewTable.getSelectedRectCoord();var k=h.sy;var j=h.ey;if(k<0){alert("\uc0ad\uc81c\ud560 \ud589\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(!c.canRemoveRow(h,this.previewTable.getTdMatrix())){alert("\uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \ud589\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.");return}if(c.isAllRowSelected(h,this.previewTable.getTdMatrix())){alert("\ubaa8\ub4e0 \ud589\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}this.previewTable.clearSelection();for(var l=k;l<=j;l++){this.previewTable.removeRow(k);this.realTable.removeRow(k)}this.previewTable.refreshCoord();this.previewTable.clearBoundary()},removeCol:function(){var h=this.previewTable.getSelectedRectCoord();var l=h.sx;var k=h.ex;if(l<0){alert("\uc0ad\uc81c\ud560 \uc5f4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return}if(!c.canRemoveCol(h,this.previewTable.getTdMatrix())){alert("\uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \uc5f4\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.");
return}if(c.isAllColSelected(h,this.previewTable.getTdMatrix())){alert("\ubaa8\ub4e0 \uc5f4\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");return}for(var j=l;j<=k;j++){this._executeLayoutCommand("removeCol",l)}},merge:function(){var h=this.previewTable.getSelectedRectCoord();if(h.sx<0||h.sy<0){alert("\ud569\uce60 \uce78\ub4e4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return false}if(this.previewTable.getTdMatrix()[h.sy][h.sx]==this.previewTable.getTdMatrix()[h.ey][h.ex]){alert("\ud569\uce60\uce78\uc744 \ub450\uce78\uc774\uc0c1 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return false}if(!c.canMerge(h,this.previewTable.getTdMatrix())){alert("\ud569\uce58\uae30\ub97c \uc218\ud589\ud560 \uc218 \uc5c6\ub294 \uc120\ud0dd\uc601\uc5ed\uc785\ub2c8\ub2e4.");return false}this.previewTable.clearSelection();this.previewTable.merge(h);this.previewTable.refreshCoord();this.realTable.merge(h);this.previewTable.clearBoundary()},split:function(){var h=this.previewTable.getSelectedRectCoord();
if(h.sx<0||h.sy<0){alert("\ub098\ub20c \uce78\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return false}if(!c.canSplit(h,this.previewTable.getTdMatrix())){alert("\ub098\ub204\uc5b4\uc9c8 \uce78\uc744 \ud55c\uce78\ub9cc \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return false}if(!c.isMergedCell(h,this.previewTable.getTdMatrix())){alert("\ub354\uc774\uc0c1 \ub098\ub20c \uc218 \uc5c6\ub294 \uce78\uc785\ub2c8\ub2e4. \ub450\uce78\uc774\uc0c1 \ud569\uccd0\uc9c4 \uce78\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");return false}this.previewTable.clearSelection();this.previewTable.split(h);this.previewTable.refreshCoord();this.realTable.split(h);this.previewTable.clearBoundary()},changeCellStyle:function(k,j){var h=this.previewTable.getSelectedRectCoord();this.previewTable[k](h,j,this.borderRange);this.realTable[k](h,j,this.borderRange)},_changeTextAlign:function(j){var h=this.previewTable.getSelectedRectCoord();this.previewTable.changeTextAlign(h,j);this.realTable.changeTextAlign(h,j)},changeTextAlignLeft:function(){this._changeTextAlign("left")
},changeTextAlignCenter:function(){this._changeTextAlign("center")},changeTextAlignRight:function(){this._changeTextAlign("right")},_changeTextValign:function(j){var h=this.previewTable.getSelectedRectCoord();this.previewTable.changeTextValign(h,j);this.realTable.changeTextValign(h,j)},changeTextValignTop:function(){this._changeTextValign("top")},changeTextValignMiddle:function(){this._changeTextValign("middle")},changeTextValignBottom:function(){this._changeTextValign("bottom")},applyTemplateStyle:function(h){if(isNaN(h)){return}this.previewTable.applyTemplateStyle(h);this.realTable.applyTemplateStyle(h)},setBorderRange:function(h){this.borderRange=h},cancel:function(){this.blackBox.hide()},done:function(){$tom.insertAt(this.realTable.getTable(),this.config.table);$tom.remove(this.config.table);this.blackBox.hide()}});Trex.Menu.Table.TableEdit.TableEditor=Trex.Class.create({$const:{BORDER_STYLE:"1px solid #000"},initialize:function(j){this.elTable=this.createTable(j.table);this.initTdMatrix();
this.tableConfig={};var h=j.editor.getCanvas();this.doc=h.getCurrentPanel().getDocument()},initTdMatrix:function(){var h=new Trex.Tool.Table.TableCellMatrixer(this.elTable);this.tdMatrix=h.getTdMatrix();this.rowSize=h.getRowSize();this.colSize=h.getColSize()},createTable:function(h){return h.cloneNode(true)},setTdBorderStyle:function(k,j,l){var h=Trex.Menu.Table.TableEdit.TableEditor.BORDER_STYLE;$tx.setStyle(k,{borderRight:h,borderBottom:h,borderTop:(j)?h:"",borderLeft:(l)?h:""})},createTd:function(j){var k=this.doc.createElement("td");k.innerHTML="&nbsp;";for(var h in j){k.setAttribute(h,j[h])}return k},createTr:function(){var j=this.doc.createElement("tr");for(var h=0;h<this.colSize;h++){var k=this.createTd({});this.setTdBorderStyle(k,false,(h==0));j.appendChild(k)}return j},addRowUpper:function(h){this._addRow(h);if(h==0){for(var j=0;j<this.colSize;j++){$tx.setStyle(this.tdMatrix[0][j],{borderTop:"1px solid #000"});$tx.setStyle(this.tdMatrix[1][j],{borderTop:"none"})}}},addRowBelow:function(h){this._addRow(h,true)
},_addRow:function(l,j){var m=dGetties(this.elTable,"tr");var k=m[l];var h=this.createTr();$tom[(j)?"insertNext":"insertAt"](h,k);if(j){l++}this.tdMatrix.splice(l,0,$tom.collectAll(h,"td"));this.rowSize++},addColLeft:function(h){this._addCol(h);if(h==0){for(var j=0;j<this.rowSize;j++){$tx.setStyle(this.tdMatrix[j][1],{borderLeft:"none"})}}},addColRight:function(h){this._addCol(h,true)},_resizeAllCellWidth:function(){var l=$tx.getStyle(this.elTable,"width")||this.elTable.getAttribute("width")||389;l=parseInt(l);if(!l){return}var m=Math.round(l/this.colSize,0);for(var k=0;k<this.rowSize;k++){for(var h=0;h<this.colSize;h++){$tx.setStyle(this.tdMatrix[k][h],{width:(m*d.getColSpan(this.tdMatrix[k][h])).toPx()})}}},_addCol:function(k,o){var j=[];var n=null;var m=function(u,q,t,r){var p=q;while(t[u][p]&&j.include(t[u][p])){p+=(r)?-1:1}j.push(t[u][p]);return t[u][p]};for(var l=0;l<this.rowSize;l++){n=m(l,k,this.tdMatrix,o);var h=this.createTd({});this.setTdBorderStyle(h,l==0,k==0);$tom[(!o)?"insertAt":"insertNext"](h,n);
this.tdMatrix[l].splice(o?k+1:k,0,h)}this.colSize++;this._resizeAllCellWidth()},removeRow:function(h){var k=this.tdMatrix[h][0].parentNode;$tom.remove(k);this.tdMatrix.splice(h,1);this.rowSize--;if(h==0){for(var j=0;j<this.colSize;j++){this.setTdBorderStyle(this.tdMatrix[0][j],h==0,j==0)}}},removeCol:function(h){for(var j=0;j<this.rowSize;j++){$tom.remove(this.tdMatrix[j][h]);this.tdMatrix[j].splice(h,1)}this.colSize--;for(var j=0;j<this.rowSize;j++){if(this.tdMatrix[j][h]){this.setTdBorderStyle(this.tdMatrix[j][h],j==0,h==0)}}},merge:function(u){var w=0;for(var o=u.sx;o<=u.ex;o){var p=d.getColSpan(this.tdMatrix[u.sy][o]);w+=p;o+=p}var k=0;for(var o=u.sy;o<=u.ey;o){var r=d.getRowSpan(this.tdMatrix[o][u.sx]);k+=r;o+=r}var t=this.createTd({rowSpan:k,colSpan:w});var q=function(j){return(j.parentNode&&j.parentNode.nodeType!="11")};this.setTdBorderStyle(t,u.sy==0,u.sx==0);var h=this.tdMatrix[u.sy][u.sx];$tom.insertAt(t,h);var l="";for(var o=u.sy;o<=u.ey;o++){var n="";for(var m=u.sx;m<=u.ex;m++){if(q(this.tdMatrix[o][m])){$tom.remove(this.tdMatrix[o][m]);
n+=this.tdMatrix[o][m].innerHTML+""}this.tdMatrix[o][m]=t}l+=n+""}t.innerHTML=l;this._resizeAllCellWidth()},split:function(y){var x=this;var k=function(z,j){if(!x.tdMatrix[z][j-1]){return null}else{if(d.getRowSpan(x.tdMatrix[z][j-1])>1){return k(z,j-1)}else{return x.tdMatrix[z][j-1]}}};var q=y.sy;var l=y.sx;var m=this.tdMatrix[q][l];var t=m.innerHTML;var w=d.getRowSpan(m);var r=d.getColSpan(m);var u=$tom.collectAll(this.elTable,"tr");for(var p=q;p<q+w;p++){for(var o=l;o<l+r;o++){var n=this.createTd({});this.setTdBorderStyle(n,p==0,o==0);var h=k(p,o);if(h){$tom.insertNext(n,h)}else{$tom.insertFirst(u[p],n)}this.tdMatrix[p][o]=n}}this.tdMatrix[q][l].innerHTML=t;$tom.remove(m);this._resizeAllCellWidth()},_changeTopBorderStyle:function(j,n,o){var m={};var k=(j.sy==0);m[(j.sy==0)?"borderTop"+n:"borderBottom"+n]=o;var h=(j.sy==0)?0:j.sy-1;for(var l=j.sx;l<=j.ex;l++){$tx.setStyle(this.tdMatrix[h][l],m)}},_changeBottomBorderStyle:function(j,m,n){var l={};l["borderBottom"+m]=n;var h=j.ey;for(var k=j.sx;
k<=j.ex;k++){$tx.setStyle(this.tdMatrix[h][k],l)}},_changeLeftBorderStyle:function(h,m,n){var l={};var o=(h.sx==0);l[(h.sx==0)?"borderLeft"+m:"borderRight"+m]=n;var j=(h.sx==0)?0:h.sx-1;for(var k=h.sy;k<=h.ey;k++){$tx.setStyle(this.tdMatrix[k][j],l)}},_changeRightBorderStyle:function(h,m,n){var l={};l["borderRight"+m]=n;var j=h.ex;for(var k=h.sy;k<=h.ey;k++){$tx.setStyle(this.tdMatrix[k][j],l)}},_changeInBorderStyle:function(h,n,o){var m={};for(var l=h.sy;l<=h.ey;l++){for(var k=h.sx;k<=h.ex;k++){m={};if(l!=h.ey){m["borderBottom"+n]=o}if(k!=h.ex){m["borderRight"+n]=o}$tx.setStyle(this.tdMatrix[l][k],m)}}},_changeOutBorderStyle:function(h,j,k){this._changeTopBorderStyle(h,j,k);this._changeBottomBorderStyle(h,j,k);this._changeLeftBorderStyle(h,j,k);this._changeRightBorderStyle(h,j,k)},_changeBorderStyle:function(m,j,k,l){var h=this._getValidRectCoord(m);this._removeTableBorderProperty();this._removeTableSpacingProperty();switch(l){case"top":this._changeTopBorderStyle(h,j,k);break;case"bottom":this._changeBottomBorderStyle(h,j,k);
break;case"left":this._changeLeftBorderStyle(h,j,k);break;case"right":this._changeRightBorderStyle(h,j,k);break;case"in":this._changeInBorderStyle(h,j,k);break;case"out":this._changeOutBorderStyle(h,j,k);break;case"all":this._changeInBorderStyle(h,j,k);this._changeOutBorderStyle(h,j,k);break;default:break}},_getValidRectCoord:function(h){return{sy:(h.sy<0)?0:h.sy,ex:(h.ex<0)?this.colSize-1:h.ex,ey:(h.ey<0)?this.rowSize-1:h.ey,sx:(h.sx<0)?0:h.sx}},_removeTableBorderProperty:function(){var j=parseInt(this.elTable.getAttribute("border"));if(j>0){this.elTable.setAttribute("border","0");var h=new Trex.Tool.Table.TemplateWizard();h.applyStyle(this.elTable,0)}},_removeTableSpacingProperty:function(){this.elTable.setAttribute("cellSpacing","0")},changeBorderColor:function(h,k,j){this._changeBorderStyle(h,"Color",k,j)},changeBorderType:function(h,k,j){this._changeBorderStyle(h,"Style",k,j)},changeBorderWidth:function(h,l,j){var k=l.toPx();this._changeBorderStyle(h,"Width",k,j)},_changeCellStyle:function(h,l,o){var p=this._getValidRectCoord(h);
var n={};n[l]=o;for(var m=p.sy;m<=p.ey;m++){for(var k=p.sx;k<=p.ex;k++){$tx.setStyle(this.tdMatrix[m][k],n)}}},changeBackColor:function(h,j){this._changeCellStyle(h,"backgroundColor",j)},changeTextAlign:function(h,j){this._changeCellStyle(h,"textAlign",j)},changeTextValign:function(h,j){this._changeCellStyle(h,"verticalAlign",j)},applyTemplateStyle:function(j){this._removeTableBorderProperty();this._removeTableSpacingProperty();var h=new Trex.Tool.Table.TemplateWizard();h.applyStyle(this.elTable,j)},getTdMatrix:function(){return this.tdMatrix},getTable:function(){return this.elTable}});Trex.Menu.Table.TableEdit.PreviewTable=Trex.Class.create({$extend:Trex.Menu.Table.TableEdit.TableEditor,initialize:function(h){var j=new Date().getTime();this.$super.initialize(h);this.tableConfig={};this.countOfExcuteResizeToParentClientWidth=0;this.boundary=a;this.boundary.clear();this.refreshCoord();this.clearTable();this.eventBinding()},createTd:function(h){var j=tx.td(h,"+");return j},createTr:function(){var j=tx.tr();
for(var h=0;h<this.colSize;h++){var k=this.createTd({});this.setTdBorderStyle(k,false,(h==0));j.appendChild(k)}return j},createTable:function(h){if($tx.msie||$tx.opera){var k=tx.div();var j=h.outerHTML;k.innerHTML=j;return k.firstChild}else{return h.cloneNode(true)}},clearTable:function(){if($tx.gecko){$tx.setStyle(this.elTable,{borderCollapse:"separate"})}this.elTable.setAttribute("width","");for(var k=0;k<this.rowSize;k++){for(var h=0;h<this.colSize;h++){d.clearContent(this.tdMatrix[k][h])}}this._resizeAllCellWidth()},clearSelection:function(){var l=this.boundary;if(l.top<0||l.left<0){return}for(var k=l.top;k<=l.bottom;k++){for(var h=l.left;h<=l.right;h++){d.setUnselect(this.tdMatrix[k][h])}}},setSelection:function(){var l=this.boundary;for(var k=l.top;k<=l.bottom;k++){for(var h=l.left;h<=l.right;h++){d.setSelect(this.tdMatrix[k][h])}}},_clearCoord:function(){for(var k=0;k<this.rowSize;k++){for(var h=0;h<this.colSize;h++){d.clearCoords(this.tdMatrix[k][h])}}},refreshCoord:function(){this._clearCoord();
for(var k=0;k<this.rowSize;k++){for(var h=0;h<this.colSize;h++){var l=this.tdMatrix[k][h].getAttribute("colClass");if(!l){d.setCoords(this.tdMatrix[k][h],k,h)}}}this.resizeToParentClientWidth()},resizeToParentClientWidth:function(){var j,h;j=this;h=this.elTable.parentNode;if(h&&0<h.clientWidth){this.elTable.style.width=h.clientWidth+"px"}else{if(this.countOfExcuteResizeToParentClientWidth<30){this.countOfExcuteResizeToParentClientWidth+=1;setTimeout(function(){j.resizeToParentClientWidth()},16);return}}this.countOfExcuteResizeToParentClientWidth=0},getSelectedRectCoord:function(){return this.boundary.getRectCoord()},clearBoundary:function(){this.boundary.clear()},eventBinding:function(){var j=this;var l=null;var h=function(p){var o=d.getEventElement(p,true);if(o){var n=d.getMinCoord(o);var q=d.getMaxCoord(o);j.clearSelection();j.boundary.init(n.x-1,n.y-1);j.boundary.changeBoundary(q.x-1,q.y-1);l=o}};var m=function(o){if(l){var n=d.getEventElement(o);if(n&&l!=n){var p=d.getMinCoord(n);l=n;
j.clearSelection();j.boundary.changeBoundary(p.x-1,p.y-1);j.setSelection()}}};var k=function(o){$tx.stop(o);var n=d.getEventElement(o);if(l){if(n==l){j.setSelection()}l=null}};setTimeout(function(){var o=$tom.collect(".tx-table-edit-container");var p=function(t){var u=$tx.element(t);if(u&&u.tagName){var q=u.className||"";var r=u.tagName.toLowerCase()||"";if(r=="div"&&(q.indexOf("tx-table-edit")>-1||q.indexOf("tx-preview")>-1)){j.clearSelection();j.boundary.clear();$tx.stop(t)}}};$tx.observe(o,"click",p);var n=function(q){if(l){l=null}};$tx.observe(o,"mouseup",n)},1000);$tx.observe(this.elTable,"mousedown",h);$tx.observe(this.elTable,"mouseover",m);$tx.observe(this.elTable,"mouseup",k)}})}());Trex.MarkupTemplate.add("table.hover.button",'<div class="tx-table-btn-layer"><a href="javascript:;" class="tx-table-edit-layout">\ud45c\ud3b8\uc9d1</a><a href="javascript:;" class="tx-table-edit-template">\ud45c\uc11c\uc2dd</a><a href="javascript:;" class="tx-table-remove">\uc0ad\uc81c</a></div>');
(function(){var c=TrexConfig.getUrl("#cdnhost/view/listset/5.1/tabletemplate.js");function a(d,k){if(!(typeof getTableTemplateList=="function")){var j=this;new (Trex.Class.create({$mixins:[Trex.I.JSRequester],initialize:function(){this.importScript(c,"utf-8",document,function(){a(d,k)})}}))();return}var h=new Trex.Menu.Table.TableEdit(d);if(k){h.showMenu(k)}}Trex.module("show button for action of table object",function(p,q,d,h,j){if(!q.tools.table){return}var l=20;var o=null;var m=Trex.MarkupTemplate.get("table.hover.button").evaluateAsDom({});$tom.insertFirst(h.wysiwygEl,m);var k=function(){var t=$tom.collect(m,"a.tx-table-edit-layout");$tx.observe(t,"click",function(w){if(o){a({editor:p,table:o})}return false});var r=$tom.collect(m,"a.tx-table-edit-template");$tx.observe(r,"click",function(w){if(o){a({editor:p,table:o},2)}return false});var u=$tom.collect(m,"a.tx-table-remove");$tx.observe(u,"click",function(w){if(o){if(!confirm("\ud14c\uc774\ube14\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){return false
}$tom.remove(o);h.history.saveHistory()}return false})};var n=function(t){if(h.getConfig().readonly){return}if(t.width>0&&t.height>0&&t.y>0&&h.getIframeHeight()-t.y){var r=t.y+h.getIframeTop()-l;if(r<0){r=-6}$tx.setStyle(m,{top:r.toPx(),left:(t.x).toPx()});$tx.show(m)}else{$tx.hide(m)}};q.tools.table.availableButton=function(t){var r=t.className;if(r.indexOf("txc-table")>-1){return true}if(r.indexOf("txc-")>-1||r.indexOf("tx-")>-1){return false}return false};h.observeMouseover("table",function(r,t){if(!r){return}if(q.tools.table.availableButton(r)){o=r;n(t)}else{o=null;$tx.hide(m)}throw $stop},function(){o=null;$tx.hide(m)});h.observeJob(Trex.Ev.__CANVAS_PANEL_SCROLLING,function(r){if(o){var t=this.getPositionByNode(o);n(t)}});k()})})();Trex.module("Add layer to display notice message on editor area before editing",function(d,h,j,c,a){if(a.initializedMessage){c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var m=tx.div({id:"tx-canvas-notice",className:"tx-canvas-notice"},a.initializedMessage);
$tx("tx_canvas").insertBefore(m,$tx("tx_loading"));var l=false;var k=function(){if(!l&&$tx("tx-canvas-notice")){l=true;$tx("tx_canvas").removeChild(m);c.focus()}};setTimeout(function(){$tx.observe(c.getPanel("html").getWindow(),"focus",k)},30);$tx.observe(m,"click",k);c.observeJob(Trex.Ev.__CANVAS_DATA_INITIALIZE,k);h.observeJob(Trex.Ev.__TOOL_CLICK,k)})}});Trex.module("hide editor 7 table buttons",function(){try{var a=$tx("tx_mergecells").parentNode.parentNode;var c=$tom.previous(a,".tx-bar-left");var h=$tom.previous(a,".tx-bar-middle");$tx.hide(c);$tx.hide(h);$tx.hide($tx("tx_cellslinecolor").parentNode.parentNode);$tx.hide($tx("tx_tablebackcolor").parentNode.parentNode);$tx.hide($tx("tx_tabletemplate").parentNode.parentNode);$tx.hide(a)}catch(d){}});Trex.Logger={reportToMagPie:function(a){var c;if(typeof(Editor)!=="undefined"){c=Editor}else{if(typeof(PopupUtil)!=="undefined"){var d=PopupUtil.getOpener();if(!d){return}c=opener.Editor}}if(c){c.fireJobs(Trex.Ev.__REPORT_TO_MAGPIE,a)}},confirmUpdateFlashPlayer:function(){var a=confirm("\uc774 \ud398\uc774\uc9c0\ub294 Adobe Flash Player 9.0  \uc774\uc0c1\uc758\n\ubc84\uc804\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\nFlash Player \uc5c5\ub370\uc774\ud2b8 \uc0ac\uc774\ud2b8\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");
if(a){window.moveTo(screen.availWidth*0.1,screen.availHeight*0.1);window.resizeTo(screen.availWidth*0.8,screen.availHeight*0.8);window.open("http://get.adobe.com/kr/flashplayer/","_blank");window.close()}},checkFlashLoading:function(c,n,d){d=d||5;var k=Trex.Flash.getPlayerVersion();if(!k){Trex.Logger.reportToMagPie("N_FLASH_NOT_DETECTED");return}(function a(){document.body.appendChild(tx.div({id:"tx_empty_wrap",style:{position:"absolute",top:"0",left:"0"}},tx.div({id:"tx_empty_div"})));Trex.Flash.load("http://editor.daum.net/coca/test.swf","tx_empty_div","empty",{width:"1",height:"1",paraObj:{quality:"low",swLiveConnect:"true"},attrObj:{bgcolor:"#484848"}})})();var l=0;var h=false;var m=false;var j=function(){try{if(!h){var o=Trex.Flash.get("empty");if(o){h=true}}if(!m){var q=Trex.Flash.get(c);if(q&&q.checkValidate){if(q.checkValidate()!=1){throw new Error("N_EDITOR_"+n+"_FLASH_INVALID_RETURN")}else{m=true}}}if(h&&m){return}if(++l==d){if(h&&!m){throw new Error("N_EDITOR_"+n+"_FLASH_NOTLOADED")
}else{if(!h&&m){throw new Error("N_EDITOR_TEST_FLASH_NOTLOADED")}else{throw new Error("N_EDITOR_BOTH_FLASH_NOTLOADED")}}}else{setTimeout(j,2000)}}catch(p){Trex.Logger.reportToMagPie(p.message||n)}};setTimeout(j,3000)}};(function(){window.onerror=function(a){return false}})();Trex.module("Error Event Binding",function(d,h,j,c,a){window.onerror=function(k){d.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,k);return false}});Trex.DaumLogin=Trex.Class.create({$const:{__GET_LOGIN_URL:function(){var a="https://logins.daum.net/accounts/loginform.do?popup=1&url=";var c=opener;if(c&&c.Editor&&c.Editor.getConfig().loginUrl){a=c.Editor.getConfig().loginUrl}return a},__RETURN_URL:"http://#abspagepath/pages/daumx/login.html?key=#key",__GET_REALHOST:function(){var c=window.location.host;var d=window.location.pathname;var a=d.split("/");a.pop();a.pop();a.pop();d=a.join("/");return c+d},__GET_FINALDEST:function(){try{var d=window.top.location.protocol;var a=window.top.location.host;return d+"//"+a}catch(c){return null
}}},$extend:Trex.NoticeBox,key:null,weave:function(a,d){this.key="_"+Math.floor(Math.random()*100000)+"_";var c=this;window["txLOGIN"+this.key]=function(){a();c.hide()};this.$super.weave(this.openPopup.bind(this),d);return this},openPopup:function(){var c=this.constructor.__GET_LOGIN_URL();c+=encodeURIComponent(this.constructor.__RETURN_URL.replace("#abspagepath",this.constructor.__GET_REALHOST()).replace("#key",this.key));var a=this.constructor.__GET_FINALDEST();if(a){c+="&finaldest="+encodeURIComponent(a)}var d=window.open(c,"minilogin","width=400,height=280,scrollbar=no,menubar=no");d.focus();return false}});Trex.install("editor.newLoginBox",function(d,h,j,c,a){d.newLoginBox=function(k){return new Trex.DaumLogin(k,d.getBlackBox())}});TrexConfig.addParameter("service","txService");TrexConfig.addParameter("ip","txIP");TrexConfig.addParameter("pgver","txVersion");TrexConfig.addParameter("farmCode","txFarmCode");Trex.install("attachbox.onFileCapacityInitialized @if sidebar.capacity.show = true",function(h,j,k,d,c){var a=h.getAttachBox();
if(c.sidebar.capacity.show===true){Object.extend(a,Trex.I.FileCapacity);a.onFileCapacityInitialized(c,d)}});TrexConfig.addSidebar("capacity",{show:true,maximum:3145728,filter:{use:"",sound:{title:"sound file",maximum:3145728,extensions:",mp3,wav,ogg,wma,mp4,ape,wmv,asf,ra,ram,"},movie:{title:"movie file",maximum:3145728,extensions:",wmv,mpg,avi,"}}});Trex.I.FileCapacity={onFileCapacityInitialized:function(k,j){var l=(k.initializedId)?k.initializedId:"";var n=k.sidebar.capacity;this.elList=$must("tx_attach_list"+l,"Trex.I.FileCapacity");n.uploaded=0;n.available=n.maximum;n.uploadedFileNum=0;var p=function(t,u){u=parseInt(u);if(isNaN(u)||n[t]==undefined){return false}n[t]=u;return n[t]};var m=this.elUploadedSize=$must("tx_attach_up_size"+l,"Trex.I.FileCapacity");m.innerText=n.uploaded.toByteUnit();var o=$must("tx_attach_max_size"+l,"Trex.I.FileCapacity");o.innerText=n.available.toByteUnit();this.checkAvailableCapacity=function(){return(n.uploaded<n.available)};this.checkInsertableSize=function(t){return(parseInt(n.uploaded,10)+parseInt(t,10)<=parseInt(n.available,10))
};this.getCapacity=function(t){return(n[t]||0)};this.changeAvailableCapacity=function(t){if(p("available",t)){o.innerText=t.toByteUnit();return t}return false};var r=function(u){var t=n.uploaded+u;if(t<0){t=0}n.uploaded=t;this.elUploadedSize.innerText=t.toByteUnit();if(n.group){this.elGroupUsedSize.innerText=(n.group.used+t).toByteUnit()}}.bind(this);var q=function(t){r(-1*t);n.uploadedFileNum-=1};var h=function(t){r(t);n.uploadedFileNum+=1};var a={};if(n.filter.use.length>0){n.filter.use.split(",").each(function(t){if(n.filter[t]){a[t]=Object.extend({},n.filter[t])}})}this.getFiltersNameByExt=function(u){var w=[];for(var t in a){if(a[t].extensions.indexOf(","+u.toLowerCase()+",")>-1){w.push(t)}}return w};this.getFilterExtensions=function(t){if(a[t]){return a[t].extensions}else{return null}};this.getFilterMaximum=function(t){if(a[t]){return a[t].maximum}else{return null}};this.getUploadedSizeByFilter=function(u){var w=0;var t=a[u].extensions;this.datalist.each(function(y){if(y.data&&y.data.filename){var x=y.data.filename.split(".").pop().toLowerCase();
if(t.indexOf(","+x+",")>-1){w+=y.data.filesize}}});return w};if(n.group){n.available=Math.min(n.maximum,n.group.maximum-n.group.used);var d=this.elGroupUsedSize=$must("tx_attach_group_used_size"+l,"Trex.I.FileCapacity");d.innerText=n.group.used.toByteUnit();var c=$must("tx_attach_group_max_size"+l,"Trex.I.FileCapacity");c.innerText=n.group.maximum.toByteUnit()}this.getGroupCapacity=function(t){return((n.group)?(n.group[t]||0):0)};this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_ADDED,function(t){if(t.actor.isCheckSize){h(t.data.filesize||0)}});this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_REMOVED,function(t){if(t.actor.isCheckSize){q(t.data.filesize||0)}});this.observeJob(Trex.Ev.__ENTRYBOX_ALL_ENTRY_REMOVED,function(){n.uploaded=0;n.uploadedFileNum=0});this.observeJob(Trex.Ev.__ENTRYBOX_ENTRY_REFRESH,function(u){if(!u.actor.isCheckSize){return}var t=u.data.filesize||0;if(u.deletedMark){q(t)}else{h(t)}})}};Trex.ResultBox=Trex.Class.create({$extend:Trex.EntryBox,initialize:function(c,a,d){this.typeMapper={};
this.sectionMapper={}},searchTypeBySection:function(d){var c=null;for(var a in this.typeMapper){if((c=this.typeMapper[a](d))!=null){break}}return c||d},searchSectionByType:function(c){var d=null;for(var a in this.sectionMapper){if((d=this.sectionMapper[a](c))!=null){break}}return d||c}});Trex.install("editor.getResultBox & sidebar.getResults",function(h,j,k,d,c){var a=new Trex.ResultBox(c,d,h);k.entryboxRegistry.search=a;h.getResultBox=function(){return a};k.getResults=a.getEntries.bind(a)});Trex.register("filter > searchers",function(l,n,a,d,h){var j=l.getResultBox();var c=l.getDocParser();var m=function(p){var o=j.datalist;o.each(function(q){p=p.replace(q.regHtml,function(t,r){return[r.replace(/<\/?table[^>]*>/gi,"").replace(/<\/?tbody[^>]*>/gi,"").replace(/<\/?tr[^>]*>/gi,"").replace(/<\/?td[^>]*>/gi,""),q.saveScript,q.dispText].join("\n")})});return p};var k=function(p){var o=j.datalist;o.each(function(q){p=p.replace(q.regText,function(r){return(q.dataHtml||"")})});return p};c.registerFilter("filter/search",{"text@load":function(o){return o
},"source@load":function(o){return o},"html@load":function(r){var t=[];var u=/id="?txc_([a-zA-Z]+)_([a-zA-Z]+)_([^"\s>]+)"?/;var q=/title="?([^"]+)"?/;var p=/image="?([^"]+)"?/;r=r.replace(/(<(?:blockquote|BLOCKQUOTE)[^>]*txc-info[^>]*>[\s\S]*?<\/(?:blockquote|BLOCKQUOTE)>)\s*<(?:x-)?(?:x)?(?:script|SCRIPT)[^>]*src="(http:\/\/editor\.[^"]+)"[^>]*><\/(?:x-)?(?:x)?(?:script|SCRIPT)>\s*<(?:x-)?(?:x)?(?:script|SCRIPT)[^>]*src="(http:\/\/cia\.[^"]+)"[^>]*><\/(?:x-)?(?:x)?(?:script|SCRIPT)>\s*<!--DB_EMBEDDING_START-->([\s\S]*?)<!--DB_EMBEDDING_END-->/gm,function(C,B,E,F,y){var D;var H,w,x;if((D=u.exec(B))!=null){H=D[1];w=D[2];x=D[3]}var A,G;if((D=q.exec(y))!=null){G=D[1]}if((D=p.exec(y))!=null){A=D[1]}var z=j.searchTypeBySection(H);t.push({_meta:{type:z,section:H,kind:w,dataUrl:F,viewUrl:E},key:x,title:G,image:A});return['<button class="tx-search tx-'+z+"-"+w+'">',B,"</button>"].join("")});var o;t.each(function(w){if((o=a.searchers[w._meta.type])!=null){o.execReload(w,r)}});return r},text4save:function(o){return o
},source4save:function(o){o=k(o);return m(o)},html4save:function(o){return m(o)},text2source:function(o){return o},text2html:function(o){return o},source2text:function(p){var o=j.datalist;o.each(function(q){p=q.getChangedContent(p,q.regText,"")});return p},source2html:function(o){return k(o)},html2text:function(p){var o=j.datalist;o.each(function(q){p=q.getChangedContent(p,q.regHtml,"")});return p},html2source:function(p){var o=j.datalist;o.each(function(q){p=p.replace(q.regHtml,function(t,r){q.dataHtml=t;return q.dispText})});return p}})});Trex.ResultEntry=Trex.Class.create({$extend:Trex.Entry,attrs:{align:"left"},initialize:function(h,k){var d=this;var c=this.actor=h;var j=this.canvas=c.canvas;var a=this.entryBox=c.entryBox;this.type=c.constructor.__Identity;this.setProperties(k)},setProperties:function(h){var d=Object.extend({},h._meta);var c=this.data=Object.extend({},h);c._meta=d;var a={type:this.actor.name,section:d.section,catename:this.actor.title,kind:d.kind,key:h.key,title:h.title,image:h.image,dataUrl:d.dataUrl,viewUrl:d.viewUrl};
this.dataUrl=d.dataUrl;this.viewUrl=d.viewUrl;this.dispHtml=(new Template(function(){return['<button class="tx-search tx-#{type}-#{kind}">',(d.viewHtml||'<blockquote id="txc_#{section}_#{kind}_#{key}" class="txc-info"></blockquote>'),"</button>"].join("")}())).evaluate(a);this.regHtml=new RegExp((new Template(function(){return["<(?:button|BUTTON)[^>]*>\\s*","(<(?:blockquote|BLOCKQUOTE)[^>]*txc_#{section}_#{kind}_#{key}[^>]*>","[\\S\\s]*?","</(?:blockquote|BLOCKQUOTE)>)","\\s*</(?:button|BUTTON)>"].join("")}())).evaluate(a),"gm");this.dispText=(new Template(function(){return["<!--DB_EMBEDDING_START-->",'<TXDB name="#{catename}" id="txd_#{section}_#{kind}_#{key}">','\t<TXDBITEM title="#{title}"></TXDBITEM>','\t<TXDBITEM image="#{image}"></TXDBITEM>',"</TXDB>","<!--DB_EMBEDDING_END-->"].join("\n")}())).evaluate(a);this.regText=new RegExp((new Template(function(){return["<!--DB_EMBEDDING_START-->\\s*","<(?:txdb|TXDB)[^>]*txd_#{section}_#{kind}_#{key}[^>]*>","[\\S\\s]*?","\\s*<!--DB_EMBEDDING_END-->"].join("")
}())).evaluate(a),"gm");this.saveScript=(new Template(function(){return['<script src="#{viewUrl}" charset="utf-8" type="text/javascript"><\/script>','<script src="#{dataUrl}" charset="utf-8" type="text/javascript"><\/script>'].join("")}())).evaluate(a)},remove:function(){var a=this.canvas.getContent();if(this.canvas.canHTML()){a=a.replace(this.regHtml,"");this.canvas.setContent(a)}else{a=a.replace(this.regText,"");this.canvas.setContent(a)}},register:function(){if(this.canvas.canHTML()){this.canvas.pasteContent(this.dispHtml,true)}else{this.canvas.pasteContent(this.dispText+"\n")}this.reload()},reload:function(){var a=this;this.imports(this.viewUrl,function(){a.imports(a.dataUrl)})},imports:function(a,c){this.canvas.importScript(a,c)}});TrexConfig.addAdaptor("alxa",{xaHost:"#cmnhost",xaPath:"/alxa/1.18"},function(a){var c=TrexConfig.getAdaptor("alxa",a);c.xaHost=TrexConfig.getUrl(c.xaHost);c.xaService=TrexConfig.getUrl("#service");c.xaIP=TrexConfig.getUrl("#ip")});Trex.install("sidebar.getSearcher",function(j,k,l,d,c){var a=j.getResultBox();
var h=l.searchers={};l.getSearcher=function(n){if(h[n]!=null){return h[n]}else{return h}};var m=TrexConfig.getAdaptor("alxa");new (Trex.Class.create({$mixins:[Trex.I.JSRequester],initialize:function(){this.importScript(m.xaHost+m.xaPath+"/js/searcher.js","utf-8",document,this.runAlxa.bind(this))},runAlxa:function(){new Searcher(m).onClick(function(n){if(h[n._meta.type]){h[n._meta.type].insertHandler(n)}})}}))()});Trex.install("new searchers",function(k,l,a,c,d){var h=k.getResultBox();var n=a.searchers;for(var j in Trex.Searcher){var m=Trex.Searcher[j]["__Identity"];if(m){if(!l.tools[m]){}n[m]=new Trex.Searcher[j](k,h,d)}}});Trex.Searcher=Trex.Class.draft({$extend:Trex.Actor,$mixins:[Trex.I.FHRequester],initialize:function(j,c,a){var k=this;this.editor=j;var l=this.canvas=j.getCanvas();var h=this.entryBox=c;var d=((a.initializedId)?a.initializedId:"");var n=this.name;var o=this.title;var m=this.config=TrexConfig.getSearcher(this.constructor.__Identity,a);this.getDataForEntry=function(p){return p
};this.imported=false;this.insertHandler=this.insertHandler.bind(this)},execute:function(){if(this.wysiwygonly&&!this.canvas.canHTML()){alert(TXMSG("@attacher.insert.alert"));return}try{Searcher.click(this.name)}catch(a){}return false},insertHandler:function(c){var a=c._meta;this.execAttach(c);this.editor.fireJobs(Trex.Ev.__PASTE_SEARCHRESULT,a.type,a.kind,c.key)},createEntry:function(c,a){var d=this.constructor.__Identity;if(a){d=a}return new Trex.ResultEntry(this,c)}});TrexMessage.addMsg({"@book.title":"\ucc45","@cinema.title":"\uc601\ud654","@music.title":"\uc74c\uc545","@people.title":"\uc778\ubb3c","@play.title":"\uacf5\uc5f0","@restaurant.title":"\ub9db\uc9d1","@shopping.title":"\uc0c1\ud488","@travel.title":"\uc5ec\ud589\uc9c0","@tv.title":"TV"});Trex.register("different sectionid of searcher",function(h,j,k,d,c){var a=h.getResultBox();a.typeMapper.book=function(l){return(l==="book")?"book":null};a.sectionMapper.book=function(l){return(l==="book")?"book":null};a.typeMapper.cinema=function(l){return(l==="movie")?"cinema":null
};a.sectionMapper.cinema=function(l){return(l==="cinema")?"movie":null};a.typeMapper.music=function(l){return(l==="album"||l==="song"||l==="artist")?"music":null};a.sectionMapper.music=function(l){return(l==="music")?"music":null};a.typeMapper.people=function(l){return(l==="person")?"people":null};a.sectionMapper.people=function(l){return(l==="people")?"person":null};a.typeMapper.play=function(l){return(l==="play")?"play":null};a.sectionMapper.play=function(l){return(l==="play")?"play":null};a.typeMapper.restaurant=function(l){return(l==="place"||l==="location")?"restaurant":null};a.sectionMapper.restaurant=function(l){return(l==="restaurant")?"location":null};a.typeMapper.shopping=function(l){return(l==="product")?"shopping":null};a.sectionMapper.shopping=function(l){return(l==="shopping")?"product":null};a.typeMapper.travel=function(l){return(l==="place"||l==="location")?"travel":null};a.sectionMapper.travel=function(l){return(l==="travel")?"location":null};a.typeMapper.tv=function(l){return(l==="tv")?"tv":null
};a.sectionMapper.tv=function(l){return(l==="tv")?"tv":null}});(function(){var h=["book","cinema","music","people","play","restaurant","shopping","travel","tv"];var d=function(k){TrexConfig.addTool(k,{wysiwygonly:true,sync:false,status:false});TrexConfig.addSearcher(k,{});var j=k.camelize();Trex.Tool[j]=Trex.Class.create({$const:{__Identity:k},$extend:Trex.Tool,oninitialized:function(l){var m=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){m.getSidebar().getSearcher(this.constructor.__Identity).execute()})}});Trex.Searcher[j]=Trex.Class.create({$const:{__Identity:k},$extend:Trex.Searcher,name:k,title:TXMSG("@"+k+".title")})};for(var c=0,a=h.length;c<a;c++){d(h[c])}})();Trex.install("editor.getAutoSaver",function(h,j,k,d,c){var a;if(c.save.autosave.use){a=new Trex.AutoSave(h,j,k,d,c)}h.getAutoSaver=function(){return a}});TrexConfig.addSave("autosave",{use:true,adaptor:"fanta",avkey:"test",avMaxCnt:10,listSize:10,useAutoLoad:true,term:30000,fireonunload:true,excludeFields:[]},function(a){var c=TrexConfig.getSave("autosave",a);
c.term=c.term?c.term:30000;c.url=TrexConfig.getUrl(c.url);c.param=TrexConfig.getUrl(c.param);c.initializedId=a.initializedId?a.initializedId:"";c.avMaxCnt=c.avMaxCnt||20;var d=c.excludeFields||[];c.excludeFields=(typeof d=="string")?[d]:d});TrexMessage.addMsg({"@saver.autosave.message":"\uc790\ub3d9 \uc800\uc7a5 \uc644\ub8cc (#{time})","@saver.confirm.loading":"\uc790\ub3d9 \uc800\uc7a5 \uae00\uc744 \ubd88\ub7ec\uc624\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","@saver.loading.message":"\uc790\ub3d9 \uc800\uc7a5 \ub85c\ub529 \uc911"});Trex.AutoSave=Trex.Class.create({$const:{__LIST_TPL:["<ul>","#{for:list}","<li><p>","<button>\uc0ad\uc81c</button>","<span>#{upddate}</span>","<strong>#{category}</strong>",'<a href="javascript:;">#{title}</a>',"</p></li>","#{/for:list}","</ul>","<div></div>"].join("\n"),__NAVI_TPL:["#{for:pages}","<span class='#{className}'><a href='javascript:;'>#{page}</a></span>","#{/for:pages}"].join("")},$mixins:[Trex.I.JobObservable,Trex.I.Runnable],editor:null,toolbar:null,sidebar:null,canvas:null,config:null,form:null,initialize:function(n,r,a,d,h){var m=this;
var p=this.config=TrexConfig.getSave("autosave",h);if(!p.use){return}this.editor=n;this.toolbar=r;this.sidebar=a;this.canvas=d;this.form=n.getForm();this.avMaxCnt=p.avMaxCnt;this.listSize=p.listSize;this.isChanged=true;this.isDisplayed=false;this.isWorking=false;this.checkedOver=false;this.curCount=0;this.curSeq=0;this.curList=[];this.curPage=1;this.initAdaptor(this.config.adaptor,h);var l=((h.initializedId)?h.initializedId:"");this.elHolder=$tx("tx_canvas"+l);var q=this.elBox=$must("tx_autosave"+l,"Trex.AutoSave");this.elListBox=$tom.collect(q,"dl");this.elMsg=$must("tx_autosave_msg"+l,"Trex.AutoSave");this.msgTimer=new Trex.Timer(function(){m.hideMessage()});var t="";var o=function(){var u=d.getContent().trim();if(u!=t){m.save();t=u}};var k=function(){m.save()};d.observeKey({ctrlKey:true,altKey:false,shiftKey:false,keyCode:83},k);n.observeKey({ctrlKey:true,altKey:false,shiftKey:false,keyCode:83},k);if(p.fireonunload){d.observeJob(Trex.Ev.__CANVAS_BEFORE_UNLOAD,this.save.bind(this))}var j=function(){m.hideList()
};d.observeJob(Trex.Ev.__CANVAS_PANEL_CLICK,j);d.observeJob(Trex.Ev.__CANVAS_SOURCE_PANEL_CLICK,j);d.observeJob(Trex.Ev.__CANVAS_TEXT_PANEL_CLICK,j);r.observeJob(Trex.Ev.__TOOL_CLICK,j);var c=$tom.collect(this.elBox,"p a");$tx.observe(c,"click",function(){m.toggleList();return false});d.reserveJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(u){m.count();new Trex.Repeater(o).start(p.term)},1500)},initAdaptor:function(a,d){var c=this.config;switch(a){case"stub":this.adaptor=new Trex.AutoSave.Stub();break;case"fanta":this.adaptor=new Trex.AutoSave.Fanta(TrexConfig.getAdaptor("fanta",d));break;case"service":this.adaptor=new Trex.AutoSave.Service(c);break;default:break}if(this.adaptor){this.adaptor.$callee=this}},getAdaptor:function(){return this.adaptor},getCurSeq:function(){return this.curSeq},count:function(){if(!this.adaptor.count){return}var c=this;var a=$tom.collect(this.elBox,"p");a.className="loading";try{this.adaptor.count({success:function(h){a.className="";c.curCount=Math.min(h,c.avMaxCnt);
c.drawCount()},failure:function(){a.className=""}})}catch(d){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,d);return false}return true},list:function(){if(!this.adaptor.list){return}if(!this.isChanged){this.drawList();return}var h=$tom.collect(this.elListBox,"dd");$tom.html(h,"");var a=$tom.collect(this.elListBox,"dt span");$tom.html(a,this.avMaxCnt);var c=this;try{this.adaptor.list({success:function(n){var m=[];var k=Math.min(n.length,c.avMaxCnt);c.curCount=k;for(var j=0;j<k;j++){m.push(n.shift())}m.each(function(o){o.meta=Object.toDecode(o.meta)});c.curList=m;c.isChanged=true;c.drawList();if(n.length>0){var l=n;if(!c.checkedOver){l.each(function(o){c.throwOver(o)});c.checkedOver=true;c.startThread(20000)}}},retry:function(){c.count();c.list()},failure:function(){c.curList=[]}})}catch(d){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,d);return false}return true},load:function(a,d){if(!this.adaptor.load){return}if(!d){if(!confirm(TXMSG("@saver.confirm.loading"))){return}this.save()
}var c=this;try{this.adaptor.load({seq:a},{success:function(o){if(!o){return}c.curSeq=a;c.setDataByJSON(Object.toDecode(o));var j=null;var n=[];for(var m=0,l=c.curList.length;m<l;m++){var k=c.curList.shift();if(k.seq==a){j=k}else{n.push(k)}}n.unshift(j);c.curList=n;c.hideList();c.isChanged=true;c.drawList();c.showMessage(TXMSG("@saver.loading.message"));c.msgTimer.start(1500);if(typeof(postAutoLoad)!="undefined"){postAutoLoad(o)}},retry:function(){c.load(a)},failure:function(){c.curSeq=0}})}catch(h){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,h);return false}return true},save:function(){if(!this.adaptor.save){return true}if(this.isWorking){return true}var d=this.curSeq;var c=this.getDataAsJSON();if(c==null){if(d==0){return true}}var h=this.getMetaAsJSON();var a=this;try{this.isWorking=true;this.adaptor.save({seq:d,content:Object.toJSON(Object.toEncode(c)),meta:Object.toJSON(Object.toEncode(h))},{success:function(k){var l=new DateFormat("yyyyMMddHHmmss").format(new Date());var m=(a.curList||[]).detect(function(o){return(o.seq==k)
});if(m){Object.extend(m,{upddate:l,meta:h})}else{a.curList.unshift({seq:k,credate:l,upddate:l,meta:h});a.curSeq=k;a.curCount++;if(a.curCount>a.avMaxCnt){a.throwOver(a.curList.pop());a.curCount--}a.drawCount();a.isChanged=true}if(a.isDisplayed){a.drawList()}var n=new Template(TXMSG("@saver.autosave.message")).evaluate({time:new DateFormat("HH:mm:ss").format(new Date())});a.showMessage(n);a.msgTimer.start(1500);if(typeof(completeAutoSave)!="undefined"){completeAutoSave(n)}a.isWorking=false},retry:function(){a.isWorking=false;a.count();a.save()},failure:function(){a.isWorking=false}})}catch(j){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,j);return false}return true},discard:function(a){if(!this.adaptor.discard){return}var c=this;try{this.adaptor.discard({seq:a},{success:function(){c.curList=(c.curList||[]).select(function(h){return(h.seq!=a)});if(c.curSeq==a){c.curSeq=0}c.curCount=c.curList.length;c.drawCount();c.isChanged=true;if(c.isDisplayed){c.drawList()}},retry:function(){c.count();
c.discard(a)},failure:function(){}})}catch(d){this.editor.fireJobs(Trex.Ev.__RUNTIME_EXCEPTION,d);return false}return true},throwOver:function(c){if(!this.adaptor.discard){return}var a=this;this.putThread(function(){a.adaptor.discard({seq:c.seq},{success:function(){},retry:function(){},failure:function(){}})})},toggleList:function(a){if(this.isDisplayed){this.hideList()}else{this.showList()}},showList:function(){this.list();$tx.show(this.elListBox);this.isDisplayed=true;this.fireJobs(Trex.Ev.__AUTOSAVER_LIST_OPENED)},hideList:function(){$tx.hide(this.elListBox);this.isDisplayed=false},showMessage:function(c){var d=this.elMsg;var a=$tom.getPosition(this.elHolder);d.innerHTML=c;d.style.left=(a.width-168).toPx();$tx.show(d)},hideMessage:function(){$tx.hide(this.elMsg)},drawCount:function(){var a=$tom.collect(this.elBox,"p span");a.innerHTML="("+Math.min(this.curCount,this.avMaxCnt)+")"},drawList:function(h){var a=this.curList.length;if(a==0){$tom.collect(this.elListBox,"dd").innerHTML="<div></div>";
$tx.addClassName($tom.collect(this.elListBox,"dd"),"tx-autosave-empty");return}$tx.removeClassName($tom.collect(this.elListBox,"dd"),"tx-autosave-empty");var d=h||1;var c=this.listSize;if(this.isChanged||this.curPage!=d){this.createList(d);if(a>c){this.createNavi(d)}this.isChanged=false}else{this.updateList(d)}},createList:function(m){var h=this;var n=this.curList.length;var a=this.listSize;var d=Math.max(a*(m-1),0);var l=Math.min(d+a,n);var j=this.curList.slice(d,l);var c=$tom.collect(this.elListBox,"dd");new Template(this.constructor.__LIST_TPL).evaluateToDom({list:j},c);var k=0;$tom.collectAll(c,"li").each(function(o){h.updateItem(o,j[k]);$tx.observe($tom.collect(o,"a"),"click",function(p){h.load(j[p].seq);return false}.bind(h,k));$tx.observe($tom.collect(o,"button"),"click",function(p){h.discard(j[p].seq)}.bind(h,k));if(k++==j.length-1){o.className="last"}});this.curPage=m},createNavi:function(m){var d=this;var o=this.curList.length;var a=this.listSize;var k=1;var n=Math.ceil(o/a);var h=[];
for(var j=k;j<n+1;j++){h.push({page:j,className:((j==m)?"current":"")})}var c=$tom.collect(this.elListBox,"div");new Template(this.constructor.__NAVI_TPL).evaluateToDom({pages:h},c);var l=0;$tom.collectAll(c,"a").each(function(p){$tx.observe(p,"click",function(q){d.drawList(q+1);return false}.bind(d,l));l++});$tx.show(c)},updateList:function(m){var h=this;var n=this.curList.length;var a=this.listSize;var d=Math.max(a*(m-1),0);var l=Math.min(d+a,n);var j=this.curList.slice(d,l);var k=0;var c=$tom.collect(this.elListBox,"dd");$tom.collectAll(c,"li").each(function(o){h.updateItem(o,j[k]);k++})},updateItem:function(c,d){$tom.collect(c,"span").innerHTML=new DateFormat("yyyy.MM.dd HH:mm").format(new DateFormat("yyyyMMddHHmmss").parse(d.upddate));if(d.meta.title){var a=""+d.meta.title;a=a.trim();a=Trex.String.htmlspecialchars(a);if(22<a.length){a=a.substr(0,20)+"..."}if(!a){a="\uc81c\ubaa9\uc5c6\uc74c"}$tom.collect(c,"a").innerHTML=a}if(d.meta.category){$tom.collect(c,"strong").innerHTML=Trex.String.htmlspecialchars(d.meta.category);
$tx.show($tom.collect(c,"strong"))}else{$tx.hide($tom.collect(c,"strong"))}},getMetaAsJSON:function(){var a;if(typeof(makeAutoSaveMeta)!="undefined"){a=makeAutoSaveMeta()}else{if(typeof(makeAutoSaveMate)!="undefined"){a=makeAutoSaveMate()}else{a={title:"\uc81c\ubaa9\uc5c6\uc74c"}}}return a||{}},getDataAsJSON:function(){var a=this.excludeFieldData(this.editor.getDataAsJSON());if(a&&a.formfield&&a.formfield.isAutosave){a.formfield.isAutosave=true}return a},setDataByJSON:function(a){this.editor.setDataByJSON(this.excludeFieldData(a))},excludeFieldData:function(a){if(a&&a.formfield){this.config.excludeFields.each(function(c){a.formfield[c]=null;delete a.formfield[c]})}return a}});TrexConfig.addAdaptor("fanta",{url:"http://file.uf.daum.net/autosave_list",param:"service=#farmCode&filename=#avkey&asid=#avkey"},function(a){var c=TrexConfig.getSave("autosave",a);var d=TrexConfig.getAdaptor("fanta",a);d.useAutoLoad=c.useAutoLoad;d.param=TrexConfig.getUrl(d.param,{avkey:c.avkey})});TrexMessage.addMsg({"@saver.login.head":"\uc790\ub3d9 \uc800\uc7a5 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","@saver.login.body":"\ub85c\uadf8\uc544\uc6c3 \ub418\uc5b4, \ud574\ub2f9 \uae00\uc744 \uc790\ub3d9 \uc800\uc7a5 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.<br>\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\ud574 \uc8fc\uc2dc\uae38 \ubc14\ub78d\ub2c8\ub2e4."});
Trex.AutoSave.Fanta=Trex.Class.create({$const:{__ERROR_MAP:{"321":"WRONG_PARAMETER","403":"AUTH_FORBIDDEN","404":"FILE_NOT_EXISTS","521":"I/O error"}},$mixins:[Trex.I.FHRequester],$callee:null,initialize:function(a){this.param=a.param;this.url=a.url},count:function(a){this.sendRequest("post",this.url,this.param+"&type=count",true,function(d){var c=(d||"0").toNumber();if(a.success){a.success(c)}},function(){if(a.failure){a.failure()}})},list:function(handlers){var _adaptor=this;this.sendRequest("post",this.url,this.param+"&type=list",true,function(response){var _list=[];var _xmlDoc=xCreate(response);var _result=xGetty(_xmlDoc,"/result/header/response_code").xText("500");if(_result=="200"){xGetties(_xmlDoc,"/result/items/item").each(function(ndItem){var meta={};try{meta=eval("("+xGetty(ndItem,"meta").xText("{}")+")")}catch(e){meta={title:"\uc81c\ubaa9\uc5c6\uc74c",category:""}}_list.push({seq:xGetty(ndItem,"seq").xText(0),credate:xGetty(ndItem,"credate").xText(""),upddate:xGetty(ndItem,"upddate").xText(""),meta:meta})
});if(handlers.success){handlers.success(_list)}}else{if(_result=="403"){_adaptor.goLogin(handlers.retry,handlers.failure)}else{if(handlers.failure){handlers.failure()}_adaptor.reportError("list",_result)}}},function(){if(handlers.failure){handlers.failure()}})},load:function(param,handlers){var _adaptor=this;var _seq=((param.seq>0)?param.seq:"");this.sendRequest("post",this.url,this.param+"&type=load&seq="+_seq,true,function(response){var _xmlDoc=xCreate(response);var _result=xGetty(_xmlDoc,"/result/header/response_code").xText("500");if(_result=="200"){var _contents=xGetty(_xmlDoc,"/result/contents").xText("{}");if(handlers.success){handlers.success(eval("("+_contents+")"))}}else{if(_result=="403"){_adaptor.goLogin(handlers.retry,handlers.failure)}else{if(handlers.failure){handlers.failure()}_adaptor.reportError("load",_result)}}},function(){if(handlers.failure){handlers.failure()}})},save:function(k,a){var j=this;var d=((k.seq>0)?k.seq:"");var c=k.content;var h=k.meta;this.sendRequest("post",this.url,this.param+"&type=save&seq="+d+"&contents="+encodeURIComponent(c)+"&meta="+encodeURIComponent(h),true,function(n){var m=xCreate(n);
var o=xGetty(m,"/result/header/response_code").xText("500");if(o=="200"){var l=xGetty(m,"/result/seq").xText(0);if(a.success){a.success(l)}}else{if(o=="403"){j.goLogin(a.retry,a.failure)}else{if(a.failure){a.failure()}j.reportError("save",o)}}},function(){if(a.failure){a.failure()}})},discard:function(h,a){var d=this;var c=((h.seq>0)?h.seq:"");this.sendRequest("post",this.url,this.param+"&type=delete&seq="+c,true,function(k){var j=xCreate(k);var l=xGetty(j,"/result/header/response_code").xText("500");if(l=="200"){if(a.success){a.success()}}else{if(l=="403"){d.goLogin(a.retry,a.failure)}else{if(a.failure){a.failure()}d.reportError("delete",l)}}},function(){if(a.failure){a.failure()}})},goLogin:function(c,a){if(!c){return}if(!this.login){this.login=this.$callee.editor.newLoginBox({head:TXMSG("@saver.login.head"),body:TXMSG("@saver.login.body"),confirm:"http://i1.daumcdn.net/icon/editor/btn_a_login.gif?rv=1.0.1"}).weave(c,a)}this.login.show()},reportError:function(d,c){var a=Trex.AutoSave.Fanta.__ERROR_MAP[c]||c;
Trex.Logger.reportToMagPie("AUTOSAVE_ERROR+"+d+"+"+a+"&param="+this.param.replace(/=/g,">").replace(/&/g,"+"))}});Trex.register("filter > clear dummy markup",function(p,t,a,j,l){function o(y){y=y.replace(/<\?xml[^>]*microsoft[^>]*>/g,"");if(y.indexOf("<o:p>")>-1){y=y.replace(/<o:p>|<\/o:p>/g,"")}if(y.indexOf("lang=")>-1){y=y.replace(/lang="?EN-US"?/g,"")}if(y.indexOf("MsoNormal")>-1){y=y.replace(/class="?MsoNormal"?/g,"")}if(y.indexOf("mso-bidi-font-size")>-1){y=y.replace(/mso-bidi-font-size:\s*[\d\.]+pt/g,"")}return y}function k(y){if(y.indexOf("<body")>-1||y.indexOf("<BODY")>-1){y=y.replace(/<body[^>]*>|<\/body>/g,"")}if(y.indexOf("<html")>-1||y.indexOf("<HTML")>-1){y=y.replace(/<html[^>]*>|<\/html>/g,"")}if(y.indexOf("</>")>-1){y=y.replace(/<\/>/g,"")}return y}function q(y){if(y.indexOf("</td></tr></tbody></table>")>-1||y.indexOf("</TD></TR></TBODY></TABLE>")>-1){y=y.replace(/(<\/TD><\/TR><\/TBODY><\/TABLE>\s*){4,}/gi,"</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table>")
}return y}function r(y){if(y.search(/<style/i)>-1){return Trex.__WORD_JOINER+y}if(y.search(/<script/i)>-1){return Trex.__WORD_JOINER+y}return y}function h(y){if(y.indexOf("tx-entry-attach")>-1){return y.replace(/<(?:img|IMG)[^>]*class="?[^"]*tx-entry-attach[^"]*"?[^>]*style="?[^"]+"?[^>]*\/?>/g,function(z){return z.replace(/\s*style="?[^"]+"?/i,"")})}if(y.indexOf("tx-unresizable")>-1){return y.replace(/<(?:img|IMG)[^>]*class="?[^"]*tx-unresizable[^"]*"?[^>]*style="?[^"]+"?[^>]*\/?>/g,function(z){return z.replace(/\s*style="?[^"]+"?/i,"")})}return y}function m(y){if(y.indexOf("<hr")>-1||y.indexOf("<HR")>-1){y=y.replace(/<p([^>]*)>\s*(<hr[^>]*>)\s*<\/p>/gi,"<div$1>$2</div>")}return y}function d(y){if(y.indexOf("@font-face")>-1){return y.replace(/@font-face\s*\{[^\}]*\};?/g,function(z){return"/* "+z+" */"})}return y}function u(y){if(y.indexOf("@font-face")>-1){return y.replace(/\/\*\s*(@font-face\s*\{[^\}]*\};?)\s*\*\//g,function(z,A){return A})}return y}function w(y){return y.replace(new RegExp('<PARAM NAME="Play" VALUE="0">',"gi"),"")
}function n(z){var y=["frameset"];y.each(function(A){z=z.replace(new RegExp("</?"+A+"s*/?>","gim"),"")});return z}function x(y){y=y.replace(/\s*class="Apple-style-span"/g,"");y=y.replace(/font-size:\s*-webkit-xxx-large/g,"font-size:36pt");y=y.replace(/font-size:\s*xx-large/g,"font-size:24pt");y=y.replace(/font-size:\s*x-large/g,"font-size:18pt");y=y.replace(/font-size:\s*large/g,"font-size:14pt");y=y.replace(/font-size:\s*medium/g,"font-size:12pt");y=y.replace(/font-size:\s*small/g,"font-size:10pt");y=y.replace(/font-size:\s*x-small/g,"font-size:8pt");return y}var c=p.getDocParser();c.registerFilter("filter/dummymarkup",{"text@load":function(y){return y},"source@load":function(y){return y},"html@load":function(y){y=k(y);y=o(y);y=d(y);y=q(y);y=m(y);return y},text4save:function(y){return y},source4save:function(y){y=o(y);y=u(y);y=h(y);y=w(y);y=x(y);return y},html4save:function(y){y=o(y);y=u(y);y=h(y);y=w(y);y=x(y);return y},text2source:function(y){return y},text2html:function(y){return y},source2text:function(y){return y
},source2html:function(y){y=k(y);y=o(y);y=d(y);y=r(y);y=n(y);return y},html2text:function(y){return y},html2source:function(y){y=u(y);y=x(y);return y}})});var LayoutTemplate=Class.create();LayoutTemplate.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;LayoutTemplate.prototype={initialize:function(a,c){this.template=a.toString();this.pattern=c||LayoutTemplate.Pattern},evaluate:function(c,a){a=!!a;return this.template.gsub(this.pattern,function(k){var d=k[1];if(d=="\\"){return k[2]}var j=k[3].split("|");var o=c[j[0]];var m="";if(o&&o["$"]){m="<"+o["$"];for(var h in o){if(h!="$"&&h!="#"){m+=" "+h+'="'+o[h]+((h=="class"&&!a)?" txc-notexists":"")+'"'}}for(var l=1;l<j.length;l++){var n=j[l].split("=");m+=" "+n[0]+'="'+n[1]+((n[0]=="class"&&!a)?" txc-notexists":"")+'"'}if(o["#"]){m+=">";m+=o["#"];m+="</"+o["$"]+">"}else{m+="/>"}if(a){m=m.match(/<\/?[^>]+>/gi).join("").replace(/<\//,Trex.__WORD_JOINER+"&nbsp;</")}}return d+String.interpret(m)})}};function getLayoutMessage(){return{IMAGE:{"$":"img",src:"http://i1.daumcdn.net/icon/editor/spacer2.gif?rv=1.0.1","class":"txc-image"},TITLE:{"$":"h3","#":"<b>\ub300\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694</b>"},SUBTITLE:{"$":"h4","#":"<b>\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694</b>"},CONTENTS:{"$":"p","#":"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"},LIST:{"$":"ul","#":"<li>\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694</li>"}}
}TrexConfig.addTool("layout",{wysiwygonly:true,sync:false,status:true,borderClass:"tx-btn-layoutbg",listseturl:"#cdnhost/view/listset/5.1/layout.js",parastyle:{textAlign:"center"},pastescope:"table.txc-layout-wz"},function(a){var c=TrexConfig.getTool("layout",a);c.listseturl=TrexConfig.getUrl(c.listseturl)});Trex.Tool.Layout=Trex.Class.create({$const:{__Identity:"layout"},$extend:Trex.Tool,oninitialized:function(c){var n=this.canvas;var l={};if(typeof(getLayoutMessage)!="undefined"){l=getLayoutMessage()}var a=n.getSizeConfig();if(a){var m=function(o){if(o<=577){return"3"}else{if(o<=774){return"2"}else{return"1"}}}(a.contentWidth)}var k=a.layouttype||"3";var d=c.parastyle||{};var h=c.pastescope||{};var j=function(p){if(!p["type"+k]){return}var o=new LayoutTemplate(p["type"+k]).evaluate(l,false);n.execute(function(q){q.moveCaretWith(h);q.pasteContent(o.trim()+"<br />",true,{style:d})})};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.Layout(TrexConfig.merge(this.menuCfg)),j)
}});Trex.MarkupTemplate.add("menu.layout",['<div class="tx-menu-inner">','<div class="tx-menu-list tx-menu-layout-webzine">#{webzine}</div>','<div class="tx-line"></div>','<div class="tx-menu-list tx-menu-layout-table">#{table}</div>',"</div>"].join(""));Trex.Menu.Layout=Trex.Class.create({$extend:Trex.Menu,generate:function(){var m=this.config;var c=this.datamap={};var h=[];if(typeof(getTableLayoutList)!="undefined"){getTableLayoutList().each(function(p){c[p.data]=p;h.push(p)})}else{}var n=h.length;var a=1;h=Trex.MarkupTemplate.splitList(a,n,h);var j=[];if(typeof(getWebzineLayoutList)!="undefined"){getWebzineLayoutList().each(function(p){c[p.data]=p;j.push(p)})}else{}var k=3;var o=Math.ceil(j.length/k);for(var d=j.length;d<k*o;d++){j.push({data:"wz_none",klass:"tx-wz-none",title:"\uc6f9\uc9c4 \ub808\uc774\uc544\uc6c3 \ub354\ubbf8",type1:"",type2:"",type3:""})}j=Trex.MarkupTemplate.splitList(o,k,j);var l=this.elMenu;Trex.MarkupTemplate.get("menu.layout").evaluateToDom({webzine:Trex.MarkupTemplate.get("menu.items").evaluate(j),table:Trex.MarkupTemplate.get("menu.items").evaluate(h)},this.elMenu);
$tx.observe(l,"click",this.onSelect.bindAsEventListener(this));$tx.observe(l,"mouseover",this.onItemMouseOver.bindAsEventListener(this));$tx.observe(l,"mouseout",this.onItemMouseOut.bindAsEventListener(this))},onItemMouseOver:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.addClassName(c,"tx-item-hovered")}$tx.stop(a)},onItemMouseOut:function(a){var c=$tx.findElement(a,"span");if(c.tagName&&c.tagName.toLowerCase()=="span"){$tx.removeClassName(c,"tx-item-hovered")}$tx.stop(a)},onSelect:function(c){var d=$tx.findElement(c,"span");if(d.tagName&&d.tagName.toLowerCase()=="span"){var a;if(d.firstChild&&d.firstChild.nodeType==1&&d.firstChild.tagName.toLowerCase()=="img"){a=$tom.getAttribute(d.firstChild,"data")||""}else{a=d.innerText}this._command(this.datamap[a]);this.hide()}$tx.stop(c)}});Trex.register("filter > layout ",function(m,n,a,d,h){var l={};if(typeof(getLayoutMessage)!="undefined"){l=getLayoutMessage()}var c=new Trex.Validator();var q={TITLE:"txc-layout-title",SUBTITLE:"txc-layout-subtitle",CONTENTS:"txc-layout-details",LIST:"txc-layout-list",IMAGE:"txc-layout-image"};
var o=function(r,t,u){return r.gsub(t,function(x){var w=x[1];var y=x[3];var B=(l[u])?"#{"+u+"}":"#{CONTENTS}";if(u=="IMAGE"){if(x[2].indexOf(l[u].src)>-1){var z=x[2];if(x[2].search(/class="?([\w\-\s_]+)"?/i)>-1){z=z.replace(/class="?([\w\-\s_]+)"?/i,'class="$1 txc-notexists"')}else{z=z.replace(/<img/i,'<img class="txc-notexists"')}return w+String.interpret(z+y)}}else{if(!c.exists(x[2])){if(x[2].search(/class="?([\w\-\s_]+)"?/i)>-1){var A=x[2].match(/class="?([\w\-\s_]+)"?/i)[1];if(A.trim().length>0){B=B.replace(/}/,"|class="+A+"}")}}var z=new LayoutTemplate(B).evaluate(l,false);return w+String.interpret(z+y)}}return w+String.interpret(x[2]+y)})};var k=function(r){for(var t in q){r=o(r,new RegExp("(<td[^>]*"+q[t]+"[^>]*>)([\\S\\s]*?)(</td>)","mi"),t)}return r};var p=function(r,t,u){return r.gsub(t,function(x){var w=x[1];var y=x[3];var B=(l[u])?"#{"+u+"}":"#{CONTENTS}";if(u=="IMAGE"){if(x[2].indexOf(l[u].src)>-1){var z=x[2].replace(/\s*txc-notexists/,"");return w+String.interpret(z+y)}}else{if(c.equals(x[2],l[u]["#"])){if(x[2].search(/class="?([\w\-\s_]+)"?/i)>-1){var A=x[2].match(/class="?([\w\-\s_]+)"?/i)[1];
if(A.trim().length>0){B=B.replace(/}/,"|class="+A+"}")}}var z=new LayoutTemplate(B).evaluate(l,true);z=z.replace(/\s*txc-notexists/,"");return w+String.interpret(z+y)}}return w+String.interpret(x[2]+y)})};var j=function(r){for(var t in q){r=p(r,new RegExp("(<td[^>]*"+q[t]+"[^>]*>)([\\S\\s]*?)(</td>)","mi"),t)}return r};m.getDocParser().registerFilter("filter/layout",{"text@load":function(r){return r},"source@load":function(r){return r},"html@load":function(r){return k(r)},text4save:function(r){return r},source4save:function(r){return r},html4save:function(r){return r},text2source:function(r){return r},text2html:function(r){return r},source2text:function(r){return r},source2html:function(r){return r},html2text:function(r){return r},html2source:function(r){return r}})});TrexConfig.addAttacher("image",{imagemaxwidth:1024,adaptor:"pastel"},function(a){var j=TrexConfig.getAttacher("image");var c=TrexConfig.getAdaptor(j.adaptor);j.popPageUrl=TrexConfig.getUrl(c.popPageUrl);j.features=TrexConfig.getPopFeatures(c.features);
var h=j.imagemaxwidth;if(TrexConfig.get("maxwidth")){h=parseInt(TrexConfig.get("maxwidth"),10)}else{var d=TrexConfig.get("size");if(d.contentWidth){if(d.fixed){h=d.contentWidth-2*2}else{}}}j.imagemaxwidth=h;j.param=TrexConfig.getUrl(j.param,{maxwidth:h})});Trex.Class.overwrite(Trex.Attacher.Image,{execAttach:function(d,c){var a=this.createEntry(this.getDataForEntry(d),c);a.execRegister();if(!(a.data.actualwidth>0)){new Trex.ImageScale(a.data,function(j,h){a.dispHtml=a.dispHtml.replace(/<img /i,'<img actualwidth="'+j+'" width="'+Math.min(a.actor.config.imagemaxwidth,j)+'"')})}},execReload:function(l,k,j){var c=this.createEntry(this.getDataForEntry(l,k),j);c.execReload();if(!(c.data.actualwidth>0)){var h;if((h=c.regLoad.exec(k))!=null){var d=h[0];var m=Trex.Util.getMatchValue(/actualwidth=\"?([0-9]*)\"?/i,d,1);if(m){c.data.actualwidth=m;var a=Trex.Util.getMatchValue(/width=\"?([0-9]*)\"?/i,d,1);if(a&&a==m){c.data.isoriginalsize=true}c.dispHtml=c.dispHtml.replace(/<img /i,'<img actualwidth="'+c.data.actualwidth+'" width="'+a+'" ');
return}}new Trex.ImageScale(c.data,function(o,n){c.dispHtml=c.dispHtml.replace(/<img /i,'<img actualwidth="'+o+'" width="'+Math.min(c.actor.config.imagemaxwidth,o)+'"')})}}});Trex.Class.overwrite(Trex.Attachment.Image,{getObjectAttr:function(c){var a=Object.extend({},this.actor.config.objattr);if(c.actualwidth>0){if(c.isoriginalsize){a.actualwidth=c.actualwidth;a.width=c.actualwidth}else{a.actualwidth=c.actualwidth;a.width=Math.min(this.actor.config.imagemaxwidth,c.actualwidth)}}if(c.exifselecteddata){a.exif=c.exifselecteddata}return a}});Trex.module("apply new imageeditor - pastel",function(k,l,m,h,d){var c=m.getAttacher("image");if(!c){return}var a=TrexConfig.getAttacher("image");var j=TrexConfig.getAdaptor(a.adaptor);c.getFlashVars=function(){var n={};j.param.split("&").each(function(p){var o=p.split("=");n[o[0]]=o[1]});return n};c.getPepURL=function(){var n=TrexConfig.getAdaptor("pep");return n.popPageUrl}});TrexConfig.addAttacher("file",{useCC:false,features:{left:250,top:65,width:450,height:547},popPageUrl:"#host#path/pages/daumx/file.html",adaptor:"coca",enableCloudImport:true},function(a){var c=TrexConfig.getAttacher("file",a);
c.popPageUrl=TrexConfig.getUrl(c.popPageUrl)});TrexMessage.addMsg({"@file.invalid.copyright":" <strong>[\uc800\uc791\uad8c \uc704\ubc18 \uc758\uc2ec, \ubcf8\uc778\ub9cc \ud655\uc778\uac00\ub2a5]</strong>"});Trex.Class.overwrite(Trex.Attacher.File,{getDataForEntry:function(j){if(!j.dispElId){j.dispElId=Trex.Util.getDispElId()}var a=((j.tmpSeq)?this.entryBox.syncSeq(j.tmpSeq):this.entryBox.newSeq());var h=j.filename.split(".").pop().toLowerCase();var c;switch(h){case"jpg":case"gif":case"png":case"bmp":c=j.attachurl.replace("/attach/","/P150x100/");break;default:c=Trex.Util.thumburl(h)}var d=Object.extend({dataSeq:a,thumburl:c,prevurl:Trex.Util.prevurl(j.filename.split(".").pop().toLowerCase())},j);d.isInvalidRight=false;if(j.copyright){d.isInvalidRight=(j.copyright.ccresult=="100"||j.copyright.ccresult=="110");d.copyright=Object.extend({},j.copyright)}return d},changeCocaServer:function(c){var a=this.config.adaptor;var h=this.editor.config.adaptor[a].cocaCode;var d=this.editor.config.adaptor[a].param;
this.editor.config.adaptor[a].param=d.replace("="+h,"="+c);this.editor.config.adaptor[a].cocaCode=c}});Trex.Class.overwrite(Trex.Attachment.File,{getBoxAttr:function(j){var c=56;if(j.isInvalidRight){c=40}var d=j.filename;if(d.getRealLength()>c){var k=d.split(".");var h=k.pop();var a=k.join(".").cutRealLength(c-2);d=a+"."+h}return{name:d+" ("+j.filesize.toByteUnit()+")"+((j.isInvalidRight)?TXMSG("@file.invalid.copyright"):""),image:j.thumburl}},getDispHtml:function(a){return'<button id="'+a.dispElId+'" class="txc-file tx-unresizable"><img src="'+a.prevurl+'" ld="'+a.attachurl+'"/> '+a.filename+((a.isInvalidRight)?TXMSG("@file.invalid.copyright"):"")+"</button>"}});TrexMessage.addMsg({"@mypeoplesticker.title":"\ub9c8\uc774\ud53c\ud50c \uc2a4\ud2f0\ucee4"});TrexConfig.addTool("mypeoplesticker",{wysiwygonly:true,sync:false,status:false});Trex.Tool.MypeopleSticker=Trex.Class.create({$const:{__Identity:"mypeoplesticker"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getEmbeder("mypeoplesticker").execute()
})}});TrexConfig.addEmbeder("mypeoplesticker",{popPageUrl:"http://mypeople.daum.net/mypeople/api/daumEditorStickerCategoryList.do",proxyPath:null,features:{left:250,top:65,width:464,height:481,resizable:"yes"}},function(a){var c=a.sidebar.embeder.mypeoplesticker;if(c.proxyPath){c.popPageUrl+="?url=http://"+location.host+c.proxyPath}c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});(function(){Trex.Embeder.MypeopleSticker=Trex.Class.create({$const:{__Identity:"mypeoplesticker"},$extend:Trex.Embeder,name:"mypeoplesticker",title:TXMSG("@mypeoplesticker.title"),clickHandler:function(){var a=this.config.popPageUrl;window.open(a,"at"+this.name,this.config.features)},getCreatedHtml:function(c){var d=[];for(var a=0;a<c.length;a++){d.push('<img src="'+c[a].src+'" alt="'+c[a].alt+'">')}return d.join("")},getDataForEntry:function(a){},execAttach:function(d){var c=this.pastescope;var a=this.getCreatedHtml(d);this.canvas.execute(function(h){h.moveCaretWith(c);
h.pasteContent(a,false)})}})})();TrexConfig.addAdaptor("coca",{version:"1.1.21",url:"#cmnhost/coca_service/#version/coca.swf",param:"coca_service=#cocaCode&service=#farmCode&service_farm=#uploadServiceFarm",elements:[{id:"tx_file",width:"86",height:"25",background:"#ffffff"}],cocaCode:"TestCoca",serviceFarm:false},function(a){var j=TrexConfig.getAttacher("file",a);var h=TrexConfig.getAdaptor("coca",a);h.usecc=j.useCC;h.upsource=j.upSource;h.sname=j.sname||a.txService;h.sid=j.sid||j.upSource;var c=h.param+(j.param?"&"+j.param:"");var d=j.server||h.cocaCode;h.param=TrexConfig.getUrl(c,{cocaCode:d,uploadServiceFarm:h.serviceFarm?"use":"not_use"});h.url=TrexConfig.getUrl(h.url,{version:h.version});h.initializedId=a.initializedId?a.initializedId:""});TrexConfig.addAdaptor("pep",{popPageUrl:"#host#path/pages/daumx/image.html",pepCode:"TestPep",version:"1.1.21",url:"#cmnhost/coca_service/#version/ImageEditor.swf",param:"coca_service=#pepCode&service=#farmCode&service_farm=#uploadServiceFarm",features:{left:0,top:0,width:784,height:642,resizable:"yes",scrollbars:"yes"},serviceFarm:false},function(c){var a=TrexConfig.getAttacher("image");
var d=TrexConfig.getAdaptor("pep");d.url=TrexConfig.getUrl(d.url,{version:d.version});d.param+=a.param?"&"+a.param:"";d.param=TrexConfig.getUrl(d.param,{pepCode:d.pepCode,uploadServiceFarm:d.serviceFarm?"use":"not_use"});d.popPageUrl=TrexConfig.getUrl(d.popPageUrl)});TrexConfig.addAdaptor("pastel",{popPageUrl:"http://fp.daum.net/fp/service_nc/pastel/PastelWrapper.html",pastelCode:"PastelPep",cloudImport:false,param:"coca_service=#pastelCode&service=#farmCode&service_farm=#uploadServiceFarm&handrive_import=#cloudImport",features:{left:0,top:0,width:900,height:730,resizable:"yes",scrollbars:"no"},serviceFarm:false},function(c){var a=TrexConfig.getAttacher("image");var d=TrexConfig.getAdaptor("pastel");d.param+=a.param?"&"+a.param:"";d.param=TrexConfig.getUrl(d.param,{pastelCode:d.pastelCode,uploadServiceFarm:d.serviceFarm?"use":"not_use",cloudImport:d.cloudImport})});Trex.module("register double click event listeners on image",function(k,m,a,c,d){var j=a.getAttacher("image");if(!j){return
}var o=TrexConfig.getAttacher("image");if(o.adaptor!="pastel"){return}var n=null;var h=null;j.getRemoteImage=function(){var r="";if(n){r=n.src;var q=j.getDatalist().detect(function(t){return(t.key==r)});if(q){r+="|"+q.data.filename}}h=n;n=null;return r};c.observeJob(Trex.Ev.__CANVAS_PANEL_DBLCLICK,function(r){var q=$tx.element(r);if($tom.kindOf(q,"img.txc-image")){n=q;j.execute()}});c.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEDOWN,function(q){n=null});j.attach=function(w){if(h){var q=j.getDatalist().detect(function(y){return(y.key==h.src)});if(q){var t=q.data.filename||w.filename;var x=j.getDataForEntry(w);var r={regHtml:q.regHtml,regText:q.regText};x.filename=t;q.setProperties(x);var u=q.replace;q.replace=function(){h.setAttribute("src",this.data.imageurl);if(this.data.actualwidth>0){h.setAttribute("actualwidth",this.data.actualwidth);h.setAttribute("width",this.data.actualwidth)}if($tx.msie){var y=$tom.find(h,"%paragraph");if(y){c.getProcessor().moveCaretTo($tom.next(y,"%paragraph"),true)
}}};q.execReplace(r);q.replace=u}else{j.execAttach(w)}h=null}else{j.execAttach(w)}};var l=($tx.msie)?"alt":"title";var p=null;c.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEOVER,function(r){var q=$tx.element(r);if(p==q){return}if($tom.kindOf(q,"img.txc-image")){q.setAttribute(l,"\ub354\ube14\ud074\ub9ad\uc744 \ud558\uc2dc\uba74 \uc774\ubbf8\uc9c0\ub97c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4");p=q}});c.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEOUT,function(r){var q=$tx.element(r);if($tom.kindOf(q,"img.txc-image")){q.removeAttribute(l);p=null}})});TrexConfig.addTool("movie",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@movie.title":"\ub3d9\uc601\uc0c1","@movielink.title":"\ub3d9\uc601\uc0c1 \ucca8\ubd80","@movie.message":"\ub3d9\uc601\uc0c1\uc774 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@movielink.prev.url":"http://i1.daumcdn.net/icon/editor/img_multi.gif?rv=1.0.1"});Trex.Tool.Movie=Trex.Class.create({$const:{__Identity:"movie"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;
this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("movie").execute()})}});TrexConfig.addAttacher("movie",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:458,height:370,resizable:"yes",scrollbars:"no"},flashPageUrl:"#host#path/pages/daumx/movie.html",webCamFlashUrl:"http://flvs.daum.net/webcamOut.swf?service=#service",flashUrl:"http://flvs.daum.net/uploaderOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen&cate=#showCategory",uploadFlashUrl:{oldUploader:"http://flvs.daum.net/uploaderOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen&cate=#showCategory",newUploader:"http://videofarm.daum.net/controller/uploader/Uploader.swf?service=#videofarmCode&tvpotopen=#tvpotOpen&cate=#showCategory"},searchUrl:"http://tvpot.daum.net/clip/search.swf",searchMyUrl:"http://tvpot.daum.net/clip/searchMy.swf",tvpotOpen:false,showCategory:false,tvpotCode:"test",uploaderFlashVars:{}},function(a){var c=TrexConfig.getAttacher("movie",a);
c.popPageUrl=TrexConfig.getUrl(c.flashPageUrl);c.flashPageUrl=TrexConfig.getUrl(c.flashPageUrl);c.webCamFlashUrl=TrexConfig.getUrl(c.webCamFlashUrl,{tvpotOpen:c.tvpotOpen,tvpotCode:c.tvpotCode,showCategory:c.showCategory});if(c.videofarmCode){c.flashUrl=c.uploadFlashUrl.newUploader;c.uploaderFlashVars={service:c.videofarmCode,tvpotopen:c.tvpotOpen,cate:c.showCategory}}c.flashUrl=TrexConfig.getUrl(c.flashUrl,{tvpotOpen:c.tvpotOpen,videofarmCode:c.videofarmCode,tvpotCode:c.tvpotCode,showCategory:c.showCategory});c.searchUrl=TrexConfig.getUrl(c.searchUrl,{});c.searchMyUrl=TrexConfig.getUrl(c.searchMyUrl,{});c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Movie=Trex.Class.create({$const:{__Identity:"movie"},$extend:Trex.Attacher,name:"movie",title:TXMSG("@movie.title"),canModified:false,canResized:false,getKey:function(a){return a.moviekey},getDataForEntry:function(h,d){if(!h.dispElId){h.dispElId=Trex.Util.getDispElId()}var a=((h.tmpSeq)?this.entryBox.syncSeq(h.tmpSeq):this.entryBox.newSeq());
var c=Object.extend({dataSeq:a},h);return c}});Trex.Attachment.Movie=Trex.Class.create({$const:{__Identity:"movie"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_movie",value:[a.moviekey,a.prevurl,a.playtime].join("|")}},getBoxAttr:function(a){return{name:TXMSG("@movie.message"),image:a.thumburl,className:"tx-thumb-movie"}},getSaveHtml:function(a){return'<img class="txc-movie" src="'+a.prevurl+'" moviekey="'+a.moviekey+'" type="vi"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" type="vi" class="txc-movie"/>'},getDispText:function(a){return"["+TXMSG("@movie.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.prevurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.prevurl.getRegExp()+'"?[^>]*/?>',"gim")},getRegText:function(a){return new RegExp("\\["+TXMSG("@movie.title")+":"+a.dataSeq+"\\]","gim")}});TrexConfig.addTool("pie",{wysiwygonly:true,sync:false,status:false});
TrexMessage.addMsg({"@pie.title":"\ud30c\uc774","@pie.message":"\ud30c\uc774\uac00 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@pie.prev.url":"http://i1.daumcdn.net/icon/editor/img_pie.gif?rv=1.0.1"});Trex.Tool.Pie=Trex.Class.create({$const:{__Identity:"pie"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("pie").execute()})}});TrexConfig.addAttacher("pie",{multiple:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:513,height:635,scrollbars:"no"},flashPageUrl:"#host#path/pages/daumx/pie.html",flashUrl:"http://pie.daum.net/p/flash/puzzle/editor.swf?openyn="},function(a){var c=TrexConfig.getAttacher("pie",a);c.popPageUrl=TrexConfig.getUrl(c.flashPageUrl);c.flashPageUrl=TrexConfig.getUrl(c.flashPageUrl);c.flashUrl=TrexConfig.getUrl(c.flashUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Pie=Trex.Class.create({$const:{__Identity:"pie"},$extend:Trex.Attacher,name:"pie",title:TXMSG("@pie.title"),canModified:true,canResized:false,getKey:function(a){return a.piekey
},getDataForEntry:function(h,d){if(!h.dispElId){h.dispElId=Trex.Util.getDispElId()}var a=((h.tmpSeq)?this.entryBox.syncSeq(h.tmpSeq):this.entryBox.newSeq());var c=Object.extend({dataSeq:a,prevurl:TXMSG("@pie.prev.url")},h);return c}});Trex.Attachment.Pie=Trex.Class.create({$const:{__Identity:"pie"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_pie",value:[a.piekey,a.pieurl].join("|")}},getBoxAttr:function(a){return{name:TXMSG("@pie.message"),image:a.thumburl,className:"tx-thumb-pie"}},getSaveHtml:function(a){return'<img class="txc-pie" src="'+a.prevurl+'" piekey="'+a.piekey+'" type="pie" piesrc="'+a.pieurl+'"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" piekey="'+a.piekey+'" type="pie" class="txc-pie tx-unresizable"/>'},getDispText:function(a){return"["+TXMSG("@pie.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*piekey="?'+a.piekey.getRegExp()+'"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*piekey="?'+a.piekey.getRegExp()+'"?[^>]*/?>',"gm")
},getRegText:function(a){return new RegExp("\\["+TXMSG("@pie.title")+":"+a.dataSeq+"\\]","gm")}});(function(Trex){TrexConfig.addTool("map",{wysiwygonly:true,sync:false,status:false},function(root){var _config=TrexConfig.getTool("map",root);_config.id="tx_map"});TrexMessage.addMsg({"@map.title":"\uc9c0\ub3c4","@map.message":"\uc9c0\ub3c4\uac00 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@map.not.support.version.ie":"\uc9c0\ub3c4 \ucca8\ubd80\ub294 IE 6.0 \uc774\uc0c1\ubc84\uc804\ubd80\ud130 \uac00\ub2a5\ud569\ub2c8\ub2e4.","@map.not.support.version.safari":"\uc9c0\ub3c4 \ucca8\ubd80\ub294 safari \ube0c\ub77c\uc6b0\uc838\uc5d0\uc11c\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","@map.not.insert.position":"\ud574\ub2f9 \uc704\uce58\uc5d0\ub294 \uc9c0\ub3c4\ub97c \ucca8\ubd80\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."});Trex.Tool.Map=Trex.Class.create({$const:{__Identity:"map"},$extend:Trex.Tool,oninitialized:function(config){var _editor=this.editor;this.weave.bind(this)(new Trex.Button(config),null,function(){_editor.getSidebar().getAttacher("map").execute()
})}});TrexConfig.addAttacher("map",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:808,height:540,resizable:"yes"},pageUrl:"http://attach.map.daum.net/?mode=F&appendType=O&target=opener.EditorManager.getSidebar().getAttacher('map').fAttach",iframeUrl:"http://dmaps.daum.net/map_include/map_editor/v3/iframe.html",ieSupportVer:6},function(root){var _config=TrexConfig.getAttacher("map",root);_config.popPageUrl=TrexConfig.getUrl(_config.pageUrl);_config.prevPageUrl=TrexConfig.getUrl(_config.iframeUrl);_config.features=TrexConfig.getPopFeatures(_config.features)});Trex.Attacher.Map=Trex.Class.create({$const:{__Identity:"map"},$extend:Trex.Attacher,name:"map",title:TXMSG("@map.title"),canModified:false,canResized:false,oninitialized:function(config){var _config=this.config;this.clickHandler=function(){if($tx.msie&&$tx.msie_ver<_config.ieSupportVer){alert(TXMSG("@map.not.support.version.ie"));return}try{var _sizeConfig=this.canvas.getRootConfig().size;
var _width=_sizeConfig.contentWidth-(_sizeConfig.contentPadding*2)-20;var _popupUrl=_config.popPageUrl+"&attachWidth="+(_width||"570");var _win=window.open(_popupUrl,"at"+this.name,_config.features);_win.focus()}catch(e){}}.bind(this);this.fAttach=this.attachHandler.bind(this)},getKey:function(data){return data.mapkey},getDataForEntry:function(data,content){data=Object.extend({},data);var _mapdata="";if(data.mapkey){if(data.mapInfo){_mapdata=$H(data).toQueryString()}else{var _matchs;var _regGetMeta=new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+data.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm");if((_matchs=_regGetMeta.exec(content))!==null){_mapdata=_matchs[1]}if(_mapdata!==""){var _oldJSON=decodeURIComponent(_mapdata).toQueryParams();if(typeof(_oldJSON.mapInfo)=="string"){_oldJSON=_mapdata.toQueryParams();eval("var _tmpMapInfo = "+_oldJSON.mapInfo);_oldJSON.mapInfo=_tmpMapInfo}var _newJSON={};for(var _name in _oldJSON){if(_name.indexOf("amp;")===0){_newJSON[_name.substring(4)]=_oldJSON[_name]
}else{_newJSON[_name]=_oldJSON[_name]}}data=Object.extend(data,_newJSON)}else{return null}}}else{data.toJSONString=null;_mapdata=$H(data).toQueryString();Object.extend(data,{mapkey:"emap_"+(function(){var _key="";for(var i=0;i<6;i++){_key+=Math.floor(Math.random()*(10-1+1))}return _key})()})}if(!data.dispElId){data.dispElId=data.mapkey}var _seq=((data.tmpSeq)?this.entryBox.syncSeq(data.tmpSeq):this.entryBox.newSeq());var _data=Object.extend({dataSeq:_seq,mapdata:_mapdata,prevurl:"http://i1.daumcdn.net/icon/editor/img_map_"+function(idx){if(idx=="1"){return"490360"}else{if(idx=="2"){return"400300"}else{if(idx=="3"){return"250200"}else{if(idx=="4"){return"45035"}else{return""}}}}}(data.idx)+".gif",thumburl:"http://i1.daumcdn.net/icon/editor/pn_map.gif",pageUrl4View:this.config.prevPageUrl+"?id="+data.mapkey+"&amp;mapGb=V",pageUrl4Edit:this.config.prevPageUrl+"?id="+data.mapkey+"&amp;mapGb=E"},data);return _data}});Trex.Attachment.Map=Trex.Class.create({$const:{__Identity:"map"},$extend:Trex.Attachment,getFieldAttr:function(data){return{name:"tx_attach_map",value:[data.mapkey].join("|")}
},getBoxAttr:function(data){return{name:TXMSG("@map.message"),image:data.thumburl}},getSaveHtml:function(data){var w=data.mapWidth,h=data.mapHeight;return'<iframe id="'+data.mapkey+'" class="txc-map" src="'+data.pageUrl4View+'" width="100%" height="'+h.toPx()+'" frameborder="0" scrolling="auto" mapdata="'+data.mapdata+'"></iframe>'},getDispHtml:function(data){var w=data.mapWidth,h=data.mapHeight;if($tx.msie){return'<iframe id="'+data.mapkey+'" src="'+data.pageUrl4Edit+'" class="txc-map tx-unresizable" width="100%" height="'+h.toPx()+'" frameborder="0" scrolling="auto" mapdata="'+data.mapdata+'"></iframe>'}else{return'<img id="'+data.mapkey+'" src="'+data.prevurl+'" type="map" class="txc-map tx-unresizable"/>'}},getDispText:function(data){return"["+TXMSG("@map.title")+":"+data.dataSeq+"]"},getRegLoad:function(data){return new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+data.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm")},getRegHtml:function(data){if($tx.msie){return new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+data.mapkey+'"?[^>]*mapdata="?([^"]+)"?[^>]*></(?:iframe|IFRAME)>',"gm")
}else{return new RegExp('<(?:img|IMG)[^>]*id="?'+data.mapkey+'"?[^>]*type="?map"?[^>]*/?>',"gm")}},getRegText:function(data){return new RegExp("\\["+TXMSG("@map.title")+":"+data.dataSeq+"\\]","gm")},exchangeHandlerAtReload:function(){if(!this.data.mapkey||!this.canvas.canHTML()){return}var regLoad;var content=this.canvas.getContent();if($tx.msie){regLoad=new RegExp('<(?:img|IMG)[^>]*id="?'+this.data.mapkey+'"?[^>]*type="?map"?[^>]*/?>',"gm")}else{regLoad=new RegExp('<(?:iframe|IFRAME)[^>]*id="?'+this.data.mapkey+'"?[^>]*></(?:iframe|IFRAME)>',"gm")}if(content.search(regLoad)>-1){content=content.replace(regLoad,this.dispHtml);this.canvas.setContent(content)}}});window.EditorManager={getSidebar:function(){return Editor.getSidebar()}}})(Trex);TrexConfig.addAttacher("roadview",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true});Trex.Attacher.Roadview=Trex.Class.create({$const:{__Identity:"roadview"},$extend:Trex.Attacher,name:"roadview",oninitialized:function(a){},getDataForEntry:function(d,c){if(!d.dispElId){d.dispElId=Trex.Util.getDispElId()
}var a=Object.extend({},d);return a},getKey:function(a){return null}});Trex.Attachment.Roadview=Trex.Class.create({$const:{__Identity:"roadview"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_roadview",value:[a.imageUrl,a.viewUrl,a.width,a.height,a.panoid,a.pan,a.tilt,a.photoX,a.photoY].join("|")}},getBoxAttr:function(a){return{name:"\ub85c\ub4dc\ubdf0 \ucea1\uccd0 \uc774\ubbf8\uc9c0",image:a.imageUrl}},getSaveHtml:function(a){return'<a href="'+a.viewUrl+'" class="txc-roadview-link" target="_blank"><img src="'+a.imageUrl+'" border="0" class="txc-roadview"/></a>'},getDispHtml:function(a){return'<a href="'+a.viewUrl+'" class="txc-roadview-link" target="_blank"><img id="'+a.dispElId+'" src="'+a.imageUrl+'" border="0" class="txc-roadview"/></a>'},getDispText:function(a){return'<a href="'+a.viewUrl+'" class="txc-roadview-link" target="_blank"><img src="'+a.imageUrl+'" border="0" class="txc-roadview"/></a>'},getRegLoad:function(a){return new RegExp('<(?:a|A)[^>]*txc-roadview-link[^>]*>s*<(?:img|IMG)[^>]*src="?'+a.imageUrl+'"?[^>]*/?>s*</(?:a|A)>',"gm")
},getRegHtml:function(a){return new RegExp('<(?:a|A)[^>]*txc-roadview-link[^>]*>s*<(?:img|IMG)[^>]*src="?'+a.imageUrl+'"?[^>]*/?>s*</(?:a|A)>',"gm")},getRegText:function(a){return new RegExp('<(?:a|A)[^>]*txc-roadview-link[^>]*>s*<(?:img|IMG)[^>]*src="?'+a.imageUrl+'"?[^>]*/?>s*</(?:a|A)>',"gm")},getParaStyle:function(a){return{textAlign:"center"}}});Trex.module("prolong the session",function(d,h,j,c,a){setInterval(function(){try{var k=$tx("tx_daumtrans");k.src="https://logins.daum.net/accounts/auth.gif?dummy="+new Date().getTime()}catch(l){}},15*60*1000)});(function(){var j="http://tiara.daum.net/tiara.front/front/click/";var c="http://group1.magpie.daum.net/magpie/put/daumeditor_runtime";var a="http://group1.magpie.daum.net/magpie/opencounter/Open.do?service=daum_editor&key=";if(typeof __TX_GLOBAL=="undefined"){__TX_GLOBAL={}}var d=Math.floor(Math.random()*100000);__TX_GLOBAL.session_id=d;function h(k){if(k.indexOf(j)!=0){setTimeout(function(){var l=new Image();l.onerror=function(){l=null
};l.onload=function(){l=null};l.src=k},50)}}Trex.hmailLogging=function(l){var m=l.txProject||l.txService||"sample";var k=Math.floor(Math.random()*100000);h([j,k,"?dummy=",k,"&referer=http%3A%2F%2Feditor.daum.net%2F",m,"%2F&url=http://editor.daum.net/?","t__nil_editor_stat=start"].join(""))};Trex.module("Error Logging for editor",function(m,n,p,l,k){var q=k.txProject||k.txService||"sample";function o(r){if(r){return encodeURIComponent(r.replace(/\//g,"-"))}else{return""}}m.observeJob(Trex.Ev.__RUNTIME_EXCEPTION,function(t){var r;if(t&&t.message){r=o(t.fileName+"["+t.lineNumber+"]_"+t.message)}else{r=o(t+"")}try{}catch(u){}h([c,"?http_user-agent&http_referer&req_remoteip","&service="+q,"&message="+r,"&txsid="+d].join(""))});m.observeJob(Trex.Ev.__IFRAME_LOADING_TIME,function(u){var r=Math.floor(Math.random()*100000);var t="t__nil_loadingtime="+u;h([j,r,"?dummy=",r,"&referer=http%3A%2F%2Feditor.daum.net%2F",q,"%2F&url=http://editor.daum.net/?",t].join(""))})});Trex.module("Click Logging for editor",function(m,n,o,l,k){var p=k.txProject||k.txService||"sample";
n.observeJob(Trex.Ev.__TOOL_CLICK,function(q,u){var r=Math.floor(Math.random()*100000);var t="";if(o.attachers&&!!o.attachers[q]){t="t__nil_multimedia="+q}else{if(o.embeders&&!!o.embeders[q]){t="t__nil_multimedia="+q}else{if(o.searchers&&!!o.searchers[q]){t="t__nil_info="+q}else{if(n.tools&&!!n.tools[q]){if(u&&u.type&&u.type.indexOf("key")>-1){return}t="t__nil_toolbar="+q}}}}h([j,r,"?dummy=",r,"&referer=http%3A%2F%2Feditor.daum.net%2F",p,"%2F&url=http://editor.daum.net/?",t].join(""))})});Trex.module("Tool executed by shortcut key Logging",function(m,n,o,l,k){n.observeJob(Trex.Ev.__TOOL_SHORTCUT_KEY,function(p){var t=k.txProject||k.txService||"sample";var q=Math.floor(Math.random()*100000);var r="t__nil_toolbar="+p+".kbd";h([j,"?dummy=",q,"&referer=http%3A%2F%2Feditor.daum.net%2F",t,"%2F&url=http://editor.daum.net/?",r].join(""))})});Trex.module("Searching Logging for editor",function(m,n,o,l,k){var p=k.txProject||k.txService||"sample";m.observeJob(Trex.Ev.__PASTE_SEARCHRESULT,function(u,r){var t="t__nil_infoinsert="+u+"_"+r;
var q=Math.floor(Math.random()*100000);h([j,q,"?dummy=",q,"&referer=http%3A%2F%2Feditor.daum.net%2F",p,"%2F&url=http://editor.daum.net/?",t].join(""))})});Trex.module("Loading Logging for editor",function(m,n,o,l,k){var p=k.txProject||k.txService||"sample";l.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var q=Math.floor(Math.random()*100000);h([j,q,"?dummy=",q,"&referer=http%3A%2F%2Feditor.daum.net%2F",p,"%2F&url=http://editor.daum.net/?","t__nil_editor_stat=loading"].join(""))})});Trex.module("Magpie Reporting for editor",function(m,n,o,l,k){var p=k.txProject||k.txService||"sample";m.observeJob(Trex.Ev.__REPORT_TO_MAGPIE,function(q){h([a,q,"&referer=http%3A%2F%2Feditor.daum.net%2F",p].join(""))})})})();Trex.module("daum session const setting",function(d,h,j,c,a){Trex.DaumLogin.__GET_REALHOST=function(){var n=c.getPanel("html").getWindow();var l=n.location.host;var m=n.location.pathname;var k=m.split("/");k.pop();k.pop();k.pop();m=k.join("/");return l+m}});Trex.module("load firebug library @ie",function(k,l,a,d,h){var c=["#cdnhost/common/firebug/pi.js?ver=1.0.1","#cdnhost/common/firebug/firebug-lite.js?ver=1.0.4"];
var n=false;var j=false;var m=function(p){if(p==c.length){n=true;j=true;return}var o=document.createElement("script");o.setAttribute("type","text/javascript");o.setAttribute("charset","utf-8");if($tx.msie){o.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){m(++p)}}}else{o.onload=function(){m(++p)}}o.setAttribute("src",TrexConfig.getUrl(c[p]));document.body.appendChild(o)};k.observeKey({ctrlKey:true,altKey:false,shiftKey:false,keyCode:123},function(){if(n&&typeof(firebug)!=="undefined"){if(j){firebug.win.minimize()}else{firebug.win.maximize()}j=!j}else{m(0)}})});Trex.install("editor.interceptSearcher & editor.interceptAttacher",function(d,h,j,c,a){d.interceptSearcher=function(n,l){if(l){var o=j.getSearcher(l);o.insertHandler=n}else{var k=j.getSearcher();for(var m in k){k[m].insertHandler=n}}};d.interceptAttacher=function(n,o){if(o){var l=j.getAttacher(o);l.attachHandler=n}else{var k=j.getAttacher();for(var m in k){k[m].attachHandler=n}}}});Trex.module("change attachment input handler",function(h,j,k,c,a){var d={};
c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var m=k.getAttacher();for(var n in m){d[n]=m[n].attachHandler}var l=k.getSearcher();for(var n in l){d[n]=l[n].insertHandler}});j.observeJob(Trex.Ev.__TOOL_CLICK,function(){var m=k.getAttacher();for(var n in m){if(d[n]){m[n].attachHandler=d[n]}}var l=k.getSearcher();for(var n in l){l[n].insertHandler=d[n]}})});Trex.module("apply background to wysiwyg holder",function(h,j,k,c,a){var d=h.getConfig().skin;if(!d){return}var l;c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){l=tx.div({style:{position:"absolute",top:(($tx.msie&&$tx.msie_ver<7)?"1px":"0"),left:"0",width:"100%",height:"400px",zIndex:"-200",overflow:"hidden"}});var n=c.getPanel(Trex.Canvas.__WYSIWYG_MODE);n.el.parentNode.insertBefore(l,n.el);try{$tx.setStyle(l,d)}catch(m){}});c.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(m){$tx.setStyle(l,{height:m.toPx()})})});Trex.module("setting width at layout with editor width",function(l,o,a,d,h){var c=d.getSizeConfig();if(!c){return
}var k=c.wrapWidth-(($tx.msie&&$tx.msie_ver<7)?5:0);var n=c.contentWidth;var j=c.contentPadding;var m=(n-j)-2*2;var p=l.getSidebar().getEmbeder("layout");if(!p){return}p.config.tablewidth=m});Trex.module("observe event at upload button in layout table",function(h,q,r,d,C){var t=56;var z=21-1;var u;var y=0;var B=0;var o=null;var j=null;var m=null;var x=function(D,E){u.style.top=(D+B).toPx();u.style.left=E.toPx()};var w=function(G){if(!G){return}if($tom.kindOf(G,"img.txc-image")){var H=$tom.find(G,"td,th");if(H&&H.className=="txc-layout-image"){var E=$tom.find(G,"table.txc-layout-wz")||$tom.find(G,"table.txc-layout-tb");if(E&&E.className=="txc-layout-wz"){var D=d.getPositionByNode(G);if(D.width>0&&D.height>0){var F=false;if(D.y<0&&D.y+D.height>y){x((y-z)/2,D.x+(D.width-t)/2);F=true}else{if(D.y>0&&D.y+D.height<y){x(D.y+(D.height-z)/2,D.x+(D.width-t)/2);F=true}else{if(D.y<0&&D.height+D.y-z>0){x((D.height+D.y-z)/2,D.x+(D.width-t)/2);F=true}else{if(D.y>0&&y-D.y-z>0){x(D.y+(y-D.y-z)/2,D.x+(D.width-t)/2);
F=true}}}}if(F){o=G;m=E;$tx.show(u);return}}}}}o=null;m=null;$tx.hide(u)};var a={};if(typeof(getLayoutMessage)!="undefined"){a=getLayoutMessage()}var c=(a.IMAGE)?a.IMAGE.src:"#";var A=null;var k=null;var p=r.getAttacher("image");if(p){var l=p.execAttach.bind(p);p.execAttach=function(J,H){var K=function(M,L){M.src=L;$tom.removeAttributes(M,"height");$tx.removeClassName(M,"txc-notexists");if(M.style.height){M.style.height=""}};if(!k||!k.firstChild||!k.offsetParent){k=null;A=null;l(J,H);return}if(k&&!A){var I=$tom.collectAll(k,"img.txc-image");if(I){for(var F=0;F<I.length;F++){if(I[F].src==c){A=I[F];break}}}}if(A&&A.offsetParent){var E=p.createEntry(p.getDataForEntry(J),H);var D=E.register;E.register=function(){K(A,J.imageurl)};E.execRegister();E.register=D}else{var G=d.getProcessor();G.moveCaretTo($tom.top($tom.next(k,"%element")));k=null;l(J,H)}d.history.saveHistory({deleted:false},function(){entry.deletedMark=(J.deleted===false)?false:true;_attachBox.fireJobs(Trex.Ev.__ENTRYBOX_ENTRY_REFRESH,entry);
d.setContent(J.content)});A=null}}var n=function(){if(!p){return}if(!o||!m){return}A=o;k=m;p.execute();return false};d.observeElement({tag:"body"},function(){k=null;A=null});d.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(D){y=D.parsePx()});d.observeJob("canvas.apply.background",function(){var E=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);var D=$tom.getPosition(E.el);B=D.y});d.reserveJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){var F=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);y=F.getPanelHeight().parsePx()||C.canvas.initHeight;var D=$tom.getPosition(F.el);B=D.y;var E=d.wysiwygEl;u=tx.a({href:"javascript:;",className:"tx-layout-upload-btn"},"\uc774\ubbf8\uc9c0\uc5c5\ub85c\ub4dc");E.insertBefore(u,E.firstChild);$tx.observe(u,"click",n,false)},300);d.observeJob(Trex.Ev.__CANVAS_PANEL_SCROLLING,function(D){if(o){w(o)}else{if(j){w(j)}}});d.observeJob(Trex.Ev.__CANVAS_PANEL_MOUSEOVER,function(E){var D=$tx.element(E);if(o!=D){w(D)}})});Trex.module("observe event at text field in layout table",function(m,o,c,h,j){var d=new Trex.Validator();
var l=(typeof(getLayoutMessage)!="undefined")?getLayoutMessage():{};var k="";var a=function(q){var u=k;var t=new LayoutTemplate(u).evaluate(l,true);q.innerHTML=t;var r=h.getProcessor();r.moveCaretTo(q)};var n=false;h.observeElement({tag:"body"},function(){n=false});var p=function(q,r){h.observeElement(q,function(t){n=true;var w=null;if(l[r]){w="#{"+r;if(t.firstChild&&t.firstChild.className){var u=t.firstChild.className.replace(/txc-notexists/,"");w+="|class="+u}w+="}"}k=w;if(d.equals(t.innerHTML,l[r]["#"])){a(t)}})};p({tag:"td",klass:"txc-layout-details"},"CONTENTS");p({tag:"td",klass:"txc-layout-list"},"LIST");if($tx.msie){h.observeElement({tag:"p",klass:"txc-index"},function(q){var r=h.getProcessor();r.moveCaretTo(q)})}});Trex.module("getting content with background and loading content with background",function(h,j,k,d,c){var m="";var a=function(n){if(Editor.__PANEL_LOADED){h.getToolbar().tools.back.execute(n)}else{setTimeout(function(){a(n)},300)}};h.getContentWithBackground=function(){var C=h.getContent();
var n=j.tools.back.getBackConfig();var w=j.tools.back.getBasicCellStyle();var G=function(H){if(!H||H=="none"){return""}else{return"url("+H+")"}};var z=tx.div({id:"tx_background_container",className:"tx-content-container",style:{padding:0,margin:0,color:m||d.getStyleConfig().color||"#333"}});var E=tx.table({cellSpacing:0,cellPadding:0,width:"100%"});var u=tx.tr();var r=tx.td({colSpan:"3"},tx.div({id:"tx_background_cell1",style:Object.extend(w.cell1.style,{width:n.topLeftWidth||0,height:n.topLeftHeight||0,backgroundImage:G(n.topLeftImage)})}),tx.div({id:"tx_background_cell2",style:Object.extend(w.cell2.style,{width:n.topRightWidth||0,height:n.topRightHeight||0,backgroundImage:G(n.topRightImage)})}),tx.div({id:"tx_background_cell3",style:Object.extend(w.cell3.style,{paddingTop:n.topCenterHeight||0,marginLeft:n.topLeftWidth||0,marginRight:n.topRightWidth||0,backgroundImage:G(n.topCenterImage)})}));u.appendChild(r);var D=tx.tr();var p=tx.td({id:"tx_background_cell4",style:{backgroundRepeat:"repeat-y",width:n.midLeftWidth||0,display:(G(n.midLeftImage))?"":"none",backgroundImage:G(n.midLeftImage)}},tx.div({style:{width:n.midLeftWidth||0}}));
var y=tx.td({id:"tx_background_cell5",style:{backgroundColor:"transparent",backgroundRepeat:n.backgroundRepeat||"repeat",backgroundImage:G(n.midCenterImage),backgroundPosition:n.backgroundPosition||"0 50%"}});var o=tx.div({id:"tx_background_content",style:{position:"relative"}},tx.div({id:"tx_background_content_inner",style:{padding:"0"}},"#CONTENT"),"#OPACITY");var A='<div id="tx_background_opacity"  style="position:absolute; left:0; top:0; height:100%; z-index:-1; width: 100%;background-color:'+(n.backgroundColor||"transparent")+";background-image:"+G(n.backgroundImage)+";background-repeat:"+(n.backgroundRepeat||"repeat")+";background-position:"+(n.backgroundPosition||"left top")+";opacity: "+(n.opacity||"")+";filter: "+(n.opacity?"alpha(opacity="+100*n.opacity+")":"")+";border-color: "+(n.borderColor||"transparent")+";border-width: "+(n.borderWidth||"0")+";border-style: "+(n.borderStyle||"")+';"></div>';y.appendChild(o);var B=tx.td({id:"tx_background_cell6",style:{backgroundRepeat:"repeat-y",width:n.midRightWidth||0,display:(G(n.midRightImage))?"":"none",backgroundImage:G(n.midRightImage)}},tx.div({style:{width:n.midRightWidth||0}}));
D.appendChild(p);D.appendChild(y);D.appendChild(B);var t=tx.tr();var q=tx.td({colSpan:"3"},tx.div({id:"tx_background_cell7",style:Object.extend(w.cell7.style,{width:n.botLeftWidth||0,height:n.botLeftHeight||0,backgroundImage:G(n.botLeftImage)})}),tx.div({id:"tx_background_cell8",style:Object.extend(w.cell8.style,{width:n.botRightWidth||0,height:n.botRightHeight||0,backgroundImage:G(n.botRightImage)})}),tx.div({id:"tx_background_cell9",style:Object.extend(w.cell9.style,{paddingTop:n.botCenterHeight||0,marginLeft:n.botLeftWidth||0,marginRight:n.botRightWidth||0,backgroundImage:G(n.botCenterImage)})}));t.appendChild(q);E.appendChild(u);E.appendChild(D);E.appendChild(t);z.appendChild(E);var F=tx.div();F.appendChild(z);var x=F.innerHTML;return x.replaceAll("#OPACITY",A).replaceAll("#CONTENT",C)};h.getBackgroundAttr=function(){var n=j.tools.back.getBackConfig();return Object.toJSON(n)};var l={findFirstIndexOfContent:function(o){var n=/tx_background_content_inner[^>]*>/gim;n.exec(o);return n.lastIndex
},findLastIndexOfContent:function(o){var n=/<\/div><div[^>]*id="?tx_background_opacity/gim;n.exec(o);return n.lastIndex},getContent:function(q){var p=q;var n=this.findFirstIndexOfContent(p);var r=this.findLastIndexOfContent(p);if(!n&&!r){return""}else{p=p.substring(n,r);var o=/<\/div><div[^>]*id="?tx_background_opacity/gim;p=p.replace(o,"");return p}}};h.modifyWithBackground=function(x){var n=l.getContent(x.content);if(n){var u=x.content;x.content=n;try{u=u.replace(n,"");var t=tx.div({style:{display:"none"}},u);document.body.appendChild(t)}catch(w){}var o={container:$tx("tx_background_container"),cell1:$tx("tx_background_cell1"),cell2:$tx("tx_background_cell2"),cell3:$tx("tx_background_cell3"),cell4:$tx("tx_background_cell4"),cell5:$tx("tx_background_cell5"),cell6:$tx("tx_background_cell6"),cell7:$tx("tx_background_cell7"),cell8:$tx("tx_background_cell8"),cell9:$tx("tx_background_cell9"),opacity:$tx("tx_background_opacity")};var r=$tx.getStyle(o.container,"color");var q={topLeftImage:$tx.getStyle(o.cell1,"backgroundImage")||"",topLeftWidth:$tx.getStyle(o.cell1,"width")||"",topLeftHeight:$tx.getStyle(o.cell1,"height")||"",topCenterImage:$tx.getStyle(o.cell3,"backgroundImage")||"",topCenterHeight:$tx.getStyle(o.cell3,"paddingTop")||"",topRightImage:$tx.getStyle(o.cell2,"backgroundImage")||"",topRightWidth:$tx.getStyle(o.cell2,"width")||"",topRightHeight:$tx.getStyle(o.cell2,"height")||"",midLeftImage:$tx.getStyle(o.cell4,"backgroundImage")||"",midLeftWidth:$tx.getStyle(o.cell4,"width")||"",midCenterImage:$tx.getStyle(o.cell5,"backgroundImage")||"",midRightImage:$tx.getStyle(o.cell6,"backgroundImage")||"",midRightWidth:$tx.getStyle(o.cell6,"width")||"",botLeftImage:$tx.getStyle(o.cell7,"backgroundImage")||"",botLeftWidth:$tx.getStyle(o.cell7,"width")||"",botLeftHeight:$tx.getStyle(o.cell7,"height")||"",botCenterImage:$tx.getStyle(o.cell9,"backgroundImage")||"",botCenterHeight:$tx.getStyle(o.cell9,"paddingTop")||"",botRightImage:$tx.getStyle(o.cell8,"backgroundImage")||"",botRightWidth:$tx.getStyle(o.cell8,"width")||"",botRightHeight:$tx.getStyle(o.cell8,"height")||"",backgroundImage:$tx.getStyle(o.opacity,"backgroundImage")||"",backgroundRepeat:$tx.getStyle(o.opacity,"backgroundRepeat")||"",backgroundPosition:$tx.getStyle(o.opacity,"backgroundPosition")||"",backgroundColor:$tx.getStyle(o.opacity,"backgroundColor")||"transparent",borderColor:$tx.getStyle(o.opacity,"borderTopColor")||"transparent",borderStyle:$tx.getStyle(o.opacity,"borderTopStyle")||"",borderWidth:$tx.getStyle(o.opacity,"borderTopWidth")||"0",opacity:$tx.getStyle(o.opacity,"opacity")||1};
var p=parseInt(q.borderWidth);if(p==0||isNaN(p)){q.borderWidth=0;q.borderColor="transparent"}["topLeftImage","topCenterImage","topRightImage","midLeftImage","midCenterImage","midRightImage","botLeftImage","botCenterImage","botRightImage","backgroundImage"].each(function(y){var z=/^url\((.*)\)$/i;q[y]=q[y].replace(z,"$1")});a(q)}else{if(c.toolbar.back.oldBackgroundColor){a({backgroundColor:c.toolbar.back.oldBackgroundColor,backgroundImage:"",borderStyle:"none",borderColor:"transparent",borderWidth:"0",opacity:"1"})}}try{document.body.removeChild(t)}catch(w){}Editor.modify(x);return true}});(function(){var a="#cdnhost/view/webfont/5.2/";TrexConfig.addTool("fontfamily",{webfont:{use:false,options:[{label:'\ub9ad\uc2a4\uaf2c\uaf2c\ub9c8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\uaf2c\uaf2c\ub9c8",data:"RixKidD",klass:"tx-RixKidD",url:a+"RixKidD.css"},{label:'\ub9ad\uc2a4\uc77c\uc694\uc77c\ub9d1\uc74c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\uc77c\uc694\uc77c\ub9d1\uc74c",data:"RixShinySundayD",klass:"tx-RixShinySundayD",url:a+"RixShinySundayD.css"},{label:'\uc724\ub9c8\uc774\ub2ec\ub9c1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ub9c8\uc774\ub2ec\ub9c1",data:"YDmydarling",klass:"tx-YDmydarling",url:a+"YDmydarling.css"},{label:'\uc724\ubd80\ub044\ubd80\ub044 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ubd80\ub044\ubd80\ub044",data:"YDboo",klass:"tx-YDboo",url:a+"YDboo.css"},{label:'\uc724\uc18c\ub140\uc9c0\ubabd <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\uc18c\ub140\uc9c0\ubabd",data:"YDgirl",klass:"tx-YDgirl",url:a+"YDgirl.css"},{label:'\ud55c\uc591\uaf2c\ub9c8\ub3d9\ubb34 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uaf2c\ub9c8\ub3d9\ubb34",data:"HYchild",klass:"tx-HYchild",url:a+"HYchild.css"},{label:'\ud55c\uc591\ub2ec\ucf64\ubc00\ud06c\ud2f0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ub2ec\ucf64\ubc00\ud06c\ud2f0",data:"HYmilk",klass:"tx-HYmilk",url:a+"HYmilk.css"},{label:'\ud55c\uc591\ubaa8\ub358\ud0c0\uc7842 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubaa8\ub358\ud0c0\uc7842",data:"HYmodern2",klass:"tx-HYmodern2",url:a+"HYmodern2.css"},{label:'\ud55c\uc591\ubc1c\uafb8\ub77d <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubc1c\uafb8\ub77d",data:"HYtoe",klass:"tx-HYtoe",url:a+"HYtoe.css"},{label:'\ud55c\uc591\ubca0\uc774\ube44\ud551\ud06c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ubca0\uc774\ube44\ud551\ud06c",data:"HYbaby",klass:"tx-HYbaby",url:a+"HYbaby.css"},{label:'\ud55c\uc591\uc218\ud638\ucc9c\uc0ac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc218\ud638\ucc9c\uc0ac",data:"HYangela",klass:"tx-HYangela",url:a+"HYangela.css"},{label:'\ud55c\uc591\uc548\ub155\ubd04\uc544 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc548\ub155\ubd04\uc544",data:"HYhispring",klass:"tx-HYhispring",url:a+"HYhispring.css"},{label:'\ud55c\uc591\uc5ec\uc6b0\ube44 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc5ec\uc6b0\ube44",data:"HYfox",klass:"tx-HYfox",url:a+"HYfox.css"},{label:'\ud55c\uc591\uc824\ub9ac\ucfe0\ud0a4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uc824\ub9ac\ucfe0\ud0a4",data:"HYcookie",klass:"tx-HYcookie",url:a+"HYcookie.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"HYcheongbaji",klass:"tx-HYcheongbaji",url:a+"HYcheongbaji.css"},{label:'\ud55c\uc591\ud589\ubcf5\ub0a0\uac1c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud589\ubcf5\ub0a0\uac1c",data:"HYwing",klass:"tx-HYwing",url:a+"HYwing.css"},{label:'\ud55c\uc591\ud5c8\ub2c8\ub808\ubaac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud5c8\ub2c8\ub808\ubaac",data:"HYhoney",klass:"tx-HYhoney",url:a+"HYhoney.css"},{label:'\uc0b0\ub3cc\uad11\uc218\ub610\ub798 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uad11\uc218\ub610\ub798",data:"SDWebKSDdorae",klass:"tx-SDWebKSDdorae",url:a+"SDWebKSDdorae.css"},{label:'\uc0b0\ub3cc\ub098\ubb34\uc5f0\ud544 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub098\ubb34\uc5f0\ud544",data:"SDWebTreePencil",klass:"tx-SDWebTreePencil",url:a+"SDWebTreePencil.css"},{label:'\uc0b0\ub3cc\ub2e4\uc774\uc5b4\ub9ac <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub2e4\uc774\uc5b4\ub9ac",data:"SDWebDiary2",klass:"tx-SDWebDiary2",url:a+"SDWebDiary2.css"},{label:'\uc0b0\ub3cc\ub7ec\ube14\ub9ac\uac78 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub7ec\ube14\ub9ac\uac78",data:"SDWebLovelyGirl",klass:"tx-SDWebLovelyGirl",url:a+"SDWebLovelyGirl.css"},{label:'\uc0b0\ub3cc\ub8f0\ub8e8\ub784\ub77c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub8f0\ub8e8\ub784\ub77c",data:"SDWebLuluLala",klass:"tx-SDWebLuluLala",url:a+"SDWebLuluLala.css"},{label:'\uc0b0\ub3cc\ub9c8\ub2c8\ub610 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub9c8\ub2c8\ub610",data:"SDWebManitto",klass:"tx-SDWebManitto",url:a+"SDWebManitto.css"},{label:'\uc0b0\ub3cc\ubabd\uae00\ubabd\uae00 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubabd\uae00\ubabd\uae00",data:"SDWebMonggle",klass:"tx-SDWebMonggle",url:a+"SDWebMonggle.css"},{label:'\uc0b0\ub3cc\ubbfc\ub4e4\ub808 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubbfc\ub4e4\ub808",data:"SDWebMindlre",klass:"tx-SDWebMindlre",url:a+"SDWebMindlre.css"},{label:'\uc0b0\ub3cc\ubca0\uc774\ube44\ub85c\uc158 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubca0\uc774\ube44\ub85c\uc158",data:"SDWebBabyLotion",klass:"tx-SDWebBabyLotion",url:a+"SDWebBabyLotion.css"},{label:'\uc0b0\ub3cc\ube68\uac04\ud48d\uc120 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ube68\uac04\ud48d\uc120",data:"SDWebRedBalloon",klass:"tx-SDWebRedBalloon",url:a+"SDWebRedBalloon.css"},{label:'\uc0b0\ub3cc\ubf40\uc1a1\ub0a0\uac1c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubf40\uc1a1\ub0a0\uac1c",data:"SDWebBbosongWing",klass:"tx-SDWebBbosongWing",url:a+"SDWebBbosongWing.css"},{label:'\uc0b0\ub3cc\uc058\ub760\uacf5\uc8fc <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc058\ub760\uacf5\uc8fc",data:"SDWebPetitPrincess",klass:"tx-SDWebPetitPrincess",url:a+"SDWebPetitPrincess.css"},{label:'\uc0b0\ub3cc\uc0ac\ub791\ube44 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0ac\ub791\ube44",data:"SDWebLoveRain",klass:"tx-SDWebLoveRain",url:a+"SDWebLoveRain.css"},{label:'\uc0b0\ub3cc\uc0ac\ub791\uc1a1\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0ac\ub791\uc1a1\uc774",data:"SDWebSongi",klass:"tx-SDWebSongi",url:a+"SDWebSongi.css"},{label:'\uc0b0\ub3cc\uc0c8\uc2f9\ud558\ud2b8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0c8\uc2f9\ud558\ud2b8",data:"SDWebSeassak",klass:"tx-SDWebSeassak",url:a+"SDWebSeassak.css"},{label:'\uc0b0\ub3cc\uc0c8\uce68\uc219\ub140 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc0c8\uce68\uc219\ub140",data:"SDWebSaechimGirl",klass:"tx-SDWebSaechimGirl",url:a+"SDWebSaechimGirl.css"},{label:'\uc0b0\ub3cc\uc138\uac00\uc9c0\uc18c\uc6d0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc138\uac00\uc9c0\uc18c\uc6d0",data:"SDWebWish",klass:"tx-SDWebWish",url:a+"SDWebWish.css"},{label:'\uc0b0\ub3cc\uc544\uce68\ud587\uc0b4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc544\uce68\ud587\uc0b4",data:"SDWebMorning",klass:"tx-SDWebMorning",url:a+"SDWebMorning.css"},{label:'\uc0b0\ub3cc\uc5b4\ub9b0\uc774\ub9cc\ud654 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc5b4\ub9b0\uc774\ub9cc\ud654",data:"SDWebKidsCartoon",klass:"tx-SDWebKidsCartoon",url:a+"SDWebKidsCartoon.css"},{label:'\uc0b0\ub3cc\uc694\uc220\uc9c0\ud321\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc694\uc220\uc9c0\ud321\uc774",data:"SDWebMagicStick",klass:"tx-SDWebMagicStick",url:a+"SDWebMagicStick.css"},{label:'\uc0b0\ub3cc\uc77c\uae30\uc608\ubcf4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc77c\uae30\uc608\ubcf4",data:"SDWebWeather",klass:"tx-SDWebWeather",url:a+"SDWebWeather.css"},{label:'\uc0b0\ub3cc\uc885\uc774\ud559 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\uc885\uc774\ud559",data:"SDWebHak",klass:"tx-SDWebHak",url:a+"SDWebHak.css"},{label:'\uc0b0\ub3cc\ud478\ub978\ub9c8\uc74c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud478\ub978\ub9c8\uc74c",data:"SDWebGreenMind",klass:"tx-SDWebGreenMind",url:a+"SDWebGreenMind.css"},{label:'\uc0b0\ub3cc\ud574\ud53c\ub370\uc774 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud574\ud53c\ub370\uc774",data:"SDWebHappy",klass:"tx-SDWebHappy",url:a+"SDWebHappy.css"},{label:'\uc0b0\ub3cc\ud574\ud53c\uc2a4\uc704\ud2f0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ud574\ud53c\uc2a4\uc704\ud2f0",data:"SDWebSweety",klass:"tx-SDWebSweety",url:a+"SDWebSweety.css"},{label:'\uc0b0\ub3cc\ubd90\ubd90 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubd90\ubd90",data:"nSDWebBoom09",klass:"tx-nSDWebBoom09",expired:true,url:a+"SDWebBoom.css"},{label:'\uc0b0\ub3cc\ub610\ub798\ub625 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub610\ub798\ub625",data:"nSDWebKSDdong09",klass:"tx-nSDWebKSDdong09",expired:true,url:a+"SDWebKDdong.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"061129_HYCBJ",klass:"tx-061129_HYCBJ",expired:true,url:a+"HYcbj.css"},{label:'\ud55c\uc591\ud734\uba3c\uc5fd\uc11c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud734\uba3c\uc5fd\uc11c",data:"HMYS",klass:"tx-HMYS",expired:true,url:a+"HYhmpost.css"},{label:'MD\uc5ec\uc6b0\ubcc4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\uc5ec\uc6b0\ubcc4",data:"MD_foxstar_9",klass:"tx-MD_foxstar_9",expired:true,url:a+"MD_foxstar.css"},{label:'MD\ub7ec\ube0c\uc9f1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\ub7ec\ube0c\uc9f1",data:"MD_lovejjang_9",klass:"tx-MD_lovejjang_9",expired:true,url:a+"MD_lovejjang.css"},{label:'\uc0b0\ub3cc\ubd90\ubd90 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ubd90\ubd90",data:"SDWebBoom",klass:"tx-nSDWebBoom09",expired:true,url:a+"SDWebBoom.css"},{label:'\uc0b0\ub3cc\ub610\ub798\ub625 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc0b0\ub3cc\ub610\ub798\ub625",data:"SDWebKDdong",klass:"tx-nSDWebKSDdong09",expired:true,url:a+"SDWebKDdong.css"},{label:'\ud55c\uc591\uccad\ubc14\uc9c0 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\uccad\ubc14\uc9c0",data:"HYcbj",klass:"tx-HYcbj",expired:true,url:a+"HYcbj.css"},{label:'\ud55c\uc591\ud734\uba3c\uc5fd\uc11c <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ud55c\uc591\ud734\uba3c\uc5fd\uc11c",data:"HYhmpost",klass:"tx-HMYS",expired:true,url:a+"HYhmpost.css"},{label:'MD\uc5ec\uc6b0\ubcc4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\uc5ec\uc6b0\ubcc4",data:"MD_foxstar",klass:"tx-MD_foxstar",expired:true,url:a+"MD_foxstar.css"},{label:'MD\ub7ec\ube0c\uc9f1 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"MD\ub7ec\ube0c\uc9f1",data:"MD_lovejjang",klass:"tx-MD_lovejjang",expired:true,url:a+"MD_lovejjang.css"},{label:'\ub9ad\uc2a4\ub3c5\ub3c4 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\ub3c5\ub3c4",data:"RixDokdo",klass:"tx-RixDokdo",expired:true,url:a+"RixDokdo.css"},{label:'\ub9ad\uc2a4\ud558\ud2b8 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\ub9ad\uc2a4\ud558\ud2b8",data:"RixHeart",klass:"tx-RixHeart",expired:true,url:a+"RixHeart.css"},{label:'\uc724\uccad\ucd98 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\uccad\ucd98",data:"YDChungchun",klass:"tx-YDChungchun",expired:true,url:a+"YDChungchun.css"},{label:'\uc724\ud310\ud654 <span class="tx-txt">(\uac00\ub098\ub2e4\ub77c)</span>',title:"\uc724\ud310\ud654",data:"YDPanhwa",klass:"tx-YDPanhwa",expired:true,url:a+"YDPanhwa.css"}]}})
})();TrexConfig.addTool("bgm",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@bgm.title":"\ubc30\uacbd\uc74c\uc545","@bgm.message":"\ubc30\uacbd\uc74c\uc545\uc774 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4. / #{title} - #{artist}","@bgm.prev.url":"http://i1.daumcdn.net/icon/editor/p_bgm2.gif?rv=1.0.1","@bgm.thumb.url":"http://i1.daumcdn.net/icon/editor/pn_music.gif?rv=1.0.1"});Trex.Tool.Bgm=Trex.Class.create({$const:{__Identity:"bgm"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("bgm").execute()})}});TrexConfig.addAttacher("bgm",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:395,height:600},popPageUrl:"http://music.daum.net/my/depository/bgm_setup/list.popup?service=#service"},function(a){var c=TrexConfig.getAttacher("bgm",a);if(c.proxyPath&&c.proxyPath!==""&&c.popPageUrl.indexOf("&form=")<0){c.popPageUrl+="&form=http://"+location.host+c.proxyPath
}c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Bgm=Trex.Class.create({$const:{__Identity:"bgm"},$extend:Trex.Attacher,name:"bgm",title:TXMSG("@bgm.title"),canModified:true,canResized:false,getKey:function(a){return a.bgmkey},getDataForEntry:function(j,h){if(!j.dispElId){j.dispElId=Trex.Util.getDispElId()}var a=((j.tmpSeq)?this.entryBox.syncSeq(j.tmpSeq):this.entryBox.newSeq());var d=(j.bgmkey)?j.bgmkey:((j.bgmlist)?j.bgmlist[0]:"bgm_"+a);var c=Object.extend({dataSeq:a,bgmkey:d,prevurl:TXMSG("@bgm.prev.url"),thumburl:TXMSG("@bgm.thumb.url")},j);return c}});Trex.Attachment.Bgm=Trex.Class.create({$const:{__Identity:"bgm"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_bgm",value:[a.bgmkey,a.songid,a.title,a.artist].join("|")}},getBoxAttr:function(c){var a=new Template(TXMSG("@bgm.message"));return{name:a.evaluate({title:c.title.cutRealLength(60),artist:c.artist.cutRealLength(30)}),image:c.thumburl}},getSaveHtml:function(a){return'<img src="'+a.prevurl+'" bgmkey="'+a.bgmkey+'" type="bgm" class="txc-bgm"/>'
},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" bgmkey="'+a.bgmkey+'" type="bgm" class="txc-bgm tx-unresizable"/>'},getDispText:function(a){return"["+TXMSG("@bgm.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*bgmkey="?'+a.bgmkey.getRegExp()+'"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?'+a.dispElId+'"?[^>]*/?>',"gm")},getRegText:function(a){return new RegExp("\\["+TXMSG("@bgm.title")+":"+a.dataSeq+"\\]","gm")}});Trex.module("observe canvas.bgm.added event and insert a lyrics to editor",function(d,h,j,c,a){c.observeJob("canvas.bgm.added",function(m){var l=m.data;if(l.lyrics){var k=["<br/>",'<a href="http://music.daum.net/song/song.do?songId='+l.songid+'" target="_blank"><b>',l.title,"</b></a> - ",l.artist,"<br/><br/>",l.lyrics.replace(/\n/g,"<br/>"),"<br/><br/>","\uac00\uc0ac \ucd9c\ucc98 : ",'<a href="http://music.daum.net/" target="_blank" style="color:#0307c3">Daum\ubba4\uc9c1</a>'].join("");
c.execute(function(n){n.pasteContent(k,true,{})})}})});TrexConfig.add({pvpage:"#cafehost/static/powereditor/attach/#pvname.html?grpid=#grpid",maxwidth:1024,canvas:{styles:{padding:"8px",lineHeight:"1.6"},webfont:true,hasUserBgcolor:false,cafeSkinBackgroundColor:"#ffffff"},toolbar:{file:{wysiwygonly:false},link:{left:"-142"},specialchar:{left:"-200"},footnote:{forced:true},horizontalrule:{left:"-100"},emoticon:{left:"-100"},layout:{left:"-200"},quote:{left:"-20"},table:{tableWidth:700}},sidebar:{attachbox:{show:true},embeder:{media:{usepvpage:true,useCC:true}},capacity:{filter:{use:"sound"}},attacher:{image:{usepvpage:true,param:"kind=1&defaultSign=http://cafe.daum.net/#grpcode&sid=#sid&sname=cafe&shost=#filehost&originalCheckBox=true&useFrac=false&maxDefSize=#maxwidth&forcedResizingInSimpleEdit=true",objattr:{hspace:"1",vspace:"1",border:"0"}},movie:{usepvpage:true,flashUrl:"http://flvs.daum.net/uploaderOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen&cate=#showCategory",tvpotCode:"cafe"},file:{wysiwygonly:false,usepvpage:true,server:"",param:"sid=#filesid&sname=cafe&shost=#filehost"},pie:{usepvpage:true}}},plugin:{resizer:{use:true}},adaptor:{coca:{cocaCode:"CafeBasicCoca"},pep:{pepCode:"CafePep"}},txFarmCode:"cafe"});
TrexConfig.addAdaptor("cafeadm_image",{popPageUrl:"#cafehost/bbs_image_upload?grpid=#grpid&mgrpid=#mgrpid&fldid=#fldid",param:"",features:{left:250,top:65,width:710,height:560,scrollbars:"yes",resizable:"yes"}},function(a){var c=TrexConfig.getAdaptor("cafeadm_image");c.popPageUrl=TrexConfig.getUrl(c.popPageUrl)});Trex.register("filter > append image hash",function(k,n,a,h,j){function m(o){if(!o){return false}return(o.indexOf("tx-daum-image")>-1||o.indexOf("txc-image")>-1)?true:false}function l(o){o=o.replace(/<img[^>]*src="?http:\/\/c?file\d*\.uf\.daum\.net\/image\/(\w+)[^>]*\/?>/gi,function(p,q){return(m(p))?p.replace(/\/?>/,' id="A_'+q+'"/>'):p});return o}function c(o){o=o.replace(/<img[^>]*src="?http:\/\/c?file\d*\.uf\.daum\.net\/image\/(\w+)[^>]*\/?>/gi,function(p,q){return(m(p))?p.replace(/\s*id="?A_[\w]+"?/,""):p});return o}var d=k.getDocParser();d.registerFilter("filter/imagehash",{"text@load":function(o){return o},"source@load":function(o){o=c(o);return o},"html@load":function(o){o=c(o);
return o},text4save:function(o){return o},source4save:function(o){o=l(o);return o},html4save:function(o){o=l(o);return o},text2source:function(o){return o},text2html:function(o){return o},source2text:function(o){return o},source2html:function(o){return o},html2text:function(o){return o},html2source:function(o){return o}})});(function(){var a={};var c={created:false,__OPTIONS:{back:{style:{position:"absolute",width:"100%",height:"400px",top:"0",left:"0",zIndex:"-100",overflow:"hidden"}},wrapper:{id:"tx_background_wrapper",style:{marginTop:"0"}},cell1:{style:{"float":"left",backgroundRepeat:"no-repeat",fontSize:"0"}},cell2:{style:{"float":"right",backgroundRepeat:"no-repeat",fontSize:"0"}},cell3:{style:{backgroundRepeat:"repeat-x",margin:"0 15px",fontSize:"0"}},cell4:{style:{"float":"left",backgroundRepeat:"repeat-y"}},cell5:{style:{"float":"right",backgroundRepeat:"repeat-y"}},cell6:{style:{backgroundRepeat:"repeat"}},cell7:{style:{"float":"left",backgroundRepeat:"no-repeat",fontSize:"0"}},cell8:{style:{"float":"right",backgroundRepeat:"no-repeat",fontSize:"0"}},cell9:{style:{backgroundRepeat:"repeat-x",margin:"0 15px",fontSize:"0"}}},create:function(d){var h=this.__OPTIONS;
if($tx.msie&&$tx.msie_ver<7){h.cell4.style.marginRight="-3px";h.cell5.style.marginLeft="-3px";h.cell6.style.margin="0 3px"}var k={back:tx.div(h.back),wrapper:tx.div(h.wrapper),cell1:tx.div(h.cell1),cell2:tx.div(h.cell2),cell3:tx.div(h.cell3),cell4:tx.div(h.cell4),cell5:tx.div(h.cell5),cell6:tx.div(h.cell6),cell7:tx.div(h.cell7),cell8:tx.div(h.cell8),cell9:tx.div(h.cell9)};k.back.appendChild(k.wrapper);k.wrapper.appendChild(tx.div(k.cell1,k.cell2,k.cell3));k.wrapper.appendChild(tx.div(k.cell4,k.cell5,k.cell6));k.wrapper.appendChild(tx.div(k.cell7,k.cell8,k.cell9));var j=d.getPanel(Trex.Canvas.__WYSIWYG_MODE);j.el.parentNode.insertBefore(k.back,j.el);this.get=function(l){return k[l]};this.created=true},update:function(j,d){var h=this.__OPTIONS;if(h[j]){for(_name in d){h[j]["style"][_name]=d[_name]}}},get:function(){return null}};TrexConfig.addTool("back",{wysiwygonly:true,sync:false,status:true,borderClass:"tx-btn-backbg",thumbs:Trex.__CONFIG_COMMON.thumbs,listseturl:"#cdnhost/view/listset/5.1/backimage.js",borderOptions:[{label:"\uc5c6\uc74c",title:"0",data:"tx-weight-border-thumb-none",klass:"tx-weight-border-thumb-none"},{label:"1",title:"1px",data:"tx-weight-border-thumb-1",klass:"tx-weight-border-thumb-1"},{label:"2",title:"2px",data:"tx-weight-border-thumb-2",klass:"tx-weight-border-thumb-2"},{label:"3",title:"3px",data:"tx-weight-border-thumb-3",klass:"tx-weight-border-thumb-3"},{label:"4",title:"4px",data:"tx-weight-border-thumb-4",klass:"tx-weight-border-thumb-4"},{label:"5",title:"5px",data:"tx-weight-border-thumb-5",klass:"tx-weight-border-thumb-5"}],repeatOptions:[{label:"\uc6d0\ub798\ub300\ub85c",title:"no-repeat",data:"tx-size-border-thumb-original",klass:"tx-size-border-thumb-original"},{label:"\uc804\uccb4\ubc18\ubcf5",title:"repeat",data:"tx-size-border-thumb-check",klass:"tx-size-border-thumb-check"}],positionOptions:[{label:"\uc88c\uc0c1\ub2e8",title:"left top",data:"tx-back-position-tl",klass:"tx-back-position-tl"},{label:"\uc911\uc0c1\ub2e8",title:"center top",data:"tx-back-position-tc",klass:"tx-back-position-tc"},{label:"\uc6b0\uc0c1\ub2e8",title:"right top",data:"tx-back-position-tr",klass:"tx-back-position-tr"},{label:"\uc88c\uc911\ub2e8",title:"left center",data:"tx-back-position-cl",klass:"tx-back-position-cl"},{label:"\uc911\uc911\ub2e8",title:"center center",data:"tx-back-position-cc",klass:"tx-back-position-cc"},{label:"\uc6b0\uc911\ub2e8",title:"right center",data:"tx-back-position-cr",klass:"tx-back-position-cr"},{label:"\uc88c\ud558\ub2e8",title:"left bottom",data:"tx-back-position-bl",klass:"tx-back-position-bl"},{label:"\uc911\ud558\ub2e8",title:"center bottom",data:"tx-back-position-bc",klass:"tx-back-position-bc"},{label:"\uc6b0\ud558\ub2e8",title:"right bottom",data:"tx-back-position-br",klass:"tx-back-position-br"}],coca:{url:"#cmnhost/coca_service/1.1.16/coca.swf",width:60,height:25,color:"#fff",coca_service:"CafeCubeEnteranceCoca",service:"cafe"}},function(d){var h=TrexConfig.getTool("back",d);
h.listseturl=TrexConfig.getUrl(h.listseturl)});TrexMessage.addMsg({"@back.title":"\ubc30\uacbd","@back.need.user.image":"\uc0ac\uc9c4\uc744 \ucd94\uac00 \ud55c \ud6c4 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.","@back.need.original.size":"\uc804\uccb4\ubc18\ubcf5\uc5d0\uc11c\ub294 \uc120\ud0dd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","@back.over.file.size":"\ucca8\ubd80\ud560 \uc218 \uc788\ub294 \uc6a9\ub7c9(800Kb)\uc744 \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4.","@back.need.border.width":"\uba3c\uc800 \ud14c\ub450\ub9ac \uad75\uae30\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694."});Trex.Tool.Back=Trex.Class.create({$const:{__Identity:"back"},$extend:Trex.Tool,oninitialized:function(h){var d=this;var k=this.canvas;var j=function(l){if(!l){return}if(!c.created){c.create(k)}if(l.topLeftImage&&l.topLeftImage!="none"){d.applySkin(l)}else{if(l.backgroundImage&&l.backgroundImage!="none"){d.applyUpload(l)}else{if((l.backgroundColor&&l.backgroundColor!="transparent")||l.borderStyle||l.opacity<1){d.applyColor(l)
}else{d.clear()}}}k.fireJobs("canvas.apply.background",l)};this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.Back(TrexConfig.merge(this.menuCfg,{backConfig:a})),j)},applySkin:function(d){if(!c.created){return}a=Object.extend({},d);$tx.setStyle(c.get("cell1"),{width:a.topLeftWidth,height:a.topLeftHeight,backgroundImage:a.topLeftImage?"url("+a.topLeftImage+")":"none"});$tx.setStyle(c.get("cell2"),{width:a.topRightWidth,height:a.topRightHeight,backgroundImage:a.topRightImage?"url("+a.topRightImage+")":"none"});$tx.setStyle(c.get("cell3"),{paddingTop:a.topCenterHeight,backgroundImage:a.topCenterImage?"url("+a.topCenterImage+")":"none"});$tx.setStyle(c.get("cell7"),{width:a.botLeftWidth,height:a.botLeftHeight,backgroundImage:a.botLeftImage?"url("+a.botLeftImage+")":"none"});$tx.setStyle(c.get("cell8"),{width:a.botRightWidth,height:a.botRightHeight,backgroundImage:a.botRightImage?"url("+a.botRightImage+")":"none"});$tx.setStyle(c.get("cell9"),{paddingTop:a.botCenterHeight,backgroundImage:a.botCenterImage?"url("+a.botCenterImage+")":"none"});
$tx.setStyle(c.get("cell4"),{width:a.midLeftWidth,backgroundImage:a.midLeftImage?"url("+a.midLeftImage+")":"none"});$tx.setStyle(c.get("cell5"),{width:a.midRightWidth,backgroundImage:a.midRightImage?"url("+a.midRightImage+")":"none"});$tx.setStyle(c.get("cell6"),{backgroundImage:a.midCenterImage?"url("+a.midCenterImage+")":"none",backgroundColor:"transparent",backgroundRepeat:"repeat",borderWidth:"0",borderStyle:"solid",borderColor:"",opacity:""})},applyColor:function(d){if(!c.created){return}a=Object.extend({},d);$tx.setStyle(c.get("cell1"),{width:0,height:0});$tx.setStyle(c.get("cell2"),{width:0,height:0});$tx.setStyle(c.get("cell3"),{paddingTop:0});$tx.setStyle(c.get("cell7"),{width:0,height:0});$tx.setStyle(c.get("cell8"),{width:0,height:0});$tx.setStyle(c.get("cell9"),{paddingTop:0});$tx.setStyle(c.get("cell4"),{width:0});$tx.setStyle(c.get("cell5"),{width:0});$tx.setStyle(c.get("cell6"),{backgroundColor:a.backgroundColor||"transparent",borderColor:a.borderColor||"transparent",borderWidth:a.borderWidth||"0",opacity:(a.opacity+""!=""&&a.opacity<1)?a.opacity:"",borderStyle:"solid",backgroundImage:"none"})
},applyUpload:function(d){if(!c.created){return}a=Object.extend({},d);$tx.setStyle(c.get("cell1"),{width:0,height:0});$tx.setStyle(c.get("cell2"),{width:0,height:0});$tx.setStyle(c.get("cell3"),{paddingTop:0});$tx.setStyle(c.get("cell7"),{width:0,height:0});$tx.setStyle(c.get("cell8"),{width:0,height:0});$tx.setStyle(c.get("cell9"),{paddingTop:0});$tx.setStyle(c.get("cell4"),{width:0});$tx.setStyle(c.get("cell5"),{width:0});$tx.setStyle(c.get("cell6"),{backgroundRepeat:a.backgroundRepeat||"no-repeat",backgroundPosition:a.backgroundPosition||"left top",backgroundImage:(a.backgroundImage)?"url("+a.backgroundImage+")":"none",backgroundColor:a.backgroundColor||"transparent",borderWidth:"0",borderStyle:"solid",borderColor:"",opacity:(a.opacity+""!=""&&a.opacity<1)?a.opacity:""})},clear:function(){a={};$tx.setStyle(c.get("cell1"),{width:0,height:0,backgroundImage:"none"});$tx.setStyle(c.get("cell2"),{width:0,height:0,backgroundImage:"none"});$tx.setStyle(c.get("cell3"),{paddingTop:0,backgroundImage:"none"});
$tx.setStyle(c.get("cell7"),{width:0,height:0,backgroundImage:"none"});$tx.setStyle(c.get("cell8"),{width:0,height:0,backgroundImage:"none"});$tx.setStyle(c.get("cell9"),{paddingTop:0,backgroundImage:"none"});$tx.setStyle(c.get("cell4"),{width:0,backgroundImage:"none"});$tx.setStyle(c.get("cell5"),{width:0,backgroundImage:"none"});$tx.setStyle(c.get("cell6"),{backgroundImage:"none",backgroundColor:"transparent",backgroundRepeat:"repeat",borderWidth:"0",borderStyle:"solid",borderColor:"",opacity:""})},getBackConfig:function(){return a},getBasicCellStyle:function(){return c.__OPTIONS}});Trex.Menu.Back=Trex.Class.create({$extend:Trex.Menu,generate:function(){var k=this.config;var m=this.elMenu;var l=$tom.collect(m,"div.tx-menu-inner");var h=$tom.collect(l,"div.tx-menu-tab");if(h){h.appendChild(this.generateTab())}var k=Object.extend({changeHandler:this.onChange.bind(this)},this.config);this.skinMenu=new Trex.Menu.Back.Skin(k);this.colorMenu=new Trex.Menu.Back.Color(k);this.uploadMenu=new Trex.Menu.Back.Upload(k);
var d=$tom.collect("#tx_back_menu img.tx-menu-confirm");$tx.observe(d,"click",function(n){this.onCancel(n);this.saveHistory()}.bind(this));var j=$tom.collect("#tx_back_menu img.tx-menu-cancel");$tx.observe(j,"click",function(n){this.onCancel(n);this.onSelect(n,this.propConfig)}.bind(this))},regenerate:function(){this.propConfig=Object.extend({},a);var d=this.propConfig;this.colorMenu.regenerate(this.propConfig);this.uploadMenu.regenerate(this.propConfig);this.skinMenu.regenerate(this.propConfig);if(d.backgroundImage){this.changeTab("","upload")}else{if((d.backgroundColor&&d.backgroundColor!="transparent")||(d.borderWidth&&d.borderWidth.parsePx()!="0")){this.changeTab("","color")}else{this.changeTab("","skin")}}},onChange:function(){var d;if(this.currentTab=="skin"){d=this.skinMenu.getValue()}else{if(this.currentTab=="color"){d=this.colorMenu.getValue()}else{d=this.uploadMenu.getValue()}}this.tool.execute(d);this.tool.button.pushedState()},saveHistory:function(){var d=this.tool.execute;this.tool.canvas.history.saveHistory({back:Object.extend({},a)},function(h){d(h.back)
})},generateTab:function(){this.currentTab=null;this.changeTab=function(l,m){this.skinMenu.hide();this.colorMenu.hide();this.uploadMenu.hide();$tx.removeClassName(k,"selected");$tx.removeClassName(j,"selected");$tx.removeClassName(h,"selected");if(m=="color"){this.colorMenu.show();$tx.addClassName(j,"selected")}else{if(m=="upload"){this.uploadMenu.show();$tx.addClassName(h,"selected")}else{this.skinMenu.show();$tx.addClassName(k,"selected")}}this.currentTab=m||"skin";if(l){$tx.stop(l)}};var d=tx.ul();var k=tx.li(tx.a({href:"javascript:;",unselectable:"on"},"\ub514\uc790\uc778"));$tx.observe(k,"click",this.changeTab.bindAsEventListener(this,"skin"));var j=tx.li(tx.a({href:"javascript:;",unselectable:"on"},"\uc0c9\uc0c1"));$tx.observe(j,"click",this.changeTab.bindAsEventListener(this,"color"));var h=tx.li(tx.a({href:"javascript:;",unselectable:"on"},"\uc9c1\uc811 \uc62c\ub9ac\uae30"));$tx.observe(h,"click",this.changeTab.bindAsEventListener(this,"upload"));d.appendChild(k);d.appendChild(j);
d.appendChild(h);return d},hide:function(){this.skinMenu.hide();this.colorMenu.hide();this.uploadMenu.hide();$tx.hide(this.elMenu);this.isDisplayed=false}});Trex.Menu.Back.Skin=Trex.Class.create({initialize:function(d){this.el=$tx("tx_background_thum_area");this.imageList=(typeof(getBackImages)!="undefined")?getBackImages():[];this.paging=new Trex.Paging(this.imageList,{initPage:1,pagesize:6,blocksize:5});this.elBackImages=$tom.collect(this.el,"ul");this.elPaging=$tom.collect(this.el,"ol");this.changeHandler=d.changeHandler;this.selectedEl=tx.div();this.regenerate(d.backConfig)},regenerate:function(d){this.localBackConfig=Object.extend({},d);this.showList(1)},getValue:function(){return this.localBackConfig},changeThumbview:function(){return},hide:function(){$tx.hide(this.el)},show:function(){$tx.show(this.el)},displayBackImages:function(){var h=this.paging.getOnePageData();this.elBackImages.innerHTML="";var k=function(l){this.localBackConfig=Object.extend({},l);this.changeHandler()}.bind(this);
for(var j=0;j<h.length;j++){var d=tx.a({href:"#"},tx.img({src:h[j].preview,width:"61",height:"61",id:h[j].seq,alt:"\uc2a4\ud0a8 \uc0d8\ud50c"+(j+1)}));$tx.observe(d,"click",function(l){return function(m){if(this.selectedEl){$tx.removeClassName(this.selectedEl,"selected")}this.selectedEl=$tx.findElement(m,"a");$tx.addClassName(this.selectedEl,"selected");k(l);$tx.stop(m)}.bind(this)}.bind(this)(h[j]));this.elBackImages.appendChild(tx.li(d))}},displayPaging:function(l){var p=this.paging.getPageList();this.elPaging.innerHTML="";var j=this.paging.getPrevBlock();var d=tx.li({className:"nav"},tx.a({className:(j)?"prev":"prev-disable"},"\uc774\uc804"));if(j){$tx.observe(d,"click",this.showList.bind(this,j))}this.elPaging.appendChild(d);for(var k=0;k<p.length;k++){var o=(p[k]==this.paging.currentpage)?{className:"selected"}:{};var m=tx.a(o,p[k]);$tx.observe(m,"click",this.showList.bind(this,p[k]));this.elPaging.appendChild(tx.li(m))}var n=this.paging.getNextBlock();var h=tx.li({className:"nav"},tx.a({className:n?"next":"next-disable"},"\ub2e4\uc74c"));
if(n){$tx.observe(h,"click",this.showList.bind(this,n))}this.elPaging.appendChild(h)},showList:function(d){this.paging.movePage(d);this.displayBackImages();this.displayPaging(d)}});Trex.Menu.Back.Color=Trex.Class.create({initialize:function(d){this.config=d;this.el=$tx("tx_background_color_area");this.elMenus=$tom.collectAll(this.el,"dl");this.changeHandler=d.changeHandler;this.initBackColor();this.initBorderWidth();this.initBorderColor();this.initOpacity()},initBackColor:function(){var h=this.elMenus[0];var j=this.menuBackColor=new Trex.Menu.ColorPallete({el:$tom.collect(h,"div.tx-colorpallete"),thumbs:this.config.thumbs,needTrans:true});j.setCommand(function(k,l){this.changeProp({backgroundColor:k});this.changeThumbview();this.changeHandler()}.bind(this));var d=function(k){this.menuBorderWidth.hide();this.menuBorderColor.hide();j.toggle();$tx.stop(k)}.bind(this);$tx.observe($tom.collect(h,"a.tx-color-bg-thumb"),"click",d);$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initBorderWidth:function(){var h=this.elMenus[1];
var j=this.menuBorderWidth=new Trex.Menu.Select({el:$tom.collect(h,"div.tx-colorpallete"),options:this.config.borderOptions});j.setCommand(function(k,l){this.changeProp({borderWidth:l});this.changeThumbview();this.changeHandler()}.bind(this));var d=function(k){this.menuBackColor.hide();this.menuBorderColor.hide();j.toggle();$tx.stop(k)}.bind(this);$tx.observe($tom.collect(h,"a.tx-weight-border-thumb"),"click",d);$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initBorderColor:function(){var h=this.elMenus[2];var j=this.menuBorderColor=new Trex.Menu.ColorPallete({el:$tom.collect(h,"div.tx-colorpallete"),thumbs:this.config.thumbs});var d=function(k){if(this.localBackConfig.borderWidth==0){alert(TXMSG("@back.need.border.width"));return}this.menuBackColor.hide();this.menuBorderWidth.hide();j.toggle();$tx.stop(k)}.bind(this);j.setCommand(function(k){this.changeProp({borderColor:k});this.changeThumbview();this.changeHandler()}.bind(this));$tx.observe($tom.collect(h,"a.tx-color-border-thumb"),"click",d);
$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initOpacity:function(){var d=function(j){this.changeProp({opacity:(1-j/100)});this.changeThumbview();this.changeHandler()}.bind(this);var h=this.opacitySlide=new Trex.Slidebar({handler:d.bind(this),el:this.el,knobWidth:7,barSize:60})},regenerate:function(d){this.localBackConfig={backgroundColor:d.backgroundColor||"transparent",opacity:d.opacity||"1",borderColor:d.borderColor||"transparent",borderWidth:(d.borderWidth&&d.borderWidth!="0pt")?d.borderWidth:"0",borderStyle:d.borderStyle||"solid"};this.opacitySlide.regenerate((1-this.localBackConfig.opacity.toNumber())*100);this.changeProp({});this.changeThumbview()},changeProp:function(h){for(var d in h){this.localBackConfig[d]=h[d]}if((!this.localBackConfig.backgroundColor||this.localBackConfig.backgroundColor=="transparent")&&this.localBackConfig.borderWidth=="0"){this.opacitySlide.setDisable()}else{this.opacitySlide.setEnable()}},getValue:function(){return this.localBackConfig
},changeThumbview:function(){var k=$tom.collect(this.elMenus[0],"a.tx-color-bg-thumb");var n=$tom.collect(this.elMenus[1],"a.tx-weight-border-thumb");var m=$tom.collect(this.elMenus[2],"a.tx-color-border-thumb");if(this.localBackConfig.backgroundColor=="transparent"||!this.localBackConfig.backgroundColor){$tx.setStyle(k,{backgroundImage:"url("+this.config.thumbs.transparent.thumbImage+")"})}else{$tx.setStyle(k,{backgroundColor:this.localBackConfig.backgroundColor});$tx.setStyle(k,{backgroundImage:""})}$tx.setStyle(m,{backgroundColor:this.localBackConfig.borderColor});if(!n.prevClass){$tx.addClassName(n,this.config.borderOptions[0].klass);n.prevClass=this.config.borderOptions[0].klass}for(var j=0;j<this.config.borderOptions.length;j++){if(this.config.borderOptions[j].title==this.localBackConfig.borderWidth){$tx.removeClassName(n,n.prevClass);$tx.addClassName(n,this.config.borderOptions[j].klass);n.prevClass=this.config.borderOptions[j].klass}}var l=$tom.collect(this.elMenus[2],"dd");var h=$tom.collect(this.elMenus[3],"dd");
var d=(this.localBackConfig.borderWidth.parsePx()!="0")?1:0.3;$tx.setStyle(l,{opacity:d});d=(this.localBackConfig.backgroundColor!="transparent"||this.localBackConfig.borderWidth!="0")?1:0.3;$tx.setStyle(h,{opacity:d})},show:function(){$tx.show(this.el)},hide:function(){this.menuBorderColor.hide();this.menuBackColor.hide();this.menuBorderWidth.hide();$tx.hide(this.el)}});Trex.Menu.Back.Upload=Trex.Class.create({initialize:function(d){this.config=d;this.el=$tx("tx_background_img_area");this.elMenus=$tom.collectAll(this.el,"dl");this.changeHandler=d.changeHandler;this.hasImage=false;this.hasRepeat=false;this.initUploader();this.initRepeat();this.initBackColor();this.initBackPosition();this.initOpacity()},initUploader:function(){var m=$tom.collect(this.el,"div.tx-background-img-preview-inner");var p=$tom.collect(m,"img");var k={quality:"high",swLiveConnect:"true",wmode:"opaque"};var h={coca_service:this.config.coca.coca_service,service:this.config.coca.service,sname:this.config.coca.service,single_selection:"true"};
Trex.Flash.load(TrexConfig.getUrl(this.config.coca.url),"tx_coca_uploader_embed_target","coca",{width:this.config.coca.width,height:this.config.coca.height,flashvarObj:h,paraObj:k,attrObj:{bgcolor:this.config.coca.color}});var l=function(q){this.hasImage=true;this.changeProp(q);this.changeThumbview();this.changeHandler()}.bind(this);var n=function(){this.hasImage=false;this.changeProp({backgroundImage:""});this.changeThumbview();this.changeHandler()}.bind(this);var j=this.changeProp.bind(this);var d=this.changeHandler.bind(this);$tx.observe(p,"click",function(){$tx.setStyle(m,{backgroundImage:""});n()});var o={on_upload_complete:function(q,r){var u=q.split("|");var t=u[2].replace(/\/attach\//,"/P150x100/");var w=u[2].replace(/\/attach\//,"/image/");$tx.setStyle(m,{backgroundImage:"url("+t+")"});l({backgroundImage:w})},on_over_filesize:function(){alert(TXMSG("@back.over.file.size"))}};window.Coca=o},initRepeat:function(){var h=this.elMenus[0];var j=this.menuRepeat=new Trex.Menu.Select({el:$tom.collect(h,"div.tx-colorpallete"),options:this.config.repeatOptions});
j.setCommand(function(k,l){this.hasRepeat=l.match(/^repeat/i)?true:false;this.changeProp({backgroundRepeat:l});this.changeThumbview();this.changeHandler()}.bind(this));var d=function(k){if(!this.localBackConfig.backgroundImage){alert(TXMSG("@back.need.user.image"));return}this.menuBackColor.hide();this.menuPosition.hide();j.toggle();$tx.stop(k)}.bind(this);$tx.observe($tom.collect(h,"a"),"click",d);$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initBackColor:function(){var h=this.elMenus[1];var j=this.menuBackColor=new Trex.Menu.ColorPallete({el:$tom.collect(h,"div.tx-colorpallete"),thumbs:this.config.thumbs,needTrans:true});j.setCommand(function(k){this.changeProp({backgroundColor:k});this.changeThumbview();this.changeHandler()}.bind(this));var d=function(k){if(!this.localBackConfig.backgroundImage){alert(TXMSG("@back.need.user.image"));return}if(this.hasRepeat){alert(TXMSG("@back.need.original.size"));return}this.menuRepeat.hide();this.menuPosition.hide();j.toggle();$tx.stop(k)
}.bind(this);$tx.observe($tom.collect(h,"a.tx-color-bg-thumb"),"click",d);$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initBackPosition:function(){var h=this.elMenus[2];var j=this.menuPosition=new Trex.Menu.Select({el:$tom.collect(h,"div.tx-colorpallete"),options:this.config.positionOptions});j.setCommand(function(k,l){this.changeProp({backgroundPosition:l});this.changeThumbview();this.changeHandler()}.bind(this));var d=function(k){if(!this.localBackConfig.backgroundImage){alert(TXMSG("@back.need.user.image"));return}this.menuRepeat.hide();this.menuBackColor.hide();j.toggle();$tx.stop(k)}.bind(this);$tx.observe($tom.collect(h,"a.tx-align-thumb"),"click",d);$tx.observe($tom.collect(h,"a.tx-color-arrow-down"),"click",d)},initOpacity:function(){var d=function(j){this.changeProp({opacity:(1-j/100)});this.changeThumbview();this.changeHandler()}.bind(this);var h=this.opacitySlide=new Trex.Slidebar({handler:d.bind(this),el:this.el,knobWidth:7,barSize:60})},regenerate:function(d){if(d.backgroundPosition=="0pt 50%"){d.backgroundPosition="left top"
}this.localBackConfig={backgroundColor:d.backgroundColor||"transparent",backgroundImage:(d.backgroundImage)?d.backgroundImage:"",backgroundRepeat:d.backgroundRepeat||"no-repeat",backgroundPosition:d.backgroundPosition||"left top",opacity:d.opacity||"1"};this.opacitySlide.regenerate((1-this.localBackConfig.opacity.toNumber())*100);this.changeProp({});this.changeThumbview()},changeProp:function(h){for(var d in h){this.localBackConfig[d]=h[d]}if(this.localBackConfig.backgroundImage&&this.localBackConfig.backgroundImage!="none"){this.opacitySlide.setEnable()}else{this.opacitySlide.setDisable()}},getValue:function(){return this.localBackConfig},changeThumbview:function(){var t=$tom.collect(this.elMenus[0],"div.tx-color-box a");var o=$tom.collect(this.elMenus[1],"a.tx-color-bg-thumb");var d=$tom.collect(this.elMenus[2],"a.tx-align-thumb");var m=$tom.collect(this.el,"div.tx-background-img-preview-inner");if(this.localBackConfig.backgroundColor=="transparent"||!this.localBackConfig.backgroundColor){$tx.setStyle(o,{backgroundImage:"url("+this.config.thumbs.transparent.thumbImage+")"})
}else{$tx.setStyle(o,{backgroundColor:this.localBackConfig.backgroundColor});$tx.setStyle(o,{backgroundImage:"none"})}$tx.setStyle(m,{backgroundImage:"url("+this.localBackConfig.backgroundImage.replace(/\/image\//,"/P150x100/")+")"});for(var k=0;k<this.config.repeatOptions.length;k++){if(this.config.repeatOptions[k].title==this.localBackConfig.backgroundRepeat){if(t.prevClass){$tx.removeClassName(t,t.prevClass)}$tx.addClassName(t,this.config.repeatOptions[k].klass);t.prevClass=this.config.repeatOptions[k].klass}}for(var k=0;k<this.config.positionOptions.length;k++){if(this.config.positionOptions[k].title==this.localBackConfig.backgroundPosition){if(d.prevClass){$tx.removeClassName(d,d.prevClass)}$tx.addClassName(d,this.config.positionOptions[k].klass);d.prevClass=this.config.positionOptions[k].klass}}var l=$tom.collect(this.elMenus[0],"dd");var n=$tom.collect(this.elMenus[1],"dd");var h=$tom.collect(this.elMenus[2],"dd");var q=$tom.collect(this.elMenus[3],"dd");var j=(this.localBackConfig.backgroundImage&&this.localBackConfig.backgroundImage!="none");
var p=(this.localBackConfig.backgroundPosition=="repeat");var r=$tom.collect(this.el,"div.tx-background-img-preview-inner img");$tx.setStyle(l,{opacity:(j)?1:0.3});$tx.setStyle(n,{opacity:(j&&!p)?1:0.3});$tx.setStyle(h,{opacity:(j)?1:0.3});$tx.setStyle(q,{opacity:(j)?1:0.3});if(j){$tx.show(r)}else{$tx.hide(r)}},show:function(){$tx.show(this.el)},hide:function(){this.menuRepeat.hide();this.menuBackColor.hide();this.menuPosition.hide();$tx.hide(this.el)}});Trex.module("observe changing background",function(l,t,u,h,A){var k=h.getSizeConfig();if(!k){return}var z=k.wrapWidth;var o=k.contentWidth;var m=Math.min(o,z);var d=(m==971)?5:0;var r=5;var q=16;var j=Math.max(Math.ceil((z-m-2)/2),0);var p=h.getPanel(Trex.Canvas.__WYSIWYG_MODE);var n=0;var w=0;var B=function(){if(p.getScrollTop()!=n){n=p.getScrollTop();$tx.setStyle(c.get("wrapper"),{marginTop:(-1*n).toPx()})}if(p.getScrollLeft()!=w){w=p.getScrollLeft();$tx.setStyle(c.get("wrapper"),{marginLeft:(j-w).toPx()})}};var C=function(F){if(!c.created){return
}F-=r*2;if(a.topCenterHeight){F-=a.topCenterHeight.parsePx()}if(a.botCenterHeight){F-=a.botCenterHeight.parsePx()}if(a.borderWidth){F-=a.borderWidth.parsePx()*2}$tx.setStyle(c.get("cell4"),{height:F.toPx()});$tx.setStyle(c.get("cell5"),{height:F.toPx()});$tx.setStyle(c.get("cell6"),{height:F.toPx()});B()};var E=function(F){if(!c.created){return}F-=d*2;$tx.setStyle(c.get("wrapper"),{width:Math.max(F,m).toPx()})};h.observeJob(Trex.Ev.__CANVAS_PANEL_SCROLLING,function(F){if(!c.created){return}B()});h.observeJob(Trex.Ev.__CANVAS_HEIGHT_CHANGE,function(F){if(!c.created){return}F=F.parsePx();F-=r*2;if(F>p.getPanelHeight().parsePx()){var G=F;if(a.topCenterHeight){G-=a.topCenterHeight.parsePx()}if(a.botCenterHeight){G-=a.botCenterHeight.parsePx()}$tx.setStyle(c.get("cell6"),{height:G.toPx()});$tx.setStyle(c.get("cell4"),{height:G.toPx()});$tx.setStyle(c.get("cell5"),{height:G.toPx()})}$tx.setStyle(c.get("back"),{height:F.toPx()});B()});var x=0;var y=0;var D=function(I){if(!c.created){return}try{if(h.canHTML()){var G=h.getCurrentPanel();
var L=G.getDocument();var K=G.el;var F;var J;if($tx.msie){F=L.body.scrollHeight;_tempW=(L.documentElement.offsetWidth||L.documentElement.scrollWidth);J=L.body.scrollWidth;J=(_tempW>=J)?_tempW-(2*j):J-j*2;J-=q}else{F=(L.documentElement.offsetHeight||L.documentElement.scrollHeight);_tempW=(L.documentElement.offsetWidth||L.documentElement.scrollWidth);J=K.contentDocument.body.scrollWidth;J=(_tempW>=J)?_tempW-(2*j):J-j;J-=q}if(p.getPanelHeight().parsePx()>=F){F=p.getPanelHeight().parsePx()}if(x!=J||I){E(J)}if(y!=F||I){C(F)}x=J;y=F}}catch(H){}};h.observeJob("canvas.apply.background",function(F){D(true)});h.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){setInterval(D,300)},600);c.update("wrapper",{width:m.toPx(),marginLeft:j.toPx()});c.update("back",{height:(400-r*2).toPx(),paddingTop:r.toPx(),paddingRight:d.toPx(),paddingBottom:r.toPx(),paddingLeft:d.toPx()})})})();TrexConfig.addTool("moreless",{sync:false,status:false,klass:"txc-moreless"});TrexMessage.addMsg({"@moreless.less":"\uc811\uae30","@moreless.more":"\ub354\ubcf4\uae30"});
Trex.Tool.MoreLess=Trex.Class.create({$const:{__Identity:"moreless"},$extend:Trex.Tool,oninitialized:function(c){var a=this.toolbar;var h=this.canvas;var d=this.handler=function(){if(h.canHTML()){h.execute(function(k){var j=k.findNode("div.txc-moreless");if(j){k.moveCaretTo(j,true)}else{var l=k.blocks(function(m){return"%wrapper,%paragraph"});var j=k.wrap(l,"div",{className:"txc-moreless",more:TXMSG("@moreless.more"),less:TXMSG("@moreless.less")});a.fireJobs("cmd.moreless.added",j)}})}else{h.execute(function(j){j.insertTag('<div class="txc-moreless">',"</div>")})}};this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,d)}});Trex.Tool.UserDefined=Trex.Class.create({$extend:Trex.Tool,initialize:function(a,d,c){this.execute=c;this.weave.bind(this)(a,d,c)},weave:function(c,j,k,d){var a=this;this.button=c;c.tool=this;c.increaseZindex=function(){if($tom.parent(this.elButton)){$tx.setStyle($tom.parent(this.elButton),{zIndex:20})}};var h=null;if(!j){c.setCommand(h=function(){titleToolbarDeactive(this.config.id);
var l=k.apply(a,arguments);return l})}else{this.menu=j;j.tool=this;j.initHandler=d||function(){};j.cancelHandler=function(){c.setState(false)};j.setCommand(h=function(){var l=k.apply(a,arguments);c.updateAfterCommand.apply(c,arguments);return l});c.setCommand(function(){titleToolbarDeactive(this.config.id);if(!c.isPushed()){var l=c.getValue();c.increaseZindex();j.show(l)}else{j.hide()}return true})}this.execute=h}});var tx_titletools={};function titleToolbarDeactive(a){var d=a.replace("tx_","");for(var c in tx_titletools){if(d!=c&&tx_titletools[c].menu&&tx_titletools[c].button){tx_titletools[c].menu.hide()}}}function createSingleMenu(j,c,a){var d=Object.extend({sync:false,status:true,id:"tx_"+j},a);var h=new Trex.Button(d);tx_titletools[j]=new Trex.Tool.UserDefined(h,null,c)}function createSelectMenu(k,c,a){var h={sync:false,status:true,options:a||[]};var j=new Trex.Button(Object.extend({id:"tx_"+k},h));var d=new Trex.Menu.Select(Object.extend({id:"tx_"+k+"_menu"},h));tx_titletools[k]=new Trex.Tool.UserDefined(j,d,c)
}function createPalleteMenu(k,c,a){var h=Object.extend({sync:false,status:true,thumbs:Trex.__CONFIG_COMMON.thumbs,onClick:titleToolbarDeactive},a);var j=new Trex.Button.Splits(Object.extend({id:"tx_"+k},h));j.onClick=function(){c(j.lastValue)};if(h.selectedValue){j.elButton.style.backgroundColor=h.selectedValue}var d=new Trex.Menu.ColorPallete(Object.extend({id:"tx_"+k+"_menu"},h));tx_titletools[k]=new Trex.Tool.UserDefined(j,d,c)}TrexConfig.addTool("pluginTool",{wysiwygonly:true,sync:false,status:true,thumbs:Trex.__CONFIG_COMMON.thumbs});Trex.Tool.PlugInTool=Trex.Class.create({$const:{__Identity:"pluginTool"},$extend:Trex.Tool,oninitialized:function(c){var j=this.canvas;var d=c.elementId;var a=c.menuId;var h=function(){};this.weave.bind(this)(new Trex.Button(Object.extend({id:d},c)),new Trex.Menu(Object.extend({id:a},c)),h)}});Trex.Class.overwrite(Trex.Attachment.Bgm,{getFieldAttr:function(a){return{name:"tx_attach_bgm",value:[a.bgmkey,a.title,a.artist].join("|")}},getBoxAttr:function(c){var a=new Template(TXMSG("@bgm.message"));
return{name:a.evaluate({title:c.title.cutRealLength(60),artist:c.artist.cutRealLength(30)}),image:c.thumburl}},getSaveHtml:function(a){return'<img src="'+a.prevurl+'" bgmkey="'+a.bgmkey+'" type="bgm" class="txc-bgm"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" bgmkey="'+a.bgmkey+'" type="bgm" class="txc-bgm tx-unresizable"/>'},getDispText:function(a){return"["+TXMSG("@bgm.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*bgmkey="?'+a.bgmkey.getRegExp()+'"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?'+a.dispElId+'"?[^>]*/?>',"gm")},getRegText:function(a){return new RegExp("\\["+TXMSG("@bgm.title")+":"+a.dataSeq+"\\]","gm")}});TrexConfig.addAttacher("movie",{flashPageUrl:"#host#path/pages/daumx/movie_webcam.html",webCamFlashUrl:"http://flvs.daum.net/webcamOut.swf?service=#tvpotCode&tvpotopen=#tvpotOpen"},function(a){var c=TrexConfig.getAttacher("movie",a);c.webCamFlashUrl=TrexConfig.getUrl(c.webCamFlashUrl,{tvpotOpen:c.tvpotOpen,tvpotCode:c.tvpotCode,showCategory:c.showCategory})
});TrexConfig.addTool("phone",{wysiwygonly:true,sync:false,status:false});Trex.Tool.Phone=Trex.Class.create({$const:{__Identity:"phone"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("phone").execute()})}});TrexMessage.addMsg({"@phone.title":"\ud578\ub4dc\ud3f0 \ubcf4\uad00\ud568"});TrexConfig.addAttacher("phone",{multiple:true,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:710,height:560,resizable:"yes"},popPageUrl:"http://scrap.cafe.daum.net/_dss_/PhoneBoxList?host=cafe&grpid=#grpid&fldid=#fldid&node=#node"},function(a){var c=TrexConfig.getAttacher("phone",a);c.popPageUrl=TrexConfig.getUrl(c.popPageUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Phone=Trex.Class.create({$const:{__Identity:"phone"},$extend:Trex.Attacher,name:"phone",title:TXMSG("@bgm.title"),canModified:true,canResized:false,getKey:function(a){return""
},getDataForEntry:function(c,a){return{}}});TrexConfig.addTool("auction",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@auction.title":"\uc548\uc804\uac70\ub798","@auction.message":"\uc548\uc804\uac70\ub798\uac00 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@auction.prev.url":"http://i1.daumcdn.net/cafeimg/cf_img2/bbs2/img_auction.gif","@auction.thumb.url":"http://i1.daumcdn.net/cafeimg/cf_img2/bbs2/pn_auction.gif"});TrexConfig.addAttacher("auction",{multiple:false,multipleuse:false,checksize:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:395,height:600},pageUrl:""},function(a){var c=TrexConfig.getAttacher("auction",a);c.popPageUrl=TrexConfig.getUrl(c.pageUrl);c.features=TrexConfig.getPopFeatures(c.features)});Trex.Attacher.Auction=Trex.Class.create({$const:{__Identity:"auction"},$extend:Trex.Attacher,name:"auction",title:TXMSG("@auction.title"),canModified:true,canResized:false,getKey:function(a){return a.auctionid},getDataForEntry:function(h,d){if(!h.dispElId){h.dispElId=Trex.Util.getDispElId()
}var a=((h.tmpSeq)?this.entryBox.syncSeq(h.tmpSeq):this.entryBox.newSeq());var c=Object.extend({dataSeq:a,prevurl:TXMSG("@bgm.prev.url"),thumburl:TXMSG("@bgm.thumb.url")},h);return c}});Trex.Attachment.Auction=Trex.Class.create({$const:{__Identity:"auction"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_auction",value:[a.auctionid].join("|")}},getBoxAttr:function(a){return{name:TXMSG("@auction.message"),image:a.thumburl}},getSaveHtml:function(a){return'<img src="'+a.prevurl+'" type="auction"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" type="auction" class="tx-entry-attach"/>'},getDispText:function(a){return"["+TXMSG("@auction.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.prevurl.getRegExp()+'"?[^>]*type="?auction"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?'+a.dispElId+'"?[^>]*type="?auction"?[^>]*/?>',"gm")},getRegText:function(a){return new RegExp("\\["+TXMSG("@auction.title")+":"+a.dataSeq+"\\]","gm")
}});TrexConfig.addTool("poll",{wysiwygonly:true,sync:false,status:false});TrexMessage.addMsg({"@poll.title":"\ud22c\ud45c","@poll.message":"\ud22c\ud45c\uac00 \ucca8\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","@poll.prev.url":"http://i1.daumcdn.net/icon/editor/img_vote.gif?rv=1.0.1","@poll.thumb.url":"http://i1.daumcdn.net/icon/editor/pn_vote.gif?rv=1.0.1"});Trex.Tool.Poll=Trex.Class.create({$const:{__Identity:"poll"},$extend:Trex.Tool,oninitialized:function(a){var c=this.editor;this.weave.bind(this)(new Trex.Button(this.buttonCfg),null,function(){c.getSidebar().getAttacher("poll").execute()})}});TrexConfig.addAttacher("poll",{multiple:false,boxonly:false,wysiwygonly:true,features:{left:250,top:65,width:790,height:545,resizable:"yes"},pageUrl:""},function(a){var c=TrexConfig.getAttacher("poll",a);c.features=TrexConfig.getPopFeatures(c.features);c.popPageUrl=TrexConfig.getUrl(c.pageUrl)});Trex.Attacher.Poll=Trex.Class.create({$const:{__Identity:"poll"},$extend:Trex.Attacher,name:"poll",title:TXMSG("@poll.title"),canModified:true,canResized:false,getConfig:function(a){var c=a.sidebar.attacher.poll;
return{multiple:c.multiple,checksize:c.checksize,boxonly:c.boxonly,wysiwygonly:c.wysiwygonly,popPageUrl:TrexConfig.getUrl(a,c.pageUrl),features:TrexConfig.getPopFeatures(c.features)}},getKey:function(a){return a.pollContent},getDataForEntry:function(h,d){if(!h.dispElId){h.dispElId=Trex.Util.getDispElId()}var a=((h.tmpSeq)?this.entryBox.syncSeq(h.tmpSeq):this.entryBox.newSeq());var c=Object.extend({dataSeq:a,prevurl:TXMSG("@poll.prev.url"),thumburl:TXMSG("@poll.thumb.url")},h);return c}});Trex.Attachment.Poll=Trex.Class.create({$const:{__Identity:"poll"},$extend:Trex.Attachment,getFieldAttr:function(a){return{name:"tx_attach_poll",value:a.egslist}},getBoxAttr:function(a){return{name:TXMSG("@poll.message")+"("+a.frommonth+"-"+a.fromday+" ~ "+a.tomonth+"-"+a.today+")",image:a.thumburl}},getSaveHtml:function(a){return'<img class="txc-poll" src="'+a.prevurl+'" type="poll"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" type="poll" class="txc-poll tx-unresizable"/>'
},getDispText:function(a){return"["+TXMSG("@poll.title")+":"+a.dataSeq+"]"},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*src="?'+a.prevurl.getRegExp()+'"?[^>]*type="?poll"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?'+a.dispElId+'"?[^>]*type="?poll"?[^>]*/?>',"gm")},getRegText:function(a){return new RegExp("\\["+TXMSG("@poll.title")+":"+a.dataSeq+"\\]","gm")}});Trex.Class.overwrite(Trex.Attachment.File,{getSaveHtml:function(a){return'<a title="'+a.attachurl+'"><img src="'+a.prevurl+'" border="0" alt="\ucca8\ubd80\ud30c\uc77c" class="vam"/> '+a.filename+"</a>"},getRegLoad:function(a){return new RegExp('<(?:a|A)\\s*title="?'+a.attachurl.getRegExp()+'[^"]*"?[^>]*><(?:img|IMG)[^>]*/?>[\\S\\s]*?</(?:a|A)>',"gm")}});Trex.Class.overwrite(Trex.Attachment.Pie,{getSaveHtml:function(a){return'<img class="txc-pie" id="XPIE_ID_'+a.piekey+'_XPIE" src="'+a.prevurl+'" piesrc="'+a.pieurl+'"/>'},getDispHtml:function(a){return'<img id="'+a.dispElId+'" src="'+a.prevurl+'" piesrc="'+a.pieurl+'" type="pie" class="txc-pie tx-unresizable"/>'
},getRegLoad:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?XPIE_ID_'+a.piekey.getRegExp()+'_XPIE"?[^>]*piesrc="?'+a.pieurl.getRegExp()+'"?[^>]*/?>',"gm")},getRegHtml:function(a){return new RegExp('<(?:img|IMG)[^>]*id="?'+a.dispElId+'"?[^>]*piesrc="?'+a.pieurl.getRegExp()+'"?[^>]*/?>',"gm")}});Trex.module("Add service specific tool",function(d,h,j,c,a){d.addPlugInTool=function(k,m){var l=a.toolbar;var n=a.initializedId;h.tools[k]=new Trex.Tool.PlugInTool(d,h,m)}});Trex.module("autosaver migrator",function(d,j,k,c,a){d.autosaveMigration=function(q,p,n,m){try{var l=new Trex.AutoSave.Fanta(TrexConfig.getAdaptor("fanta",a));if(typeof n=="string"){l.save=function(z,y,r){var x=this;var t="";var w=r;var u=this;this.sendRequest("post",this.url,this.param+"&type=save&seq="+t+"&contents="+encodeURIComponent(y)+"&meta="+encodeURIComponent(Object.toJSON(Object.toEncode(w))),true,function(B){var A=xCreate(B);var C=xGetty(A,"/result/header/response_code").xText("500");if(C=="200"){d.getAutoSaver().curCount++;
d.getAutoSaver().drawCount();u.sendRequest("post","http://file.uf.daum.net/autosave",u.param.replace(new RegExp(z,"g"),p)+"&type=delete",function(){},function(){})}},function(){})}}else{n.attachments=h(n.attachments);l.save=function(A,w,r){var z=this;var u="";var t=w;var y=r;t.content=encodeURIComponent(t.content);var x=this;this.sendRequest("post",this.url,this.param+"&type=save&seq="+u+"&contents="+encodeURIComponent(Object.toJSON(t))+"&meta="+encodeURIComponent(Object.toJSON(Object.toEncode(y))),true,function(C){var B=xCreate(C);var D=xGetty(B,"/result/header/response_code").xText("500");if(D=="200"){d.getAutoSaver().curCount++;d.getAutoSaver().drawCount();x.sendRequest("post","http://file.uf.daum.net/autosave",x.param.replace(new RegExp(A,"g"),p)+"&type=delete",function(){},function(){})}},function(){})}}l.save(q,n,m)}catch(o){}};var h=function(l){return[].concat(l)}});Trex.module("create table control range",function(l,n,a,c,d){var h=4;var j=function(r,q,o){var p={x:r.offsetX,y:r.offsetY};
return(p.x<h||p.y<h||p.x>q-h||p.y>o-h)};var m=function(o){if(!o){return false}return $tx.hasClassName(o,"txc-table")};var k=function(q){var o=c.getCurrentPanel().getDocument().body;var p=o.createControlRange();p.add(q);p.select()};if($tx.msie){c.observeElement({tag:"td"},function(p){var q=c.getCurrentPanel().getWindow();if(!q||!q.event||!j(q.event,p.offsetWidth,p.offsetHeight)){return false}var o=$tom.find(p,"table");if(!m(o)){return}k(o);setTimeout(function(){k(o)},500)})}});Trex.module("Whether content is exist",function(d,h,j,c,a){d.isEmptyContent=function(l){if(!l){return true}var k=new Trex.Validator();return !k.exists(l)}});(function(){var c;var a=function(h,d){if(!c){c=h.newNoticeBox({head:"\uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30",body:"Daum \uc0ac\uc9c4\ud568\uc5d0\uc11c \ub0b4\ubcf4\ub0b4\uae30 \ud55c \uc0ac\uc9c4\ub4e4\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. <span style=\"color:#7B81DC;\">\uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30 '\ud655\uc778' \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uba74, \uc774\ubbf8\uc9c0 \uc5d0\ub514\ud130\ub85c \uc218\uc815/\uc0ad\uc81c</span>\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4."}).weave(function(){h.getSidebar().getAttacher("image").execute("resources="+d.join(";"));
this.hide()})}c.show()};Editor.picup=function(d){if(Editor.__PANEL_LOADED&&Editor.__EDITOR_LOADED){a(Editor,d)}else{setTimeout(this.picup.bind(this,d),10)}return false}})();TrexConfig.addAttacher("image",{picupPageUrl:"http://m.picup.mail.daum.net/picup/photo/Editor.daum",picupValidUrl:"http://m.picup.mail.daum.net/picup/CheckValidUser.daum"});Trex.module("activate picup",function(j,l,m,h,d){var a=TrexConfig.getAttacher("image");if(!a.picupPageUrl){return}var c=m.getAttacher("image");if(!c){return}Trex.MarkupTemplate.add("image.popup.picup",'<li style="width:122px;height:29px;">				<img id="tx_picup" src="http://i1.daumcdn.net/icon/editor/photo_tab_picup_off.gif?rv=1.0.1" border="0" alt="\uc0ac\uc9c4\ud568\uc0ac\uc9c4 \ucd94\uac00" />			</li>');Trex.MarkupTemplate.add("image.popup.iframe",'<iframe src="about:blank" frameborder="0" scrolling="no"></iframe>');c.makePicupTab=function(o){var n=Trex.MarkupTemplate.get("image.popup.picup").evaluateAsDom({},o);$tom.append($tom.collect(o,"ul"),n);
return $tom.collect(n,"img")};var k=function(n){var p=a.picupValidUrl;var o=new (Trex.Mixin.toClass(Trex.I.FHRequester))();o.sendRequest("GET",p,null,true,function(r){var q=xCreate(r);var t=xGetty(q,"/result/valid").xText("0");n(t)})};c.activatePicup=function(o,n){k(function(p){if(p=="1"){var q=Trex.MarkupTemplate.get("image.popup.iframe").evaluateAsDom({},o);$tom.insertFirst($tom.collect(o,"div.body"),q);n(q)}})};c.getPicupURL=function(n){k(function(o){if(o=="1"){n(c.getPepURL())}else{n("")}})};c.isPicupUser=function(n){k(function(o){n(o=="1")})}});Trex.module("call external callback function - MapDataList.insertMapData (depend on Daum Cafe)",function(j,m,a,c,d){var h=function(B,w,q,t,z,o,p,A,u,r,C){if((typeof(MapDataList)!="undefined")&&(typeof(MapDataList.insertMapData)!="undefined")){MapDataList.insertMapData(B,w,q,t,z,o,p,A,u,r,C)}};c.observeJob("canvas.map.added",function(o){var p=o.data;h(""+p.mapX,""+p.mapY,p.docid,p.addr,p.title,p.rcode,"MAP",null,null,"I",p.confirmid)});var n=function(o,q,p){return"http://map.daum.net/congsoa/regioncode/getRegionCodeByCoordinates.service?format=simple&output=json&callback="+p+"&cx="+o+"&cy="+q
};var k=function(p){var o=document.createElement("script");o.type="text/javascript";o.src=p;o.charset="utf-8";return o};var l=function(q){var r=q.data;var p=n(r.mapX,r.mapY,"txInsertPlaceWithRcode");var o=k(p);document.body.appendChild(o);window.txInsertPlaceWithRcode=function(t){h(r.mapX,r.mapY,r.key,r.address,r.title,t.code,"PLA","","","I",r.confirmid)}};c.observeJob("canvas.travel.added",l);c.observeJob("canvas.restaurant.added",l)});Trex.MarkupTemplate.add("xml.review",'<mapping-list>	#{for:list}	 	<mapping>	        <section-id>#{sectionid}</section-id>	        <content-id>#{contentid}</content-id>	        <point>#{point}</point>	        #{if:userPoint!=""}	        <userPoint>#{userPoint}</userPoint>	        #{/if:userPoint}	    </mapping>	#{/for:list}	</mapping-list>');Trex.install("editor.getReviewTrackbackXml",function(d,h,j,c,a){d.getReviewTrackbackXml=function(){var k=[];j.getResults().each(function(l){k.push({sectionid:l.data._meta.section,contentid:l.data.key,point:l.data.point||"",userPoint:l.data.userPoint||""})
});if(k.length==0){return""}return Trex.MarkupTemplate.get("xml.review").evaluate({list:k})}});Trex.module("add __CANVAS_PANEL_PASTE event for observe paste.",function(d,h,j,c,a){c.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){Trex.Ev.__CANVAS_PANEL_PASTE="canvas.panel.paste";try{var k=c.getPanel("html").getDocument().body;$tx.observe(k,"paste",function(){c.fireJobs(Trex.Ev.__CANVAS_PANEL_PASTE)},false)}catch(l){}})});try{EditorJSLoader.readyState="complete";EditorJSLoader.finish()}catch(e){};